(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();function Rw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var kw={exports:{}},Ch={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qk=Symbol.for("react.transitional.element"),Hk=Symbol.for("react.fragment");function Nw(t,e,n){var i=null;if(n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),"key"in e){n={};for(var s in e)s!=="key"&&(n[s]=e[s])}else n=e;return e=n.ref,{$$typeof:qk,type:t,key:i,ref:e!==void 0?e:null,props:n}}Ch.Fragment=Hk;Ch.jsx=Nw;Ch.jsxs=Nw;kw.exports=Ch;var f=kw.exports,Lw={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy=Symbol.for("react.transitional.element"),Gk=Symbol.for("react.portal"),$k=Symbol.for("react.fragment"),Kk=Symbol.for("react.strict_mode"),Jk=Symbol.for("react.profiler"),Yk=Symbol.for("react.consumer"),Wk=Symbol.for("react.context"),Qk=Symbol.for("react.forward_ref"),Zk=Symbol.for("react.suspense"),Xk=Symbol.for("react.memo"),Dw=Symbol.for("react.lazy"),eN=Symbol.for("react.activity"),I_=Symbol.iterator;function tN(t){return t===null||typeof t!="object"?null:(t=I_&&t[I_]||t["@@iterator"],typeof t=="function"?t:null)}var Pw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vw=Object.assign,Uw={};function yl(t,e,n){this.props=t,this.context=e,this.refs=Uw,this.updater=n||Pw}yl.prototype.isReactComponent={};yl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ow(){}Ow.prototype=yl.prototype;function Sy(t,e,n){this.props=t,this.context=e,this.refs=Uw,this.updater=n||Pw}var wy=Sy.prototype=new Ow;wy.constructor=Sy;Vw(wy,yl.prototype);wy.isPureReactComponent=!0;var M_=Array.isArray;function zm(){}var St={H:null,A:null,T:null,S:null},Bw=Object.prototype.hasOwnProperty;function by(t,e,n){var i=n.ref;return{$$typeof:Cy,type:t,key:e,ref:i!==void 0?i:null,props:n}}function nN(t,e){return by(t.type,e,t.props)}function Ay(t){return typeof t=="object"&&t!==null&&t.$$typeof===Cy}function iN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var R_=/\/+/g;function Lp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?iN(""+t.key):e.toString(36)}function sN(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(zm,zm):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function da(t,e,n,i,s){var r=typeof t;(r==="undefined"||r==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(r){case"bigint":case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Cy:case Gk:o=!0;break;case Dw:return o=t._init,da(o(t._payload),e,n,i,s)}}if(o)return s=s(t),o=i===""?"."+Lp(t,0):i,M_(s)?(n="",o!=null&&(n=o.replace(R_,"$&/")+"/"),da(s,e,n,"",function(d){return d})):s!=null&&(Ay(s)&&(s=nN(s,n+(s.key==null||t&&t.key===s.key?"":(""+s.key).replace(R_,"$&/")+"/")+o)),e.push(s)),1;o=0;var a=i===""?".":i+":";if(M_(t))for(var c=0;c<t.length;c++)i=t[c],r=a+Lp(i,c),o+=da(i,e,n,r,s);else if(c=tN(t),typeof c=="function")for(t=c.call(t),c=0;!(i=t.next()).done;)i=i.value,r=a+Lp(i,c++),o+=da(i,e,n,r,s);else if(r==="object"){if(typeof t.then=="function")return da(sN(t),e,n,i,s);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return o}function od(t,e,n){if(t==null)return t;var i=[],s=0;return da(t,i,"","",function(r){return e.call(n,r,s++)}),i}function rN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var k_=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},oN={map:od,forEach:function(t,e,n){od(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return od(t,function(){e++}),e},toArray:function(t){return od(t,function(e){return e})||[]},only:function(t){if(!Ay(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ke.Activity=eN;ke.Children=oN;ke.Component=yl;ke.Fragment=$k;ke.Profiler=Jk;ke.PureComponent=Sy;ke.StrictMode=Kk;ke.Suspense=Zk;ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=St;ke.__COMPILER_RUNTIME={__proto__:null,c:function(t){return St.H.useMemoCache(t)}};ke.cache=function(t){return function(){return t.apply(null,arguments)}};ke.cacheSignal=function(){return null};ke.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var i=Vw({},t.props),s=t.key;if(e!=null)for(r in e.key!==void 0&&(s=""+e.key),e)!Bw.call(e,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&e.ref===void 0||(i[r]=e[r]);var r=arguments.length-2;if(r===1)i.children=n;else if(1<r){for(var o=Array(r),a=0;a<r;a++)o[a]=arguments[a+2];i.children=o}return by(t.type,s,i)};ke.createContext=function(t){return t={$$typeof:Wk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:Yk,_context:t},t};ke.createElement=function(t,e,n){var i,s={},r=null;if(e!=null)for(i in e.key!==void 0&&(r=""+e.key),e)Bw.call(e,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=e[i]);var o=arguments.length-2;if(o===1)s.children=n;else if(1<o){for(var a=Array(o),c=0;c<o;c++)a[c]=arguments[c+2];s.children=a}if(t&&t.defaultProps)for(i in o=t.defaultProps,o)s[i]===void 0&&(s[i]=o[i]);return by(t,r,s)};ke.createRef=function(){return{current:null}};ke.forwardRef=function(t){return{$$typeof:Qk,render:t}};ke.isValidElement=Ay;ke.lazy=function(t){return{$$typeof:Dw,_payload:{_status:-1,_result:t},_init:rN}};ke.memo=function(t,e){return{$$typeof:Xk,type:t,compare:e===void 0?null:e}};ke.startTransition=function(t){var e=St.T,n={};St.T=n;try{var i=t(),s=St.S;s!==null&&s(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(zm,k_)}catch(r){k_(r)}finally{e!==null&&n.types!==null&&(e.types=n.types),St.T=e}};ke.unstable_useCacheRefresh=function(){return St.H.useCacheRefresh()};ke.use=function(t){return St.H.use(t)};ke.useActionState=function(t,e,n){return St.H.useActionState(t,e,n)};ke.useCallback=function(t,e){return St.H.useCallback(t,e)};ke.useContext=function(t){return St.H.useContext(t)};ke.useDebugValue=function(){};ke.useDeferredValue=function(t,e){return St.H.useDeferredValue(t,e)};ke.useEffect=function(t,e){return St.H.useEffect(t,e)};ke.useEffectEvent=function(t){return St.H.useEffectEvent(t)};ke.useId=function(){return St.H.useId()};ke.useImperativeHandle=function(t,e,n){return St.H.useImperativeHandle(t,e,n)};ke.useInsertionEffect=function(t,e){return St.H.useInsertionEffect(t,e)};ke.useLayoutEffect=function(t,e){return St.H.useLayoutEffect(t,e)};ke.useMemo=function(t,e){return St.H.useMemo(t,e)};ke.useOptimistic=function(t,e){return St.H.useOptimistic(t,e)};ke.useReducer=function(t,e,n){return St.H.useReducer(t,e,n)};ke.useRef=function(t){return St.H.useRef(t)};ke.useState=function(t){return St.H.useState(t)};ke.useSyncExternalStore=function(t,e,n){return St.H.useSyncExternalStore(t,e,n)};ke.useTransition=function(){return St.H.useTransition()};ke.version="19.2.0";Lw.exports=ke;var y=Lw.exports;const Sh=Rw(y);var Fw={exports:{}},wh={},jw={exports:{}},zw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,ee){var q=j.length;j.push(ee);e:for(;0<q;){var X=q-1>>>1,ie=j[X];if(0<s(ie,ee))j[X]=ee,j[q]=ie,q=X;else break e}}function n(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var ee=j[0],q=j.pop();if(q!==ee){j[0]=q;e:for(var X=0,ie=j.length,te=ie>>>1;X<te;){var ce=2*(X+1)-1,ne=j[ce],fe=ce+1,F=j[fe];if(0>s(ne,q))fe<ie&&0>s(F,ne)?(j[X]=F,j[fe]=q,X=fe):(j[X]=ne,j[ce]=q,X=ce);else if(fe<ie&&0>s(F,q))j[X]=F,j[fe]=q,X=fe;else break e}}return ee}function s(j,ee){var q=j.sortIndex-ee.sortIndex;return q!==0?q:j.id-ee.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;t.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],d=[],h=1,m=null,g=3,v=!1,T=!1,w=!1,I=!1,b=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function R(j){for(var ee=n(d);ee!==null;){if(ee.callback===null)i(d);else if(ee.startTime<=j)i(d),ee.sortIndex=ee.expirationTime,e(c,ee);else break;ee=n(d)}}function P(j){if(w=!1,R(j),!T)if(n(c)!==null)T=!0,U||(U=!0,V());else{var ee=n(d);ee!==null&&Z(P,ee.startTime-j)}}var U=!1,S=-1,M=5,C=-1;function k(){return I?!0:!(t.unstable_now()-C<M)}function N(){if(I=!1,U){var j=t.unstable_now();C=j;var ee=!0;try{e:{T=!1,w&&(w=!1,E(S),S=-1),v=!0;var q=g;try{t:{for(R(j),m=n(c);m!==null&&!(m.expirationTime>j&&k());){var X=m.callback;if(typeof X=="function"){m.callback=null,g=m.priorityLevel;var ie=X(m.expirationTime<=j);if(j=t.unstable_now(),typeof ie=="function"){m.callback=ie,R(j),ee=!0;break t}m===n(c)&&i(c),R(j)}else i(c);m=n(c)}if(m!==null)ee=!0;else{var te=n(d);te!==null&&Z(P,te.startTime-j),ee=!1}}break e}finally{m=null,g=q,v=!1}ee=void 0}}finally{ee?V():U=!1}}}var V;if(typeof A=="function")V=function(){A(N)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,$=L.port2;L.port1.onmessage=N,V=function(){$.postMessage(null)}}else V=function(){b(N,0)};function Z(j,ee){S=b(function(){j(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(j){switch(g){case 1:case 2:case 3:var ee=3;break;default:ee=g}var q=g;g=ee;try{return j()}finally{g=q}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(j,ee){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var q=g;g=j;try{return ee()}finally{g=q}},t.unstable_scheduleCallback=function(j,ee,q){var X=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?X+q:X):q=X,j){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=q+ie,j={id:h++,callback:ee,priorityLevel:j,startTime:q,expirationTime:ie,sortIndex:-1},q>X?(j.sortIndex=q,e(d,j),n(c)===null&&j===n(d)&&(w?(E(S),S=-1):w=!0,Z(P,q-X))):(j.sortIndex=ie,e(c,j),T||v||(T=!0,U||(U=!0,V()))),j},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(j){var ee=g;return function(){var q=g;g=ee;try{return j.apply(this,arguments)}finally{g=q}}}})(zw);jw.exports=zw;var aN=jw.exports,qw={exports:{}},Pn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lN=y;function Hw(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function er(){}var Dn={d:{f:er,r:function(){throw Error(Hw(522))},D:er,C:er,L:er,m:er,X:er,S:er,M:er},p:0,findDOMNode:null},uN=Symbol.for("react.portal");function cN(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uN,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}var Eu=lN.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function bh(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}Pn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Dn;Pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Hw(299));return cN(t,e,null,n)};Pn.flushSync=function(t){var e=Eu.T,n=Dn.p;try{if(Eu.T=null,Dn.p=2,t)return t()}finally{Eu.T=e,Dn.p=n,Dn.d.f()}};Pn.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,Dn.d.C(t,e))};Pn.prefetchDNS=function(t){typeof t=="string"&&Dn.d.D(t)};Pn.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,i=bh(n,e.crossOrigin),s=typeof e.integrity=="string"?e.integrity:void 0,r=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?Dn.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:r}):n==="script"&&Dn.d.X(t,{crossOrigin:i,integrity:s,fetchPriority:r,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};Pn.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=bh(e.as,e.crossOrigin);Dn.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&Dn.d.M(t)};Pn.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,i=bh(n,e.crossOrigin);Dn.d.L(t,n,{crossOrigin:i,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};Pn.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=bh(e.as,e.crossOrigin);Dn.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else Dn.d.m(t)};Pn.requestFormReset=function(t){Dn.d.r(t)};Pn.unstable_batchedUpdates=function(t,e){return t(e)};Pn.useFormState=function(t,e,n){return Eu.H.useFormState(t,e,n)};Pn.useFormStatus=function(){return Eu.H.useHostTransitionStatus()};Pn.version="19.2.0";function Gw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Gw)}catch(t){console.error(t)}}Gw(),qw.exports=Pn;var qo=qw.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nn=aN,$w=y,dN=qo;function J(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Kw(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Jw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yw(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function N_(t){if(vc(t)!==t)throw Error(J(188))}function fN(t){var e=t.alternate;if(!e){if(e=vc(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===n)return N_(s),t;if(r===i)return N_(s),e;r=r.sibling}throw Error(J(188))}if(n.return!==i.return)n=s,i=r;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o){for(a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==i)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function Ww(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=Ww(t),e!==null)return e;t=t.sibling}return null}var wt=Object.assign,hN=Symbol.for("react.element"),ad=Symbol.for("react.transitional.element"),du=Symbol.for("react.portal"),Ta=Symbol.for("react.fragment"),Qw=Symbol.for("react.strict_mode"),qm=Symbol.for("react.profiler"),Zw=Symbol.for("react.consumer"),xs=Symbol.for("react.context"),Iy=Symbol.for("react.forward_ref"),Hm=Symbol.for("react.suspense"),Gm=Symbol.for("react.suspense_list"),My=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),$m=Symbol.for("react.activity"),pN=Symbol.for("react.memo_cache_sentinel"),L_=Symbol.iterator;function Zl(t){return t===null||typeof t!="object"?null:(t=L_&&t[L_]||t["@@iterator"],typeof t=="function"?t:null)}var mN=Symbol.for("react.client.reference");function Km(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===mN?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ta:return"Fragment";case qm:return"Profiler";case Qw:return"StrictMode";case Hm:return"Suspense";case Gm:return"SuspenseList";case $m:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case du:return"Portal";case xs:return t.displayName||"Context";case Zw:return(t._context.displayName||"Context")+".Consumer";case Iy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case My:return e=t.displayName||null,e!==null?e:Km(t.type)||"Memo";case rr:e=t._payload,t=t._init;try{return Km(t(e))}catch{}}return null}var fu=Array.isArray,Ie=$w.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,nt=dN.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,So={pending:!1,data:null,method:null,action:null},Jm=[],Ea=-1;function ss(t){return{current:t}}function dn(t){0>Ea||(t.current=Jm[Ea],Jm[Ea]=null,Ea--)}function yt(t,e){Ea++,Jm[Ea]=t.current,t.current=e}var Yi=ss(null),$u=ss(null),br=ss(null),pf=ss(null);function mf(t,e){switch(yt(br,e),yt($u,t),yt(Yi,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?BT(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=BT(e),t=vI(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}dn(Yi),yt(Yi,t)}function Qa(){dn(Yi),dn($u),dn(br)}function Ym(t){t.memoizedState!==null&&yt(pf,t);var e=Yi.current,n=vI(e,t.type);e!==n&&(yt($u,t),yt(Yi,n))}function gf(t){$u.current===t&&(dn(Yi),dn($u)),pf.current===t&&(dn(pf),ic._currentValue=So)}var Dp,D_;function go(t){if(Dp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Dp=e&&e[1]||"",D_=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dp+t+D_}var Pp=!1;function Vp(t,e){if(!t||Pp)return"";Pp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(e){var m=function(){throw Error()};if(Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(v){var g=v}Reflect.construct(t,[],m)}else{try{m.call()}catch(v){g=v}t.call(m.prototype)}}else{try{throw Error()}catch(v){g=v}(m=t())&&typeof m.catch=="function"&&m.catch(function(){})}}catch(v){if(v&&g&&typeof v.stack=="string")return[v.stack,g.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var r=i.DetermineComponentFrameRoot(),o=r[0],a=r[1];if(o&&a){var c=o.split(`
`),d=a.split(`
`);for(s=i=0;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;for(;s<d.length&&!d[s].includes("DetermineComponentFrameRoot");)s++;if(i===c.length||s===d.length)for(i=c.length-1,s=d.length-1;1<=i&&0<=s&&c[i]!==d[s];)s--;for(;1<=i&&0<=s;i--,s--)if(c[i]!==d[s]){if(i!==1||s!==1)do if(i--,s--,0>s||c[i]!==d[s]){var h=`
`+c[i].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=i&&0<=s);break}}}finally{Pp=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?go(n):""}function gN(t,e){switch(t.tag){case 26:case 27:case 5:return go(t.type);case 16:return go("Lazy");case 13:return t.child!==e&&e!==null?go("Suspense Fallback"):go("Suspense");case 19:return go("SuspenseList");case 0:case 15:return Vp(t.type,!1);case 11:return Vp(t.type.render,!1);case 1:return Vp(t.type,!0);case 31:return go("Activity");default:return""}}function P_(t){try{var e="",n=null;do e+=gN(t,n),n=t,t=t.return;while(t);return e}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Wm=Object.prototype.hasOwnProperty,Ry=nn.unstable_scheduleCallback,Up=nn.unstable_cancelCallback,yN=nn.unstable_shouldYield,vN=nn.unstable_requestPaint,si=nn.unstable_now,_N=nn.unstable_getCurrentPriorityLevel,Xw=nn.unstable_ImmediatePriority,eb=nn.unstable_UserBlockingPriority,yf=nn.unstable_NormalPriority,TN=nn.unstable_LowPriority,tb=nn.unstable_IdlePriority,EN=nn.log,xN=nn.unstable_setDisableYieldValue,_c=null,ri=null;function yr(t){if(typeof EN=="function"&&xN(t),ri&&typeof ri.setStrictMode=="function")try{ri.setStrictMode(_c,t)}catch{}}var oi=Math.clz32?Math.clz32:wN,CN=Math.log,SN=Math.LN2;function wN(t){return t>>>=0,t===0?32:31-(CN(t)/SN|0)|0}var ld=256,ud=262144,cd=4194304;function yo(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ah(t,e,n){var i=t.pendingLanes;if(i===0)return 0;var s=0,r=t.suspendedLanes,o=t.pingedLanes;t=t.warmLanes;var a=i&134217727;return a!==0?(i=a&~r,i!==0?s=yo(i):(o&=a,o!==0?s=yo(o):n||(n=a&~t,n!==0&&(s=yo(n))))):(a=i&~r,a!==0?s=yo(a):o!==0?s=yo(o):n||(n=i&~t,n!==0&&(s=yo(n)))),s===0?0:e!==0&&e!==s&&!(e&r)&&(r=s&-s,n=e&-e,r>=n||r===32&&(n&4194048)!==0)?e:s}function Tc(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function bN(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nb(){var t=cd;return cd<<=1,!(cd&62914560)&&(cd=4194304),t}function Op(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ec(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function AN(t,e,n,i,s,r){var o=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var a=t.entanglements,c=t.expirationTimes,d=t.hiddenUpdates;for(n=o&~n;0<n;){var h=31-oi(n),m=1<<h;a[h]=0,c[h]=-1;var g=d[h];if(g!==null)for(d[h]=null,h=0;h<g.length;h++){var v=g[h];v!==null&&(v.lane&=-536870913)}n&=~m}i!==0&&ib(t,i,0),r!==0&&s===0&&t.tag!==0&&(t.suspendedLanes|=r&~(o&~e))}function ib(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var i=31-oi(e);t.entangledLanes|=e,t.entanglements[i]=t.entanglements[i]|1073741824|n&261930}function sb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-oi(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}function rb(t,e){var n=e&-e;return n=n&42?1:ky(n),n&(t.suspendedLanes|e)?0:n}function ky(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ny(t){return t&=-t,2<t?8<t?t&134217727?32:268435456:8:2}function ob(){var t=nt.p;return t!==0?t:(t=window.event,t===void 0?32:MI(t.type))}function V_(t,e){var n=nt.p;try{return nt.p=t,e()}finally{nt.p=n}}var Qr=Math.random().toString(36).slice(2),mn="__reactFiber$"+Qr,Hn="__reactProps$"+Qr,vl="__reactContainer$"+Qr,Qm="__reactEvents$"+Qr,IN="__reactListeners$"+Qr,MN="__reactHandles$"+Qr,U_="__reactResources$"+Qr,xc="__reactMarker$"+Qr;function Ly(t){delete t[mn],delete t[Hn],delete t[Qm],delete t[IN],delete t[MN]}function xa(t){var e=t[mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vl]||n[mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=HT(t);t!==null;){if(n=t[mn])return n;t=HT(t)}return e}t=n,n=t.parentNode}return null}function _l(t){if(t=t[mn]||t[vl]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function hu(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(J(33))}function Pa(t){var e=t[U_];return e||(e=t[U_]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function un(t){t[xc]=!0}var ab=new Set,lb={};function Ho(t,e){Za(t,e),Za(t+"Capture",e)}function Za(t,e){for(lb[t]=e,t=0;t<e.length;t++)ab.add(e[t])}var RN=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),O_={},B_={};function kN(t){return Wm.call(B_,t)?!0:Wm.call(O_,t)?!1:RN.test(t)?B_[t]=!0:(O_[t]=!0,!1)}function Fd(t,e,n){if(kN(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var i=e.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function dd(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function hs(t,e,n,i){if(i===null)t.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+i)}}function gi(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ub(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function NN(t,e,n){var i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var s=i.get,r=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,r.call(this,o)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zm(t){if(!t._valueTracker){var e=ub(t)?"checked":"value";t._valueTracker=NN(t,e,""+t[e])}}function cb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=ub(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function vf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var LN=/[\n"\\]/g;function _i(t){return t.replace(LN,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function Xm(t,e,n,i,s,r,o,a){t.name="",o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"?t.type=o:t.removeAttribute("type"),e!=null?o==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+gi(e)):t.value!==""+gi(e)&&(t.value=""+gi(e)):o!=="submit"&&o!=="reset"||t.removeAttribute("value"),e!=null?eg(t,o,gi(e)):n!=null?eg(t,o,gi(n)):i!=null&&t.removeAttribute("value"),s==null&&r!=null&&(t.defaultChecked=!!r),s!=null&&(t.checked=s&&typeof s!="function"&&typeof s!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.name=""+gi(a):t.removeAttribute("name")}function db(t,e,n,i,s,r,o,a){if(r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(t.type=r),e!=null||n!=null){if(!(r!=="submit"&&r!=="reset"||e!=null)){Zm(t);return}n=n!=null?""+gi(n):"",e=e!=null?""+gi(e):n,a||e===t.value||(t.value=e),t.defaultValue=e}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,t.checked=a?t.checked:!!i,t.defaultChecked=!!i,o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(t.name=o),Zm(t)}function eg(t,e,n){e==="number"&&vf(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function Va(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+gi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function fb(t,e,n){if(e!=null&&(e=""+gi(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+gi(n):""}function hb(t,e,n,i){if(e==null){if(i!=null){if(n!=null)throw Error(J(92));if(fu(i)){if(1<i.length)throw Error(J(93));i=i[0]}n=i}n==null&&(n=""),e=n}n=gi(e),t.defaultValue=n,i=t.textContent,i===n&&i!==""&&i!==null&&(t.value=i),Zm(t)}function Xa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var DN=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function F_(t,e,n){var i=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":i?t.setProperty(e,n):typeof n!="number"||n===0||DN.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function pb(t,e,n){if(e!=null&&typeof e!="object")throw Error(J(62));if(t=t.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||e!=null&&e.hasOwnProperty(i)||(i.indexOf("--")===0?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="");for(var s in e)i=e[s],e.hasOwnProperty(s)&&n[s]!==i&&F_(t,s,i)}else for(var r in e)e.hasOwnProperty(r)&&F_(t,r,e[r])}function Dy(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var PN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),VN=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jd(t){return VN.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Cs(){}var tg=null;function Py(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ca=null,Ua=null;function j_(t){var e=_l(t);if(e&&(t=e.stateNode)){var n=t[Hn]||null;e:switch(t=e.stateNode,e.type){case"input":if(Xm(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+_i(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=i[Hn]||null;if(!s)throw Error(J(90));Xm(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(e=0;e<n.length;e++)i=n[e],i.form===t.form&&cb(i)}break e;case"textarea":fb(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&Va(t,!!n.multiple,e,!1)}}}var Bp=!1;function mb(t,e,n){if(Bp)return t(e,n);Bp=!0;try{var i=t(e);return i}finally{if(Bp=!1,(Ca!==null||Ua!==null)&&(Bh(),Ca&&(e=Ca,t=Ua,Ua=Ca=null,j_(e),t)))for(e=0;e<t.length;e++)j_(t[e])}}function Ku(t,e){var n=t.stateNode;if(n===null)return null;var i=n[Hn]||null;if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var ks=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ng=!1;if(ks)try{var Xl={};Object.defineProperty(Xl,"passive",{get:function(){ng=!0}}),window.addEventListener("test",Xl,Xl),window.removeEventListener("test",Xl,Xl)}catch{ng=!1}var vr=null,Vy=null,zd=null;function gb(){if(zd)return zd;var t,e=Vy,n=e.length,i,s="value"in vr?vr.value:vr.textContent,r=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===s[r-i];i++);return zd=s.slice(t,1<i?1-i:void 0)}function qd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function fd(){return!0}function z_(){return!1}function Gn(t){function e(n,i,s,r,o){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(r):r[a]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?fd:z_,this.isPropagationStopped=z_,this}return wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fd)},persist:function(){},isPersistent:fd}),e}var Go={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ih=Gn(Go),Cc=wt({},Go,{view:0,detail:0}),UN=Gn(Cc),Fp,jp,eu,Mh=wt({},Cc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==eu&&(eu&&t.type==="mousemove"?(Fp=t.screenX-eu.screenX,jp=t.screenY-eu.screenY):jp=Fp=0,eu=t),Fp)},movementY:function(t){return"movementY"in t?t.movementY:jp}}),q_=Gn(Mh),ON=wt({},Mh,{dataTransfer:0}),BN=Gn(ON),FN=wt({},Cc,{relatedTarget:0}),zp=Gn(FN),jN=wt({},Go,{animationName:0,elapsedTime:0,pseudoElement:0}),zN=Gn(jN),qN=wt({},Go,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HN=Gn(qN),GN=wt({},Go,{data:0}),H_=Gn(GN),$N={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},JN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=JN[t])?!!e[t]:!1}function Uy(){return YN}var WN=wt({},Cc,{key:function(t){if(t.key){var e=$N[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?KN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uy,charCode:function(t){return t.type==="keypress"?qd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),QN=Gn(WN),ZN=wt({},Mh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G_=Gn(ZN),XN=wt({},Cc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uy}),e2=Gn(XN),t2=wt({},Go,{propertyName:0,elapsedTime:0,pseudoElement:0}),n2=Gn(t2),i2=wt({},Mh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),s2=Gn(i2),r2=wt({},Go,{newState:0,oldState:0}),o2=Gn(r2),a2=[9,13,27,32],Oy=ks&&"CompositionEvent"in window,xu=null;ks&&"documentMode"in document&&(xu=document.documentMode);var l2=ks&&"TextEvent"in window&&!xu,yb=ks&&(!Oy||xu&&8<xu&&11>=xu),$_=" ",K_=!1;function vb(t,e){switch(t){case"keyup":return a2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _b(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Sa=!1;function u2(t,e){switch(t){case"compositionend":return _b(e);case"keypress":return e.which!==32?null:(K_=!0,$_);case"textInput":return t=e.data,t===$_&&K_?null:t;default:return null}}function c2(t,e){if(Sa)return t==="compositionend"||!Oy&&vb(t,e)?(t=gb(),zd=Vy=vr=null,Sa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yb&&e.locale!=="ko"?null:e.data;default:return null}}var d2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!d2[t.type]:e==="textarea"}function Tb(t,e,n,i){Ca?Ua?Ua.push(i):Ua=[i]:Ca=i,e=Vf(e,"onChange"),0<e.length&&(n=new Ih("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Cu=null,Ju=null;function f2(t){mI(t,0)}function Rh(t){var e=hu(t);if(cb(e))return t}function Y_(t,e){if(t==="change")return e}var Eb=!1;if(ks){var qp;if(ks){var Hp="oninput"in document;if(!Hp){var W_=document.createElement("div");W_.setAttribute("oninput","return;"),Hp=typeof W_.oninput=="function"}qp=Hp}else qp=!1;Eb=qp&&(!document.documentMode||9<document.documentMode)}function Q_(){Cu&&(Cu.detachEvent("onpropertychange",xb),Ju=Cu=null)}function xb(t){if(t.propertyName==="value"&&Rh(Ju)){var e=[];Tb(e,Ju,t,Py(t)),mb(f2,e)}}function h2(t,e,n){t==="focusin"?(Q_(),Cu=e,Ju=n,Cu.attachEvent("onpropertychange",xb)):t==="focusout"&&Q_()}function p2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rh(Ju)}function m2(t,e){if(t==="click")return Rh(e)}function g2(t,e){if(t==="input"||t==="change")return Rh(e)}function y2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ui=typeof Object.is=="function"?Object.is:y2;function Yu(t,e){if(ui(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Wm.call(e,s)||!ui(t[s],e[s]))return!1}return!0}function Z_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function X_(t,e){var n=Z_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Z_(n)}}function Cb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Sb(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=vf(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=vf(t.document)}return e}function By(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var v2=ks&&"documentMode"in document&&11>=document.documentMode,wa=null,ig=null,Su=null,sg=!1;function eT(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sg||wa==null||wa!==vf(i)||(i=wa,"selectionStart"in i&&By(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Su&&Yu(Su,i)||(Su=i,i=Vf(ig,"onSelect"),0<i.length&&(e=new Ih("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=wa)))}function uo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ba={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionrun:uo("Transition","TransitionRun"),transitionstart:uo("Transition","TransitionStart"),transitioncancel:uo("Transition","TransitionCancel"),transitionend:uo("Transition","TransitionEnd")},Gp={},wb={};ks&&(wb=document.createElement("div").style,"AnimationEvent"in window||(delete ba.animationend.animation,delete ba.animationiteration.animation,delete ba.animationstart.animation),"TransitionEvent"in window||delete ba.transitionend.transition);function $o(t){if(Gp[t])return Gp[t];if(!ba[t])return t;var e=ba[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wb)return Gp[t]=e[n];return t}var bb=$o("animationend"),Ab=$o("animationiteration"),Ib=$o("animationstart"),_2=$o("transitionrun"),T2=$o("transitionstart"),E2=$o("transitioncancel"),Mb=$o("transitionend"),Rb=new Map,rg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rg.push("scrollEnd");function Pi(t,e){Rb.set(t,e),Ho(e,[t])}var _f=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},mi=[],Aa=0,Fy=0;function kh(){for(var t=Aa,e=Fy=Aa=0;e<t;){var n=mi[e];mi[e++]=null;var i=mi[e];mi[e++]=null;var s=mi[e];mi[e++]=null;var r=mi[e];if(mi[e++]=null,i!==null&&s!==null){var o=i.pending;o===null?s.next=s:(s.next=o.next,o.next=s),i.pending=s}r!==0&&kb(n,s,r)}}function Nh(t,e,n,i){mi[Aa++]=t,mi[Aa++]=e,mi[Aa++]=n,mi[Aa++]=i,Fy|=i,t.lanes|=i,t=t.alternate,t!==null&&(t.lanes|=i)}function jy(t,e,n,i){return Nh(t,e,n,i),Tf(t)}function Ko(t,e){return Nh(t,null,null,e),Tf(t)}function kb(t,e,n){t.lanes|=n;var i=t.alternate;i!==null&&(i.lanes|=n);for(var s=!1,r=t.return;r!==null;)r.childLanes|=n,i=r.alternate,i!==null&&(i.childLanes|=n),r.tag===22&&(t=r.stateNode,t===null||t._visibility&1||(s=!0)),t=r,r=r.return;return t.tag===3?(r=t.stateNode,s&&e!==null&&(s=31-oi(n),t=r.hiddenUpdates,i=t[s],i===null?t[s]=[e]:i.push(e),e.lane=n|536870912),r):null}function Tf(t){if(50<Lu)throw Lu=0,bg=null,Error(J(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Ia={};function x2(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(t,e,n,i){return new x2(t,e,n,i)}function zy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function As(t,e){var n=t.alternate;return n===null?(n=Xn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function Nb(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function Hd(t,e,n,i,s,r){var o=0;if(i=t,typeof t=="function")zy(t)&&(o=1);else if(typeof t=="string")o=AL(t,n,Yi.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case $m:return t=Xn(31,n,e,s),t.elementType=$m,t.lanes=r,t;case Ta:return wo(n.children,s,r,e);case Qw:o=8,s|=24;break;case qm:return t=Xn(12,n,e,s|2),t.elementType=qm,t.lanes=r,t;case Hm:return t=Xn(13,n,e,s),t.elementType=Hm,t.lanes=r,t;case Gm:return t=Xn(19,n,e,s),t.elementType=Gm,t.lanes=r,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xs:o=10;break e;case Zw:o=9;break e;case Iy:o=11;break e;case My:o=14;break e;case rr:o=16,i=null;break e}o=29,n=Error(J(130,t===null?"null":typeof t,"")),i=null}return e=Xn(o,n,e,s),e.elementType=t,e.type=i,e.lanes=r,e}function wo(t,e,n,i){return t=Xn(7,t,i,e),t.lanes=n,t}function $p(t,e,n){return t=Xn(6,t,null,e),t.lanes=n,t}function Lb(t){var e=Xn(18,null,null,0);return e.stateNode=t,e}function Kp(t,e,n){return e=Xn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var tT=new WeakMap;function Ti(t,e){if(typeof t=="object"&&t!==null){var n=tT.get(t);return n!==void 0?n:(e={value:t,source:e,stack:P_(e)},tT.set(t,e),e)}return{value:t,source:e,stack:P_(e)}}var Ma=[],Ra=0,Ef=null,Wu=0,yi=[],vi=0,Fr=null,Gi=1,$i="";function _s(t,e){Ma[Ra++]=Wu,Ma[Ra++]=Ef,Ef=t,Wu=e}function Db(t,e,n){yi[vi++]=Gi,yi[vi++]=$i,yi[vi++]=Fr,Fr=t;var i=Gi;t=$i;var s=32-oi(i)-1;i&=~(1<<s),n+=1;var r=32-oi(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Gi=1<<32-oi(e)+s|n<<s|i,$i=r+t}else Gi=1<<r|n<<s|i,$i=t}function qy(t){t.return!==null&&(_s(t,1),Db(t,1,0))}function Hy(t){for(;t===Ef;)Ef=Ma[--Ra],Ma[Ra]=null,Wu=Ma[--Ra],Ma[Ra]=null;for(;t===Fr;)Fr=yi[--vi],yi[vi]=null,$i=yi[--vi],yi[vi]=null,Gi=yi[--vi],yi[vi]=null}function Pb(t,e){yi[vi++]=Gi,yi[vi++]=$i,yi[vi++]=Fr,Gi=e.id,$i=e.overflow,Fr=t}var gn=null,xt=null,Ye=!1,Ar=null,Ei=!1,og=Error(J(519));function jr(t){var e=Error(J(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qu(Ti(e,t)),og}function nT(t){var e=t.stateNode,n=t.type,i=t.memoizedProps;switch(e[mn]=t,e[Hn]=i,n){case"dialog":Fe("cancel",e),Fe("close",e);break;case"iframe":case"object":case"embed":Fe("load",e);break;case"video":case"audio":for(n=0;n<tc.length;n++)Fe(tc[n],e);break;case"source":Fe("error",e);break;case"img":case"image":case"link":Fe("error",e),Fe("load",e);break;case"details":Fe("toggle",e);break;case"input":Fe("invalid",e),db(e,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":Fe("invalid",e);break;case"textarea":Fe("invalid",e),hb(e,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||i.suppressHydrationWarning===!0||yI(e.textContent,n)?(i.popover!=null&&(Fe("beforetoggle",e),Fe("toggle",e)),i.onScroll!=null&&Fe("scroll",e),i.onScrollEnd!=null&&Fe("scrollend",e),i.onClick!=null&&(e.onclick=Cs),e=!0):e=!1,e||jr(t,!0)}function iT(t){for(gn=t.return;gn;)switch(gn.tag){case 5:case 31:case 13:Ei=!1;return;case 27:case 3:Ei=!0;return;default:gn=gn.return}}function ra(t){if(t!==gn)return!1;if(!Ye)return iT(t),Ye=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||kg(t.type,t.memoizedProps)),n=!n),n&&xt&&jr(t),iT(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));xt=qT(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));xt=qT(t)}else e===27?(e=xt,Zr(t.type)?(t=Pg,Pg=null,xt=t):xt=e):xt=gn?Ci(t.stateNode.nextSibling):null;return!0}function ko(){xt=gn=null,Ye=!1}function Jp(){var t=Ar;return t!==null&&(Fn===null?Fn=t:Fn.push.apply(Fn,t),Ar=null),t}function Qu(t){Ar===null?Ar=[t]:Ar.push(t)}var ag=ss(null),Jo=null,Ss=null;function ur(t,e,n){yt(ag,e._currentValue),e._currentValue=n}function Is(t){t._currentValue=ag.current,dn(ag)}function lg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ug(t,e,n,i){var s=t.child;for(s!==null&&(s.return=t);s!==null;){var r=s.dependencies;if(r!==null){var o=s.child;r=r.firstContext;e:for(;r!==null;){var a=r;r=s;for(var c=0;c<e.length;c++)if(a.context===e[c]){r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),lg(r.return,n,t),i||(o=null);break e}r=a.next}}else if(s.tag===18){if(o=s.return,o===null)throw Error(J(341));o.lanes|=n,r=o.alternate,r!==null&&(r.lanes|=n),lg(o,n,t),o=null}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}}function Tl(t,e,n,i){t=null;for(var s=e,r=!1;s!==null;){if(!r){if(s.flags&524288)r=!0;else if(s.flags&262144)break}if(s.tag===10){var o=s.alternate;if(o===null)throw Error(J(387));if(o=o.memoizedProps,o!==null){var a=s.type;ui(s.pendingProps.value,o.value)||(t!==null?t.push(a):t=[a])}}else if(s===pf.current){if(o=s.alternate,o===null)throw Error(J(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(t!==null?t.push(ic):t=[ic])}s=s.return}t!==null&&ug(e,t,n,i),e.flags|=262144}function xf(t){for(t=t.firstContext;t!==null;){if(!ui(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function No(t){Jo=t,Ss=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function vn(t){return Vb(Jo,t)}function hd(t,e){return Jo===null&&No(t),Vb(t,e)}function Vb(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},Ss===null){if(t===null)throw Error(J(308));Ss=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else Ss=Ss.next=e;return n}var C2=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,i){t.push(i)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},S2=nn.unstable_scheduleCallback,w2=nn.unstable_NormalPriority,Kt={$$typeof:xs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gy(){return{controller:new C2,data:new Map,refCount:0}}function Sc(t){t.refCount--,t.refCount===0&&S2(w2,function(){t.controller.abort()})}var wu=null,cg=0,el=0,Oa=null;function b2(t,e){if(wu===null){var n=wu=[];cg=0,el=gv(),Oa={status:"pending",value:void 0,then:function(i){n.push(i)}}}return cg++,e.then(sT,sT),e}function sT(){if(--cg===0&&wu!==null){Oa!==null&&(Oa.status="fulfilled");var t=wu;wu=null,el=0,Oa=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function A2(t,e){var n=[],i={status:"pending",value:null,reason:null,then:function(s){n.push(s)}};return t.then(function(){i.status="fulfilled",i.value=e;for(var s=0;s<n.length;s++)(0,n[s])(e)},function(s){for(i.status="rejected",i.reason=s,s=0;s<n.length;s++)(0,n[s])(void 0)}),i}var rT=Ie.S;Ie.S=function(t,e){WA=si(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&b2(t,e),rT!==null&&rT(t,e)};var bo=ss(null);function $y(){var t=bo.current;return t!==null?t:ft.pooledCache}function Gd(t,e){e===null?yt(bo,bo.current):yt(bo,e.pool)}function Ub(){var t=$y();return t===null?null:{parent:Kt._currentValue,pool:t}}var El=Error(J(460)),Ky=Error(J(474)),Lh=Error(J(542)),Cf={then:function(){}};function oT(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ob(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Cs,Cs),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,lT(t),t;default:if(typeof e.status=="string")e.then(Cs,Cs);else{if(t=ft,t!==null&&100<t.shellSuspendCounter)throw Error(J(482));t=e,t.status="pending",t.then(function(i){if(e.status==="pending"){var s=e;s.status="fulfilled",s.value=i}},function(i){if(e.status==="pending"){var s=e;s.status="rejected",s.reason=i}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,lT(t),t}throw Ao=e,El}}function vo(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(Ao=n,El):n}}var Ao=null;function aT(){if(Ao===null)throw Error(J(459));var t=Ao;return Ao=null,t}function lT(t){if(t===El||t===Lh)throw Error(J(483))}var Ba=null,Zu=0;function pd(t){var e=Zu;return Zu+=1,Ba===null&&(Ba=[]),Ob(Ba,t,e)}function tu(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function md(t,e){throw e.$$typeof===hN?Error(J(525)):(t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function Bb(t){function e(b,E){if(t){var A=b.deletions;A===null?(b.deletions=[E],b.flags|=16):A.push(E)}}function n(b,E){if(!t)return null;for(;E!==null;)e(b,E),E=E.sibling;return null}function i(b){for(var E=new Map;b!==null;)b.key!==null?E.set(b.key,b):E.set(b.index,b),b=b.sibling;return E}function s(b,E){return b=As(b,E),b.index=0,b.sibling=null,b}function r(b,E,A){return b.index=A,t?(A=b.alternate,A!==null?(A=A.index,A<E?(b.flags|=67108866,E):A):(b.flags|=67108866,E)):(b.flags|=1048576,E)}function o(b){return t&&b.alternate===null&&(b.flags|=67108866),b}function a(b,E,A,R){return E===null||E.tag!==6?(E=$p(A,b.mode,R),E.return=b,E):(E=s(E,A),E.return=b,E)}function c(b,E,A,R){var P=A.type;return P===Ta?h(b,E,A.props.children,R,A.key):E!==null&&(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===rr&&vo(P)===E.type)?(E=s(E,A.props),tu(E,A),E.return=b,E):(E=Hd(A.type,A.key,A.props,null,b.mode,R),tu(E,A),E.return=b,E)}function d(b,E,A,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==A.containerInfo||E.stateNode.implementation!==A.implementation?(E=Kp(A,b.mode,R),E.return=b,E):(E=s(E,A.children||[]),E.return=b,E)}function h(b,E,A,R,P){return E===null||E.tag!==7?(E=wo(A,b.mode,R,P),E.return=b,E):(E=s(E,A),E.return=b,E)}function m(b,E,A){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=$p(""+E,b.mode,A),E.return=b,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ad:return A=Hd(E.type,E.key,E.props,null,b.mode,A),tu(A,E),A.return=b,A;case du:return E=Kp(E,b.mode,A),E.return=b,E;case rr:return E=vo(E),m(b,E,A)}if(fu(E)||Zl(E))return E=wo(E,b.mode,A,null),E.return=b,E;if(typeof E.then=="function")return m(b,pd(E),A);if(E.$$typeof===xs)return m(b,hd(b,E),A);md(b,E)}return null}function g(b,E,A,R){var P=E!==null?E.key:null;if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return P!==null?null:a(b,E,""+A,R);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ad:return A.key===P?c(b,E,A,R):null;case du:return A.key===P?d(b,E,A,R):null;case rr:return A=vo(A),g(b,E,A,R)}if(fu(A)||Zl(A))return P!==null?null:h(b,E,A,R,null);if(typeof A.then=="function")return g(b,E,pd(A),R);if(A.$$typeof===xs)return g(b,E,hd(b,A),R);md(b,A)}return null}function v(b,E,A,R,P){if(typeof R=="string"&&R!==""||typeof R=="number"||typeof R=="bigint")return b=b.get(A)||null,a(E,b,""+R,P);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ad:return b=b.get(R.key===null?A:R.key)||null,c(E,b,R,P);case du:return b=b.get(R.key===null?A:R.key)||null,d(E,b,R,P);case rr:return R=vo(R),v(b,E,A,R,P)}if(fu(R)||Zl(R))return b=b.get(A)||null,h(E,b,R,P,null);if(typeof R.then=="function")return v(b,E,A,pd(R),P);if(R.$$typeof===xs)return v(b,E,A,hd(E,R),P);md(E,R)}return null}function T(b,E,A,R){for(var P=null,U=null,S=E,M=E=0,C=null;S!==null&&M<A.length;M++){S.index>M?(C=S,S=null):C=S.sibling;var k=g(b,S,A[M],R);if(k===null){S===null&&(S=C);break}t&&S&&k.alternate===null&&e(b,S),E=r(k,E,M),U===null?P=k:U.sibling=k,U=k,S=C}if(M===A.length)return n(b,S),Ye&&_s(b,M),P;if(S===null){for(;M<A.length;M++)S=m(b,A[M],R),S!==null&&(E=r(S,E,M),U===null?P=S:U.sibling=S,U=S);return Ye&&_s(b,M),P}for(S=i(S);M<A.length;M++)C=v(S,b,M,A[M],R),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?M:C.key),E=r(C,E,M),U===null?P=C:U.sibling=C,U=C);return t&&S.forEach(function(N){return e(b,N)}),Ye&&_s(b,M),P}function w(b,E,A,R){if(A==null)throw Error(J(151));for(var P=null,U=null,S=E,M=E=0,C=null,k=A.next();S!==null&&!k.done;M++,k=A.next()){S.index>M?(C=S,S=null):C=S.sibling;var N=g(b,S,k.value,R);if(N===null){S===null&&(S=C);break}t&&S&&N.alternate===null&&e(b,S),E=r(N,E,M),U===null?P=N:U.sibling=N,U=N,S=C}if(k.done)return n(b,S),Ye&&_s(b,M),P;if(S===null){for(;!k.done;M++,k=A.next())k=m(b,k.value,R),k!==null&&(E=r(k,E,M),U===null?P=k:U.sibling=k,U=k);return Ye&&_s(b,M),P}for(S=i(S);!k.done;M++,k=A.next())k=v(S,b,M,k.value,R),k!==null&&(t&&k.alternate!==null&&S.delete(k.key===null?M:k.key),E=r(k,E,M),U===null?P=k:U.sibling=k,U=k);return t&&S.forEach(function(V){return e(b,V)}),Ye&&_s(b,M),P}function I(b,E,A,R){if(typeof A=="object"&&A!==null&&A.type===Ta&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case ad:e:{for(var P=A.key;E!==null;){if(E.key===P){if(P=A.type,P===Ta){if(E.tag===7){n(b,E.sibling),R=s(E,A.props.children),R.return=b,b=R;break e}}else if(E.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===rr&&vo(P)===E.type){n(b,E.sibling),R=s(E,A.props),tu(R,A),R.return=b,b=R;break e}n(b,E);break}else e(b,E);E=E.sibling}A.type===Ta?(R=wo(A.props.children,b.mode,R,A.key),R.return=b,b=R):(R=Hd(A.type,A.key,A.props,null,b.mode,R),tu(R,A),R.return=b,b=R)}return o(b);case du:e:{for(P=A.key;E!==null;){if(E.key===P)if(E.tag===4&&E.stateNode.containerInfo===A.containerInfo&&E.stateNode.implementation===A.implementation){n(b,E.sibling),R=s(E,A.children||[]),R.return=b,b=R;break e}else{n(b,E);break}else e(b,E);E=E.sibling}R=Kp(A,b.mode,R),R.return=b,b=R}return o(b);case rr:return A=vo(A),I(b,E,A,R)}if(fu(A))return T(b,E,A,R);if(Zl(A)){if(P=Zl(A),typeof P!="function")throw Error(J(150));return A=P.call(A),w(b,E,A,R)}if(typeof A.then=="function")return I(b,E,pd(A),R);if(A.$$typeof===xs)return I(b,E,hd(b,A),R);md(b,A)}return typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint"?(A=""+A,E!==null&&E.tag===6?(n(b,E.sibling),R=s(E,A),R.return=b,b=R):(n(b,E),R=$p(A,b.mode,R),R.return=b,b=R),o(b)):n(b,E)}return function(b,E,A,R){try{Zu=0;var P=I(b,E,A,R);return Ba=null,P}catch(S){if(S===El||S===Lh)throw S;var U=Xn(29,S,null,b.mode);return U.lanes=R,U.return=b,U}finally{}}}var Lo=Bb(!0),Fb=Bb(!1),or=!1;function Jy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ir(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Mr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,tt&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,e=Tf(t),kb(t,null,n),e}return Nh(t,i,e,n),Tf(t)}function bu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,sb(t,n)}}function Yp(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,r=null;if(n=n.firstBaseUpdate,n!==null){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};r===null?s=r=o:r=r.next=o,n=n.next}while(n!==null);r===null?s=r=e:r=r.next=e}else s=r=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,callbacks:i.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var fg=!1;function Au(){if(fg){var t=Oa;if(t!==null)throw t}}function Iu(t,e,n,i){fg=!1;var s=t.updateQueue;or=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var c=a,d=c.next;c.next=null,o===null?r=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=d:a.next=d,h.lastBaseUpdate=c))}if(r!==null){var m=s.baseState;o=0,h=d=c=null,a=r;do{var g=a.lane&-536870913,v=g!==a.lane;if(v?(Ke&g)===g:(i&g)===g){g!==0&&g===el&&(fg=!0),h!==null&&(h=h.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var T=t,w=a;g=e;var I=n;switch(w.tag){case 1:if(T=w.payload,typeof T=="function"){m=T.call(I,m,g);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=w.payload,g=typeof T=="function"?T.call(I,m,g):T,g==null)break e;m=wt({},m,g);break e;case 2:or=!0}}g=a.callback,g!==null&&(t.flags|=64,v&&(t.flags|=8192),v=s.callbacks,v===null?s.callbacks=[g]:v.push(g))}else v={lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(d=h=v,c=m):h=h.next=v,o|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;v=a,a=v.next,v.next=null,s.lastBaseUpdate=v,s.shared.pending=null}}while(!0);h===null&&(c=m),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,r===null&&(s.shared.lanes=0),qr|=o,t.lanes=o,t.memoizedState=m}}function jb(t,e){if(typeof t!="function")throw Error(J(191,t));t.call(e)}function zb(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)jb(n[t],e)}var tl=ss(null),Sf=ss(0);function uT(t,e){t=Ps,yt(Sf,t),yt(tl,e),Ps=t|e.baseLanes}function hg(){yt(Sf,Ps),yt(tl,tl.current)}function Yy(){Ps=Sf.current,dn(tl),dn(Sf)}var ci=ss(null),xi=null;function cr(t){var e=t.alternate;yt(Bt,Bt.current&1),yt(ci,t),xi===null&&(e===null||tl.current!==null||e.memoizedState!==null)&&(xi=t)}function pg(t){yt(Bt,Bt.current),yt(ci,t),xi===null&&(xi=t)}function qb(t){t.tag===22?(yt(Bt,Bt.current),yt(ci,t),xi===null&&(xi=t)):dr()}function dr(){yt(Bt,Bt.current),yt(ci,ci.current)}function Qn(t){dn(ci),xi===t&&(xi=null),dn(Bt)}var Bt=ss(0);function wf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Lg(n)||Dg(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ns=0,Ne=null,lt=null,Gt=null,bf=!1,Fa=!1,Do=!1,Af=0,Xu=0,ja=null,I2=0;function Nt(){throw Error(J(321))}function Wy(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ui(t[n],e[n]))return!1;return!0}function Qy(t,e,n,i,s,r){return Ns=r,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ie.H=t===null||t.memoizedState===null?TA:lv,Do=!1,r=n(i,s),Do=!1,Fa&&(r=Gb(e,n,i,s)),Hb(t),r}function Hb(t){Ie.H=ec;var e=lt!==null&&lt.next!==null;if(Ns=0,Gt=lt=Ne=null,bf=!1,Xu=0,ja=null,e)throw Error(J(300));t===null||Wt||(t=t.dependencies,t!==null&&xf(t)&&(Wt=!0))}function Gb(t,e,n,i){Ne=t;var s=0;do{if(Fa&&(ja=null),Xu=0,Fa=!1,25<=s)throw Error(J(301));if(s+=1,Gt=lt=null,t.updateQueue!=null){var r=t.updateQueue;r.lastEffect=null,r.events=null,r.stores=null,r.memoCache!=null&&(r.memoCache.index=0)}Ie.H=EA,r=e(n,i)}while(Fa);return r}function M2(){var t=Ie.H,e=t.useState()[0];return e=typeof e.then=="function"?wc(e):e,t=t.useState()[0],(lt!==null?lt.memoizedState:null)!==t&&(Ne.flags|=1024),e}function Zy(){var t=Af!==0;return Af=0,t}function Xy(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function ev(t){if(bf){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}bf=!1}Ns=0,Gt=lt=Ne=null,Fa=!1,Xu=Af=0,ja=null}function Nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gt===null?Ne.memoizedState=Gt=t:Gt=Gt.next=t,Gt}function Ft(){if(lt===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var e=Gt===null?Ne.memoizedState:Gt.next;if(e!==null)Gt=e,lt=t;else{if(t===null)throw Ne.alternate===null?Error(J(467)):Error(J(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Gt===null?Ne.memoizedState=Gt=t:Gt=Gt.next=t}return Gt}function Dh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wc(t){var e=Xu;return Xu+=1,ja===null&&(ja=[]),t=Ob(ja,t,e),e=Ne,(Gt===null?e.memoizedState:Gt.next)===null&&(e=e.alternate,Ie.H=e===null||e.memoizedState===null?TA:lv),t}function Ph(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wc(t);if(t.$$typeof===xs)return vn(t)}throw Error(J(438,String(t)))}function tv(t){var e=null,n=Ne.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var i=Ne.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(e={data:i.data.map(function(s){return s.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=Dh(),Ne.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),i=0;i<t;i++)n[i]=pN;return e.index++,n}function Ls(t,e){return typeof e=="function"?e(t):e}function $d(t){var e=Ft();return nv(e,lt,t)}function nv(t,e,n){var i=t.queue;if(i===null)throw Error(J(311));i.lastRenderedReducer=n;var s=t.baseQueue,r=i.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}e.baseQueue=s=r,i.pending=null}if(r=t.baseState,s===null)t.memoizedState=r;else{e=s.next;var a=o=null,c=null,d=e,h=!1;do{var m=d.lane&-536870913;if(m!==d.lane?(Ke&m)===m:(Ns&m)===m){var g=d.revertLane;if(g===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),m===el&&(h=!0);else if((Ns&g)===g){d=d.next,g===el&&(h=!0);continue}else m={lane:0,revertLane:d.revertLane,gesture:null,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(a=c=m,o=r):c=c.next=m,Ne.lanes|=g,qr|=g;m=d.action,Do&&n(r,m),r=d.hasEagerState?d.eagerState:n(r,m)}else g={lane:m,revertLane:d.revertLane,gesture:d.gesture,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null},c===null?(a=c=g,o=r):c=c.next=g,Ne.lanes|=m,qr|=m;d=d.next}while(d!==null&&d!==e);if(c===null?o=r:c.next=a,!ui(r,t.memoizedState)&&(Wt=!0,h&&(n=Oa,n!==null)))throw n;t.memoizedState=r,t.baseState=o,t.baseQueue=c,i.lastRenderedState=r}return s===null&&(i.lanes=0),[t.memoizedState,i.dispatch]}function Wp(t){var e=Ft(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,r=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do r=t(r,o.action),o=o.next;while(o!==s);ui(r,e.memoizedState)||(Wt=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),n.lastRenderedState=r}return[r,i]}function $b(t,e,n){var i=Ne,s=Ft(),r=Ye;if(r){if(n===void 0)throw Error(J(407));n=n()}else n=e();var o=!ui((lt||s).memoizedState,n);if(o&&(s.memoizedState=n,Wt=!0),s=s.queue,iv(Yb.bind(null,i,s,t),[t]),s.getSnapshot!==e||o||Gt!==null&&Gt.memoizedState.tag&1){if(i.flags|=2048,nl(9,{destroy:void 0},Jb.bind(null,i,s,n,e),null),ft===null)throw Error(J(349));r||Ns&127||Kb(i,e,n)}return n}function Kb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e=Dh(),Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Jb(t,e,n,i){e.value=n,e.getSnapshot=i,Wb(e)&&Qb(t)}function Yb(t,e,n){return n(function(){Wb(e)&&Qb(t)})}function Wb(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ui(t,n)}catch{return!0}}function Qb(t){var e=Ko(t,2);e!==null&&qn(e,t,2)}function mg(t){var e=Nn();if(typeof t=="function"){var n=t;if(t=n(),Do){yr(!0);try{n()}finally{yr(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:t},e}function Zb(t,e,n,i){return t.baseState=n,nv(t,lt,typeof i=="function"?i:Ls)}function R2(t,e,n,i,s){if(Uh(t))throw Error(J(485));if(t=e.action,t!==null){var r={payload:s,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(o){r.listeners.push(o)}};Ie.T!==null?n(!0):r.isTransition=!1,i(r),n=e.pending,n===null?(r.next=e.pending=r,Xb(e,r)):(r.next=n.next,e.pending=n.next=r)}}function Xb(t,e){var n=e.action,i=e.payload,s=t.state;if(e.isTransition){var r=Ie.T,o={};Ie.T=o;try{var a=n(s,i),c=Ie.S;c!==null&&c(o,a),cT(t,e,a)}catch(d){gg(t,e,d)}finally{r!==null&&o.types!==null&&(r.types=o.types),Ie.T=r}}else try{r=n(s,i),cT(t,e,r)}catch(d){gg(t,e,d)}}function cT(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){dT(t,e,i)},function(i){return gg(t,e,i)}):dT(t,e,n)}function dT(t,e,n){e.status="fulfilled",e.value=n,eA(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Xb(t,n)))}function gg(t,e,n){var i=t.pending;if(t.pending=null,i!==null){i=i.next;do e.status="rejected",e.reason=n,eA(e),e=e.next;while(e!==i)}t.action=null}function eA(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function tA(t,e){return e}function fT(t,e){if(Ye){var n=ft.formState;if(n!==null){e:{var i=Ne;if(Ye){if(xt){t:{for(var s=xt,r=Ei;s.nodeType!==8;){if(!r){s=null;break t}if(s=Ci(s.nextSibling),s===null){s=null;break t}}r=s.data,s=r==="F!"||r==="F"?s:null}if(s){xt=Ci(s.nextSibling),i=s.data==="F!";break e}}jr(i)}i=!1}i&&(e=n[0])}}return n=Nn(),n.memoizedState=n.baseState=e,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tA,lastRenderedState:e},n.queue=i,n=yA.bind(null,Ne,i),i.dispatch=n,i=mg(!1),r=av.bind(null,Ne,!1,i.queue),i=Nn(),s={state:e,dispatch:null,action:t,pending:null},i.queue=s,n=R2.bind(null,Ne,s,r,n),s.dispatch=n,i.memoizedState=t,[e,n,!1]}function hT(t){var e=Ft();return nA(e,lt,t)}function nA(t,e,n){if(e=nv(t,e,tA)[0],t=$d(Ls)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var i=wc(e)}catch(o){throw o===El?Lh:o}else i=e;e=Ft();var s=e.queue,r=s.dispatch;return n!==e.memoizedState&&(Ne.flags|=2048,nl(9,{destroy:void 0},k2.bind(null,s,n),null)),[i,r,t]}function k2(t,e){t.action=e}function pT(t){var e=Ft(),n=lt;if(n!==null)return nA(e,n,t);Ft(),e=e.memoizedState,n=Ft();var i=n.queue.dispatch;return n.memoizedState=t,[e,i,!1]}function nl(t,e,n,i){return t={tag:t,create:n,deps:i,inst:e,next:null},e=Ne.updateQueue,e===null&&(e=Dh(),Ne.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function iA(){return Ft().memoizedState}function Kd(t,e,n,i){var s=Nn();Ne.flags|=t,s.memoizedState=nl(1|e,{destroy:void 0},n,i===void 0?null:i)}function Vh(t,e,n,i){var s=Ft();i=i===void 0?null:i;var r=s.memoizedState.inst;lt!==null&&i!==null&&Wy(i,lt.memoizedState.deps)?s.memoizedState=nl(e,r,n,i):(Ne.flags|=t,s.memoizedState=nl(1|e,r,n,i))}function mT(t,e){Kd(8390656,8,t,e)}function iv(t,e){Vh(2048,8,t,e)}function N2(t){Ne.flags|=4;var e=Ne.updateQueue;if(e===null)e=Dh(),Ne.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function sA(t){var e=Ft().memoizedState;return N2({ref:e,nextImpl:t}),function(){if(tt&2)throw Error(J(440));return e.impl.apply(void 0,arguments)}}function rA(t,e){return Vh(4,2,t,e)}function oA(t,e){return Vh(4,4,t,e)}function aA(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lA(t,e,n){n=n!=null?n.concat([t]):null,Vh(4,4,aA.bind(null,e,t),n)}function sv(){}function uA(t,e){var n=Ft();e=e===void 0?null:e;var i=n.memoizedState;return e!==null&&Wy(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function cA(t,e){var n=Ft();e=e===void 0?null:e;var i=n.memoizedState;if(e!==null&&Wy(e,i[1]))return i[0];if(i=t(),Do){yr(!0);try{t()}finally{yr(!1)}}return n.memoizedState=[i,e],i}function rv(t,e,n){return n===void 0||Ns&1073741824&&!(Ke&261930)?t.memoizedState=e:(t.memoizedState=n,t=ZA(),Ne.lanes|=t,qr|=t,n)}function dA(t,e,n,i){return ui(n,e)?n:tl.current!==null?(t=rv(t,n,i),ui(t,e)||(Wt=!0),t):!(Ns&42)||Ns&1073741824&&!(Ke&261930)?(Wt=!0,t.memoizedState=n):(t=ZA(),Ne.lanes|=t,qr|=t,e)}function fA(t,e,n,i,s){var r=nt.p;nt.p=r!==0&&8>r?r:8;var o=Ie.T,a={};Ie.T=a,av(t,!1,e,n);try{var c=s(),d=Ie.S;if(d!==null&&d(a,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=A2(c,i);Mu(t,e,h,ai(t))}else Mu(t,e,i,ai(t))}catch(m){Mu(t,e,{then:function(){},status:"rejected",reason:m},ai())}finally{nt.p=r,o!==null&&a.types!==null&&(o.types=a.types),Ie.T=o}}function L2(){}function yg(t,e,n,i){if(t.tag!==5)throw Error(J(476));var s=hA(t).queue;fA(t,s,e,So,n===null?L2:function(){return pA(t),n(i)})}function hA(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:So,baseState:So,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:So},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function pA(t){var e=hA(t);e.next===null&&(e=t.alternate.memoizedState),Mu(t,e.next.queue,{},ai())}function ov(){return vn(ic)}function mA(){return Ft().memoizedState}function gA(){return Ft().memoizedState}function D2(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=ai();t=Ir(n);var i=Mr(e,t,n);i!==null&&(qn(i,e,n),bu(i,e,n)),e={cache:Gy()},t.payload=e;return}e=e.return}}function P2(t,e,n){var i=ai();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},Uh(t)?vA(e,n):(n=jy(t,e,n,i),n!==null&&(qn(n,t,i),_A(n,e,i)))}function yA(t,e,n){var i=ai();Mu(t,e,n,i)}function Mu(t,e,n,i){var s={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uh(t))vA(e,s);else{var r=t.alternate;if(t.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,a=r(o,n);if(s.hasEagerState=!0,s.eagerState=a,ui(a,o))return Nh(t,e,s,0),ft===null&&kh(),!1}catch{}finally{}if(n=jy(t,e,s,i),n!==null)return qn(n,t,i),_A(n,e,i),!0}return!1}function av(t,e,n,i){if(i={lane:2,revertLane:gv(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Uh(t)){if(e)throw Error(J(479))}else e=jy(t,n,i,2),e!==null&&qn(e,t,2)}function Uh(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function vA(t,e){Fa=bf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _A(t,e,n){if(n&4194048){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,sb(t,n)}}var ec={readContext:vn,use:Ph,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};ec.useEffectEvent=Nt;var TA={readContext:vn,use:Ph,useCallback:function(t,e){return Nn().memoizedState=[t,e===void 0?null:e],t},useContext:vn,useEffect:mT,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Kd(4194308,4,aA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kd(4194308,4,t,e)},useInsertionEffect:function(t,e){Kd(4,2,t,e)},useMemo:function(t,e){var n=Nn();e=e===void 0?null:e;var i=t();if(Do){yr(!0);try{t()}finally{yr(!1)}}return n.memoizedState=[i,e],i},useReducer:function(t,e,n){var i=Nn();if(n!==void 0){var s=n(e);if(Do){yr(!0);try{n(e)}finally{yr(!1)}}}else s=e;return i.memoizedState=i.baseState=s,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=P2.bind(null,Ne,t),[i.memoizedState,t]},useRef:function(t){var e=Nn();return t={current:t},e.memoizedState=t},useState:function(t){t=mg(t);var e=t.queue,n=yA.bind(null,Ne,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:sv,useDeferredValue:function(t,e){var n=Nn();return rv(n,t,e)},useTransition:function(){var t=mg(!1);return t=fA.bind(null,Ne,t.queue,!0,!1),Nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var i=Ne,s=Nn();if(Ye){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),ft===null)throw Error(J(349));Ke&127||Kb(i,e,n)}s.memoizedState=n;var r={value:n,getSnapshot:e};return s.queue=r,mT(Yb.bind(null,i,r,t),[t]),i.flags|=2048,nl(9,{destroy:void 0},Jb.bind(null,i,r,n,e),null),n},useId:function(){var t=Nn(),e=ft.identifierPrefix;if(Ye){var n=$i,i=Gi;n=(i&~(1<<32-oi(i)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Af++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=I2++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:ov,useFormState:fT,useActionState:fT,useOptimistic:function(t){var e=Nn();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=av.bind(null,Ne,!0,n),n.dispatch=e,[t,e]},useMemoCache:tv,useCacheRefresh:function(){return Nn().memoizedState=D2.bind(null,Ne)},useEffectEvent:function(t){var e=Nn(),n={impl:t};return e.memoizedState=n,function(){if(tt&2)throw Error(J(440));return n.impl.apply(void 0,arguments)}}},lv={readContext:vn,use:Ph,useCallback:uA,useContext:vn,useEffect:iv,useImperativeHandle:lA,useInsertionEffect:rA,useLayoutEffect:oA,useMemo:cA,useReducer:$d,useRef:iA,useState:function(){return $d(Ls)},useDebugValue:sv,useDeferredValue:function(t,e){var n=Ft();return dA(n,lt.memoizedState,t,e)},useTransition:function(){var t=$d(Ls)[0],e=Ft().memoizedState;return[typeof t=="boolean"?t:wc(t),e]},useSyncExternalStore:$b,useId:mA,useHostTransitionStatus:ov,useFormState:hT,useActionState:hT,useOptimistic:function(t,e){var n=Ft();return Zb(n,lt,t,e)},useMemoCache:tv,useCacheRefresh:gA};lv.useEffectEvent=sA;var EA={readContext:vn,use:Ph,useCallback:uA,useContext:vn,useEffect:iv,useImperativeHandle:lA,useInsertionEffect:rA,useLayoutEffect:oA,useMemo:cA,useReducer:Wp,useRef:iA,useState:function(){return Wp(Ls)},useDebugValue:sv,useDeferredValue:function(t,e){var n=Ft();return lt===null?rv(n,t,e):dA(n,lt.memoizedState,t,e)},useTransition:function(){var t=Wp(Ls)[0],e=Ft().memoizedState;return[typeof t=="boolean"?t:wc(t),e]},useSyncExternalStore:$b,useId:mA,useHostTransitionStatus:ov,useFormState:pT,useActionState:pT,useOptimistic:function(t,e){var n=Ft();return lt!==null?Zb(n,lt,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:tv,useCacheRefresh:gA};EA.useEffectEvent=sA;function Qp(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:wt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vg={enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ai(),s=Ir(i);s.payload=e,n!=null&&(s.callback=n),e=Mr(t,s,i),e!==null&&(qn(e,t,i),bu(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ai(),s=Ir(i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Mr(t,s,i),e!==null&&(qn(e,t,i),bu(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ai(),i=Ir(n);i.tag=2,e!=null&&(i.callback=e),e=Mr(t,i,n),e!==null&&(qn(e,t,n),bu(e,t,n))}};function gT(t,e,n,i,s,r,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!Yu(n,i)||!Yu(s,r):!0}function yT(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&vg.enqueueReplaceState(e,e.state,null)}function Po(t,e){var n=e;if("ref"in e){n={};for(var i in e)i!=="ref"&&(n[i]=e[i])}if(t=t.defaultProps){n===e&&(n=wt({},n));for(var s in t)n[s]===void 0&&(n[s]=t[s])}return n}function xA(t){_f(t)}function CA(t){console.error(t)}function SA(t){_f(t)}function If(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(i){setTimeout(function(){throw i})}}function vT(t,e,n){try{var i=t.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function _g(t,e,n){return n=Ir(n),n.tag=3,n.payload={element:null},n.callback=function(){If(t,e)},n}function wA(t){return t=Ir(t),t.tag=3,t}function bA(t,e,n,i){var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=i.value;t.payload=function(){return s(r)},t.callback=function(){vT(e,n,i)}}var o=n.stateNode;o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){vT(e,n,i),typeof s!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function V2(t,e,n,i,s){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(e=n.alternate,e!==null&&Tl(e,n,s,!0),n=ci.current,n!==null){switch(n.tag){case 31:case 13:return xi===null?Lf():n.alternate===null&&Lt===0&&(Lt=3),n.flags&=-257,n.flags|=65536,n.lanes=s,i===Cf?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([i]):e.add(i),lm(t,i,s)),!1;case 22:return n.flags|=65536,i===Cf?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([i]):n.add(i)),lm(t,i,s)),!1}throw Error(J(435,n.tag))}return lm(t,i,s),Lf(),!1}if(Ye)return e=ci.current,e!==null?(!(e.flags&65536)&&(e.flags|=256),e.flags|=65536,e.lanes=s,i!==og&&(t=Error(J(422),{cause:i}),Qu(Ti(t,n)))):(i!==og&&(e=Error(J(423),{cause:i}),Qu(Ti(e,n))),t=t.current.alternate,t.flags|=65536,s&=-s,t.lanes|=s,i=Ti(i,n),s=_g(t.stateNode,i,s),Yp(t,s),Lt!==4&&(Lt=2)),!1;var r=Error(J(520),{cause:i});if(r=Ti(r,n),Nu===null?Nu=[r]:Nu.push(r),Lt!==4&&(Lt=2),e===null)return!0;i=Ti(i,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=s&-s,n.lanes|=t,t=_g(n.stateNode,i,t),Yp(n,t),!1;case 1:if(e=n.type,r=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||r!==null&&typeof r.componentDidCatch=="function"&&(Rr===null||!Rr.has(r))))return n.flags|=65536,s&=-s,n.lanes|=s,s=wA(s),bA(s,t,n,i),Yp(n,s),!1}n=n.return}while(n!==null);return!1}var uv=Error(J(461)),Wt=!1;function hn(t,e,n,i){e.child=t===null?Fb(e,null,n,i):Lo(e,t.child,n,i)}function _T(t,e,n,i,s){n=n.render;var r=e.ref;if("ref"in i){var o={};for(var a in i)a!=="ref"&&(o[a]=i[a])}else o=i;return No(e),i=Qy(t,e,n,o,r,s),a=Zy(),t!==null&&!Wt?(Xy(t,e,s),Ds(t,e,s)):(Ye&&a&&qy(e),e.flags|=1,hn(t,e,i,s),e.child)}function TT(t,e,n,i,s){if(t===null){var r=n.type;return typeof r=="function"&&!zy(r)&&r.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=r,AA(t,e,r,i,s)):(t=Hd(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(r=t.child,!cv(t,s)){var o=r.memoizedProps;if(n=n.compare,n=n!==null?n:Yu,n(o,i)&&t.ref===e.ref)return Ds(t,e,s)}return e.flags|=1,t=As(r,i),t.ref=e.ref,t.return=e,e.child=t}function AA(t,e,n,i,s){if(t!==null){var r=t.memoizedProps;if(Yu(r,i)&&t.ref===e.ref)if(Wt=!1,e.pendingProps=i=r,cv(t,s))t.flags&131072&&(Wt=!0);else return e.lanes=t.lanes,Ds(t,e,s)}return Tg(t,e,n,i,s)}function IA(t,e,n,i){var s=i.children,r=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(e.flags&128){if(r=r!==null?r.baseLanes|n:n,t!==null){for(i=e.child=t.child,s=0;i!==null;)s=s|i.lanes|i.childLanes,i=i.sibling;i=s&~r}else i=0,e.child=null;return ET(t,e,r,n,i)}if(n&536870912)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&Gd(e,r!==null?r.cachePool:null),r!==null?uT(e,r):hg(),qb(e);else return i=e.lanes=536870912,ET(t,e,r!==null?r.baseLanes|n:n,n,i)}else r!==null?(Gd(e,r.cachePool),uT(e,r),dr(),e.memoizedState=null):(t!==null&&Gd(e,null),hg(),dr());return hn(t,e,s,n),e.child}function pu(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function ET(t,e,n,i,s){var r=$y();return r=r===null?null:{parent:Kt._currentValue,pool:r},e.memoizedState={baseLanes:n,cachePool:r},t!==null&&Gd(e,null),hg(),qb(e),t!==null&&Tl(t,e,i,!0),e.childLanes=s,null}function Jd(t,e){return e=Mf({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function xT(t,e,n){return Lo(e,t.child,null,n),t=Jd(e,e.pendingProps),t.flags|=2,Qn(e),e.memoizedState=null,t}function U2(t,e,n){var i=e.pendingProps,s=(e.flags&128)!==0;if(e.flags&=-129,t===null){if(Ye){if(i.mode==="hidden")return t=Jd(e,i),e.lanes=536870912,pu(null,t);if(pg(e),(t=xt)?(t=TI(t,Ei),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Fr!==null?{id:Gi,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},n=Lb(t),n.return=e,e.child=n,gn=e,xt=null)):t=null,t===null)throw jr(e);return e.lanes=536870912,null}return Jd(e,i)}var r=t.memoizedState;if(r!==null){var o=r.dehydrated;if(pg(e),s)if(e.flags&256)e.flags&=-257,e=xT(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(J(558));else if(Wt||Tl(t,e,n,!1),s=(n&t.childLanes)!==0,Wt||s){if(i=ft,i!==null&&(o=rb(i,n),o!==0&&o!==r.retryLane))throw r.retryLane=o,Ko(t,o),qn(i,t,o),uv;Lf(),e=xT(t,e,n)}else t=r.treeContext,xt=Ci(o.nextSibling),gn=e,Ye=!0,Ar=null,Ei=!1,t!==null&&Pb(e,t),e=Jd(e,i),e.flags|=4096;return e}return t=As(t.child,{mode:i.mode,children:i.children}),t.ref=e.ref,e.child=t,t.return=e,t}function Yd(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(J(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Tg(t,e,n,i,s){return No(e),n=Qy(t,e,n,i,void 0,s),i=Zy(),t!==null&&!Wt?(Xy(t,e,s),Ds(t,e,s)):(Ye&&i&&qy(e),e.flags|=1,hn(t,e,n,s),e.child)}function CT(t,e,n,i,s,r){return No(e),e.updateQueue=null,n=Gb(e,i,n,s),Hb(t),i=Zy(),t!==null&&!Wt?(Xy(t,e,r),Ds(t,e,r)):(Ye&&i&&qy(e),e.flags|=1,hn(t,e,n,r),e.child)}function ST(t,e,n,i,s){if(No(e),e.stateNode===null){var r=Ia,o=n.contextType;typeof o=="object"&&o!==null&&(r=vn(o)),r=new n(i,r),e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=vg,e.stateNode=r,r._reactInternals=e,r=e.stateNode,r.props=i,r.state=e.memoizedState,r.refs={},Jy(e),o=n.contextType,r.context=typeof o=="object"&&o!==null?vn(o):Ia,r.state=e.memoizedState,o=n.getDerivedStateFromProps,typeof o=="function"&&(Qp(e,n,o,i),r.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(o=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),o!==r.state&&vg.enqueueReplaceState(r,r.state,null),Iu(e,i,r,s),Au(),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!0}else if(t===null){r=e.stateNode;var a=e.memoizedProps,c=Po(n,a);r.props=c;var d=r.context,h=n.contextType;o=Ia,typeof h=="object"&&h!==null&&(o=vn(h));var m=n.getDerivedStateFromProps;h=typeof m=="function"||typeof r.getSnapshotBeforeUpdate=="function",a=e.pendingProps!==a,h||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(a||d!==o)&&yT(e,r,i,o),or=!1;var g=e.memoizedState;r.state=g,Iu(e,i,r,s),Au(),d=e.memoizedState,a||g!==d||or?(typeof m=="function"&&(Qp(e,n,m,i),d=e.memoizedState),(c=or||gT(e,n,c,i,g,d,o))?(h||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount()),typeof r.componentDidMount=="function"&&(e.flags|=4194308)):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),r.props=i,r.state=d,r.context=o,i=c):(typeof r.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{r=e.stateNode,dg(t,e),o=e.memoizedProps,h=Po(n,o),r.props=h,m=e.pendingProps,g=r.context,d=n.contextType,c=Ia,typeof d=="object"&&d!==null&&(c=vn(d)),a=n.getDerivedStateFromProps,(d=typeof a=="function"||typeof r.getSnapshotBeforeUpdate=="function")||typeof r.UNSAFE_componentWillReceiveProps!="function"&&typeof r.componentWillReceiveProps!="function"||(o!==m||g!==c)&&yT(e,r,i,c),or=!1,g=e.memoizedState,r.state=g,Iu(e,i,r,s),Au();var v=e.memoizedState;o!==m||g!==v||or||t!==null&&t.dependencies!==null&&xf(t.dependencies)?(typeof a=="function"&&(Qp(e,n,a,i),v=e.memoizedState),(h=or||gT(e,n,h,i,g,v,c)||t!==null&&t.dependencies!==null&&xf(t.dependencies))?(d||typeof r.UNSAFE_componentWillUpdate!="function"&&typeof r.componentWillUpdate!="function"||(typeof r.componentWillUpdate=="function"&&r.componentWillUpdate(i,v,c),typeof r.UNSAFE_componentWillUpdate=="function"&&r.UNSAFE_componentWillUpdate(i,v,c)),typeof r.componentDidUpdate=="function"&&(e.flags|=4),typeof r.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof r.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),r.props=i,r.state=v,r.context=c,i=h):(typeof r.componentDidUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof r.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),i=!1)}return r=i,Yd(t,e),i=(e.flags&128)!==0,r||i?(r=e.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:r.render(),e.flags|=1,t!==null&&i?(e.child=Lo(e,t.child,null,s),e.child=Lo(e,null,n,s)):hn(t,e,n,s),e.memoizedState=r.state,t=e.child):t=Ds(t,e,s),t}function wT(t,e,n,i){return ko(),e.flags|=256,hn(t,e,n,i),e.child}var Zp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xp(t){return{baseLanes:t,cachePool:Ub()}}function em(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=ti),t}function MA(t,e,n){var i=e.pendingProps,s=!1,r=(e.flags&128)!==0,o;if((o=r)||(o=t!==null&&t.memoizedState===null?!1:(Bt.current&2)!==0),o&&(s=!0,e.flags&=-129),o=(e.flags&32)!==0,e.flags&=-33,t===null){if(Ye){if(s?cr(e):dr(),(t=xt)?(t=TI(t,Ei),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Fr!==null?{id:Gi,overflow:$i}:null,retryLane:536870912,hydrationErrors:null},n=Lb(t),n.return=e,e.child=n,gn=e,xt=null)):t=null,t===null)throw jr(e);return Dg(t)?e.lanes=32:e.lanes=536870912,null}var a=i.children;return i=i.fallback,s?(dr(),s=e.mode,a=Mf({mode:"hidden",children:a},s),i=wo(i,s,n,null),a.return=e,i.return=e,a.sibling=i,e.child=a,i=e.child,i.memoizedState=Xp(n),i.childLanes=em(t,o,n),e.memoizedState=Zp,pu(null,i)):(cr(e),Eg(e,a))}var c=t.memoizedState;if(c!==null&&(a=c.dehydrated,a!==null)){if(r)e.flags&256?(cr(e),e.flags&=-257,e=tm(t,e,n)):e.memoizedState!==null?(dr(),e.child=t.child,e.flags|=128,e=null):(dr(),a=i.fallback,s=e.mode,i=Mf({mode:"visible",children:i.children},s),a=wo(a,s,n,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,Lo(e,t.child,null,n),i=e.child,i.memoizedState=Xp(n),i.childLanes=em(t,o,n),e.memoizedState=Zp,e=pu(null,i));else if(cr(e),Dg(a)){if(o=a.nextSibling&&a.nextSibling.dataset,o)var d=o.dgst;o=d,i=Error(J(419)),i.stack="",i.digest=o,Qu({value:i,source:null,stack:null}),e=tm(t,e,n)}else if(Wt||Tl(t,e,n,!1),o=(n&t.childLanes)!==0,Wt||o){if(o=ft,o!==null&&(i=rb(o,n),i!==0&&i!==c.retryLane))throw c.retryLane=i,Ko(t,i),qn(o,t,i),uv;Lg(a)||Lf(),e=tm(t,e,n)}else Lg(a)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,xt=Ci(a.nextSibling),gn=e,Ye=!0,Ar=null,Ei=!1,t!==null&&Pb(e,t),e=Eg(e,i.children),e.flags|=4096);return e}return s?(dr(),a=i.fallback,s=e.mode,c=t.child,d=c.sibling,i=As(c,{mode:"hidden",children:i.children}),i.subtreeFlags=c.subtreeFlags&65011712,d!==null?a=As(d,a):(a=wo(a,s,n,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,pu(null,i),i=e.child,a=t.child.memoizedState,a===null?a=Xp(n):(s=a.cachePool,s!==null?(c=Kt._currentValue,s=s.parent!==c?{parent:c,pool:c}:s):s=Ub(),a={baseLanes:a.baseLanes|n,cachePool:s}),i.memoizedState=a,i.childLanes=em(t,o,n),e.memoizedState=Zp,pu(t.child,i)):(cr(e),n=t.child,t=n.sibling,n=As(n,{mode:"visible",children:i.children}),n.return=e,n.sibling=null,t!==null&&(o=e.deletions,o===null?(e.deletions=[t],e.flags|=16):o.push(t)),e.child=n,e.memoizedState=null,n)}function Eg(t,e){return e=Mf({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function Mf(t,e){return t=Xn(22,t,null,e),t.lanes=0,t}function tm(t,e,n){return Lo(e,t.child,null,n),t=Eg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function bT(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),lg(t.return,e,n)}function nm(t,e,n,i,s,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s,treeForkCount:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s,o.treeForkCount=r)}function RA(t,e,n){var i=e.pendingProps,s=i.revealOrder,r=i.tail;i=i.children;var o=Bt.current,a=(o&2)!==0;if(a?(o=o&1|2,e.flags|=128):o&=1,yt(Bt,o),hn(t,e,i,n),i=Ye?Wu:0,!a&&t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bT(t,n,e);else if(t.tag===19)bT(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&wf(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),nm(e,!1,s,n,r,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&wf(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}nm(e,!0,n,null,r,i);break;case"together":nm(e,!1,null,null,void 0,i);break;default:e.memoizedState=null}return e.child}function Ds(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),qr|=e.lanes,!(n&e.childLanes))if(t!==null){if(Tl(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=As(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=As(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function cv(t,e){return t.lanes&e?!0:(t=t.dependencies,!!(t!==null&&xf(t)))}function O2(t,e,n){switch(e.tag){case 3:mf(e,e.stateNode.containerInfo),ur(e,Kt,t.memoizedState.cache),ko();break;case 27:case 5:Ym(e);break;case 4:mf(e,e.stateNode.containerInfo);break;case 10:ur(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,pg(e),null;break;case 13:var i=e.memoizedState;if(i!==null)return i.dehydrated!==null?(cr(e),e.flags|=128,null):n&e.child.childLanes?MA(t,e,n):(cr(e),t=Ds(t,e,n),t!==null?t.sibling:null);cr(e);break;case 19:var s=(t.flags&128)!==0;if(i=(n&e.childLanes)!==0,i||(Tl(t,e,n,!1),i=(n&e.childLanes)!==0),s){if(i)return RA(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),yt(Bt,Bt.current),i)break;return null;case 22:return e.lanes=0,IA(t,e,n,e.pendingProps);case 24:ur(e,Kt,t.memoizedState.cache)}return Ds(t,e,n)}function kA(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Wt=!0;else{if(!cv(t,n)&&!(e.flags&128))return Wt=!1,O2(t,e,n);Wt=!!(t.flags&131072)}else Wt=!1,Ye&&e.flags&1048576&&Db(e,Wu,e.index);switch(e.lanes=0,e.tag){case 16:e:{var i=e.pendingProps;if(t=vo(e.elementType),e.type=t,typeof t=="function")zy(t)?(i=Po(t,i),e.tag=1,e=ST(null,e,t,i,n)):(e.tag=0,e=Tg(null,e,t,i,n));else{if(t!=null){var s=t.$$typeof;if(s===Iy){e.tag=11,e=_T(null,e,t,i,n);break e}else if(s===My){e.tag=14,e=TT(null,e,t,i,n);break e}}throw e=Km(t)||t,Error(J(306,e,""))}}return e;case 0:return Tg(t,e,e.type,e.pendingProps,n);case 1:return i=e.type,s=Po(i,e.pendingProps),ST(t,e,i,s,n);case 3:e:{if(mf(e,e.stateNode.containerInfo),t===null)throw Error(J(387));i=e.pendingProps;var r=e.memoizedState;s=r.element,dg(t,e),Iu(e,i,null,n);var o=e.memoizedState;if(i=o.cache,ur(e,Kt,i),i!==r.cache&&ug(e,[Kt],n,!0),Au(),i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){e=wT(t,e,i,n);break e}else if(i!==s){s=Ti(Error(J(424)),e),Qu(s),e=wT(t,e,i,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(xt=Ci(t.firstChild),gn=e,Ye=!0,Ar=null,Ei=!0,n=Fb(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ko(),i===s){e=Ds(t,e,n);break e}hn(t,e,i,n)}e=e.child}return e;case 26:return Yd(t,e),t===null?(n=$T(e.type,null,e.pendingProps,null))?e.memoizedState=n:Ye||(n=e.type,t=e.pendingProps,i=Uf(br.current).createElement(n),i[mn]=e,i[Hn]=t,_n(i,n,t),un(i),e.stateNode=i):e.memoizedState=$T(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Ym(e),t===null&&Ye&&(i=e.stateNode=EI(e.type,e.pendingProps,br.current),gn=e,Ei=!0,s=xt,Zr(e.type)?(Pg=s,xt=Ci(i.firstChild)):xt=s),hn(t,e,e.pendingProps.children,n),Yd(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&Ye&&((s=i=xt)&&(i=pL(i,e.type,e.pendingProps,Ei),i!==null?(e.stateNode=i,gn=e,xt=Ci(i.firstChild),Ei=!1,s=!0):s=!1),s||jr(e)),Ym(e),s=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,i=r.children,kg(s,r)?i=null:o!==null&&kg(s,o)&&(e.flags|=32),e.memoizedState!==null&&(s=Qy(t,e,M2,null,null,n),ic._currentValue=s),Yd(t,e),hn(t,e,i,n),e.child;case 6:return t===null&&Ye&&((t=n=xt)&&(n=mL(n,e.pendingProps,Ei),n!==null?(e.stateNode=n,gn=e,xt=null,t=!0):t=!1),t||jr(e)),null;case 13:return MA(t,e,n);case 4:return mf(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Lo(e,null,i,n):hn(t,e,i,n),e.child;case 11:return _T(t,e,e.type,e.pendingProps,n);case 7:return hn(t,e,e.pendingProps,n),e.child;case 8:return hn(t,e,e.pendingProps.children,n),e.child;case 12:return hn(t,e,e.pendingProps.children,n),e.child;case 10:return i=e.pendingProps,ur(e,e.type,i.value),hn(t,e,i.children,n),e.child;case 9:return s=e.type._context,i=e.pendingProps.children,No(e),s=vn(s),i=i(s),e.flags|=1,hn(t,e,i,n),e.child;case 14:return TT(t,e,e.type,e.pendingProps,n);case 15:return AA(t,e,e.type,e.pendingProps,n);case 19:return RA(t,e,n);case 31:return U2(t,e,n);case 22:return IA(t,e,n,e.pendingProps);case 24:return No(e),i=vn(Kt),t===null?(s=$y(),s===null&&(s=ft,r=Gy(),s.pooledCache=r,r.refCount++,r!==null&&(s.pooledCacheLanes|=n),s=r),e.memoizedState={parent:i,cache:s},Jy(e),ur(e,Kt,s)):(t.lanes&n&&(dg(t,e),Iu(e,null,null,n),Au()),s=t.memoizedState,r=e.memoizedState,s.parent!==i?(s={parent:i,cache:i},e.memoizedState=s,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=s),ur(e,Kt,i)):(i=r.cache,ur(e,Kt,i),i!==s.cache&&ug(e,[Kt],n,!0))),hn(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(J(156,e.tag))}function ps(t){t.flags|=4}function im(t,e,n,i,s){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(s&335544128)===s)if(t.stateNode.complete)t.flags|=8192;else if(tI())t.flags|=8192;else throw Ao=Cf,Ky}else t.flags&=-16777217}function AT(t,e){if(e.type!=="stylesheet"||e.state.loading&4)t.flags&=-16777217;else if(t.flags|=16777216,!SI(e))if(tI())t.flags|=8192;else throw Ao=Cf,Ky}function gd(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?nb():536870912,t.lanes|=e,il|=e)}function nu(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Tt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function B2(t,e,n){var i=e.pendingProps;switch(Hy(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(e),null;case 1:return Tt(e),null;case 3:return n=e.stateNode,i=null,t!==null&&(i=t.memoizedState.cache),e.memoizedState.cache!==i&&(e.flags|=2048),Is(Kt),Qa(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ra(e)?ps(e):t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jp())),Tt(e),null;case 26:var s=e.type,r=e.memoizedState;return t===null?(ps(e),r!==null?(Tt(e),AT(e,r)):(Tt(e),im(e,s,null,i,n))):r?r!==t.memoizedState?(ps(e),Tt(e),AT(e,r)):(Tt(e),e.flags&=-16777217):(t=t.memoizedProps,t!==i&&ps(e),Tt(e),im(e,s,t,i,n)),null;case 27:if(gf(e),n=br.current,s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&ps(e);else{if(!i){if(e.stateNode===null)throw Error(J(166));return Tt(e),null}t=Yi.current,ra(e)?nT(e):(t=EI(s,i,n),e.stateNode=t,ps(e))}return Tt(e),null;case 5:if(gf(e),s=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==i&&ps(e);else{if(!i){if(e.stateNode===null)throw Error(J(166));return Tt(e),null}if(r=Yi.current,ra(e))nT(e);else{var o=Uf(br.current);switch(r){case 1:r=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:r=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":r=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":r=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":r=o.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild);break;case"select":r=typeof i.is=="string"?o.createElement("select",{is:i.is}):o.createElement("select"),i.multiple?r.multiple=!0:i.size&&(r.size=i.size);break;default:r=typeof i.is=="string"?o.createElement(s,{is:i.is}):o.createElement(s)}}r[mn]=e,r[Hn]=i;e:for(o=e.child;o!==null;){if(o.tag===5||o.tag===6)r.appendChild(o.stateNode);else if(o.tag!==4&&o.tag!==27&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===e)break e;for(;o.sibling===null;){if(o.return===null||o.return===e)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}e.stateNode=r;e:switch(_n(r,s,i),s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ps(e)}}return Tt(e),im(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==i&&ps(e);else{if(typeof i!="string"&&e.stateNode===null)throw Error(J(166));if(t=br.current,ra(e)){if(t=e.stateNode,n=e.memoizedProps,i=null,s=gn,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}t[mn]=e,t=!!(t.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||yI(t.nodeValue,n)),t||jr(e,!0)}else t=Uf(t).createTextNode(i),t[mn]=e,e.stateNode=t}return Tt(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(i=ra(e),n!==null){if(t===null){if(!i)throw Error(J(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(557));t[mn]=e}else ko(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Tt(e),t=!1}else n=Jp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Qn(e),e):(Qn(e),null);if(e.flags&128)throw Error(J(558))}return Tt(e),null;case 13:if(i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(s=ra(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[mn]=e}else ko(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Tt(e),s=!1}else s=Jp(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),s=!0;if(!s)return e.flags&256?(Qn(e),e):(Qn(e),null)}return Qn(e),e.flags&128?(e.lanes=n,e):(n=i!==null,t=t!==null&&t.memoizedState!==null,n&&(i=e.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool),r=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(r=i.memoizedState.cachePool.pool),r!==s&&(i.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),gd(e,e.updateQueue),Tt(e),null);case 4:return Qa(),t===null&&yv(e.stateNode.containerInfo),Tt(e),null;case 10:return Is(e.type),Tt(e),null;case 19:if(dn(Bt),i=e.memoizedState,i===null)return Tt(e),null;if(s=(e.flags&128)!==0,r=i.rendering,r===null)if(s)nu(i,!1);else{if(Lt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(r=wf(t),r!==null){for(e.flags|=128,nu(i,!1),t=r.updateQueue,e.updateQueue=t,gd(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)Nb(n,t),n=n.sibling;return yt(Bt,Bt.current&1|2),Ye&&_s(e,i.treeForkCount),e.child}t=t.sibling}i.tail!==null&&si()>kf&&(e.flags|=128,s=!0,nu(i,!1),e.lanes=4194304)}else{if(!s)if(t=wf(r),t!==null){if(e.flags|=128,s=!0,t=t.updateQueue,e.updateQueue=t,gd(e,t),nu(i,!0),i.tail===null&&i.tailMode==="hidden"&&!r.alternate&&!Ye)return Tt(e),null}else 2*si()-i.renderingStartTime>kf&&n!==536870912&&(e.flags|=128,s=!0,nu(i,!1),e.lanes=4194304);i.isBackwards?(r.sibling=e.child,e.child=r):(t=i.last,t!==null?t.sibling=r:e.child=r,i.last=r)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=si(),t.sibling=null,n=Bt.current,yt(Bt,s?n&1|2:n&1),Ye&&_s(e,i.treeForkCount),t):(Tt(e),null);case 22:case 23:return Qn(e),Yy(),i=e.memoizedState!==null,t!==null?t.memoizedState!==null!==i&&(e.flags|=8192):i&&(e.flags|=8192),i?n&536870912&&!(e.flags&128)&&(Tt(e),e.subtreeFlags&6&&(e.flags|=8192)):Tt(e),n=e.updateQueue,n!==null&&gd(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),i=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(i=e.memoizedState.cachePool.pool),i!==n&&(e.flags|=2048),t!==null&&dn(bo),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Is(Kt),Tt(e),null;case 25:return null;case 30:return null}throw Error(J(156,e.tag))}function F2(t,e){switch(Hy(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Is(Kt),Qa(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return gf(e),null;case 31:if(e.memoizedState!==null){if(Qn(e),e.alternate===null)throw Error(J(340));ko()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Qn(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));ko()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return dn(Bt),null;case 4:return Qa(),null;case 10:return Is(e.type),null;case 22:case 23:return Qn(e),Yy(),t!==null&&dn(bo),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Is(Kt),null;case 25:return null;default:return null}}function NA(t,e){switch(Hy(e),e.tag){case 3:Is(Kt),Qa();break;case 26:case 27:case 5:gf(e);break;case 4:Qa();break;case 31:e.memoizedState!==null&&Qn(e);break;case 13:Qn(e);break;case 19:dn(Bt);break;case 10:Is(e.type);break;case 22:case 23:Qn(e),Yy(),t!==null&&dn(bo);break;case 24:Is(Kt)}}function bc(t,e){try{var n=e.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var s=i.next;n=s;do{if((n.tag&t)===t){i=void 0;var r=n.create,o=n.inst;i=r(),o.destroy=i}n=n.next}while(n!==s)}}catch(a){ot(e,e.return,a)}}function zr(t,e,n){try{var i=e.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var r=s.next;i=r;do{if((i.tag&t)===t){var o=i.inst,a=o.destroy;if(a!==void 0){o.destroy=void 0,s=e;var c=n,d=a;try{d()}catch(h){ot(s,c,h)}}}i=i.next}while(i!==r)}}catch(h){ot(e,e.return,h)}}function LA(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{zb(e,n)}catch(i){ot(t,t.return,i)}}}function DA(t,e,n){n.props=Po(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(i){ot(t,e,i)}}function Ru(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var i=t.stateNode;break;case 30:i=t.stateNode;break;default:i=t.stateNode}typeof n=="function"?t.refCleanup=n(i):n.current=i}}catch(s){ot(t,e,s)}}function Ki(t,e){var n=t.ref,i=t.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(s){ot(t,e,s)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(s){ot(t,e,s)}else n.current=null}function PA(t){var e=t.type,n=t.memoizedProps,i=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(s){ot(t,t.return,s)}}function sm(t,e,n){try{var i=t.stateNode;lL(i,t.type,n,e),i[Hn]=e}catch(s){ot(t,t.return,s)}}function VA(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Zr(t.type)||t.tag===4}function rm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||VA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Zr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cs));else if(i!==4&&(i===27&&Zr(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(xg(t,e,n),t=t.sibling;t!==null;)xg(t,e,n),t=t.sibling}function Rf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(i===27&&Zr(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Rf(t,e,n),t=t.sibling;t!==null;)Rf(t,e,n),t=t.sibling}function UA(t){var e=t.stateNode,n=t.memoizedProps;try{for(var i=t.type,s=e.attributes;s.length;)e.removeAttributeNode(s[0]);_n(e,i,n),e[mn]=t,e[Hn]=n}catch(r){ot(t,t.return,r)}}var Ts=!1,$t=!1,om=!1,IT=typeof WeakSet=="function"?WeakSet:Set,ln=null;function j2(t,e){if(t=t.containerInfo,Mg=jf,t=Sb(t),By(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{n.nodeType,r.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,d=0,h=0,m=t,g=null;t:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(a=o+s),m!==r||i!==0&&m.nodeType!==3||(c=o+i),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)g=m,m=v;for(;;){if(m===t)break t;if(g===n&&++d===s&&(a=o),g===r&&++h===i&&(c=o),(v=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=v}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rg={focusedElem:t,selectionRange:n},jf=!1,ln=e;ln!==null;)if(e=ln,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ln=t;else for(;ln!==null;){switch(e=ln,r=e.alternate,t=e.flags,e.tag){case 0:if(t&4&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)s=t[n],s.ref.impl=s.nextImpl;break;case 11:case 15:break;case 1:if(t&1024&&r!==null){t=void 0,n=e,s=r.memoizedProps,r=r.memoizedState,i=n.stateNode;try{var T=Po(n.type,s);t=i.getSnapshotBeforeUpdate(T,r),i.__reactInternalSnapshotBeforeUpdate=t}catch(w){ot(n,n.return,w)}}break;case 3:if(t&1024){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Ng(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ng(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(t&1024)throw Error(J(163))}if(t=e.sibling,t!==null){t.return=e.return,ln=t;break}ln=e.return}}function OA(t,e,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:gs(t,n),i&4&&bc(5,n);break;case 1:if(gs(t,n),i&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(o){ot(n,n.return,o)}else{var s=Po(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(s,e,t.__reactInternalSnapshotBeforeUpdate)}catch(o){ot(n,n.return,o)}}i&64&&LA(n),i&512&&Ru(n,n.return);break;case 3:if(gs(t,n),i&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{zb(t,e)}catch(o){ot(n,n.return,o)}}break;case 27:e===null&&i&4&&UA(n);case 26:case 5:gs(t,n),e===null&&i&4&&PA(n),i&512&&Ru(n,n.return);break;case 12:gs(t,n);break;case 31:gs(t,n),i&4&&jA(t,n);break;case 13:gs(t,n),i&4&&zA(t,n),i&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=W2.bind(null,n),gL(t,n))));break;case 22:if(i=n.memoizedState!==null||Ts,!i){e=e!==null&&e.memoizedState!==null||$t,s=Ts;var r=$t;Ts=i,($t=e)&&!r?ys(t,n,(n.subtreeFlags&8772)!==0):gs(t,n),Ts=s,$t=r}break;case 30:break;default:gs(t,n)}}function BA(t){var e=t.alternate;e!==null&&(t.alternate=null,BA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&Ly(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var bt=null,Bn=!1;function ms(t,e,n){for(n=n.child;n!==null;)FA(t,e,n),n=n.sibling}function FA(t,e,n){if(ri&&typeof ri.onCommitFiberUnmount=="function")try{ri.onCommitFiberUnmount(_c,n)}catch{}switch(n.tag){case 26:$t||Ki(n,e),ms(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:$t||Ki(n,e);var i=bt,s=Bn;Zr(n.type)&&(bt=n.stateNode,Bn=!1),ms(t,e,n),Du(n.stateNode),bt=i,Bn=s;break;case 5:$t||Ki(n,e);case 6:if(i=bt,s=Bn,bt=null,ms(t,e,n),bt=i,Bn=s,bt!==null)if(Bn)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(n.stateNode)}catch(r){ot(n,e,r)}else try{bt.removeChild(n.stateNode)}catch(r){ot(n,e,r)}break;case 18:bt!==null&&(Bn?(t=bt,jT(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),al(t)):jT(bt,n.stateNode));break;case 4:i=bt,s=Bn,bt=n.stateNode.containerInfo,Bn=!0,ms(t,e,n),bt=i,Bn=s;break;case 0:case 11:case 14:case 15:zr(2,n,e),$t||zr(4,n,e),ms(t,e,n);break;case 1:$t||(Ki(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"&&DA(n,e,i)),ms(t,e,n);break;case 21:ms(t,e,n);break;case 22:$t=(i=$t)||n.memoizedState!==null,ms(t,e,n),$t=i;break;default:ms(t,e,n)}}function jA(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{al(t)}catch(n){ot(e,e.return,n)}}}function zA(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{al(t)}catch(n){ot(e,e.return,n)}}function z2(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new IT),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new IT),e;default:throw Error(J(435,t.tag))}}function yd(t,e){var n=z2(t);e.forEach(function(i){if(!n.has(i)){n.add(i);var s=Q2.bind(null,t,i);i.then(s,s)}})}function Un(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i],r=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 27:if(Zr(a.type)){bt=a.stateNode,Bn=!1;break e}break;case 5:bt=a.stateNode,Bn=!1;break e;case 3:case 4:bt=a.stateNode.containerInfo,Bn=!0;break e}a=a.return}if(bt===null)throw Error(J(160));FA(r,o,s),bt=null,Bn=!1,r=s.alternate,r!==null&&(r.return=null),s.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)qA(e,t),e=e.sibling}var Ri=null;function qA(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Un(e,t),On(t),i&4&&(zr(3,t,t.return),bc(3,t),zr(5,t,t.return));break;case 1:Un(e,t),On(t),i&512&&($t||n===null||Ki(n,n.return)),i&64&&Ts&&(t=t.updateQueue,t!==null&&(i=t.callbacks,i!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var s=Ri;if(Un(e,t),On(t),i&512&&($t||n===null||Ki(n,n.return)),i&4){var r=n!==null?n.memoizedState:null;if(i=t.memoizedState,n===null)if(i===null)if(t.stateNode===null){e:{i=t.type,n=t.memoizedProps,s=s.ownerDocument||s;t:switch(i){case"title":r=s.getElementsByTagName("title")[0],(!r||r[xc]||r[mn]||r.namespaceURI==="http://www.w3.org/2000/svg"||r.hasAttribute("itemprop"))&&(r=s.createElement(i),s.head.insertBefore(r,s.querySelector("head > title"))),_n(r,i,n),r[mn]=t,un(r),i=r;break e;case"link":var o=JT("link","href",s).get(i+(n.href||""));if(o){for(var a=0;a<o.length;a++)if(r=o[a],r.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&r.getAttribute("rel")===(n.rel==null?null:n.rel)&&r.getAttribute("title")===(n.title==null?null:n.title)&&r.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){o.splice(a,1);break t}}r=s.createElement(i),_n(r,i,n),s.head.appendChild(r);break;case"meta":if(o=JT("meta","content",s).get(i+(n.content||""))){for(a=0;a<o.length;a++)if(r=o[a],r.getAttribute("content")===(n.content==null?null:""+n.content)&&r.getAttribute("name")===(n.name==null?null:n.name)&&r.getAttribute("property")===(n.property==null?null:n.property)&&r.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&r.getAttribute("charset")===(n.charSet==null?null:n.charSet)){o.splice(a,1);break t}}r=s.createElement(i),_n(r,i,n),s.head.appendChild(r);break;default:throw Error(J(468,i))}r[mn]=t,un(r),i=r}t.stateNode=i}else YT(s,t.type,t.stateNode);else t.stateNode=KT(s,i,t.memoizedProps);else r!==i?(r===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):r.count--,i===null?YT(s,t.type,t.stateNode):KT(s,i,t.memoizedProps)):i===null&&t.stateNode!==null&&sm(t,t.memoizedProps,n.memoizedProps)}break;case 27:Un(e,t),On(t),i&512&&($t||n===null||Ki(n,n.return)),n!==null&&i&4&&sm(t,t.memoizedProps,n.memoizedProps);break;case 5:if(Un(e,t),On(t),i&512&&($t||n===null||Ki(n,n.return)),t.flags&32){s=t.stateNode;try{Xa(s,"")}catch(T){ot(t,t.return,T)}}i&4&&t.stateNode!=null&&(s=t.memoizedProps,sm(t,s,n!==null?n.memoizedProps:s)),i&1024&&(om=!0);break;case 6:if(Un(e,t),On(t),i&4){if(t.stateNode===null)throw Error(J(162));i=t.memoizedProps,n=t.stateNode;try{n.nodeValue=i}catch(T){ot(t,t.return,T)}}break;case 3:if(Zd=null,s=Ri,Ri=Of(e.containerInfo),Un(e,t),Ri=s,On(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{al(e.containerInfo)}catch(T){ot(t,t.return,T)}om&&(om=!1,HA(t));break;case 4:i=Ri,Ri=Of(t.stateNode.containerInfo),Un(e,t),On(t),Ri=i;break;case 12:Un(e,t),On(t);break;case 31:Un(e,t),On(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,yd(t,i)));break;case 13:Un(e,t),On(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(Oh=si()),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,yd(t,i)));break;case 22:s=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,d=Ts,h=$t;if(Ts=d||s,$t=h||c,Un(e,t),$t=h,Ts=d,On(t),i&8192)e:for(e=t.stateNode,e._visibility=s?e._visibility&-2:e._visibility|1,s&&(n===null||c||Ts||$t||_o(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(r=c.stateNode,s)o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none";else{a=c.stateNode;var m=c.memoizedProps.style,g=m!=null&&m.hasOwnProperty("display")?m.display:null;a.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(T){ot(c,c.return,T)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(T){ot(c,c.return,T)}}}else if(e.tag===18){if(n===null){c=e;try{var v=c.stateNode;s?zT(v,!0):zT(c.stateNode,!1)}catch(T){ot(c,c.return,T)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}i&4&&(i=t.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,yd(t,n))));break;case 19:Un(e,t),On(t),i&4&&(i=t.updateQueue,i!==null&&(t.updateQueue=null,yd(t,i)));break;case 30:break;case 21:break;default:Un(e,t),On(t)}}function On(t){var e=t.flags;if(e&2){try{for(var n,i=t.return;i!==null;){if(VA(i)){n=i;break}i=i.return}if(n==null)throw Error(J(160));switch(n.tag){case 27:var s=n.stateNode,r=rm(t);Rf(t,r,s);break;case 5:var o=n.stateNode;n.flags&32&&(Xa(o,""),n.flags&=-33);var a=rm(t);Rf(t,a,o);break;case 3:case 4:var c=n.stateNode.containerInfo,d=rm(t);xg(t,d,c);break;default:throw Error(J(161))}}catch(h){ot(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HA(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;HA(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function gs(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)OA(t,e.alternate,e),e=e.sibling}function _o(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:zr(4,e,e.return),_o(e);break;case 1:Ki(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&DA(e,e.return,n),_o(e);break;case 27:Du(e.stateNode);case 26:case 5:Ki(e,e.return),_o(e);break;case 22:e.memoizedState===null&&_o(e);break;case 30:_o(e);break;default:_o(e)}t=t.sibling}}function ys(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var i=e.alternate,s=t,r=e,o=r.flags;switch(r.tag){case 0:case 11:case 15:ys(s,r,n),bc(4,r);break;case 1:if(ys(s,r,n),i=r,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(d){ot(i,i.return,d)}if(i=r,s=i.updateQueue,s!==null){var a=i.stateNode;try{var c=s.shared.hiddenCallbacks;if(c!==null)for(s.shared.hiddenCallbacks=null,s=0;s<c.length;s++)jb(c[s],a)}catch(d){ot(i,i.return,d)}}n&&o&64&&LA(r),Ru(r,r.return);break;case 27:UA(r);case 26:case 5:ys(s,r,n),n&&i===null&&o&4&&PA(r),Ru(r,r.return);break;case 12:ys(s,r,n);break;case 31:ys(s,r,n),n&&o&4&&jA(s,r);break;case 13:ys(s,r,n),n&&o&4&&zA(s,r);break;case 22:r.memoizedState===null&&ys(s,r,n),Ru(r,r.return);break;case 30:break;default:ys(s,r,n)}e=e.sibling}}function dv(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&Sc(n))}function fv(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Sc(t))}function Mi(t,e,n,i){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)GA(t,e,n,i),e=e.sibling}function GA(t,e,n,i){var s=e.flags;switch(e.tag){case 0:case 11:case 15:Mi(t,e,n,i),s&2048&&bc(9,e);break;case 1:Mi(t,e,n,i);break;case 3:Mi(t,e,n,i),s&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&Sc(t)));break;case 12:if(s&2048){Mi(t,e,n,i),t=e.stateNode;try{var r=e.memoizedProps,o=r.id,a=r.onPostCommit;typeof a=="function"&&a(o,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){ot(e,e.return,c)}}else Mi(t,e,n,i);break;case 31:Mi(t,e,n,i);break;case 13:Mi(t,e,n,i);break;case 23:break;case 22:r=e.stateNode,o=e.alternate,e.memoizedState!==null?r._visibility&2?Mi(t,e,n,i):ku(t,e):r._visibility&2?Mi(t,e,n,i):(r._visibility|=2,fa(t,e,n,i,(e.subtreeFlags&10256)!==0||!1)),s&2048&&dv(o,e);break;case 24:Mi(t,e,n,i),s&2048&&fv(e.alternate,e);break;default:Mi(t,e,n,i)}}function fa(t,e,n,i,s){for(s=s&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var r=t,o=e,a=n,c=i,d=o.flags;switch(o.tag){case 0:case 11:case 15:fa(r,o,a,c,s),bc(8,o);break;case 23:break;case 22:var h=o.stateNode;o.memoizedState!==null?h._visibility&2?fa(r,o,a,c,s):ku(r,o):(h._visibility|=2,fa(r,o,a,c,s)),s&&d&2048&&dv(o.alternate,o);break;case 24:fa(r,o,a,c,s),s&&d&2048&&fv(o.alternate,o);break;default:fa(r,o,a,c,s)}e=e.sibling}}function ku(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,i=e,s=i.flags;switch(i.tag){case 22:ku(n,i),s&2048&&dv(i.alternate,i);break;case 24:ku(n,i),s&2048&&fv(i.alternate,i);break;default:ku(n,i)}e=e.sibling}}var mu=8192;function oa(t,e,n){if(t.subtreeFlags&mu)for(t=t.child;t!==null;)$A(t,e,n),t=t.sibling}function $A(t,e,n){switch(t.tag){case 26:oa(t,e,n),t.flags&mu&&t.memoizedState!==null&&IL(n,Ri,t.memoizedState,t.memoizedProps);break;case 5:oa(t,e,n);break;case 3:case 4:var i=Ri;Ri=Of(t.stateNode.containerInfo),oa(t,e,n),Ri=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=mu,mu=16777216,oa(t,e,n),mu=i):oa(t,e,n));break;default:oa(t,e,n)}}function KA(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function iu(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];ln=i,YA(i,t)}KA(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)JA(t),t=t.sibling}function JA(t){switch(t.tag){case 0:case 11:case 15:iu(t),t.flags&2048&&zr(9,t,t.return);break;case 3:iu(t);break;case 12:iu(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Wd(t)):iu(t);break;default:iu(t)}}function Wd(t){var e=t.deletions;if(t.flags&16){if(e!==null)for(var n=0;n<e.length;n++){var i=e[n];ln=i,YA(i,t)}KA(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:zr(8,e,e.return),Wd(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Wd(e));break;default:Wd(e)}t=t.sibling}}function YA(t,e){for(;ln!==null;){var n=ln;switch(n.tag){case 0:case 11:case 15:zr(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Sc(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,ln=i;else e:for(n=t;ln!==null;){i=ln;var s=i.sibling,r=i.return;if(BA(i),i===n){ln=null;break e}if(s!==null){s.return=r,ln=s;break e}ln=r}}}var q2={getCacheForType:function(t){var e=vn(Kt),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return vn(Kt).controller.signal}},H2=typeof WeakMap=="function"?WeakMap:Map,tt=0,ft=null,je=null,Ke=0,rt=0,Wn=null,_r=!1,xl=!1,hv=!1,Ps=0,Lt=0,qr=0,Io=0,pv=0,ti=0,il=0,Nu=null,Fn=null,Cg=!1,Oh=0,WA=0,kf=1/0,Nf=null,Rr=null,en=0,kr=null,sl=null,Ms=0,Sg=0,wg=null,QA=null,Lu=0,bg=null;function ai(){return tt&2&&Ke!==0?Ke&-Ke:Ie.T!==null?gv():ob()}function ZA(){if(ti===0)if(!(Ke&536870912)||Ye){var t=ud;ud<<=1,!(ud&3932160)&&(ud=262144),ti=t}else ti=536870912;return t=ci.current,t!==null&&(t.flags|=32),ti}function qn(t,e,n){(t===ft&&(rt===2||rt===9)||t.cancelPendingCommit!==null)&&(rl(t,0),Tr(t,Ke,ti,!1)),Ec(t,n),(!(tt&2)||t!==ft)&&(t===ft&&(!(tt&2)&&(Io|=n),Lt===4&&Tr(t,Ke,ti,!1)),rs(t))}function XA(t,e,n){if(tt&6)throw Error(J(327));var i=!n&&(e&127)===0&&(e&t.expiredLanes)===0||Tc(t,e),s=i?K2(t,e):am(t,e,!0),r=i;do{if(s===0){xl&&!i&&Tr(t,e,0,!1);break}else{if(n=t.current.alternate,r&&!G2(n)){s=am(t,e,!1),r=!1;continue}if(s===2){if(r=e,t.errorRecoveryDisabledLanes&r)var o=0;else o=t.pendingLanes&-536870913,o=o!==0?o:o&536870912?536870912:0;if(o!==0){e=o;e:{var a=t;s=Nu;var c=a.current.memoizedState.isDehydrated;if(c&&(rl(a,o).flags|=256),o=am(a,o,!1),o!==2){if(hv&&!c){a.errorRecoveryDisabledLanes|=r,Io|=r,s=4;break e}r=Fn,Fn=s,r!==null&&(Fn===null?Fn=r:Fn.push.apply(Fn,r))}s=o}if(r=!1,s!==2)continue}}if(s===1){rl(t,0),Tr(t,e,0,!0);break}e:{switch(i=t,r=s,r){case 0:case 1:throw Error(J(345));case 4:if((e&4194048)!==e)break;case 6:Tr(i,e,ti,!_r);break e;case 2:Fn=null;break;case 3:case 5:break;default:throw Error(J(329))}if((e&62914560)===e&&(s=Oh+300-si(),10<s)){if(Tr(i,e,ti,!_r),Ah(i,0,!0)!==0)break e;Ms=e,i.timeoutHandle=_I(MT.bind(null,i,n,Fn,Nf,Cg,e,ti,Io,il,_r,r,"Throttled",-0,0),s);break e}MT(i,n,Fn,Nf,Cg,e,ti,Io,il,_r,r,null,-0,0)}}break}while(!0);rs(t)}function MT(t,e,n,i,s,r,o,a,c,d,h,m,g,v){if(t.timeoutHandle=-1,m=e.subtreeFlags,m&8192||(m&16785408)===16785408){m={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Cs},$A(e,r,m);var T=(r&62914560)===r?Oh-si():(r&4194048)===r?WA-si():0;if(T=ML(m,T),T!==null){Ms=r,t.cancelPendingCommit=T(kT.bind(null,t,e,r,n,i,s,o,a,c,h,m,null,g,v)),Tr(t,r,o,!d);return}}kT(t,e,r,n,i,s,o,a,c)}function G2(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var s=n[i],r=s.getSnapshot;s=s.value;try{if(!ui(r(),s))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tr(t,e,n,i){e&=~pv,e&=~Io,t.suspendedLanes|=e,t.pingedLanes&=~e,i&&(t.warmLanes|=e),i=t.expirationTimes;for(var s=e;0<s;){var r=31-oi(s),o=1<<r;i[r]=-1,s&=~o}n!==0&&ib(t,n,e)}function Bh(){return tt&6?!0:(Ac(0),!1)}function mv(){if(je!==null){if(rt===0)var t=je.return;else t=je,Ss=Jo=null,ev(t),Ba=null,Zu=0,t=je;for(;t!==null;)NA(t.alternate,t),t=t.return;je=null}}function rl(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,dL(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),Ms=0,mv(),ft=t,je=n=As(t.current,null),Ke=e,rt=0,Wn=null,_r=!1,xl=Tc(t,e),hv=!1,il=ti=pv=Io=qr=Lt=0,Fn=Nu=null,Cg=!1,e&8&&(e|=e&32);var i=t.entangledLanes;if(i!==0)for(t=t.entanglements,i&=e;0<i;){var s=31-oi(i),r=1<<s;e|=t[s],i&=~r}return Ps=e,kh(),n}function eI(t,e){Ne=null,Ie.H=ec,e===El||e===Lh?(e=aT(),rt=3):e===Ky?(e=aT(),rt=4):rt=e===uv?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Wn=e,je===null&&(Lt=1,If(t,Ti(e,t.current)))}function tI(){var t=ci.current;return t===null?!0:(Ke&4194048)===Ke?xi===null:(Ke&62914560)===Ke||Ke&536870912?t===xi:!1}function nI(){var t=Ie.H;return Ie.H=ec,t===null?ec:t}function iI(){var t=Ie.A;return Ie.A=q2,t}function Lf(){Lt=4,_r||(Ke&4194048)!==Ke&&ci.current!==null||(xl=!0),!(qr&134217727)&&!(Io&134217727)||ft===null||Tr(ft,Ke,ti,!1)}function am(t,e,n){var i=tt;tt|=2;var s=nI(),r=iI();(ft!==t||Ke!==e)&&(Nf=null,rl(t,e)),e=!1;var o=Lt;e:do try{if(rt!==0&&je!==null){var a=je,c=Wn;switch(rt){case 8:mv(),o=6;break e;case 3:case 2:case 9:case 6:ci.current===null&&(e=!0);var d=rt;if(rt=0,Wn=null,ka(t,a,c,d),n&&xl){o=0;break e}break;default:d=rt,rt=0,Wn=null,ka(t,a,c,d)}}$2(),o=Lt;break}catch(h){eI(t,h)}while(!0);return e&&t.shellSuspendCounter++,Ss=Jo=null,tt=i,Ie.H=s,Ie.A=r,je===null&&(ft=null,Ke=0,kh()),o}function $2(){for(;je!==null;)sI(je)}function K2(t,e){var n=tt;tt|=2;var i=nI(),s=iI();ft!==t||Ke!==e?(Nf=null,kf=si()+500,rl(t,e)):xl=Tc(t,e);e:do try{if(rt!==0&&je!==null){e=je;var r=Wn;t:switch(rt){case 1:rt=0,Wn=null,ka(t,e,r,1);break;case 2:case 9:if(oT(r)){rt=0,Wn=null,RT(e);break}e=function(){rt!==2&&rt!==9||ft!==t||(rt=7),rs(t)},r.then(e,e);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:oT(r)?(rt=0,Wn=null,RT(e)):(rt=0,Wn=null,ka(t,e,r,7));break;case 5:var o=null;switch(je.tag){case 26:o=je.memoizedState;case 5:case 27:var a=je;if(o?SI(o):a.stateNode.complete){rt=0,Wn=null;var c=a.sibling;if(c!==null)je=c;else{var d=a.return;d!==null?(je=d,Fh(d)):je=null}break t}}rt=0,Wn=null,ka(t,e,r,5);break;case 6:rt=0,Wn=null,ka(t,e,r,6);break;case 8:mv(),Lt=6;break e;default:throw Error(J(462))}}J2();break}catch(h){eI(t,h)}while(!0);return Ss=Jo=null,Ie.H=i,Ie.A=s,tt=n,je!==null?0:(ft=null,Ke=0,kh(),Lt)}function J2(){for(;je!==null&&!yN();)sI(je)}function sI(t){var e=kA(t.alternate,t,Ps);t.memoizedProps=t.pendingProps,e===null?Fh(t):je=e}function RT(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=CT(n,e,e.pendingProps,e.type,void 0,Ke);break;case 11:e=CT(n,e,e.pendingProps,e.type.render,e.ref,Ke);break;case 5:ev(e);default:NA(n,e),e=je=Nb(e,Ps),e=kA(n,e,Ps)}t.memoizedProps=t.pendingProps,e===null?Fh(t):je=e}function ka(t,e,n,i){Ss=Jo=null,ev(e),Ba=null,Zu=0;var s=e.return;try{if(V2(t,s,e,n,Ke)){Lt=1,If(t,Ti(n,t.current)),je=null;return}}catch(r){if(s!==null)throw je=s,r;Lt=1,If(t,Ti(n,t.current)),je=null;return}e.flags&32768?(Ye||i===1?t=!0:xl||Ke&536870912?t=!1:(_r=t=!0,(i===2||i===9||i===3||i===6)&&(i=ci.current,i!==null&&i.tag===13&&(i.flags|=16384))),rI(e,t)):Fh(e)}function Fh(t){var e=t;do{if(e.flags&32768){rI(e,_r);return}t=e.return;var n=B2(e.alternate,e,Ps);if(n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Lt===0&&(Lt=5)}function rI(t,e){do{var n=F2(t.alternate,t);if(n!==null){n.flags&=32767,je=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){je=t;return}je=t=n}while(t!==null);Lt=6,je=null}function kT(t,e,n,i,s,r,o,a,c){t.cancelPendingCommit=null;do jh();while(en!==0);if(tt&6)throw Error(J(327));if(e!==null){if(e===t.current)throw Error(J(177));if(r=e.lanes|e.childLanes,r|=Fy,AN(t,n,r,o,a,c),t===ft&&(je=ft=null,Ke=0),sl=e,kr=t,Ms=n,Sg=r,wg=s,QA=i,e.subtreeFlags&10256||e.flags&10256?(t.callbackNode=null,t.callbackPriority=0,Z2(yf,function(){return cI(),null})):(t.callbackNode=null,t.callbackPriority=0),i=(e.flags&13878)!==0,e.subtreeFlags&13878||i){i=Ie.T,Ie.T=null,s=nt.p,nt.p=2,o=tt,tt|=4;try{j2(t,e,n)}finally{tt=o,nt.p=s,Ie.T=i}}en=1,oI(),aI(),lI()}}function oI(){if(en===1){en=0;var t=kr,e=sl,n=(e.flags&13878)!==0;if(e.subtreeFlags&13878||n){n=Ie.T,Ie.T=null;var i=nt.p;nt.p=2;var s=tt;tt|=4;try{qA(e,t);var r=Rg,o=Sb(t.containerInfo),a=r.focusedElem,c=r.selectionRange;if(o!==a&&a&&a.ownerDocument&&Cb(a.ownerDocument.documentElement,a)){if(c!==null&&By(a)){var d=c.start,h=c.end;if(h===void 0&&(h=d),"selectionStart"in a)a.selectionStart=d,a.selectionEnd=Math.min(h,a.value.length);else{var m=a.ownerDocument||document,g=m&&m.defaultView||window;if(g.getSelection){var v=g.getSelection(),T=a.textContent.length,w=Math.min(c.start,T),I=c.end===void 0?w:Math.min(c.end,T);!v.extend&&w>I&&(o=I,I=w,w=o);var b=X_(a,w),E=X_(a,I);if(b&&E&&(v.rangeCount!==1||v.anchorNode!==b.node||v.anchorOffset!==b.offset||v.focusNode!==E.node||v.focusOffset!==E.offset)){var A=m.createRange();A.setStart(b.node,b.offset),v.removeAllRanges(),w>I?(v.addRange(A),v.extend(E.node,E.offset)):(A.setEnd(E.node,E.offset),v.addRange(A))}}}}for(m=[],v=a;v=v.parentNode;)v.nodeType===1&&m.push({element:v,left:v.scrollLeft,top:v.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<m.length;a++){var R=m[a];R.element.scrollLeft=R.left,R.element.scrollTop=R.top}}jf=!!Mg,Rg=Mg=null}finally{tt=s,nt.p=i,Ie.T=n}}t.current=e,en=2}}function aI(){if(en===2){en=0;var t=kr,e=sl,n=(e.flags&8772)!==0;if(e.subtreeFlags&8772||n){n=Ie.T,Ie.T=null;var i=nt.p;nt.p=2;var s=tt;tt|=4;try{OA(t,e.alternate,e)}finally{tt=s,nt.p=i,Ie.T=n}}en=3}}function lI(){if(en===4||en===3){en=0,vN();var t=kr,e=sl,n=Ms,i=QA;e.subtreeFlags&10256||e.flags&10256?en=5:(en=0,sl=kr=null,uI(t,t.pendingLanes));var s=t.pendingLanes;if(s===0&&(Rr=null),Ny(n),e=e.stateNode,ri&&typeof ri.onCommitFiberRoot=="function")try{ri.onCommitFiberRoot(_c,e,void 0,(e.current.flags&128)===128)}catch{}if(i!==null){e=Ie.T,s=nt.p,nt.p=2,Ie.T=null;try{for(var r=t.onRecoverableError,o=0;o<i.length;o++){var a=i[o];r(a.value,{componentStack:a.stack})}}finally{Ie.T=e,nt.p=s}}Ms&3&&jh(),rs(t),s=t.pendingLanes,n&261930&&s&42?t===bg?Lu++:(Lu=0,bg=t):Lu=0,Ac(0)}}function uI(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,Sc(e)))}function jh(){return oI(),aI(),lI(),cI()}function cI(){if(en!==5)return!1;var t=kr,e=Sg;Sg=0;var n=Ny(Ms),i=Ie.T,s=nt.p;try{nt.p=32>n?32:n,Ie.T=null,n=wg,wg=null;var r=kr,o=Ms;if(en=0,sl=kr=null,Ms=0,tt&6)throw Error(J(331));var a=tt;if(tt|=4,JA(r.current),GA(r,r.current,o,n),tt=a,Ac(0,!1),ri&&typeof ri.onPostCommitFiberRoot=="function")try{ri.onPostCommitFiberRoot(_c,r)}catch{}return!0}finally{nt.p=s,Ie.T=i,uI(t,e)}}function NT(t,e,n){e=Ti(n,e),e=_g(t.stateNode,e,2),t=Mr(t,e,2),t!==null&&(Ec(t,2),rs(t))}function ot(t,e,n){if(t.tag===3)NT(t,t,n);else for(;e!==null;){if(e.tag===3){NT(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Rr===null||!Rr.has(i))){t=Ti(n,t),n=wA(2),i=Mr(e,n,2),i!==null&&(bA(n,i,e,t),Ec(i,2),rs(i));break}}e=e.return}}function lm(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new H2;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(hv=!0,s.add(n),t=Y2.bind(null,t,e,n),e.then(t,t))}function Y2(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,ft===t&&(Ke&n)===n&&(Lt===4||Lt===3&&(Ke&62914560)===Ke&&300>si()-Oh?!(tt&2)&&rl(t,0):pv|=n,il===Ke&&(il=0)),rs(t)}function dI(t,e){e===0&&(e=nb()),t=Ko(t,e),t!==null&&(Ec(t,e),rs(t))}function W2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),dI(t,n)}function Q2(t,e){var n=0;switch(t.tag){case 31:case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;case 22:i=t.stateNode._retryCache;break;default:throw Error(J(314))}i!==null&&i.delete(e),dI(t,n)}function Z2(t,e){return Ry(t,e)}var Df=null,ha=null,Ag=!1,Pf=!1,um=!1,Er=0;function rs(t){t!==ha&&t.next===null&&(ha===null?Df=ha=t:ha=ha.next=t),Pf=!0,Ag||(Ag=!0,eL())}function Ac(t,e){if(!um&&Pf){um=!0;do for(var n=!1,i=Df;i!==null;){if(t!==0){var s=i.pendingLanes;if(s===0)var r=0;else{var o=i.suspendedLanes,a=i.pingedLanes;r=(1<<31-oi(42|t)+1)-1,r&=s&~(o&~a),r=r&201326741?r&201326741|1:r?r|2:0}r!==0&&(n=!0,LT(i,r))}else r=Ke,r=Ah(i,i===ft?r:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(r&3)||Tc(i,r)||(n=!0,LT(i,r));i=i.next}while(n);um=!1}}function X2(){fI()}function fI(){Pf=Ag=!1;var t=0;Er!==0&&cL()&&(t=Er);for(var e=si(),n=null,i=Df;i!==null;){var s=i.next,r=hI(i,e);r===0?(i.next=null,n===null?Df=s:n.next=s,s===null&&(ha=n)):(n=i,(t!==0||r&3)&&(Pf=!0)),i=s}en!==0&&en!==5||Ac(t),Er!==0&&(Er=0)}function hI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,r=t.pendingLanes&-62914561;0<r;){var o=31-oi(r),a=1<<o,c=s[o];c===-1?(!(a&n)||a&i)&&(s[o]=bN(a,e)):c<=e&&(t.expiredLanes|=a),r&=~a}if(e=ft,n=Ke,n=Ah(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i=t.callbackNode,n===0||t===e&&(rt===2||rt===9)||t.cancelPendingCommit!==null)return i!==null&&i!==null&&Up(i),t.callbackNode=null,t.callbackPriority=0;if(!(n&3)||Tc(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(i!==null&&Up(i),Ny(n)){case 2:case 8:n=eb;break;case 32:n=yf;break;case 268435456:n=tb;break;default:n=yf}return i=pI.bind(null,t),n=Ry(n,i),t.callbackPriority=e,t.callbackNode=n,e}return i!==null&&i!==null&&Up(i),t.callbackPriority=2,t.callbackNode=null,2}function pI(t,e){if(en!==0&&en!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(jh()&&t.callbackNode!==n)return null;var i=Ke;return i=Ah(t,t===ft?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),i===0?null:(XA(t,i,e),hI(t,si()),t.callbackNode!=null&&t.callbackNode===n?pI.bind(null,t):null)}function LT(t,e){if(jh())return null;XA(t,e,!0)}function eL(){fL(function(){tt&6?Ry(Xw,X2):fI()})}function gv(){if(Er===0){var t=el;t===0&&(t=ld,ld<<=1,!(ld&261888)&&(ld=256)),Er=t}return Er}function DT(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:jd(""+t)}function PT(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function tL(t,e,n,i,s){if(e==="submit"&&n&&n.stateNode===s){var r=DT((s[Hn]||null).action),o=i.submitter;o&&(e=(e=o[Hn]||null)?DT(e.formAction):o.getAttribute("formAction"),e!==null&&(r=e,o=null));var a=new Ih("action","action",null,i,s);t.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Er!==0){var c=o?PT(s,o):new FormData(s);yg(n,{pending:!0,data:c,method:s.method,action:r},null,c)}}else typeof r=="function"&&(a.preventDefault(),c=o?PT(s,o):new FormData(s),yg(n,{pending:!0,data:c,method:s.method,action:r},r,c))},currentTarget:s}]})}}for(var cm=0;cm<rg.length;cm++){var dm=rg[cm],nL=dm.toLowerCase(),iL=dm[0].toUpperCase()+dm.slice(1);Pi(nL,"on"+iL)}Pi(bb,"onAnimationEnd");Pi(Ab,"onAnimationIteration");Pi(Ib,"onAnimationStart");Pi("dblclick","onDoubleClick");Pi("focusin","onFocus");Pi("focusout","onBlur");Pi(_2,"onTransitionRun");Pi(T2,"onTransitionStart");Pi(E2,"onTransitionCancel");Pi(Mb,"onTransitionEnd");Za("onMouseEnter",["mouseout","mouseover"]);Za("onMouseLeave",["mouseout","mouseover"]);Za("onPointerEnter",["pointerout","pointerover"]);Za("onPointerLeave",["pointerout","pointerover"]);Ho("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ho("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ho("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ho("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ho("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ho("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tc));function mI(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],c=a.instance,d=a.currentTarget;if(a=a.listener,c!==r&&s.isPropagationStopped())break e;r=a,s.currentTarget=d;try{r(s)}catch(h){_f(h)}s.currentTarget=null,r=c}else for(o=0;o<i.length;o++){if(a=i[o],c=a.instance,d=a.currentTarget,a=a.listener,c!==r&&s.isPropagationStopped())break e;r=a,s.currentTarget=d;try{r(s)}catch(h){_f(h)}s.currentTarget=null,r=c}}}}function Fe(t,e){var n=e[Qm];n===void 0&&(n=e[Qm]=new Set);var i=t+"__bubble";n.has(i)||(gI(e,t,2,!1),n.add(i))}function fm(t,e,n){var i=0;e&&(i|=4),gI(n,t,i,e)}var vd="_reactListening"+Math.random().toString(36).slice(2);function yv(t){if(!t[vd]){t[vd]=!0,ab.forEach(function(n){n!=="selectionchange"&&(sL.has(n)||fm(n,!1,t),fm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vd]||(e[vd]=!0,fm("selectionchange",!1,e))}}function gI(t,e,n,i){switch(MI(e)){case 2:var s=NL;break;case 8:s=LL;break;default:s=Ev}n=s.bind(null,e,n,t),s=void 0,!ng||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function hm(t,e,n,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===s)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&o.stateNode.containerInfo===s)return;o=o.return}for(;a!==null;){if(o=xa(a),o===null)return;if(c=o.tag,c===5||c===6||c===26||c===27){i=r=o;continue e}a=a.parentNode}}i=i.return}mb(function(){var d=r,h=Py(n),m=[];e:{var g=Rb.get(t);if(g!==void 0){var v=Ih,T=t;switch(t){case"keypress":if(qd(n)===0)break e;case"keydown":case"keyup":v=QN;break;case"focusin":T="focus",v=zp;break;case"focusout":T="blur",v=zp;break;case"beforeblur":case"afterblur":v=zp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=q_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=BN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=e2;break;case bb:case Ab:case Ib:v=zN;break;case Mb:v=n2;break;case"scroll":case"scrollend":v=UN;break;case"wheel":v=s2;break;case"copy":case"cut":case"paste":v=HN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=G_;break;case"toggle":case"beforetoggle":v=o2}var w=(e&4)!==0,I=!w&&(t==="scroll"||t==="scrollend"),b=w?g!==null?g+"Capture":null:g;w=[];for(var E=d,A;E!==null;){var R=E;if(A=R.stateNode,R=R.tag,R!==5&&R!==26&&R!==27||A===null||b===null||(R=Ku(E,b),R!=null&&w.push(nc(E,R,A))),I)break;E=E.return}0<w.length&&(g=new v(g,T,null,n,h),m.push({event:g,listeners:w}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",g&&n!==tg&&(T=n.relatedTarget||n.fromElement)&&(xa(T)||T[vl]))break e;if((v||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,v?(T=n.relatedTarget||n.toElement,v=d,T=T?xa(T):null,T!==null&&(I=vc(T),w=T.tag,T!==I||w!==5&&w!==27&&w!==6)&&(T=null)):(v=null,T=d),v!==T)){if(w=q_,R="onMouseLeave",b="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(w=G_,R="onPointerLeave",b="onPointerEnter",E="pointer"),I=v==null?g:hu(v),A=T==null?g:hu(T),g=new w(R,E+"leave",v,n,h),g.target=I,g.relatedTarget=A,R=null,xa(h)===d&&(w=new w(b,E+"enter",T,n,h),w.target=A,w.relatedTarget=I,R=w),I=R,v&&T)t:{for(w=rL,b=v,E=T,A=0,R=b;R;R=w(R))A++;R=0;for(var P=E;P;P=w(P))R++;for(;0<A-R;)b=w(b),A--;for(;0<R-A;)E=w(E),R--;for(;A--;){if(b===E||E!==null&&b===E.alternate){w=b;break t}b=w(b),E=w(E)}w=null}else w=null;v!==null&&VT(m,g,v,w,!1),T!==null&&I!==null&&VT(m,I,T,w,!0)}}e:{if(g=d?hu(d):window,v=g.nodeName&&g.nodeName.toLowerCase(),v==="select"||v==="input"&&g.type==="file")var U=Y_;else if(J_(g))if(Eb)U=g2;else{U=p2;var S=h2}else v=g.nodeName,!v||v.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?d&&Dy(d.elementType)&&(U=Y_):U=m2;if(U&&(U=U(t,d))){Tb(m,U,n,h);break e}S&&S(t,g,d),t==="focusout"&&d&&g.type==="number"&&d.memoizedProps.value!=null&&eg(g,"number",g.value)}switch(S=d?hu(d):window,t){case"focusin":(J_(S)||S.contentEditable==="true")&&(wa=S,ig=d,Su=null);break;case"focusout":Su=ig=wa=null;break;case"mousedown":sg=!0;break;case"contextmenu":case"mouseup":case"dragend":sg=!1,eT(m,n,h);break;case"selectionchange":if(v2)break;case"keydown":case"keyup":eT(m,n,h)}var M;if(Oy)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Sa?vb(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(yb&&n.locale!=="ko"&&(Sa||C!=="onCompositionStart"?C==="onCompositionEnd"&&Sa&&(M=gb()):(vr=h,Vy="value"in vr?vr.value:vr.textContent,Sa=!0)),S=Vf(d,C),0<S.length&&(C=new H_(C,t,null,n,h),m.push({event:C,listeners:S}),M?C.data=M:(M=_b(n),M!==null&&(C.data=M)))),(M=l2?u2(t,n):c2(t,n))&&(C=Vf(d,"onBeforeInput"),0<C.length&&(S=new H_("onBeforeInput","beforeinput",null,n,h),m.push({event:S,listeners:C}),S.data=M)),tL(m,t,d,n,h)}mI(m,e)})}function nc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vf(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,r=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||r===null||(s=Ku(t,n),s!=null&&i.unshift(nc(t,s,r)),s=Ku(t,e),s!=null&&i.push(nc(t,s,r))),t.tag===3)return i;t=t.return}return[]}function rL(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function VT(t,e,n,i,s){for(var r=e._reactName,o=[];n!==null&&n!==i;){var a=n,c=a.alternate,d=a.stateNode;if(a=a.tag,c!==null&&c===i)break;a!==5&&a!==26&&a!==27||d===null||(c=d,s?(d=Ku(n,r),d!=null&&o.unshift(nc(n,d,c))):s||(d=Ku(n,r),d!=null&&o.push(nc(n,d,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var oL=/\r\n?/g,aL=/\u0000|\uFFFD/g;function UT(t){return(typeof t=="string"?t:""+t).replace(oL,`
`).replace(aL,"")}function yI(t,e){return e=UT(e),UT(t)===e}function at(t,e,n,i,s,r){switch(n){case"children":typeof i=="string"?e==="body"||e==="textarea"&&i===""||Xa(t,i):(typeof i=="number"||typeof i=="bigint")&&e!=="body"&&Xa(t,""+i);break;case"className":dd(t,"class",i);break;case"tabIndex":dd(t,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":dd(t,n,i);break;case"style":pb(t,i,r);break;case"data":if(e!=="object"){dd(t,"data",i);break}case"src":case"href":if(i===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=jd(""+i),t.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof r=="function"&&(n==="formAction"?(e!=="input"&&at(t,e,"name",s.name,s,null),at(t,e,"formEncType",s.formEncType,s,null),at(t,e,"formMethod",s.formMethod,s,null),at(t,e,"formTarget",s.formTarget,s,null)):(at(t,e,"encType",s.encType,s,null),at(t,e,"method",s.method,s,null),at(t,e,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){t.removeAttribute(n);break}i=jd(""+i),t.setAttribute(n,i);break;case"onClick":i!=null&&(t.onclick=Cs);break;case"onScroll":i!=null&&Fe("scroll",t);break;case"onScrollEnd":i!=null&&Fe("scrollend",t);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(J(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(J(60));t.innerHTML=n}}break;case"multiple":t.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":t.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){t.removeAttribute("xlink:href");break}n=jd(""+i),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""+i):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":i===!0?t.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?t.setAttribute(n,i):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?t.setAttribute(n,i):t.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?t.removeAttribute(n):t.setAttribute(n,i);break;case"popover":Fe("beforetoggle",t),Fe("toggle",t),Fd(t,"popover",i);break;case"xlinkActuate":hs(t,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":hs(t,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":hs(t,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":hs(t,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":hs(t,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":hs(t,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":hs(t,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":hs(t,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":hs(t,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Fd(t,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=PN.get(n)||n,Fd(t,n,i))}}function Ig(t,e,n,i,s,r){switch(n){case"style":pb(t,i,r);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(J(61));if(n=i.__html,n!=null){if(s.children!=null)throw Error(J(60));t.innerHTML=n}}break;case"children":typeof i=="string"?Xa(t,i):(typeof i=="number"||typeof i=="bigint")&&Xa(t,""+i);break;case"onScroll":i!=null&&Fe("scroll",t);break;case"onScrollEnd":i!=null&&Fe("scrollend",t);break;case"onClick":i!=null&&(t.onclick=Cs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lb.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(s=n.endsWith("Capture"),e=n.slice(2,s?n.length-7:void 0),r=t[Hn]||null,r=r!=null?r[n]:null,typeof r=="function"&&t.removeEventListener(e,r,s),typeof i=="function")){typeof r!="function"&&r!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,i,s);break e}n in t?t[n]=i:i===!0?t.setAttribute(n,""):Fd(t,n,i)}}}function _n(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",t),Fe("load",t);var i=!1,s=!1,r;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(o!=null)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(J(137,e));default:at(t,e,r,o,n,null)}}s&&at(t,e,"srcSet",n.srcSet,n,null),i&&at(t,e,"src",n.src,n,null);return;case"input":Fe("invalid",t);var a=r=o=s=null,c=null,d=null;for(i in n)if(n.hasOwnProperty(i)){var h=n[i];if(h!=null)switch(i){case"name":s=h;break;case"type":o=h;break;case"checked":c=h;break;case"defaultChecked":d=h;break;case"value":r=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(J(137,e));break;default:at(t,e,i,h,n,null)}}db(t,r,a,c,d,o,s,!1);return;case"select":Fe("invalid",t),i=o=r=null;for(s in n)if(n.hasOwnProperty(s)&&(a=n[s],a!=null))switch(s){case"value":r=a;break;case"defaultValue":o=a;break;case"multiple":i=a;default:at(t,e,s,a,n,null)}e=r,n=o,t.multiple=!!i,e!=null?Va(t,!!i,e,!1):n!=null&&Va(t,!!i,n,!0);return;case"textarea":Fe("invalid",t),r=s=i=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":i=a;break;case"defaultValue":s=a;break;case"children":r=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(J(91));break;default:at(t,e,o,a,n,null)}hb(t,i,s,r);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"selected":t.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:at(t,e,c,i,n,null)}return;case"dialog":Fe("beforetoggle",t),Fe("toggle",t),Fe("cancel",t),Fe("close",t);break;case"iframe":case"object":Fe("load",t);break;case"video":case"audio":for(i=0;i<tc.length;i++)Fe(tc[i],t);break;case"image":Fe("error",t),Fe("load",t);break;case"details":Fe("toggle",t);break;case"embed":case"source":case"link":Fe("error",t),Fe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(d in n)if(n.hasOwnProperty(d)&&(i=n[d],i!=null))switch(d){case"children":case"dangerouslySetInnerHTML":throw Error(J(137,e));default:at(t,e,d,i,n,null)}return;default:if(Dy(e)){for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!==void 0&&Ig(t,e,h,i,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(i=n[a],i!=null&&at(t,e,a,i,n,null))}function lL(t,e,n,i){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,r=null,o=null,a=null,c=null,d=null,h=null;for(v in n){var m=n[v];if(n.hasOwnProperty(v)&&m!=null)switch(v){case"checked":break;case"value":break;case"defaultValue":c=m;default:i.hasOwnProperty(v)||at(t,e,v,null,i,m)}}for(var g in i){var v=i[g];if(m=n[g],i.hasOwnProperty(g)&&(v!=null||m!=null))switch(g){case"type":r=v;break;case"name":s=v;break;case"checked":d=v;break;case"defaultChecked":h=v;break;case"value":o=v;break;case"defaultValue":a=v;break;case"children":case"dangerouslySetInnerHTML":if(v!=null)throw Error(J(137,e));break;default:v!==m&&at(t,e,g,v,i,m)}}Xm(t,o,a,c,d,h,r,s);return;case"select":v=o=a=g=null;for(r in n)if(c=n[r],n.hasOwnProperty(r)&&c!=null)switch(r){case"value":break;case"multiple":v=c;default:i.hasOwnProperty(r)||at(t,e,r,null,i,c)}for(s in i)if(r=i[s],c=n[s],i.hasOwnProperty(s)&&(r!=null||c!=null))switch(s){case"value":g=r;break;case"defaultValue":a=r;break;case"multiple":o=r;default:r!==c&&at(t,e,s,r,i,c)}e=a,n=o,i=v,g!=null?Va(t,!!n,g,!1):!!i!=!!n&&(e!=null?Va(t,!!n,e,!0):Va(t,!!n,n?[]:"",!1));return;case"textarea":v=g=null;for(a in n)if(s=n[a],n.hasOwnProperty(a)&&s!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:at(t,e,a,null,i,s)}for(o in i)if(s=i[o],r=n[o],i.hasOwnProperty(o)&&(s!=null||r!=null))switch(o){case"value":g=s;break;case"defaultValue":v=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(J(91));break;default:s!==r&&at(t,e,o,s,i,r)}fb(t,g,v);return;case"option":for(var T in n)if(g=n[T],n.hasOwnProperty(T)&&g!=null&&!i.hasOwnProperty(T))switch(T){case"selected":t.selected=!1;break;default:at(t,e,T,null,i,g)}for(c in i)if(g=i[c],v=n[c],i.hasOwnProperty(c)&&g!==v&&(g!=null||v!=null))switch(c){case"selected":t.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:at(t,e,c,g,i,v)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var w in n)g=n[w],n.hasOwnProperty(w)&&g!=null&&!i.hasOwnProperty(w)&&at(t,e,w,null,i,g);for(d in i)if(g=i[d],v=n[d],i.hasOwnProperty(d)&&g!==v&&(g!=null||v!=null))switch(d){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(J(137,e));break;default:at(t,e,d,g,i,v)}return;default:if(Dy(e)){for(var I in n)g=n[I],n.hasOwnProperty(I)&&g!==void 0&&!i.hasOwnProperty(I)&&Ig(t,e,I,void 0,i,g);for(h in i)g=i[h],v=n[h],!i.hasOwnProperty(h)||g===v||g===void 0&&v===void 0||Ig(t,e,h,g,i,v);return}}for(var b in n)g=n[b],n.hasOwnProperty(b)&&g!=null&&!i.hasOwnProperty(b)&&at(t,e,b,null,i,g);for(m in i)g=i[m],v=n[m],!i.hasOwnProperty(m)||g===v||g==null&&v==null||at(t,e,m,g,i,v)}function OT(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function uL(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var s=n[i],r=s.transferSize,o=s.initiatorType,a=s.duration;if(r&&a&&OT(o)){for(o=0,a=s.responseEnd,i+=1;i<n.length;i++){var c=n[i],d=c.startTime;if(d>a)break;var h=c.transferSize,m=c.initiatorType;h&&OT(m)&&(c=c.responseEnd,o+=h*(c<a?1:(a-d)/(c-d)))}if(--i,e+=8*(r+o)/(s.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Mg=null,Rg=null;function Uf(t){return t.nodeType===9?t:t.ownerDocument}function BT(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vI(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function kg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pm=null;function cL(){var t=window.event;return t&&t.type==="popstate"?t===pm?!1:(pm=t,!0):(pm=null,!1)}var _I=typeof setTimeout=="function"?setTimeout:void 0,dL=typeof clearTimeout=="function"?clearTimeout:void 0,FT=typeof Promise=="function"?Promise:void 0,fL=typeof queueMicrotask=="function"?queueMicrotask:typeof FT<"u"?function(t){return FT.resolve(null).then(t).catch(hL)}:_I;function hL(t){setTimeout(function(){throw t})}function Zr(t){return t==="head"}function jT(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"||n==="/&"){if(i===0){t.removeChild(s),al(e);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")Du(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Du(n);for(var r=n.firstChild;r;){var o=r.nextSibling,a=r.nodeName;r[xc]||a==="SCRIPT"||a==="STYLE"||a==="LINK"&&r.rel.toLowerCase()==="stylesheet"||n.removeChild(r),r=o}}else n==="body"&&Du(t.ownerDocument.body);n=s}while(n);al(e)}function zT(t,e){var n=t;t=0;do{var i=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=i}while(n)}function Ng(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ng(n),Ly(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function pL(t,e,n,i){for(;t.nodeType===1;){var s=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!i&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(i){if(!t[xc])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(r=t.getAttribute("rel"),r==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(r!==s.rel||t.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||t.getAttribute("title")!==(s.title==null?null:s.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(r=t.getAttribute("src"),(r!==(s.src==null?null:s.src)||t.getAttribute("type")!==(s.type==null?null:s.type)||t.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&r&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var r=s.name==null?null:""+s.name;if(s.type==="hidden"&&t.getAttribute("name")===r)return t}else return t;if(t=Ci(t.nextSibling),t===null)break}return null}function mL(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Ci(t.nextSibling),t===null))return null;return t}function TI(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=Ci(t.nextSibling),t===null))return null;return t}function Lg(t){return t.data==="$?"||t.data==="$~"}function Dg(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function gL(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var i=function(){e(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),t._reactRetry=i}}function Ci(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Pg=null;function qT(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return Ci(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function HT(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function EI(t,e,n){switch(e=Uf(n),t){case"html":if(t=e.documentElement,!t)throw Error(J(452));return t;case"head":if(t=e.head,!t)throw Error(J(453));return t;case"body":if(t=e.body,!t)throw Error(J(454));return t;default:throw Error(J(451))}}function Du(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);Ly(t)}var wi=new Map,GT=new Set;function Of(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var js=nt.d;nt.d={f:yL,r:vL,D:_L,C:TL,L:EL,m:xL,X:SL,S:CL,M:wL};function yL(){var t=js.f(),e=Bh();return t||e}function vL(t){var e=_l(t);e!==null&&e.tag===5&&e.type==="form"?pA(e):js.r(t)}var Cl=typeof document>"u"?null:document;function xI(t,e,n){var i=Cl;if(i&&typeof e=="string"&&e){var s=_i(e);s='link[rel="'+t+'"][href="'+s+'"]',typeof n=="string"&&(s+='[crossorigin="'+n+'"]'),GT.has(s)||(GT.add(s),t={rel:t,crossOrigin:n,href:e},i.querySelector(s)===null&&(e=i.createElement("link"),_n(e,"link",t),un(e),i.head.appendChild(e)))}}function _L(t){js.D(t),xI("dns-prefetch",t,null)}function TL(t,e){js.C(t,e),xI("preconnect",t,e)}function EL(t,e,n){js.L(t,e,n);var i=Cl;if(i&&t&&e){var s='link[rel="preload"][as="'+_i(e)+'"]';e==="image"&&n&&n.imageSrcSet?(s+='[imagesrcset="'+_i(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(s+='[imagesizes="'+_i(n.imageSizes)+'"]')):s+='[href="'+_i(t)+'"]';var r=s;switch(e){case"style":r=ol(t);break;case"script":r=Sl(t)}wi.has(r)||(t=wt({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),wi.set(r,t),i.querySelector(s)!==null||e==="style"&&i.querySelector(Ic(r))||e==="script"&&i.querySelector(Mc(r))||(e=i.createElement("link"),_n(e,"link",t),un(e),i.head.appendChild(e)))}}function xL(t,e){js.m(t,e);var n=Cl;if(n&&t){var i=e&&typeof e.as=="string"?e.as:"script",s='link[rel="modulepreload"][as="'+_i(i)+'"][href="'+_i(t)+'"]',r=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":r=Sl(t)}if(!wi.has(r)&&(t=wt({rel:"modulepreload",href:t},e),wi.set(r,t),n.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Mc(r)))return}i=n.createElement("link"),_n(i,"link",t),un(i),n.head.appendChild(i)}}}function CL(t,e,n){js.S(t,e,n);var i=Cl;if(i&&t){var s=Pa(i).hoistableStyles,r=ol(t);e=e||"default";var o=s.get(r);if(!o){var a={loading:0,preload:null};if(o=i.querySelector(Ic(r)))a.loading=5;else{t=wt({rel:"stylesheet",href:t,"data-precedence":e},n),(n=wi.get(r))&&vv(t,n);var c=o=i.createElement("link");un(c),_n(c,"link",t),c._p=new Promise(function(d,h){c.onload=d,c.onerror=h}),c.addEventListener("load",function(){a.loading|=1}),c.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Qd(o,e,i)}o={type:"stylesheet",instance:o,count:1,state:a},s.set(r,o)}}}function SL(t,e){js.X(t,e);var n=Cl;if(n&&t){var i=Pa(n).hoistableScripts,s=Sl(t),r=i.get(s);r||(r=n.querySelector(Mc(s)),r||(t=wt({src:t,async:!0},e),(e=wi.get(s))&&_v(t,e),r=n.createElement("script"),un(r),_n(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function wL(t,e){js.M(t,e);var n=Cl;if(n&&t){var i=Pa(n).hoistableScripts,s=Sl(t),r=i.get(s);r||(r=n.querySelector(Mc(s)),r||(t=wt({src:t,async:!0,type:"module"},e),(e=wi.get(s))&&_v(t,e),r=n.createElement("script"),un(r),_n(r,"link",t),n.head.appendChild(r)),r={type:"script",instance:r,count:1,state:null},i.set(s,r))}}function $T(t,e,n,i){var s=(s=br.current)?Of(s):null;if(!s)throw Error(J(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=ol(n.href),n=Pa(s).hoistableStyles,i=n.get(e),i||(i={type:"style",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=ol(n.href);var r=Pa(s).hoistableStyles,o=r.get(t);if(o||(s=s.ownerDocument||s,o={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},r.set(t,o),(r=s.querySelector(Ic(t)))&&!r._p&&(o.instance=r,o.state.loading=5),wi.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},wi.set(t,n),r||bL(s,t,n,o.state))),e&&i===null)throw Error(J(528,""));return o}if(e&&i!==null)throw Error(J(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Sl(n),n=Pa(s).hoistableScripts,i=n.get(e),i||(i={type:"script",instance:null,count:0,state:null},n.set(e,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(J(444,t))}}function ol(t){return'href="'+_i(t)+'"'}function Ic(t){return'link[rel="stylesheet"]['+t+"]"}function CI(t){return wt({},t,{"data-precedence":t.precedence,precedence:null})}function bL(t,e,n,i){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?i.loading=1:(e=t.createElement("link"),i.preload=e,e.addEventListener("load",function(){return i.loading|=1}),e.addEventListener("error",function(){return i.loading|=2}),_n(e,"link",n),un(e),t.head.appendChild(e))}function Sl(t){return'[src="'+_i(t)+'"]'}function Mc(t){return"script[async]"+t}function KT(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var i=t.querySelector('style[data-href~="'+_i(n.href)+'"]');if(i)return e.instance=i,un(i),i;var s=wt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(t.ownerDocument||t).createElement("style"),un(i),_n(i,"style",s),Qd(i,n.precedence,t),e.instance=i;case"stylesheet":s=ol(n.href);var r=t.querySelector(Ic(s));if(r)return e.state.loading|=4,e.instance=r,un(r),r;i=CI(n),(s=wi.get(s))&&vv(i,s),r=(t.ownerDocument||t).createElement("link"),un(r);var o=r;return o._p=new Promise(function(a,c){o.onload=a,o.onerror=c}),_n(r,"link",i),e.state.loading|=4,Qd(r,n.precedence,t),e.instance=r;case"script":return r=Sl(n.src),(s=t.querySelector(Mc(r)))?(e.instance=s,un(s),s):(i=n,(s=wi.get(r))&&(i=wt({},n),_v(i,s)),t=t.ownerDocument||t,s=t.createElement("script"),un(s),_n(s,"link",i),t.head.appendChild(s),e.instance=s);case"void":return null;default:throw Error(J(443,e.type))}else e.type==="stylesheet"&&!(e.state.loading&4)&&(i=e.instance,e.state.loading|=4,Qd(i,n.precedence,t));return e.instance}function Qd(t,e,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,r=s,o=0;o<i.length;o++){var a=i[o];if(a.dataset.precedence===e)r=a;else if(r!==s)break}r?r.parentNode.insertBefore(t,r.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function vv(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function _v(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Zd=null;function JT(t,e,n){if(Zd===null){var i=new Map,s=Zd=new Map;s.set(n,i)}else s=Zd,i=s.get(n),i||(i=new Map,s.set(n,i));if(i.has(t))return i;for(i.set(t,null),n=n.getElementsByTagName(t),s=0;s<n.length;s++){var r=n[s];if(!(r[xc]||r[mn]||t==="link"&&r.getAttribute("rel")==="stylesheet")&&r.namespaceURI!=="http://www.w3.org/2000/svg"){var o=r.getAttribute(e)||"";o=t+o;var a=i.get(o);a?a.push(r):i.set(o,[r])}}return i}function YT(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function AL(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function SI(t){return!(t.type==="stylesheet"&&!(t.state.loading&3))}function IL(t,e,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var s=ol(i.href),r=e.querySelector(Ic(s));if(r){e=r._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=Bf.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=r,un(r);return}r=e.ownerDocument||e,i=CI(i),(s=wi.get(s))&&vv(i,s),r=r.createElement("link"),un(r);var o=r;o._p=new Promise(function(a,c){o.onload=a,o.onerror=c}),_n(r,"link",i),n.instance=r}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&!(n.state.loading&3)&&(t.count++,n=Bf.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var mm=0;function ML(t,e){return t.stylesheets&&t.count===0&&Xd(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var i=setTimeout(function(){if(t.stylesheets&&Xd(t,t.stylesheets),t.unsuspend){var r=t.unsuspend;t.unsuspend=null,r()}},6e4+e);0<t.imgBytes&&mm===0&&(mm=62500*uL());var s=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Xd(t,t.stylesheets),t.unsuspend)){var r=t.unsuspend;t.unsuspend=null,r()}},(t.imgBytes>mm?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(i),clearTimeout(s)}}:null}function Bf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xd(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ff=null;function Xd(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ff=new Map,e.forEach(RL,t),Ff=null,Bf.call(t))}function RL(t,e){if(!(e.state.loading&4)){var n=Ff.get(t);if(n)var i=n.get(null);else{n=new Map,Ff.set(t,n);for(var s=t.querySelectorAll("link[data-precedence],style[data-precedence]"),r=0;r<s.length;r++){var o=s[r];(o.nodeName==="LINK"||o.getAttribute("media")!=="not all")&&(n.set(o.dataset.precedence,o),i=o)}i&&n.set(null,i)}s=e.instance,o=s.getAttribute("data-precedence"),r=n.get(o)||i,r===i&&n.set(null,s),n.set(o,s),this.count++,i=Bf.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),r?r.parentNode.insertBefore(s,r.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(s,t.firstChild)),e.state.loading|=4}}var ic={$$typeof:xs,Provider:null,Consumer:null,_currentValue:So,_currentValue2:So,_threadCount:0};function kL(t,e,n,i,s,r,o,a,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Op(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Op(0),this.hiddenUpdates=Op(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=r,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function wI(t,e,n,i,s,r,o,a,c,d,h,m){return t=new kL(t,e,n,o,c,d,h,m,a),e=1,r===!0&&(e|=24),r=Xn(3,null,null,e),t.current=r,r.stateNode=t,e=Gy(),e.refCount++,t.pooledCache=e,e.refCount++,r.memoizedState={element:i,isDehydrated:n,cache:e},Jy(r),t}function bI(t){return t?(t=Ia,t):Ia}function AI(t,e,n,i,s,r){s=bI(s),i.context===null?i.context=s:i.pendingContext=s,i=Ir(e),i.payload={element:n},r=r===void 0?null:r,r!==null&&(i.callback=r),n=Mr(t,i,e),n!==null&&(qn(n,t,e),bu(n,t,e))}function WT(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tv(t,e){WT(t,e),(t=t.alternate)&&WT(t,e)}function II(t){if(t.tag===13||t.tag===31){var e=Ko(t,67108864);e!==null&&qn(e,t,67108864),Tv(t,67108864)}}function QT(t){if(t.tag===13||t.tag===31){var e=ai();e=ky(e);var n=Ko(t,e);n!==null&&qn(n,t,e),Tv(t,e)}}var jf=!0;function NL(t,e,n,i){var s=Ie.T;Ie.T=null;var r=nt.p;try{nt.p=2,Ev(t,e,n,i)}finally{nt.p=r,Ie.T=s}}function LL(t,e,n,i){var s=Ie.T;Ie.T=null;var r=nt.p;try{nt.p=8,Ev(t,e,n,i)}finally{nt.p=r,Ie.T=s}}function Ev(t,e,n,i){if(jf){var s=Vg(i);if(s===null)hm(t,e,i,zf,n),ZT(t,i);else if(PL(s,t,e,n,i))i.stopPropagation();else if(ZT(t,i),e&4&&-1<DL.indexOf(t)){for(;s!==null;){var r=_l(s);if(r!==null)switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var o=yo(r.pendingLanes);if(o!==0){var a=r;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var c=1<<31-oi(o);a.entanglements[1]|=c,o&=~c}rs(r),!(tt&6)&&(kf=si()+500,Ac(0))}}break;case 31:case 13:a=Ko(r,2),a!==null&&qn(a,r,2),Bh(),Tv(r,2)}if(r=Vg(i),r===null&&hm(t,e,i,zf,n),r===s)break;s=r}s!==null&&i.stopPropagation()}else hm(t,e,i,null,n)}}function Vg(t){return t=Py(t),xv(t)}var zf=null;function xv(t){if(zf=null,t=xa(t),t!==null){var e=vc(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=Jw(e),t!==null)return t;t=null}else if(n===31){if(t=Yw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return zf=t,null}function MI(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(_N()){case Xw:return 2;case eb:return 8;case yf:case TN:return 32;case tb:return 268435456;default:return 32}default:return 32}}var Ug=!1,Nr=null,Lr=null,Dr=null,sc=new Map,rc=new Map,fr=[],DL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ZT(t,e){switch(t){case"focusin":case"focusout":Nr=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":sc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rc.delete(e.pointerId)}}function su(t,e,n,i,s,r){return t===null||t.nativeEvent!==r?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=_l(e),e!==null&&II(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function PL(t,e,n,i,s){switch(e){case"focusin":return Nr=su(Nr,t,e,n,i,s),!0;case"dragenter":return Lr=su(Lr,t,e,n,i,s),!0;case"mouseover":return Dr=su(Dr,t,e,n,i,s),!0;case"pointerover":var r=s.pointerId;return sc.set(r,su(sc.get(r)||null,t,e,n,i,s)),!0;case"gotpointercapture":return r=s.pointerId,rc.set(r,su(rc.get(r)||null,t,e,n,i,s)),!0}return!1}function RI(t){var e=xa(t.target);if(e!==null){var n=vc(e);if(n!==null){if(e=n.tag,e===13){if(e=Jw(n),e!==null){t.blockedOn=e,V_(t.priority,function(){QT(n)});return}}else if(e===31){if(e=Yw(n),e!==null){t.blockedOn=e,V_(t.priority,function(){QT(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ef(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Vg(t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);tg=i,n.target.dispatchEvent(i),tg=null}else return e=_l(n),e!==null&&II(e),t.blockedOn=n,!1;e.shift()}return!0}function XT(t,e,n){ef(t)&&n.delete(e)}function VL(){Ug=!1,Nr!==null&&ef(Nr)&&(Nr=null),Lr!==null&&ef(Lr)&&(Lr=null),Dr!==null&&ef(Dr)&&(Dr=null),sc.forEach(XT),rc.forEach(XT)}function _d(t,e){t.blockedOn===e&&(t.blockedOn=null,Ug||(Ug=!0,nn.unstable_scheduleCallback(nn.unstable_NormalPriority,VL)))}var Td=null;function eE(t){Td!==t&&(Td=t,nn.unstable_scheduleCallback(nn.unstable_NormalPriority,function(){Td===t&&(Td=null);for(var e=0;e<t.length;e+=3){var n=t[e],i=t[e+1],s=t[e+2];if(typeof i!="function"){if(xv(i||n)===null)continue;break}var r=_l(n);r!==null&&(t.splice(e,3),e-=3,yg(r,{pending:!0,data:s,method:n.method,action:i},i,s))}}))}function al(t){function e(c){return _d(c,t)}Nr!==null&&_d(Nr,t),Lr!==null&&_d(Lr,t),Dr!==null&&_d(Dr,t),sc.forEach(e),rc.forEach(e);for(var n=0;n<fr.length;n++){var i=fr[n];i.blockedOn===t&&(i.blockedOn=null)}for(;0<fr.length&&(n=fr[0],n.blockedOn===null);)RI(n),n.blockedOn===null&&fr.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var s=n[i],r=n[i+1],o=s[Hn]||null;if(typeof r=="function")o||eE(n);else if(o){var a=null;if(r&&r.hasAttribute("formAction")){if(s=r,o=r[Hn]||null)a=o.formAction;else if(xv(s)!==null)continue}else a=o.action;typeof a=="function"?n[i+1]=a:(n.splice(i,3),i-=3),eE(n)}}}function kI(){function t(r){r.canIntercept&&r.info==="react-transition"&&r.intercept({handler:function(){return new Promise(function(o){return s=o})},focusReset:"manual",scroll:"manual"})}function e(){s!==null&&(s(),s=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var r=navigation.currentEntry;r&&r.url!=null&&navigation.navigate(r.url,{state:r.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,s=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),s!==null&&(s(),s=null)}}}function Cv(t){this._internalRoot=t}zh.prototype.render=Cv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));var n=e.current,i=ai();AI(n,i,t,e,null,null)};zh.prototype.unmount=Cv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;AI(t.current,2,null,t,null,null),Bh(),e[vl]=null}};function zh(t){this._internalRoot=t}zh.prototype.unstable_scheduleHydration=function(t){if(t){var e=ob();t={blockedOn:null,target:t,priority:e};for(var n=0;n<fr.length&&e!==0&&e<fr[n].priority;n++);fr.splice(n,0,t),n===0&&RI(t)}};var tE=$w.version;if(tE!=="19.2.0")throw Error(J(527,tE,"19.2.0"));nt.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=fN(e),t=t!==null?Ww(t):null,t=t===null?null:t.stateNode,t};var UL={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Ie,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ed.isDisabled&&Ed.supportsFiber)try{_c=Ed.inject(UL),ri=Ed}catch{}}wh.createRoot=function(t,e){if(!Kw(t))throw Error(J(299));var n=!1,i="",s=xA,r=CA,o=SA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onUncaughtError!==void 0&&(s=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=wI(t,1,!1,null,null,n,i,null,s,r,o,kI),t[vl]=e.current,yv(t),new Cv(e)};wh.hydrateRoot=function(t,e,n){if(!Kw(t))throw Error(J(299));var i=!1,s="",r=xA,o=CA,a=SA,c=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onUncaughtError!==void 0&&(r=n.onUncaughtError),n.onCaughtError!==void 0&&(o=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=wI(t,1,!0,e,n??null,i,s,c,r,o,a,kI),e.context=bI(null),n=e.current,i=ai(),i=ky(i),s=Ir(i),s.callback=null,Mr(n,s,i),n=i,e.current.lanes=n,Ec(e,n),rs(e),t[vl]=e.current,yv(t),new zh(e)};wh.version="19.2.0";function NI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NI)}catch(t){console.error(t)}}NI(),Fw.exports=wh;var OL=Fw.exports;const BL=Rw(OL),LI=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),f.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),Sv=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("polygon",{points:"1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"}),f.jsx("line",{x1:"8",x2:"8",y1:"2",y2:"18"}),f.jsx("line",{x1:"16",x2:"16",y1:"6",y2:"22"})]}),DI=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("line",{x1:"12",x2:"12",y1:"8",y2:"16"}),f.jsx("line",{x1:"8",x2:"16",y1:"12",y2:"12"})]}),za=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"11",cy:"11",r:"8"}),f.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),qh=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),f.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),PI=y.createContext(void 0),FL=({children:t})=>{const[e,n]=y.useState(localStorage.getItem("language")||"en"),[i,s]=y.useState(null);y.useEffect(()=>{(async()=>{try{const c=await fetch(`/locales/${e}.json`);if(!c.ok)throw new Error(`Could not load ${e}.json`);const d=await c.json();s(d)}catch(c){if(console.error("Failed to load translations:",c),e!=="en")try{const h=await(await fetch("/locales/en.json")).json();s(h)}catch(d){console.error("Failed to load fallback translations:",d),s({})}else s({})}})(),localStorage.setItem("language",e),document.documentElement.lang=e,document.documentElement.dir=e==="ar"?"rtl":"ltr"},[e]);const r=a=>{n(a)},o=y.useCallback((a,c)=>{var h;let d=(i==null?void 0:i[a])||a;return c&&i&&Object.keys(c).forEach(m=>{const g=new RegExp(`{{${m}}}`,"g");d=d.replace(g,String(c[m]))}),a.startsWith("foundTwins")&&c&&typeof c.count=="number"&&i&&c.count!==1?((h=i[`${a}_plural`])==null?void 0:h.replace("{{count}}",String(c.count)))||a:d},[i]);return i===null?f.jsx("div",{className:"h-screen w-screen bg-slate-50 dark:bg-neutral-950 flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-orange-500"})}):f.jsx(PI.Provider,{value:{language:e,setLanguage:r,t:o},children:t})},Be=()=>{const t=y.useContext(PI);if(t===void 0)throw new Error("useTranslation must be used within a LanguageProvider");return t},jL=({icon:t,label:e,isActive:n,onClick:i,disabled:s=!1})=>f.jsxs("button",{onClick:i,className:`flex flex-col items-center justify-center w-full transition-colors duration-200 relative pt-1 ${s?"text-gray-300 dark:text-gray-600 cursor-not-allowed":n?"text-brand-orange dark:text-brand-orange-light":"text-gray-500 dark:text-gray-400 hover:text-brand-orange dark:hover:text-brand-orange-light"}`,disabled:s,children:[f.jsx("div",{className:`transition-all duration-300 absolute top-1/2 -translate-y-1/2 w-16 h-8 rounded-full ${n?"bg-orange-100 dark:bg-orange-900/40 opacity-100":"opacity-0"}`}),f.jsx("div",{className:"relative z-10",children:t}),f.jsx("span",{className:"text-xs mt-1 relative z-10",children:e})]}),zL=({activeScreen:t,setActiveScreen:e,isGuest:n,onGuestAction:i})=>{const{t:s}=Be(),r=a=>{n&&["create","profile"].includes(a)?i():e(a)},o=[{screen:"adventures",label:s("adventure"),icon:f.jsx(LI,{})},{screen:"map",label:s("map"),icon:f.jsx(Sv,{})},{screen:"create",label:s("adventure"),icon:f.jsx(DI,{className:"w-8 h-8"}),requiresAuth:!0},{screen:"search",label:s("search"),icon:f.jsx(za,{})},{screen:"profile",label:s("profile"),icon:f.jsx(qh,{}),requiresAuth:!0}];return f.jsx("div",{className:"xl:hidden fixed bottom-0 left-0 right-0 z-50 h-16 flex justify-center",children:f.jsx("div",{className:"w-full max-w-2xl bg-light-bg-secondary/70 dark:bg-dark-bg-secondary/70 backdrop-blur-lg border-t border-slate-200/60 dark:border-zinc-800/60 flex items-center justify-around",children:o.map(a=>f.jsx(jL,{label:a.label,icon:a.icon,isActive:t===a.screen,onClick:()=>r(a.screen),disabled:n&&a.requiresAuth},a.screen))})})};var ue=(t=>(t.Travel="Travel",t.Volunteering="Volunteering",t.Hiking="Hiking",t.Camping="Camping",t.Cycling="Cycling",t.Event="Event",t))(ue||{}),ar=(t=>(t.Interest="interest",t.Comment="comment",t.Message="message",t.AttendanceRequest="attendanceRequest",t.AttendanceConfirmed="attendanceConfirmed",t.RateExperience="rateExperience",t))(ar||{}),At=(t=>(t.Public="Public",t.Followers="Followers",t.Twins="Twins",t))(At||{}),Wi=(t=>(t.Pending="Pending",t.Confirmed="Confirmed",t))(Wi||{});const qL=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),VI=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"})}),HL=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...t,children:f.jsx("path",{d:"M8 5v14l11-7z"})}),wv=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("polyline",{points:"17 1 21 5 17 9"}),f.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),f.jsx("polyline",{points:"7 23 3 19 7 15"}),f.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),GL=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),bv=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),f.jsx("polyline",{points:"16 6 12 2 8 6"}),f.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"15"})]}),ll=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),f.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),Rc=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})}),UI=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"12",cy:"12",r:"1"}),f.jsx("circle",{cx:"19",cy:"12",r:"1"}),f.jsx("circle",{cx:"5",cy:"12",r:"1"})]}),OI=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),f.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),$L=({adventure:t,onClose:e,onEdit:n,onDelete:i})=>{const{t:s}=Be(),r=y.useRef(null);y.useEffect(()=>{const a=c=>{r.current&&!r.current.contains(c.target)&&e()};return document.addEventListener("mousedown",a),()=>{document.removeEventListener("mousedown",a)}},[e]);const o=()=>{window.confirm(s("confirmDelete"))&&i()};return f.jsx("div",{ref:r,className:"absolute top-full end-0 mt-1 w-48 bg-white dark:bg-neutral-800 rounded-md shadow-lg border border-gray-200 dark:border-neutral-700 z-10 animate-fade-in",children:f.jsxs("ul",{className:"py-1 text-sm text-gray-700 dark:text-gray-200",children:[f.jsx("li",{children:f.jsxs("button",{onClick:n,className:"w-full text-left flex items-center px-4 py-2 hover:bg-gray-100 dark:hover:bg-neutral-700",children:[f.jsx(OI,{className:"w-4 h-4 me-2"}),s("editAdventure")]})}),f.jsx("li",{children:f.jsxs("button",{onClick:o,className:"w-full text-left flex items-center px-4 py-2 text-red-600 dark:text-red-500 hover:bg-gray-100 dark:hover:bg-neutral-700",children:[f.jsx(KL,{className:"w-4 h-4 me-2"}),s("deleteAdventure")]})})]})})},KL=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("polyline",{points:"3 6 5 6 21 6"}),f.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),nE=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),f.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),BI=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),f.jsx("circle",{cx:"9",cy:"7",r:"4"}),f.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),f.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),FI=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8"}),f.jsx("path",{d:"M4 16h16"}),f.jsx("path",{d:"M10 11V9"}),f.jsx("path",{d:"M14 11V9"}),f.jsx("path",{d:"M12 7a2 2 0 0 0-2-2c-2.5 0-2.5 4-5 4"}),f.jsx("path",{d:"M12 7a2 2 0 0 1 2-2c2.5 0 2.5 4 5 4"})]}),Hh=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),wl=({adventure:t,currentUser:e,isGuest:n,onCommentClick:i,onMessageClick:s,onInterestToggle:r,onViewProfile:o,onRepostToggle:a,onSaveToggle:c,onShareAdventure:d,onToggleCompleted:h,onViewLocationOnMap:m,onDeleteAdventure:g,onEditAdventure:v,onJoinGroupChat:T})=>{const{t:w,language:I}=Be(),[b,E]=y.useState(!1),A=e?(t.interestedUsers||[]).includes(e.id):!1,R=e?(e.repostedAdventures||[]).includes(t.id):!1,P=e?(e.savedAdventures||[]).includes(t.id):!1,U=(e==null?void 0:e.id)===t.author.id,S=e?(e.activityLog||[]).find(ce=>ce.adventureId===t.id):void 0,M=S==null?void 0:S.status,C=new Date(t.endDate||t.startDate);C.setHours(23,59,59,999);const k=new Date>C,N=()=>{k?m(null):t.coordinates&&m(t)},V=ce=>{switch(ce){case ue.Travel:return"bg-sky-100 text-sky-800 dark:bg-sky-900/50 dark:text-sky-300";case ue.Event:return"bg-fuchsia-100 text-fuchsia-800 dark:bg-fuchsia-900/50 dark:text-fuchsia-300";case ue.Hiking:return"bg-teal-100 text-teal-800 dark:bg-teal-900/50 dark:text-teal-300";case ue.Camping:return"bg-lime-100 text-lime-800 dark:bg-lime-900/50 dark:text-lime-300";case ue.Volunteering:return"bg-violet-100 text-violet-800 dark:bg-violet-900/50 dark:text-violet-300";case ue.Cycling:return"bg-amber-100 text-amber-800 dark:bg-amber-900/50 dark:text-amber-300";default:return"bg-gray-100 text-gray-800 dark:bg-zinc-700 dark:text-gray-200"}},L=(ce,ne)=>{switch(ce){case At.Public:return{icon:f.jsx(nE,{className:"w-3 h-3"}),text:w("AdventurePrivacy_Public")};case At.Followers:return{icon:f.jsx(BI,{className:"w-3 h-3"}),text:w("AdventurePrivacy_Followers")};case At.Twins:let fe=w("AdventurePrivacy_Twins");return ne===At.Public?fe+=` + ${w("AdventurePrivacy_Public")}`:ne===At.Followers&&(fe+=` + ${w("AdventurePrivacy_Followers")}`),{icon:f.jsx(FI,{className:"w-3 h-3"}),text:fe};default:return{icon:f.jsx(nE,{className:"w-3 h-3"}),text:w("AdventurePrivacy_Public")}}},$=ce=>new Date(ce).toLocaleDateString(I,{month:"short",day:"numeric",year:"numeric"}),Z=()=>`${w("budget").replace(" ($)","")} ~$${t.budget}`,j=()=>{let ce=`${$(t.startDate)}`;return t.endDate&&(ce+=` - ${$(t.endDate)}`),ce},ee=()=>{switch(t.type){case ue.Travel:return`${w("from")}: ${t.location}`;case ue.Hiking:case ue.Cycling:return`${w("startPoint")}: ${t.location}`;default:return t.location}},q=()=>M===Wi.Confirmed?"text-green-500":M===Wi.Pending?"text-amber-500":"",X="flex items-center space-x-1 transition-colors",ie="cursor-not-allowed text-gray-400 dark:text-gray-600",te=!k&&!t.coordinates;return f.jsxs("div",{className:"bg-light-bg-secondary/70 dark:bg-dark-bg-secondary/70 backdrop-blur-sm rounded-3xl shadow-lg shadow-black/[.02] dark:shadow-black/[.05] mb-4",children:[f.jsxs("div",{className:"p-4",children:[f.jsxs("div",{className:"flex items-start justify-between mb-3",children:[f.jsxs("button",{onClick:()=>o(t.author),className:"flex items-center text-left hover:bg-slate-100/50 dark:hover:bg-zinc-800/50 rounded-md p-1 -m-1 flex-grow min-w-0",children:[f.jsx("img",{src:t.author.avatarUrl,alt:t.author.name,className:"w-10 h-10 rounded-full me-3 flex-shrink-0"}),f.jsxs("div",{className:"min-w-0",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100 truncate",children:t.author.name}),t.author.averageRating&&f.jsxs("div",{className:"flex items-center space-x-0.5 text-xs text-amber-500 flex-shrink-0",children:[f.jsx(Rc,{className:"w-3 h-3 fill-current"}),f.jsx("span",{children:t.author.averageRating.toFixed(1)})]})]}),f.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[new Date(t.createdAt).toLocaleString(I),"  ",f.jsxs("span",{className:"inline-flex items-center space-x-1",children:[L(t.privacy,t.subPrivacy).icon,f.jsx("span",{children:L(t.privacy,t.subPrivacy).text})]})]})]})]}),f.jsxs("div",{className:"relative flex-shrink-0 ms-2",children:[U&&f.jsx("button",{onClick:ce=>{ce.stopPropagation(),E(ne=>!ne)},className:"p-2 rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-zinc-800",children:f.jsx(UI,{})}),b&&f.jsx($L,{adventure:t,onClose:()=>E(!1),onDelete:()=>{g(t.id),E(!1)},onEdit:()=>{v(t),E(!1)}})]})]}),f.jsxs("div",{className:"px-1",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white mb-2",children:t.title}),f.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-4",children:t.description})]})]}),t.media&&t.media.length>0&&f.jsx("div",{className:"px-4 pb-4",children:t.media[0].type==="image"?f.jsx("img",{src:t.media[0].url,alt:"Adventure media",className:"w-full max-h-96 object-cover rounded-2xl"}):f.jsxs("div",{className:"relative flex justify-center items-center bg-black rounded-2xl overflow-hidden",children:[f.jsx("video",{src:t.media[0].url,className:"w-full max-h-96",playsInline:!0,muted:!0,loop:!0}),f.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 flex items-center justify-center pointer-events-none",children:f.jsx("div",{className:"bg-black bg-opacity-50 rounded-full p-3",children:f.jsx(HL,{className:"w-8 h-8 text-white"})})})]})}),f.jsx("div",{className:"px-5 pb-4",children:f.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-600 dark:text-gray-300",children:[f.jsx("span",{className:`px-2 py-1 rounded-full font-medium ${V(t.type)}`,children:w(`AdventureType_${t.type}`)}),f.jsxs("button",{onClick:N,disabled:te,className:"px-2 py-1 rounded-full bg-slate-100 dark:bg-zinc-800 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-200 dark:hover:bg-zinc-700",children:[" ",ee()]}),f.jsxs("span",{className:"px-2 py-1 rounded-full bg-slate-100 dark:bg-zinc-800",children:[" ",j()]}),f.jsxs("span",{className:"px-2 py-1 rounded-full bg-slate-100 dark:bg-zinc-800",children:[" ",Z()]})]})}),f.jsxs("div",{className:"px-4 pb-3 pt-1 flex justify-around items-center text-gray-500 dark:text-gray-400",children:[f.jsxs("button",{onClick:()=>r(t.id),disabled:n,className:`${X} ${n?ie:`hover:text-rose-500 ${A?"text-rose-500":""}`}`,children:[f.jsx(qL,{className:A?"fill-current":""}),f.jsx("span",{children:(t.interestedUsers||[]).length})]}),f.jsxs("button",{onClick:()=>i(t),disabled:n,className:`${X} ${n?ie:"hover:text-sky-500"}`,children:[f.jsx(VI,{}),f.jsx("span",{children:t.commentCount||0})]}),f.jsx("button",{onClick:()=>T(t),disabled:n,className:`${X} ${n?ie:"hover:text-indigo-500"}`,title:w("groupChat"),children:f.jsx(Hh,{})}),f.jsx("button",{onClick:()=>h(t.id),disabled:n||U,className:`${X} ${n||U?ie:`hover:text-green-500 ${q()}`}`,"aria-label":"Mark as done",children:f.jsx(ll,{className:M?"fill-current":""})}),f.jsx("button",{onClick:()=>d(t),className:`${X} hover:text-blue-500`,children:f.jsx(bv,{})}),f.jsx("button",{onClick:()=>a(t.id),disabled:n,className:`${X} ${n?ie:`hover:text-emerald-500 ${R?"text-emerald-500":""}`}`,children:f.jsx(wv,{})}),f.jsx("button",{onClick:()=>c(t.id),disabled:n,className:`${X} ${n?ie:`hover:text-amber-500 ${P?"text-amber-500":""}`}`,children:f.jsx(GL,{className:P?"fill-current":""})})]})]})},JL=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),f.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),YL=({author:t,hasUnviewed:e,onClick:n})=>f.jsxs("button",{onClick:n,className:"flex-shrink-0 flex flex-col items-center space-y-1 w-20 text-center",children:[f.jsx("div",{className:`w-16 h-16 rounded-full p-0.5 ${e?"bg-gradient-to-tr from-amber-400 via-rose-500 to-fuchsia-600":"bg-gray-300 dark:bg-neutral-700"}`,children:f.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-full h-full rounded-full border-2 border-light-bg dark:border-dark-bg-secondary object-cover"})}),f.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 truncate w-full",children:t.name})]}),WL=({myStories:t,currentUser:e,hasUnviewed:n,onAddStory:i,onViewMyStories:s})=>{const{t:r}=Be();return t.length>0?f.jsxs("button",{onClick:s,className:"flex-shrink-0 flex flex-col items-center space-y-1 w-20 text-center",children:[f.jsx("div",{className:`w-16 h-16 rounded-full p-0.5 ${n?"bg-gradient-to-tr from-amber-400 via-rose-500 to-fuchsia-600":"bg-gray-300 dark:bg-neutral-700"}`,children:f.jsx("img",{src:e.avatarUrl,alt:r("myStory"),className:"w-full h-full rounded-full border-2 border-light-bg dark:border-dark-bg-secondary object-cover"})}),f.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:r("myStory")})]}):f.jsxs("button",{onClick:i,className:"flex-shrink-0 flex flex-col items-center space-y-1 w-20 text-center",children:[f.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 dark:bg-dark-bg-secondary flex items-center justify-center",children:f.jsx("div",{className:"w-8 h-8 rounded-full bg-brand-orange flex items-center justify-center text-white",children:f.jsx(JL,{strokeWidth:"2.5"})})}),f.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:r("addStory")})]})},QL=({stories:t,currentUser:e,onSelectStories:n,onAddStory:i,viewedStoryTimestamps:s})=>{const{myStories:r,otherUserStoriesGrouped:o,myStoriesHaveUnviewed:a}=y.useMemo(()=>{const d=t.filter(w=>w.author.id===e.id),m=t.filter(w=>w.author.id!==e.id).reduce((w,I)=>(w[I.author.id]||(w[I.author.id]=[]),w[I.author.id].push(I),w),{}),g=s[e.id],v=d.length>0?d.reduce((w,I)=>new Date(w.createdAt)>new Date(I.createdAt)?w:I):null,T=v?!g||new Date(v.createdAt)>new Date(g):!1;return{myStories:d,otherUserStoriesGrouped:Object.values(m),myStoriesHaveUnviewed:T}},[t,e.id,s]),c=d=>d.slice().sort((h,m)=>new Date(h.createdAt).getTime()-new Date(m.createdAt).getTime());return f.jsx("div",{className:"px-2 pt-3",children:f.jsxs("div",{className:"flex space-x-3 overflow-x-auto pb-2 -mb-2",children:[f.jsx(WL,{myStories:r,currentUser:e,hasUnviewed:a,onAddStory:i,onViewMyStories:()=>n(c(r))}),o.map(d=>{const h=d[0].author.id,m=s[h],g=d.reduce((T,w)=>new Date(T.createdAt)>new Date(w.createdAt)?T:w),v=!m||new Date(g.createdAt)>new Date(m);return f.jsx(YL,{author:d[0].author,hasUnviewed:v,onClick:()=>n(c(d))},h)})]})})},Gh=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),f.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),f.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),f.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),Av=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 5.2 5.2c.4.4 1 .5 1.4.3l.5-.3c.4-.3.6-.7.5-1.2z"})}),Iv=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),f.jsx("circle",{cx:"9",cy:"7",r:"4"}),f.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),f.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Mv=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"m8 3 4 8 5-5 5 15H2L8 3z"})}),Rv=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M19 20 L19 10 L12 3 L5 10 L5 20"}),f.jsx("path",{d:"M12 11 L12 20"}),f.jsx("path",{d:"M3 20 L21 20"})]}),$h=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),kv=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"5.5",cy:"17.5",r:"3.5"}),f.jsx("circle",{cx:"18.5",cy:"17.5",r:"3.5"}),f.jsx("path",{d:"M15 17.5h-5.5l1.5-5 4-3 2 3h-3"}),f.jsx("path",{d:"M5.5 14l-3-3"})]}),ZL=[{type:"all",icon:f.jsx(Gh,{}),labelKey:"allTypes"},{type:ue.Travel,icon:f.jsx(Av,{}),labelKey:`AdventureType_${ue.Travel}`},{type:ue.Volunteering,icon:f.jsx($h,{}),labelKey:`AdventureType_${ue.Volunteering}`},{type:ue.Hiking,icon:f.jsx(Mv,{}),labelKey:`AdventureType_${ue.Hiking}`},{type:ue.Camping,icon:f.jsx(Rv,{}),labelKey:`AdventureType_${ue.Camping}`},{type:ue.Cycling,icon:f.jsx(kv,{}),labelKey:`AdventureType_${ue.Cycling}`},{type:ue.Event,icon:f.jsx(Iv,{}),labelKey:`AdventureType_${ue.Event}`}],XL=({selectedType:t,onSelectType:e})=>{const{t:n}=Be();return f.jsx("div",{className:"px-2",children:f.jsx("div",{className:"flex items-stretch justify-around gap-1.5",children:ZL.map(i=>{const s=t===i.type;return f.jsxs("button",{onClick:()=>e(i.type),className:`flex flex-col items-center justify-center p-2 flex-1 rounded-xl transition-colors duration-200 ${s?"bg-brand-orange/10 dark:bg-brand-orange/20":"bg-slate-100 dark:bg-dark-bg-secondary hover:bg-slate-200 dark:hover:bg-zinc-700/50"}`,children:[f.jsx("div",{className:`w-5 h-5 flex items-center justify-center ${s?"text-brand-orange":"text-gray-500 dark:text-gray-400"}`,children:i.icon}),f.jsx("span",{className:`text-[10px] mt-1.5 text-center font-medium ${s?"text-brand-orange dark:text-brand-orange-light":"text-gray-600 dark:text-gray-300"}`,children:n(i.labelKey)})]},i.type)})})})},jI=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}),f.jsx("path",{d:"M13.73 21a2 2 0 0 1-3.46 0"})]}),eD=({currentUser:t,isGuest:e,onGuestAction:n,onNavigateToSearch:i,onNavigateToChat:s,onNavigateToNotifications:r,onNavigateToProfile:o,hasUnreadNotifications:a})=>{const{t:c}=Be(),d=h=>{e?n():h()};return f.jsxs("header",{className:"sticky top-0 z-40 bg-light-bg-secondary/70 dark:bg-dark-bg-secondary/70 backdrop-blur-lg border-b border-slate-200/60 dark:border-zinc-800/60 h-14 flex items-center justify-between px-4",children:[f.jsx("div",{className:"flex items-center space-x-2",children:f.jsxs("button",{onClick:i,className:"hidden sm:flex items-center space-x-2 bg-slate-100 dark:bg-zinc-800/80 hover:bg-slate-200 dark:hover:bg-zinc-700/80 rounded-full py-2 px-3 transition-colors",children:[f.jsx(za,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),f.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:c("search")})]})}),f.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[f.jsx("button",{onClick:()=>d(s),className:"relative w-10 h-10 flex items-center justify-center rounded-full bg-slate-100 dark:bg-zinc-800/80 hover:bg-slate-200 dark:hover:bg-zinc-700/80 text-gray-700 dark:text-gray-200 transition-colors","aria-label":c("messages"),children:f.jsx(Hh,{})}),f.jsxs("button",{onClick:()=>d(r),className:"relative w-10 h-10 flex items-center justify-center rounded-full bg-slate-100 dark:bg-zinc-800/80 hover:bg-slate-200 dark:hover:bg-zinc-700/80 text-gray-700 dark:text-gray-200 transition-colors","aria-label":c("notifications"),children:[f.jsx(jI,{}),a&&!e&&f.jsx("span",{className:"absolute top-1.5 end-1.5 block h-2.5 w-2.5 rounded-full bg-rose-500 ring-2 ring-light-bg-secondary dark:ring-dark-bg-secondary"})]}),f.jsx("button",{onClick:()=>d(o),className:"relative w-10 h-10 rounded-full overflow-hidden focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-brand-orange dark:focus:ring-offset-dark-bg-secondary","aria-label":c("profile"),children:f.jsx("img",{src:t.avatarUrl,alt:"Your avatar",className:"w-full h-full object-cover"})})]})]})},tD=({adventures:t,stories:e,currentUser:n,onSelectAdventure:i,onSendMessage:s,onToggleInterest:r,onSelectStories:o,onAddStory:a,onNavigateToNotifications:c,hasUnreadNotifications:d,onNavigateToChat:h,onNavigateToSearch:m,onNavigateToProfile:g,onViewProfile:v,onRepostToggle:T,onSaveToggle:w,onShareAdventure:I,onToggleCompleted:b,isGuest:E,onGuestAction:A,onViewLocationOnMap:R,onDeleteAdventure:P,onEditAdventure:U,onJoinGroupChat:S,viewedStoryTimestamps:M})=>{const{t:C}=Be(),[k,N]=y.useState("all"),V=y.useMemo(()=>k==="all"?t:t.filter(L=>L.type===k),[t,k]);return f.jsxs(f.Fragment,{children:[f.jsx(eD,{currentUser:n,isGuest:E,onGuestAction:A,hasUnreadNotifications:d,onNavigateToChat:h,onNavigateToNotifications:c,onNavigateToProfile:g,onNavigateToSearch:m}),f.jsxs("div",{className:"space-y-3",children:[f.jsx(QL,{stories:e,currentUser:n,onSelectStories:o,onAddStory:a,viewedStoryTimestamps:M}),f.jsx(XL,{selectedType:k,onSelectType:N})]}),f.jsxs("div",{className:"px-2 pt-2",children:[V.map(L=>f.jsx(wl,{adventure:L,currentUser:n,isGuest:E,onCommentClick:i,onMessageClick:s,onInterestToggle:r,onViewProfile:v,onRepostToggle:T,onSaveToggle:w,onShareAdventure:I,onToggleCompleted:b,onViewLocationOnMap:R,onDeleteAdventure:P,onEditAdventure:U,onJoinGroupChat:S},L.id)),V.length===0&&f.jsxs("div",{className:"text-center py-10 px-4",children:[f.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-semibold",children:C("noAdventuresToShow")}),f.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm mt-1",children:C(k==="all"?"checkPrivacySettings":"tryAdjustingFilters")})]})]})]})};function oc(t){"@babel/helpers - typeof";return oc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oc(t)}function nD(t,e){if(oc(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(oc(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iD(t){var e=nD(t,"string");return oc(e)=="symbol"?e:e+""}function G(t,e,n){return(e=iD(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gm,iE;function sD(){if(iE)return gm;iE=1;var t=function(n,i,s,r,o,a,c,d){if(!n){var h;if(i===void 0)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var m=[s,r,o,a,c,d],g=0;h=new Error(i.replace(/%s/g,function(){return m[g++]})),h.name="Invariant Violation"}throw h.framesToPop=1,h}};return gm=t,gm}var rD=sD(),sn=zI(rD),De=y.createContext(null);function oD(){sn(!!y.useContext,"useGoogleMap is React hook and requires React version 16.8+");var t=y.useContext(De);return sn(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function aD(t,e,n){return Object.keys(t).reduce(function(s,r){return e(s,t[r],r)},n)}function lD(t,e){Object.keys(t).forEach(n=>e(t[n],n))}function uD(t,e,n,i){var s={},r=(o,a)=>{var c=n[a];c!==e[a]&&(s[a]=c,o(i,c))};return lD(t,r),s}function cD(t,e,n){var i=aD(n,function(r,o,a){return typeof t[a]=="function"&&r.push(google.maps.event.addListener(e,o,t[a])),r},[]);return i}function dD(t){google.maps.event.removeListener(t)}function ze(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.forEach(dD)}function Oe(t){var{updaterMap:e,eventMap:n,prevProps:i,nextProps:s,instance:r}=t,o=cD(s,r,n);return uD(e,i,s,r),o}var sE={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},rE={extraMapTypes(t,e){e.forEach(function(i,s){t.mapTypes.set(String(s),i)})},center(t,e){t.setCenter(e)},clickableIcons(t,e){t.setClickableIcons(e)},heading(t,e){t.setHeading(e)},mapTypeId(t,e){t.setMapTypeId(e)},options(t,e){t.setOptions(e)},streetView(t,e){t.setStreetView(e)},tilt(t,e){t.setTilt(e)},zoom(t,e){t.setZoom(e)}};function fD(t){var{children:e,options:n,id:i,mapContainerStyle:s,mapContainerClassName:r,center:o,onClick:a,onDblClick:c,onDrag:d,onDragEnd:h,onDragStart:m,onMouseMove:g,onMouseOut:v,onMouseOver:T,onMouseDown:w,onMouseUp:I,onRightClick:b,onCenterChanged:E,onLoad:A,onUnmount:R}=t,[P,U]=y.useState(null),S=y.useRef(null),[M,C]=y.useState(null),[k,N]=y.useState(null),[V,L]=y.useState(null),[$,Z]=y.useState(null),[j,ee]=y.useState(null),[q,X]=y.useState(null),[ie,te]=y.useState(null),[ce,ne]=y.useState(null),[fe,F]=y.useState(null),[Re,se]=y.useState(null),[_e,Ue]=y.useState(null),[pe,Ee]=y.useState(null);return y.useEffect(()=>{n&&P!==null&&P.setOptions(n)},[P,n]),y.useEffect(()=>{P!==null&&typeof o<"u"&&P.setCenter(o)},[P,o]),y.useEffect(()=>{P&&c&&(k!==null&&google.maps.event.removeListener(k),N(google.maps.event.addListener(P,"dblclick",c)))},[c]),y.useEffect(()=>{P&&h&&(V!==null&&google.maps.event.removeListener(V),L(google.maps.event.addListener(P,"dragend",h)))},[h]),y.useEffect(()=>{P&&m&&($!==null&&google.maps.event.removeListener($),Z(google.maps.event.addListener(P,"dragstart",m)))},[m]),y.useEffect(()=>{P&&w&&(j!==null&&google.maps.event.removeListener(j),ee(google.maps.event.addListener(P,"mousedown",w)))},[w]),y.useEffect(()=>{P&&g&&(q!==null&&google.maps.event.removeListener(q),X(google.maps.event.addListener(P,"mousemove",g)))},[g]),y.useEffect(()=>{P&&v&&(ie!==null&&google.maps.event.removeListener(ie),te(google.maps.event.addListener(P,"mouseout",v)))},[v]),y.useEffect(()=>{P&&T&&(ce!==null&&google.maps.event.removeListener(ce),ne(google.maps.event.addListener(P,"mouseover",T)))},[T]),y.useEffect(()=>{P&&I&&(fe!==null&&google.maps.event.removeListener(fe),F(google.maps.event.addListener(P,"mouseup",I)))},[I]),y.useEffect(()=>{P&&b&&(Re!==null&&google.maps.event.removeListener(Re),se(google.maps.event.addListener(P,"rightclick",b)))},[b]),y.useEffect(()=>{P&&a&&(_e!==null&&google.maps.event.removeListener(_e),Ue(google.maps.event.addListener(P,"click",a)))},[a]),y.useEffect(()=>{P&&d&&(pe!==null&&google.maps.event.removeListener(pe),Ee(google.maps.event.addListener(P,"drag",d)))},[d]),y.useEffect(()=>{P&&E&&(M!==null&&google.maps.event.removeListener(M),C(google.maps.event.addListener(P,"center_changed",E)))},[a]),y.useEffect(()=>{var he=S.current===null?null:new google.maps.Map(S.current,n);return U(he),he!==null&&A&&A(he),()=>{he!==null&&R&&R(he)}},[]),f.jsx("div",{id:i,ref:S,style:s,className:r,children:f.jsx(De.Provider,{value:P,children:P!==null?e:null})})}y.memo(fD);class qI extends y.PureComponent{constructor(){super(...arguments),G(this,"state",{map:null}),G(this,"registeredEvents",[]),G(this,"mapRef",null),G(this,"getInstance",()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options)),G(this,"panTo",e=>{var n=this.getInstance();n&&n.panTo(e)}),G(this,"setMapCallback",()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)}),G(this,"getRef",e=>{this.mapRef=e})}componentDidMount(){var e=this.getInstance();this.registeredEvents=Oe({updaterMap:rE,eventMap:sE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:rE,eventMap:sE,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),ze(this.registeredEvents))}render(){return f.jsx("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:f.jsx(De.Provider,{value:this.state.map,children:this.state.map!==null?this.props.children:null})})}}function oE(t,e,n,i,s,r,o){try{var a=t[r](o),c=a.value}catch(d){return void n(d)}a.done?e(c):Promise.resolve(c).then(i,s)}function HI(t){return function(){var e=this,n=arguments;return new Promise(function(i,s){var r=t.apply(e,n);function o(c){oE(r,i,s,o,a,"next",c)}function a(c){oE(r,i,s,o,a,"throw",c)}o(void 0)})}}function GI(t){var{googleMapsApiKey:e,googleMapsClientId:n,version:i="weekly",language:s,region:r,libraries:o,channel:a,mapIds:c,authReferrerPolicy:d,apiUrl:h="https://maps.googleapis.com"}=t,m=[];return sn(e&&n||!(e&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),e?m.push("key=".concat(e)):n&&m.push("client=".concat(n)),i&&m.push("v=".concat(i)),s&&m.push("language=".concat(s)),r&&m.push("region=".concat(r)),o&&o.length&&m.push("libraries=".concat(o.sort().join(","))),a&&m.push("channel=".concat(a)),c&&c.length&&m.push("map_ids=".concat(c.join(","))),d&&m.push("auth_referrer_policy=".concat(d)),m.push("loading=async"),m.push("callback=initMap"),"".concat(h,"/maps/api/js?").concat(m.join("&"))}var xr=typeof document<"u";function $I(t){var{url:e,id:n,nonce:i}=t;return xr?new Promise(function(r,o){var a=document.getElementById(n),c=window;if(a){var d=a.getAttribute("data-state");if(a.src===e&&d!=="error"){if(d==="ready")return r(n);var h=c.initMap,m=a.onerror;c.initMap=function(){h&&h(),r(n)},a.onerror=function(v){m&&m(v),o(v)};return}else a.remove()}var g=document.createElement("script");g.type="text/javascript",g.src=e,g.id=n,g.async=!0,g.nonce=i||"",g.onerror=function(T){g.setAttribute("data-state","error"),o(T)},c.initMap=function(){g.setAttribute("data-state","ready"),r(n)},document.head.appendChild(g)}).catch(s=>{throw console.error("injectScript error: ",s),s}):Promise.reject(new Error("document is undefined"))}function aE(t){var e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function Nv(){var t=document.getElementsByTagName("head")[0];if(t){var e=t.insertBefore.bind(t);t.insertBefore=function(s,r){return aE(s)||Reflect.apply(e,t,[s,r]),s};var n=t.appendChild.bind(t);t.appendChild=function(s){return aE(s)||Reflect.apply(n,t,[s]),s}}}var ru=!1;function KI(){return f.jsx("div",{children:"Loading..."})}var ac={id:"script-loader",version:"weekly"};class hD extends y.PureComponent{constructor(){super(...arguments),G(this,"check",null),G(this,"state",{loaded:!1}),G(this,"cleanupCallback",()=>{delete window.google.maps,this.injectScript()}),G(this,"isCleaningUp",HI(function*(){function e(n){if(!ru)n();else if(xr)var i=window.setInterval(function(){ru||(window.clearInterval(i),n())},1)}return new Promise(e)})),G(this,"cleanup",()=>{ru=!0;var e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(i){return typeof i.src=="string"&&i.src.includes("maps.googleapis")}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(i){return i.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(i){return i.innerText!==void 0&&i.innerText.length>0&&i.innerText.includes(".gm-")}).forEach(function(i){i.parentNode&&i.parentNode.removeChild(i)})}),G(this,"injectScript",()=>{this.props.preventGoogleFontsLoading&&Nv(),sn(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);var e={id:this.props.id,nonce:this.props.nonce,url:GI(this.props)};$I(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(n=>{this.props.onError&&this.props.onError(n),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(this.props.googleMapsApiKey||"-",") or Client ID (").concat(this.props.googleMapsClientId||"-",`) to <LoadScript />
          Otherwise it is a Network issue.
        `))})}),G(this,"getRef",e=>{this.check=e})}componentDidMount(){if(xr){if(window.google&&window.google.maps&&!ru){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(n){console.error("Error at injecting script after cleaning up: ",n)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),xr&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(xr){this.cleanup();var e=()=>{this.check||(delete window.google,ru=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return f.jsxs(f.Fragment,{children:[f.jsx("div",{ref:this.getRef}),this.state.loaded?this.props.children:this.props.loadingElement||f.jsx(KI,{})]})}}G(hD,"defaultProps",ac);function pD(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.includes(i))continue;n[i]=t[i]}return n}function Lv(t,e){if(t==null)return{};var n,i,s=pD(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)n=r[i],e.includes(n)||{}.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}var lE;function mD(t){var{id:e=ac.id,version:n=ac.version,nonce:i,googleMapsApiKey:s,googleMapsClientId:r,language:o,region:a,libraries:c,preventGoogleFontsLoading:d,channel:h,mapIds:m,authReferrerPolicy:g,apiUrl:v="https://maps.googleapis.com"}=t,T=y.useRef(!1),[w,I]=y.useState(!1),[b,E]=y.useState(void 0);y.useEffect(function(){return T.current=!0,()=>{T.current=!1}},[]),y.useEffect(function(){xr&&d&&Nv()},[d]),y.useEffect(function(){w&&sn(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[w]);var A=GI({version:n,googleMapsApiKey:s,googleMapsClientId:r,language:o,region:a,libraries:c,channel:h,mapIds:m,authReferrerPolicy:g,apiUrl:v});y.useEffect(function(){if(!xr)return;function U(){T.current&&(I(!0),lE=A)}if(window.google&&window.google.maps&&lE===A){U();return}$I({id:e,url:A,nonce:i}).then(U).catch(function(M){T.current&&E(M),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (`.concat(s||"-",") or Client ID (").concat(r||"-",`)
        Otherwise it is a Network issue.
      `)),console.error(M)})},[e,A,i]);var R=y.useRef(void 0);return y.useEffect(function(){R.current&&c!==R.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),R.current=c},[c]),{isLoaded:w,loadError:b,url:A}}var gD=["loadingElement","onLoad","onError","onUnmount","children"],yD=f.jsx(KI,{});function vD(t){var{loadingElement:e,onLoad:n,onError:i,onUnmount:s,children:r}=t,o=Lv(t,gD),{isLoaded:a,loadError:c}=mD(o);return y.useEffect(function(){a&&typeof n=="function"&&n()},[a,n]),y.useEffect(function(){c&&typeof i=="function"&&i(c)},[c,i]),y.useEffect(function(){return()=>{s&&s()}},[s]),a?r:e||yD}y.memo(vD);function _D(t,e,n,i){function s(r){return r instanceof n?r:new n(function(o){o(r)})}return new(n||(n=Promise))(function(r,o){function a(h){try{d(i.next(h))}catch(m){o(m)}}function c(h){try{d(i.throw(h))}catch(m){o(m)}}function d(h){h.done?r(h.value):s(h.value).then(a,c)}d((i=i.apply(t,[])).next())})}function TD(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ED=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,s,r;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(s=i;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(r=Object.keys(e),i=r.length,i!==Object.keys(n).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,r[s]))return!1;for(s=i;s--!==0;){var o=r[s];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},xD=TD(ED),uE="__googleMapsScriptId",Na;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(Na||(Na={}));class Eo{constructor(e){var{apiKey:n,authReferrerPolicy:i,channel:s,client:r,id:o=uE,language:a,libraries:c=[],mapIds:d,nonce:h,region:m,retries:g=3,url:v="https://maps.googleapis.com/maps/api/js",version:T}=e;if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=n,this.authReferrerPolicy=i,this.channel=s,this.client=r,this.id=o||uE,this.language=a,this.libraries=c,this.mapIds=d,this.nonce=h,this.region=m,this.retries=g,this.url=v,this.version=T,Eo.instance){if(!xD(this.options,Eo.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(Eo.instance.options)));return Eo.instance}Eo.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Na.FAILURE:this.done?Na.SUCCESS:this.loading?Na.LOADING:Na.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){var e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){var e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,n)=>{this.loadCallback(i=>{i?n(i.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,n;if(document.getElementById(this.id)){this.callback();return}var i={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(i).forEach(r=>!i[r]&&delete i[r]),!((n=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||n===void 0)&&n.importLibrary||(r=>{var o,a,c,d="The Google Maps JavaScript API",h="google",m="importLibrary",g="__ib__",v=document,T=window;T=T[h]||(T[h]={});var w=T.maps||(T.maps={}),I=new Set,b=new URLSearchParams,E=()=>o||(o=new Promise((A,R)=>_D(this,void 0,void 0,function*(){var P;yield a=v.createElement("script"),a.id=this.id,b.set("libraries",[...I]+"");for(c in r)b.set(c.replace(/[A-Z]/g,U=>"_"+U[0].toLowerCase()),r[c]);b.set("callback",h+".maps."+g),a.src=this.url+"?"+b,w[g]=A,a.onerror=()=>o=R(Error(d+" could not load.")),a.nonce=this.nonce||((P=v.querySelector("script[nonce]"))===null||P===void 0?void 0:P.nonce)||"",v.head.append(a)})));w[m]?console.warn(d+" only loads once. Ignoring:",r):w[m]=function(A){for(var R=arguments.length,P=new Array(R>1?R-1:0),U=1;U<R;U++)P[U-1]=arguments[U];return I.add(A)&&E().then(()=>w[m](A,...P))}})(i);var s=this.libraries.map(r=>this.importLibrary(r));s.length||s.push(this.importLibrary("core")),Promise.all(s).then(()=>this.callback(),r=>{var o=new ErrorEvent("error",{error:r});this.loadErrorCallback(o)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){var n=this.errors.length*Math.pow(2,this.errors.length);console.error("Failed to load Google Maps script, retrying in ".concat(n," ms.")),setTimeout(()=>{this.deleteScript(),this.setScript()},n)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}var CD=["maps"];function SD(t){var{id:e=ac.id,version:n=ac.version,nonce:i,googleMapsApiKey:s,language:r,region:o,libraries:a=CD,preventGoogleFontsLoading:c,mapIds:d,authReferrerPolicy:h}=t,m=y.useRef(!1),[g,v]=y.useState(!1),[T,w]=y.useState(void 0);y.useEffect(function(){return m.current=!0,()=>{m.current=!1}},[]);var I=y.useMemo(()=>new Eo({id:e,apiKey:s,version:n,libraries:a,language:r||"en",region:o||"US",mapIds:d||[],nonce:i||"",authReferrerPolicy:h||"origin"}),[e,s,n,a,r,o,d,i,h]);y.useEffect(function(){g||I.load().then(()=>{m.current&&v(!0)}).catch(A=>{w(A)})},[]),y.useEffect(()=>{xr&&c&&Nv()},[c]);var b=y.useRef();return y.useEffect(()=>{b.current&&a!==b.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),b.current=a},[a]),{isLoaded:g,loadError:T}}function cE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function qf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cE(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var dE={},fE={options(t,e){t.setOptions(e)}};function wD(t){var{options:e,onLoad:n,onUnmount:i}=t,s=y.useContext(De),[r,o]=y.useState(null);return y.useEffect(()=>{r!==null&&r.setMap(s)},[s]),y.useEffect(()=>{e&&r!==null&&r.setOptions(e)},[r,e]),y.useEffect(()=>{var a=new google.maps.TrafficLayer(qf(qf({},e),{},{map:s}));return o(a),n&&n(a),()=>{r!==null&&(i&&i(r),r.setMap(null))}},[]),null}y.memo(wD);class bD extends y.PureComponent{constructor(){super(...arguments),G(this,"state",{trafficLayer:null}),G(this,"setTrafficLayerCallback",()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)}),G(this,"registeredEvents",[])}componentDidMount(){var e=new google.maps.TrafficLayer(qf(qf({},this.props.options),{},{map:this.context}));this.registeredEvents=Oe({updaterMap:fE,eventMap:dE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:fE,eventMap:dE,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),ze(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}G(bD,"contextType",De);function AD(t){var{onLoad:e,onUnmount:n}=t,i=y.useContext(De),[s,r]=y.useState(null);return y.useEffect(()=>{s!==null&&s.setMap(i)},[i]),y.useEffect(()=>{var o=new google.maps.BicyclingLayer;return r(o),o.setMap(i),e&&e(o),()=>{o!==null&&(n&&n(o),o.setMap(null))}},[]),null}y.memo(AD);class ID extends y.PureComponent{constructor(){super(...arguments),G(this,"state",{bicyclingLayer:null}),G(this,"setBicyclingLayerCallback",()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))})}componentDidMount(){var e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}G(ID,"contextType",De);function MD(t){var{onLoad:e,onUnmount:n}=t,i=y.useContext(De),[s,r]=y.useState(null);return y.useEffect(()=>{s!==null&&s.setMap(i)},[i]),y.useEffect(()=>{var o=new google.maps.TransitLayer;return r(o),o.setMap(i),e&&e(o),()=>{s!==null&&(n&&n(s),s.setMap(null))}},[]),null}y.memo(MD);class RD extends y.PureComponent{constructor(){super(...arguments),G(this,"state",{transitLayer:null}),G(this,"setTransitLayerCallback",()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))})}componentDidMount(){var e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}G(RD,"contextType",De);function hE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function Hf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hE(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var pE={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},mE={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function kD(t){var{options:e,drawingMode:n,onCircleComplete:i,onMarkerComplete:s,onOverlayComplete:r,onPolygonComplete:o,onPolylineComplete:a,onRectangleComplete:c,onLoad:d,onUnmount:h}=t,m=y.useContext(De),[g,v]=y.useState(null),[T,w]=y.useState(null),[I,b]=y.useState(null),[E,A]=y.useState(null),[R,P]=y.useState(null),[U,S]=y.useState(null),[M,C]=y.useState(null);return y.useEffect(()=>{g!==null&&g.setMap(m)},[m]),y.useEffect(()=>{e&&g!==null&&g.setOptions(e)},[g,e]),y.useEffect(()=>{g!==null&&g.setDrawingMode(n??null)},[g,n]),y.useEffect(()=>{g&&i&&(T!==null&&google.maps.event.removeListener(T),w(google.maps.event.addListener(g,"circlecomplete",i)))},[g,i]),y.useEffect(()=>{g&&s&&(I!==null&&google.maps.event.removeListener(I),b(google.maps.event.addListener(g,"markercomplete",s)))},[g,s]),y.useEffect(()=>{g&&r&&(E!==null&&google.maps.event.removeListener(E),A(google.maps.event.addListener(g,"overlaycomplete",r)))},[g,r]),y.useEffect(()=>{g&&o&&(R!==null&&google.maps.event.removeListener(R),P(google.maps.event.addListener(g,"polygoncomplete",o)))},[g,o]),y.useEffect(()=>{g&&a&&(U!==null&&google.maps.event.removeListener(U),S(google.maps.event.addListener(g,"polylinecomplete",a)))},[g,a]),y.useEffect(()=>{g&&c&&(M!==null&&google.maps.event.removeListener(M),C(google.maps.event.addListener(g,"rectanglecomplete",c)))},[g,c]),y.useEffect(()=>{sn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var k=new google.maps.drawing.DrawingManager(Hf(Hf({},e),{},{map:m}));return n&&k.setDrawingMode(n),i&&w(google.maps.event.addListener(k,"circlecomplete",i)),s&&b(google.maps.event.addListener(k,"markercomplete",s)),r&&A(google.maps.event.addListener(k,"overlaycomplete",r)),o&&P(google.maps.event.addListener(k,"polygoncomplete",o)),a&&S(google.maps.event.addListener(k,"polylinecomplete",a)),c&&C(google.maps.event.addListener(k,"rectanglecomplete",c)),v(k),d&&d(k),()=>{g!==null&&(T&&google.maps.event.removeListener(T),I&&google.maps.event.removeListener(I),E&&google.maps.event.removeListener(E),R&&google.maps.event.removeListener(R),U&&google.maps.event.removeListener(U),M&&google.maps.event.removeListener(M),h&&h(g),g.setMap(null))}},[]),null}y.memo(kD);class ND extends y.PureComponent{constructor(e){super(e),G(this,"registeredEvents",[]),G(this,"state",{drawingManager:null}),G(this,"setDrawingManagerCallback",()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)}),sn(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){var e=new google.maps.drawing.DrawingManager(Hf(Hf({},this.props.options),{},{map:this.context}));this.registeredEvents=Oe({updaterMap:mE,eventMap:pE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:mE,eventMap:pE,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),ze(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}G(ND,"contextType",De);function gE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function qa(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gE(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var yE={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},vE={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},Gf={};function LD(t){var{position:e,options:n,clusterer:i,noClustererRedraw:s,children:r,draggable:o,visible:a,animation:c,clickable:d,cursor:h,icon:m,label:g,opacity:v,shape:T,title:w,zIndex:I,onClick:b,onDblClick:E,onDrag:A,onDragEnd:R,onDragStart:P,onMouseOut:U,onMouseOver:S,onMouseUp:M,onMouseDown:C,onRightClick:k,onClickableChanged:N,onCursorChanged:V,onAnimationChanged:L,onDraggableChanged:$,onFlatChanged:Z,onIconChanged:j,onPositionChanged:ee,onShapeChanged:q,onTitleChanged:X,onVisibleChanged:ie,onZindexChanged:te,onLoad:ce,onUnmount:ne}=t,fe=y.useContext(De),[F,Re]=y.useState(null),[se,_e]=y.useState(null),[Ue,pe]=y.useState(null),[Ee,he]=y.useState(null),[pt,Vt]=y.useState(null),[Pe,ye]=y.useState(null),[Je,Rt]=y.useState(null),[Le,Q]=y.useState(null),[We,En]=y.useState(null),[xn,ae]=y.useState(null),[qe,Ut]=y.useState(null),[vt,Ui]=y.useState(null),[$s,io]=y.useState(null),[jt,zt]=y.useState(null),[it,st]=y.useState(null),[Vn,fi]=y.useState(null),[as,ls]=y.useState(null),[us,Ai]=y.useState(null),[so,qt]=y.useState(null),[cs,Rn]=y.useState(null),[fn,Ii]=y.useState(null),[$n,Cn]=y.useState(null);y.useEffect(()=>{F!==null&&F.setMap(fe)},[fe]),y.useEffect(()=>{typeof n<"u"&&F!==null&&F.setOptions(n)},[F,n]),y.useEffect(()=>{typeof o<"u"&&F!==null&&F.setDraggable(o)},[F,o]),y.useEffect(()=>{e&&F!==null&&F.setPosition(e)},[F,e]),y.useEffect(()=>{typeof a<"u"&&F!==null&&F.setVisible(a)},[F,a]),y.useEffect(()=>{F==null||F.setAnimation(c)},[F,c]),y.useEffect(()=>{F&&d!==void 0&&F.setClickable(d)},[F,d]),y.useEffect(()=>{F&&h!==void 0&&F.setCursor(h)},[F,h]),y.useEffect(()=>{F&&m!==void 0&&F.setIcon(m)},[F,m]),y.useEffect(()=>{F&&g!==void 0&&F.setLabel(g)},[F,g]),y.useEffect(()=>{F&&v!==void 0&&F.setOpacity(v)},[F,v]),y.useEffect(()=>{F&&T!==void 0&&F.setShape(T)},[F,T]),y.useEffect(()=>{F&&w!==void 0&&F.setTitle(w)},[F,w]),y.useEffect(()=>{F&&I!==void 0&&F.setZIndex(I)},[F,I]),y.useEffect(()=>{F&&E&&(se!==null&&google.maps.event.removeListener(se),_e(google.maps.event.addListener(F,"dblclick",E)))},[E]),y.useEffect(()=>{F&&R&&(Ue!==null&&google.maps.event.removeListener(Ue),pe(google.maps.event.addListener(F,"dragend",R)))},[R]),y.useEffect(()=>{F&&P&&(Ee!==null&&google.maps.event.removeListener(Ee),he(google.maps.event.addListener(F,"dragstart",P)))},[P]),y.useEffect(()=>{F&&C&&(pt!==null&&google.maps.event.removeListener(pt),Vt(google.maps.event.addListener(F,"mousedown",C)))},[C]),y.useEffect(()=>{F&&U&&(Pe!==null&&google.maps.event.removeListener(Pe),ye(google.maps.event.addListener(F,"mouseout",U)))},[U]),y.useEffect(()=>{F&&S&&(Je!==null&&google.maps.event.removeListener(Je),Rt(google.maps.event.addListener(F,"mouseover",S)))},[S]),y.useEffect(()=>{F&&M&&(Le!==null&&google.maps.event.removeListener(Le),Q(google.maps.event.addListener(F,"mouseup",M)))},[M]),y.useEffect(()=>{F&&k&&(We!==null&&google.maps.event.removeListener(We),En(google.maps.event.addListener(F,"rightclick",k)))},[k]),y.useEffect(()=>{F&&b&&(xn!==null&&google.maps.event.removeListener(xn),ae(google.maps.event.addListener(F,"click",b)))},[b]),y.useEffect(()=>{F&&A&&(qe!==null&&google.maps.event.removeListener(qe),Ut(google.maps.event.addListener(F,"drag",A)))},[A]),y.useEffect(()=>{F&&N&&(vt!==null&&google.maps.event.removeListener(vt),Ui(google.maps.event.addListener(F,"clickable_changed",N)))},[N]),y.useEffect(()=>{F&&V&&($s!==null&&google.maps.event.removeListener($s),io(google.maps.event.addListener(F,"cursor_changed",V)))},[V]),y.useEffect(()=>{F&&L&&(jt!==null&&google.maps.event.removeListener(jt),zt(google.maps.event.addListener(F,"animation_changed",L)))},[L]),y.useEffect(()=>{F&&$&&(it!==null&&google.maps.event.removeListener(it),st(google.maps.event.addListener(F,"draggable_changed",$)))},[$]),y.useEffect(()=>{F&&Z&&(Vn!==null&&google.maps.event.removeListener(Vn),fi(google.maps.event.addListener(F,"flat_changed",Z)))},[Z]),y.useEffect(()=>{F&&j&&(as!==null&&google.maps.event.removeListener(as),ls(google.maps.event.addListener(F,"icon_changed",j)))},[j]),y.useEffect(()=>{F&&ee&&(us!==null&&google.maps.event.removeListener(us),Ai(google.maps.event.addListener(F,"position_changed",ee)))},[ee]),y.useEffect(()=>{F&&q&&(so!==null&&google.maps.event.removeListener(so),qt(google.maps.event.addListener(F,"shape_changed",q)))},[q]),y.useEffect(()=>{F&&X&&(cs!==null&&google.maps.event.removeListener(cs),Rn(google.maps.event.addListener(F,"title_changed",X)))},[X]),y.useEffect(()=>{F&&ie&&(fn!==null&&google.maps.event.removeListener(fn),Ii(google.maps.event.addListener(F,"visible_changed",ie)))},[ie]),y.useEffect(()=>{F&&te&&($n!==null&&google.maps.event.removeListener($n),Cn(google.maps.event.addListener(F,"zindex_changed",te)))},[te]),y.useEffect(()=>{var Bi=qa(qa(qa({},n||Gf),i?Gf:{map:fe}),{},{position:e}),xe=new google.maps.Marker(Bi);return i?i.addMarker(xe,!!s):xe.setMap(fe),e&&xe.setPosition(e),typeof a<"u"&&xe.setVisible(a),typeof o<"u"&&xe.setDraggable(o),typeof d<"u"&&xe.setClickable(d),typeof h=="string"&&xe.setCursor(h),m&&xe.setIcon(m),typeof g<"u"&&xe.setLabel(g),typeof v<"u"&&xe.setOpacity(v),T&&xe.setShape(T),typeof w=="string"&&xe.setTitle(w),typeof I=="number"&&xe.setZIndex(I),E&&_e(google.maps.event.addListener(xe,"dblclick",E)),R&&pe(google.maps.event.addListener(xe,"dragend",R)),P&&he(google.maps.event.addListener(xe,"dragstart",P)),C&&Vt(google.maps.event.addListener(xe,"mousedown",C)),U&&ye(google.maps.event.addListener(xe,"mouseout",U)),S&&Rt(google.maps.event.addListener(xe,"mouseover",S)),M&&Q(google.maps.event.addListener(xe,"mouseup",M)),k&&En(google.maps.event.addListener(xe,"rightclick",k)),b&&ae(google.maps.event.addListener(xe,"click",b)),A&&Ut(google.maps.event.addListener(xe,"drag",A)),N&&Ui(google.maps.event.addListener(xe,"clickable_changed",N)),V&&io(google.maps.event.addListener(xe,"cursor_changed",V)),L&&zt(google.maps.event.addListener(xe,"animation_changed",L)),$&&st(google.maps.event.addListener(xe,"draggable_changed",$)),Z&&fi(google.maps.event.addListener(xe,"flat_changed",Z)),j&&ls(google.maps.event.addListener(xe,"icon_changed",j)),ee&&Ai(google.maps.event.addListener(xe,"position_changed",ee)),q&&qt(google.maps.event.addListener(xe,"shape_changed",q)),X&&Rn(google.maps.event.addListener(xe,"title_changed",X)),ie&&Ii(google.maps.event.addListener(xe,"visible_changed",ie)),te&&Cn(google.maps.event.addListener(xe,"zindex_changed",te)),Re(xe),ce&&ce(xe),()=>{se!==null&&google.maps.event.removeListener(se),Ue!==null&&google.maps.event.removeListener(Ue),Ee!==null&&google.maps.event.removeListener(Ee),pt!==null&&google.maps.event.removeListener(pt),Pe!==null&&google.maps.event.removeListener(Pe),Je!==null&&google.maps.event.removeListener(Je),Le!==null&&google.maps.event.removeListener(Le),We!==null&&google.maps.event.removeListener(We),xn!==null&&google.maps.event.removeListener(xn),vt!==null&&google.maps.event.removeListener(vt),$s!==null&&google.maps.event.removeListener($s),jt!==null&&google.maps.event.removeListener(jt),it!==null&&google.maps.event.removeListener(it),Vn!==null&&google.maps.event.removeListener(Vn),as!==null&&google.maps.event.removeListener(as),us!==null&&google.maps.event.removeListener(us),cs!==null&&google.maps.event.removeListener(cs),fn!==null&&google.maps.event.removeListener(fn),$n!==null&&google.maps.event.removeListener($n),ne&&ne(xe),i?i.removeMarker(xe,!!s):xe&&xe.setMap(null)}},[]);var Oi=y.useMemo(()=>r?y.Children.map(r,Bi=>{if(!y.isValidElement(Bi))return Bi;var xe=Bi;return y.cloneElement(xe,{anchor:F})}):null,[r,F]);return f.jsx(f.Fragment,{children:Oi})||null}var Pu=y.memo(LD);class DD extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[])}componentDidMount(){var e=this;return HI(function*(){var n=qa(qa(qa({},e.props.options||Gf),e.props.clusterer?Gf:{map:e.context}),{},{position:e.props.position});e.marker=new google.maps.Marker(n),e.props.clusterer?e.props.clusterer.addMarker(e.marker,!!e.props.noClustererRedraw):e.marker.setMap(e.context),e.registeredEvents=Oe({updaterMap:vE,eventMap:yE,prevProps:{},nextProps:e.props,instance:e.marker}),e.props.onLoad&&e.props.onLoad(e.marker)})()}componentDidUpdate(e){this.marker&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:vE,eventMap:yE,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),ze(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){var e=this.props.children?y.Children.map(this.props.children,n=>{if(!y.isValidElement(n))return n;var i=n;return y.cloneElement(i,{anchor:this.marker})}):null;return e||null}}G(DD,"contextType",De);var PD=function(){function t(e,n){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var n=this.cluster.getClusterer();if(google.maps.event.trigger(n,"click",this.cluster),google.maps.event.trigger(n,"clusterclick",this.cluster),n.getZoomOnClick()){var i=n.getMaxZoom(),s=this.cluster.getBounds(),r=n.getMap();r!==null&&"fitBounds"in r&&r.fitBounds(s),this.timeOut=window.setTimeout(function(){var o=n.getMap();if(o!==null){"fitBounds"in o&&o.fitBounds(s);var a=o.getZoom()||0;i!==null&&a>i&&o.setZoom(i+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var n=this.getMap();n!==null&&(this.boundsChangedListener=google.maps.event.addListener(n,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,n,i,s,r,o;if(this.div&&this.center){var a=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,c=this.backgroundPosition.split(" "),d=parseInt(((e=c[0])===null||e===void 0?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),h=parseInt(((n=c[1])===null||n===void 0?void 0:n.replace(/^\s+|\s+$/g,""))||"0",10),m=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(m!==null?"".concat(m.y,"px"):"0","; left: ").concat(m!==null?"".concat(m.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var g=document.createElement("img");g.alt=a,g.src=this.url,g.width=this.width,g.height=this.height,g.setAttribute("style","position: absolute; top: ".concat(h,"px; left: ").concat(d,"px")),this.cluster.getClusterer().enableRetinaIcons||(g.style.clip="rect(-".concat(h,"px, -").concat(d+this.width,"px, -").concat(h+this.height,", -").concat(d,")"));var v=document.createElement("div");v.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((i=this.sums)===null||i===void 0)&&i.text&&(v.innerText="".concat((s=this.sums)===null||s===void 0?void 0:s.text)),!((r=this.sums)===null||r===void 0)&&r.html&&(v.innerHTML="".concat((o=this.sums)===null||o===void 0?void 0:o.html)),this.div.innerHTML="",this.div.appendChild(g),this.div.appendChild(v),this.div.title=a,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var n=this.cluster.getClusterer().getStyles(),i=n[Math.min(n.length-1,Math.max(0,e.index-1))];i&&(this.url=i.url,this.height=i.height,this.width=i.width,i.className&&(this.className="".concat(this.clusterClassName," ").concat(i.className)),this.anchorText=i.anchorText||[0,0],this.anchorIcon=i.anchorIcon||[this.height/2,this.width/2],this.textColor=i.textColor||"black",this.textSize=i.textSize||11,this.textDecoration=i.textDecoration||"none",this.fontWeight=i.fontWeight||"bold",this.fontStyle=i.fontStyle||"normal",this.fontFamily=i.fontFamily||"Arial,sans-serif",this.backgroundPosition=i.backgroundPosition||"0 0")},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var n=this.getProjection().fromLatLngToDivPixel(e);return n!==null&&(n.x-=this.anchorIcon[1],n.y-=this.anchorIcon[0]),n},t}(),VD=function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new PD(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),n=this.getMarkers(),i=0,s=n;i<s.length;i++){var r=s[i],o=r.getPosition();o&&e.extend(o)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var i=e.getPosition();if(i){var s=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(s-1)+i.lat())/s,(this.center.lng()*(s-1)+i.lng())/s),this.calculateBounds()}}}else{var i=e.getPosition();i&&(this.center=i,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var r=this.markers.length,o=this.markerClusterer.getMaxZoom(),a=(n=this.map)===null||n===void 0?void 0:n.getZoom();if(o!==null&&typeof a<"u"&&a>o)e.getMap()!==this.map&&e.setMap(this.map);else if(r<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(r===this.minClusterSize)for(var c=0,d=this.markers;c<d.length;c++){var h=d[c];h.setMap(null)}else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var n=e.getPosition();if(n)return this.bounds.contains(n)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,n=this.markers.length,i=this.markerClusterer.getMaxZoom(),s=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(i!==null&&typeof s<"u"&&s>i){this.clusterIcon.hide();return}if(n<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var n=0;n<this.markers.length;n++)if(e===this.markers[n])return!0;return!1},t}();function UD(t,e){var n=t.length,i=n.toString().length,s=Math.min(i,e);return{text:n.toString(),index:s,title:""}}var OD=2e3,BD=500,FD="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",jD="png",zD=[53,56,66,78,90],qD="cluster",JI=function(){function t(e,n,i){n===void 0&&(n=[]),i===void 0&&(i={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=i.gridSize||60,this.minClusterSize=i.minimumClusterSize||2,this.maxZoom=i.maxZoom||null,this.styles=i.styles||[],this.title=i.title||"",this.zoomOnClick=!0,i.zoomOnClick!==void 0&&(this.zoomOnClick=i.zoomOnClick),this.averageCenter=!1,i.averageCenter!==void 0&&(this.averageCenter=i.averageCenter),this.ignoreHidden=!1,i.ignoreHidden!==void 0&&(this.ignoreHidden=i.ignoreHidden),this.enableRetinaIcons=!1,i.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=i.enableRetinaIcons),this.imagePath=i.imagePath||FD,this.imageExtension=i.imageExtension||jD,this.imageSizes=i.imageSizes||zD,this.calculator=i.calculator||UD,this.batchSize=i.batchSize||OD,this.batchSizeIE=i.batchSizeIE||BD,this.clusterClass=i.clusterClass||qD,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,n;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((n=this.getMap())===null||n===void 0?void 0:n.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0,n=this.markers;e<n.length;e++){var i=n[e];i.getMap()!==this.activeMap&&i.setMap(this.activeMap)}for(var s=0,r=this.clusters;s<r.length;s++){var o=r[s];o.remove()}this.clusters=[];for(var a=0,c=this.listeners;a<c.length;a++){var d=c[a];google.maps.event.removeListener(d)}this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.getMap=function(){return null},t.prototype.getPanes=function(){return null},t.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},t.prototype.setMap=function(){},t.prototype.addListener=function(){return{remove:function(){}}},t.prototype.bindTo=function(){},t.prototype.get=function(){},t.prototype.notify=function(){},t.prototype.set=function(){},t.prototype.setValues=function(){},t.prototype.unbind=function(){},t.prototype.unbindAll=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),n=new google.maps.LatLngBounds,i=0,s=e;i<s.length;i++){var r=s[i],o=r.getPosition();o&&n.extend(o)}var a=this.getMap();a!==null&&"fitBounds"in a&&a.fitBounds(n)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,n){this.pushMarkerTo(e),n||this.redraw()},t.prototype.addMarkers=function(e,n){for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];s&&this.pushMarkerTo(s)}n||this.redraw()},t.prototype.pushMarkerTo=function(e){var n=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){n.ready&&(e.isAdded=!1,n.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var n=-1;if(this.markers.indexOf)n=this.markers.indexOf(e);else for(var i=0;i<this.markers.length;i++)if(e===this.markers[i]){n=i;break}return n===-1?!1:(e.setMap(null),this.markers.splice(n,1),!0)},t.prototype.removeMarker=function(e,n){var i=this.removeMarker_(e);return!n&&i&&this.repaint(),i},t.prototype.removeMarkers=function(e,n){for(var i=!1,s=0,r=e;s<r.length;s++){var o=r[s];i=i||this.removeMarker_(o)}return!n&&i&&this.repaint(),i},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var i=0,s=e;i<s.length;i++){var r=s[i];r.remove()}},0)},t.prototype.getExtendedBounds=function(e){var n=this.getProjection(),i=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));i!==null&&(i.x+=this.gridSize,i.y-=this.gridSize);var s=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(s!==null&&(s.x-=this.gridSize,s.y+=this.gridSize),i!==null){var r=n.fromDivPixelToLatLng(i);r!==null&&e.extend(r)}if(s!==null){var o=n.fromDivPixelToLatLng(s);o!==null&&e.extend(o)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var n=0,i=this.clusters;n<i.length;n++){var s=i[n];s.remove()}this.clusters=[];for(var r=0,o=this.markers;r<o.length;r++){var a=o[r];a.isAdded=!1,e&&a.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,n){var i=6371,s=(n.lat()-e.lat())*Math.PI/180,r=(n.lng()-e.lng())*Math.PI/180,o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(n.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return i*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},t.prototype.isMarkerInBounds=function(e,n){var i=e.getPosition();return i?n.contains(i):!1},t.prototype.addToClosestCluster=function(e){for(var n,i=4e4,s=null,r=0,o=this.clusters;r<o.length;r++){var a=o[r];n=a;var c=n.getCenter(),d=e.getPosition();if(c&&d){var h=this.distanceBetweenPoints(c,d);h<i&&(i=h,s=n)}}s&&s.isMarkerInClusterBounds(e)?s.addMarker(e):(n=new VD(this),n.addMarker(e),this.clusters.push(n))},t.prototype.createClusters=function(e){var n=this;if(this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var i=this.getMap(),s=i!==null&&("getBounds"in i)?i.getBounds():null,r=(i==null?void 0:i.getZoom())||0,o=r>3?new google.maps.LatLngBounds(s==null?void 0:s.getSouthWest(),s==null?void 0:s.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),a=this.getExtendedBounds(o),c=Math.min(e+this.batchSize,this.markers.length),d=e;d<c;d++){var h=this.markers[d];h&&!h.isAdded&&this.isMarkerInBounds(h,a)&&(!this.ignoreHidden||this.ignoreHidden&&h.getVisible())&&this.addToClosestCluster(h)}if(c<this.markers.length)this.timerRefStatic=window.setTimeout(function(){n.createClusters(c)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var m=0,g=this.clusters;m<g.length;m++){var v=g[m];v.updateIcon()}}}},t.prototype.extend=function(e,n){return(function(s){for(var r in s.prototype){var o=r;this.prototype[o]=s.prototype[o]}return this}).apply(e,[n])},t}();function _E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function HD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_E(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_E(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var pi={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},Xe={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},GD={};function $D(t){var{children:e,options:n,averageCenter:i,batchSizeIE:s,calculator:r,clusterClass:o,enableRetinaIcons:a,gridSize:c,ignoreHidden:d,imageExtension:h,imagePath:m,imageSizes:g,maxZoom:v,minimumClusterSize:T,styles:w,title:I,zoomOnClick:b,onClick:E,onClusteringBegin:A,onClusteringEnd:R,onMouseOver:P,onMouseOut:U,onLoad:S,onUnmount:M}=t,[C,k]=y.useState(null),N=y.useContext(De),[V,L]=y.useState(null),[$,Z]=y.useState(null),[j,ee]=y.useState(null),[q,X]=y.useState(null),[ie,te]=y.useState(null);return y.useEffect(()=>{C&&U&&(q!==null&&google.maps.event.removeListener(q),X(google.maps.event.addListener(C,pi.onMouseOut,U)))},[U]),y.useEffect(()=>{C&&P&&(ie!==null&&google.maps.event.removeListener(ie),te(google.maps.event.addListener(C,pi.onMouseOver,P)))},[P]),y.useEffect(()=>{C&&E&&(V!==null&&google.maps.event.removeListener(V),L(google.maps.event.addListener(C,pi.onClick,E)))},[E]),y.useEffect(()=>{C&&A&&($!==null&&google.maps.event.removeListener($),Z(google.maps.event.addListener(C,pi.onClusteringBegin,A)))},[A]),y.useEffect(()=>{C&&R&&(j!==null&&google.maps.event.removeListener(j),Z(google.maps.event.addListener(C,pi.onClusteringEnd,R)))},[R]),y.useEffect(()=>{typeof i<"u"&&C!==null&&Xe.averageCenter(C,i)},[C,i]),y.useEffect(()=>{typeof s<"u"&&C!==null&&Xe.batchSizeIE(C,s)},[C,s]),y.useEffect(()=>{typeof r<"u"&&C!==null&&Xe.calculator(C,r)},[C,r]),y.useEffect(()=>{typeof o<"u"&&C!==null&&Xe.clusterClass(C,o)},[C,o]),y.useEffect(()=>{typeof a<"u"&&C!==null&&Xe.enableRetinaIcons(C,a)},[C,a]),y.useEffect(()=>{typeof c<"u"&&C!==null&&Xe.gridSize(C,c)},[C,c]),y.useEffect(()=>{typeof d<"u"&&C!==null&&Xe.ignoreHidden(C,d)},[C,d]),y.useEffect(()=>{typeof h<"u"&&C!==null&&Xe.imageExtension(C,h)},[C,h]),y.useEffect(()=>{typeof m<"u"&&C!==null&&Xe.imagePath(C,m)},[C,m]),y.useEffect(()=>{typeof g<"u"&&C!==null&&Xe.imageSizes(C,g)},[C,g]),y.useEffect(()=>{typeof v<"u"&&C!==null&&Xe.maxZoom(C,v)},[C,v]),y.useEffect(()=>{typeof T<"u"&&C!==null&&Xe.minimumClusterSize(C,T)},[C,T]),y.useEffect(()=>{typeof w<"u"&&C!==null&&Xe.styles(C,w)},[C,w]),y.useEffect(()=>{typeof I<"u"&&C!==null&&Xe.title(C,I)},[C,I]),y.useEffect(()=>{typeof b<"u"&&C!==null&&Xe.zoomOnClick(C,b)},[C,b]),y.useEffect(()=>{if(N){var ce=HD({},n||GD),ne=new JI(N,[],ce);return i&&Xe.averageCenter(ne,i),s&&Xe.batchSizeIE(ne,s),r&&Xe.calculator(ne,r),o&&Xe.clusterClass(ne,o),a&&Xe.enableRetinaIcons(ne,a),c&&Xe.gridSize(ne,c),d&&Xe.ignoreHidden(ne,d),h&&Xe.imageExtension(ne,h),m&&Xe.imagePath(ne,m),g&&Xe.imageSizes(ne,g),v&&Xe.maxZoom(ne,v),T&&Xe.minimumClusterSize(ne,T),w&&Xe.styles(ne,w),I&&Xe.title(ne,I),b&&Xe.zoomOnClick(ne,b),U&&X(google.maps.event.addListener(ne,pi.onMouseOut,U)),P&&te(google.maps.event.addListener(ne,pi.onMouseOver,P)),E&&L(google.maps.event.addListener(ne,pi.onClick,E)),A&&Z(google.maps.event.addListener(ne,pi.onClusteringBegin,A)),R&&ee(google.maps.event.addListener(ne,pi.onClusteringEnd,R)),k(ne),S&&S(ne),()=>{q!==null&&google.maps.event.removeListener(q),ie!==null&&google.maps.event.removeListener(ie),V!==null&&google.maps.event.removeListener(V),$!==null&&google.maps.event.removeListener($),j!==null&&google.maps.event.removeListener(j),M&&M(ne)}}},[]),C!==null&&e(C)||null}y.memo($D);class KD extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"state",{markerClusterer:null}),G(this,"setClustererCallback",()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)})}componentDidMount(){if(this.context){var e=new JI(this.context,[],this.props.options);this.registeredEvents=Oe({updaterMap:Xe,eventMap:pi,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:Xe,eventMap:pi,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),ze(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}G(KD,"contextType",De);function TE(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var YI=function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,n=function(h){h.returnValue=!1,h.preventDefault&&h.preventDefault(),e.enableEventPropagation||TE(h)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var i=this.getPanes();if(i!==null&&i[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var s=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-s.left-s.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var r=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],o=0,a=r;o<a.length;o++){var c=a[o];this.eventListeners.push(google.maps.event.addListener(this.div,c,TE))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",n),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var n=this.getMap();if(n instanceof google.maps.Map){var i=0,s=0,r=n.getBounds();r&&!r.contains(this.position)&&n.setCenter(this.position);var o=n.getDiv(),a=o.offsetWidth,c=o.offsetHeight,d=this.pixelOffset.width,h=this.pixelOffset.height,m=this.div.offsetWidth,g=this.div.offsetHeight,v=this.infoBoxClearance.width,T=this.infoBoxClearance.height,w=this.getProjection(),I=w.fromLatLngToContainerPixel(this.position);I!==null&&(I.x<-d+v?i=I.x+d-v:I.x+m+d+v>a&&(i=I.x+m+d+v-a),this.alignBottom?I.y<-h+T+g?s=I.y+h-T-g:I.y+h+T>c&&(s=I.y+h+T-c):I.y<-h+T?s=I.y+h-T:I.y+g+h+T>c&&(s=I.y+g+h+T-c)),i===0&&s===0||n.panBy(i,s)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this.div.style[n]=e[n]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var i=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+i*100+')"',this.div.style.filter="alpha(opacity="+i*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var n=this.div.ownerDocument,i=n&&n.defaultView?n.defaultView.getComputedStyle(this.div,""):null;i&&(e.top=parseInt(i.borderTopWidth||"",10)||0,e.bottom=parseInt(i.borderBottomWidth||"",10)||0,e.left=parseInt(i.borderLeftWidth||"",10)||0,e.right=parseInt(i.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var s=this.div.currentStyle;s&&(e.top=parseInt(s.borderTopWidth||"",10)||0,e.bottom=parseInt(s.borderBottomWidth||"",10)||0,e.left=parseInt(s.borderLeftWidth||"",10)||0,e.right=parseInt(s.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),n=e.fromLatLngToDivPixel(this.position);n!==null&&(this.div.style.left=n.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(n.y+this.pixelOffset.height)+"px":this.div.style.top=n.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,n){var i=this;n&&(this.position=n.getPosition(),this.moveListener=google.maps.event.addListener(n,"position_changed",function(){var s=n.getPosition();i.setPosition(s)}),this.mapListener=google.maps.event.addListener(n,"map_changed",function(){i.setMap(n.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,n=this.eventListeners;e<n.length;e++){var i=n[e];google.maps.event.removeListener(i)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,n){return(function(s){for(var r in s.prototype)Object.prototype.hasOwnProperty.call(this,r)||(this.prototype[r]=s.prototype[r]);return this}).apply(e,[n])},t}(),JD=["position"],YD=["position"];function EE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function $f(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?EE(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):EE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var xE={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},CE={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},WD={};function QD(t){var{children:e,anchor:n,options:i,position:s,zIndex:r,onCloseClick:o,onDomReady:a,onContentChanged:c,onPositionChanged:d,onZindexChanged:h,onLoad:m,onUnmount:g}=t,v=y.useContext(De),[T,w]=y.useState(null),[I,b]=y.useState(null),[E,A]=y.useState(null),[R,P]=y.useState(null),[U,S]=y.useState(null),[M,C]=y.useState(null),k=y.useRef(null);return y.useEffect(()=>{v&&T!==null&&(T.close(),n?T.open(v,n):T.getPosition()&&T.open(v))},[v,T,n]),y.useEffect(()=>{i&&T!==null&&T.setOptions(i)},[T,i]),y.useEffect(()=>{if(s&&T!==null){var N=s instanceof google.maps.LatLng?s:new google.maps.LatLng(s.lat,s.lng);T.setPosition(N)}},[s]),y.useEffect(()=>{typeof r=="number"&&T!==null&&T.setZIndex(r)},[r]),y.useEffect(()=>{T&&o&&(I!==null&&google.maps.event.removeListener(I),b(google.maps.event.addListener(T,"closeclick",o)))},[o]),y.useEffect(()=>{T&&a&&(E!==null&&google.maps.event.removeListener(E),A(google.maps.event.addListener(T,"domready",a)))},[a]),y.useEffect(()=>{T&&c&&(R!==null&&google.maps.event.removeListener(R),P(google.maps.event.addListener(T,"content_changed",c)))},[c]),y.useEffect(()=>{T&&d&&(U!==null&&google.maps.event.removeListener(U),S(google.maps.event.addListener(T,"position_changed",d)))},[d]),y.useEffect(()=>{T&&h&&(M!==null&&google.maps.event.removeListener(M),C(google.maps.event.addListener(T,"zindex_changed",h)))},[h]),y.useEffect(()=>{if(v){var N=i||WD,{position:V}=N,L=Lv(N,JD),$;V&&!(V instanceof google.maps.LatLng)&&($=new google.maps.LatLng(V.lat,V.lng));var Z=new YI($f($f({},L),$?{position:$}:{}));k.current=document.createElement("div"),w(Z),o&&b(google.maps.event.addListener(Z,"closeclick",o)),a&&A(google.maps.event.addListener(Z,"domready",a)),c&&P(google.maps.event.addListener(Z,"content_changed",c)),d&&S(google.maps.event.addListener(Z,"position_changed",d)),h&&C(google.maps.event.addListener(Z,"zindex_changed",h)),Z.setContent(k.current),n?Z.open(v,n):Z.getPosition()?Z.open(v):sn(!1,"You must provide either an anchor or a position prop for <InfoBox>."),m&&m(Z)}return()=>{T!==null&&(I&&google.maps.event.removeListener(I),R&&google.maps.event.removeListener(R),E&&google.maps.event.removeListener(E),U&&google.maps.event.removeListener(U),M&&google.maps.event.removeListener(M),g&&g(T),T.close())}},[]),k.current?qo.createPortal(y.Children.only(e),k.current):null}y.memo(QD);class ZD extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"containerElement",null),G(this,"state",{infoBox:null}),G(this,"open",(e,n)=>{n?this.context!==null&&e.open(this.context,n):e.getPosition()?this.context!==null&&e.open(this.context):sn(!1,"You must provide either an anchor or a position prop for <InfoBox>.")}),G(this,"setInfoBoxCallback",()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))})}componentDidMount(){var e=this.props.options||{},{position:n}=e,i=Lv(e,YD),s;n&&!(n instanceof google.maps.LatLng)&&(s=new google.maps.LatLng(n.lat,n.lng));var r=new YI($f($f({},i),s?{position:s}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=Oe({updaterMap:CE,eventMap:xE,prevProps:{},nextProps:this.props,instance:r}),this.setState({infoBox:r},this.setInfoBoxCallback)}componentDidUpdate(e){var{infoBox:n}=this.state;n!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:CE,eventMap:xE,prevProps:e,nextProps:this.props,instance:n}))}componentWillUnmount(){var{onUnmount:e}=this.props,{infoBox:n}=this.state;n!==null&&(e&&e(n),ze(this.registeredEvents),n.close())}render(){return this.containerElement?qo.createPortal(y.Children.only(this.props.children),this.containerElement):null}}G(ZD,"contextType",De);var ym,SE;function XD(){return SE||(SE=1,ym=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,s,r;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(s=i;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(r=Object.keys(e),i=r.length,i!==Object.keys(n).length)return!1;for(s=i;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,r[s]))return!1;for(s=i;s--!==0;){var o=r[s];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n}),ym}var eP=XD(),wE=zI(eP),bE=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],vm=1,ou=8;class Dv{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var[n,i]=new Uint8Array(e,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");var s=i>>4;if(s!==vm)throw new Error("Got v".concat(s," data when expected v").concat(vm,"."));var r=bE[i&15];if(!r)throw new Error("Unrecognized array type.");var[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new Dv(a,o,r,e)}constructor(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:64,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float64Array,s=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=i,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;var r=bE.indexOf(this.ArrayType),o=e*2*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,c=(8-a%8)%8;if(r<0)throw new Error("Unexpected typed array class: ".concat(i,"."));s&&s instanceof ArrayBuffer?(this.data=s,this.ids=new this.IndexArrayType(this.data,ou,e),this.coords=new this.ArrayType(this.data,ou+a+c,e*2),this._pos=e*2,this._finished=!0):(this.data=new ArrayBuffer(ou+o+a+c),this.ids=new this.IndexArrayType(this.data,ou,e),this.coords=new this.ArrayType(this.data,ou+a+c,e*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(vm<<4)+r]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=e)}add(e,n){var i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=e,this.coords[this._pos++]=n,i}finish(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Og(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,n,i,s){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:r,coords:o,nodeSize:a}=this,c=[0,r.length-1,0],d=[];c.length;){var h=c.pop()||0,m=c.pop()||0,g=c.pop()||0;if(m-g<=a){for(var v=g;v<=m;v++){var T=o[2*v],w=o[2*v+1];T>=e&&T<=i&&w>=n&&w<=s&&d.push(r[v])}continue}var I=g+m>>1,b=o[2*I],E=o[2*I+1];b>=e&&b<=i&&E>=n&&E<=s&&d.push(r[I]),(h===0?e<=b:n<=E)&&(c.push(g),c.push(I-1),c.push(1-h)),(h===0?i>=b:s>=E)&&(c.push(I+1),c.push(m),c.push(1-h))}return d}within(e,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var{ids:s,coords:r,nodeSize:o}=this,a=[0,s.length-1,0],c=[],d=i*i;a.length;){var h=a.pop()||0,m=a.pop()||0,g=a.pop()||0;if(m-g<=o){for(var v=g;v<=m;v++)AE(r[2*v],r[2*v+1],e,n)<=d&&c.push(s[v]);continue}var T=g+m>>1,w=r[2*T],I=r[2*T+1];AE(w,I,e,n)<=d&&c.push(s[T]),(h===0?e-i<=w:n-i<=I)&&(a.push(g),a.push(T-1),a.push(1-h)),(h===0?e+i>=w:n+i>=I)&&(a.push(T+1),a.push(m),a.push(1-h))}return c}}function Og(t,e,n,i,s,r){if(!(s-i<=n)){var o=i+s>>1;WI(t,e,o,i,s,r),Og(t,e,n,i,o-1,1-r),Og(t,e,n,o+1,s,1-r)}}function WI(t,e,n,i,s,r){for(;s>i;){if(s-i>600){var o=s-i+1,a=n-i+1,c=Math.log(o),d=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*d*(o-d)/o)*(a-o/2<0?-1:1),m=Math.max(i,Math.floor(n-a*d/o+h)),g=Math.min(s,Math.floor(n+(o-a)*d/o+h));WI(t,e,n,m,g,r)}var v=e[2*n+r],T=i,w=s;for(au(t,e,i,n),e[2*s+r]>v&&au(t,e,i,s);T<w;){for(au(t,e,T,w),T++,w--;e[2*T+r]<v;)T++;for(;e[2*w+r]>v;)w--}e[2*i+r]===v?au(t,e,i,w):(w++,au(t,e,w,s)),w<=n&&(i=w+1),n<=w&&(s=w-1)}}function au(t,e,n,i){_m(t,n,i),_m(e,2*n,2*i),_m(e,2*n+1,2*i+1)}function _m(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function AE(t,e,n,i){var s=t-n,r=e-i;return s*s+r*r}var tP={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},IE=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1)),co=2,lr=3,Tm=4,ir=5,QI=6;class nP{constructor(e){this.options=Object.assign(Object.create(tP),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){var{log:n,minZoom:i,maxZoom:s}=this.options;n&&console.time("total time");var r="prepare ".concat(e.length," points");n&&console.time(r),this.points=e;for(var o=[],a=0;a<e.length;a++){var c=e[a];if(c.geometry){var[d,h]=c.geometry.coordinates,m=IE(xd(d)),g=IE(Cd(h));o.push(m,g,1/0,a,-1,1),this.options.reduce&&o.push(0)}}var v=this.trees[s+1]=this._createTree(o);n&&console.timeEnd(r);for(var T=s;T>=i;T--){var w=+Date.now();v=this.trees[T]=this._createTree(this._cluster(v,T)),n&&console.log("z%d: %d clusters in %dms",T,v.numItems,+Date.now()-w)}return n&&console.timeEnd("total time"),this}getClusters(e,n){var i=((e[0]+180)%360+360)%360-180,s=Math.max(-90,Math.min(90,e[1])),r=e[2]===180?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)i=-180,r=180;else if(i>r){var a=this.getClusters([i,s,180,o],n),c=this.getClusters([-180,s,r,o],n);return a.concat(c)}var d=this.trees[this._limitZoom(n)],h=d.range(xd(i),Cd(o),xd(r),Cd(s)),m=d.data,g=[];for(var v of h){var T=this.stride*v;g.push(m[T+ir]>1?ME(m,T,this.clusterProps):this.points[m[T+lr]])}return g}getChildren(e){var n=this._getOriginId(e),i=this._getOriginZoom(e),s="No cluster with the specified id.",r=this.trees[i];if(!r)throw new Error(s);var o=r.data;if(n*this.stride>=o.length)throw new Error(s);var a=this.options.radius/(this.options.extent*Math.pow(2,i-1)),c=o[n*this.stride],d=o[n*this.stride+1],h=r.within(c,d,a),m=[];for(var g of h){var v=g*this.stride;o[v+Tm]===e&&m.push(o[v+ir]>1?ME(o,v,this.clusterProps):this.points[o[v+lr]])}if(m.length===0)throw new Error(s);return m}getLeaves(e,n,i){n=n||10,i=i||0;var s=[];return this._appendLeaves(s,e,n,i,0),s}getTile(e,n,i){var s=this.trees[this._limitZoom(e)],r=Math.pow(2,e),{extent:o,radius:a}=this.options,c=a/o,d=(i-c)/r,h=(i+1+c)/r,m={features:[]};return this._addTileFeatures(s.range((n-c)/r,d,(n+1+c)/r,h),s.data,n,i,r,m),n===0&&this._addTileFeatures(s.range(1-c/r,d,1,h),s.data,r,i,r,m),n===r-1&&this._addTileFeatures(s.range(0,d,c/r,h),s.data,-1,i,r,m),m.features.length?m:null}getClusterExpansionZoom(e){for(var n=this._getOriginZoom(e)-1;n<=this.options.maxZoom;){var i=this.getChildren(e);if(n++,i.length!==1)break;e=i[0].properties.cluster_id}return n}_appendLeaves(e,n,i,s,r){var o=this.getChildren(n);for(var a of o){var c=a.properties;if(c&&c.cluster?r+c.point_count<=s?r+=c.point_count:r=this._appendLeaves(e,c.cluster_id,i,s,r):r<s?r++:e.push(a),e.length===i)break}return r}_createTree(e){for(var n=new Dv(e.length/this.stride|0,this.options.nodeSize,Float32Array),i=0;i<e.length;i+=this.stride)n.add(e[i],e[i+1]);return n.finish(),n.data=e,n}_addTileFeatures(e,n,i,s,r,o){for(var a of e){var c=a*this.stride,d=n[c+ir]>1,h=void 0,m=void 0,g=void 0;if(d)h=ZI(n,c,this.clusterProps),m=n[c],g=n[c+1];else{var v=this.points[n[c+lr]];h=v.properties;var[T,w]=v.geometry.coordinates;m=xd(T),g=Cd(w)}var I={type:1,geometry:[[Math.round(this.options.extent*(m*r-i)),Math.round(this.options.extent*(g*r-s))]],tags:h},b=void 0;d||this.options.generateId?b=n[c+lr]:b=this.points[n[c+lr]].id,b!==void 0&&(I.id=b),o.features.push(I)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,n){for(var{radius:i,extent:s,reduce:r,minPoints:o}=this.options,a=i/(s*Math.pow(2,n)),c=e.data,d=[],h=this.stride,m=0;m<c.length;m+=h)if(!(c[m+co]<=n)){c[m+co]=n;var g=c[m],v=c[m+1],T=e.within(c[m],c[m+1],a),w=c[m+ir],I=w;for(var b of T){var E=b*h;c[E+co]>n&&(I+=c[E+ir])}if(I>w&&I>=o){var A=g*w,R=v*w,P=void 0,U=-1,S=((m/h|0)<<5)+(n+1)+this.points.length;for(var M of T){var C=M*h;if(!(c[C+co]<=n)){c[C+co]=n;var k=c[C+ir];A+=c[C]*k,R+=c[C+1]*k,c[C+Tm]=S,r&&(P||(P=this._map(c,m,!0),U=this.clusterProps.length,this.clusterProps.push(P)),r(P,this._map(c,C)))}}c[m+Tm]=S,d.push(A/I,R/I,1/0,S,-1,I),r&&d.push(U)}else{for(var N=0;N<h;N++)d.push(c[m+N]);if(I>1)for(var V of T){var L=V*h;if(!(c[L+co]<=n)){c[L+co]=n;for(var $=0;$<h;$++)d.push(c[L+$])}}}}return d}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,n,i){if(e[n+ir]>1){var s=this.clusterProps[e[n+QI]];return i?Object.assign({},s):s}var r=this.points[e[n+lr]].properties,o=this.options.map(r);return i&&o===r?Object.assign({},o):o}}function ME(t,e,n){return{type:"Feature",id:t[e+lr],properties:ZI(t,e,n),geometry:{type:"Point",coordinates:[iP(t[e]),sP(t[e+1])]}}}function ZI(t,e,n){var i=t[e+ir],s=i>=1e4?"".concat(Math.round(i/1e3),"k"):i>=1e3?"".concat(Math.round(i/100)/10,"k"):i,r=t[e+QI],o=r===-1?{}:Object.assign({},n[r]);return Object.assign(o,{cluster:!0,cluster_id:t[e+lr],point_count:i,point_count_abbreviated:s})}function xd(t){return t/360+.5}function Cd(t){var e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function iP(t){return(t-.5)*360}function sP(t){var e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function rP(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}class Zn{static isAdvancedMarkerAvailable(e){return google.maps.marker&&e.getMapCapabilities().isAdvancedMarkersAvailable===!0}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,n){this.isAdvancedMarker(e)?e.map=n:e.setMap(n)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return this.isAdvancedMarker(e)?!0:e.getVisible()}}class Bg{constructor(e){var{markers:n,position:i}=e;this.markers=n,i&&(i instanceof google.maps.LatLng?this._position=i:this._position=new google.maps.LatLng(i))}get bounds(){if(!(this.markers.length===0&&!this._position)){var e=new google.maps.LatLngBounds(this._position,this._position);for(var n of this.markers)e.extend(Zn.getPosition(n));return e}}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>Zn.getVisible(e)).length}push(e){this.markers.push(e)}delete(){this.marker&&(Zn.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class oP{constructor(e){var{maxZoom:n=16}=e;this.maxZoom=n}noop(e){var{markers:n}=e;return aP(n)}}var aP=t=>{var e=t.map(n=>new Bg({position:Zn.getPosition(n),markers:[n]}));return e};class lP extends oP{constructor(e){var{maxZoom:n,radius:i=60}=e,s=rP(e,["maxZoom","radius"]);super({maxZoom:n}),this.state={zoom:-1},this.superCluster=new nP(Object.assign({maxZoom:this.maxZoom,radius:i},s))}calculate(e){var n=!1,i={zoom:e.map.getZoom()};if(!wE(e.markers,this.markers)){n=!0,this.markers=[...e.markers];var s=this.markers.map(r=>{var o=Zn.getPosition(r),a=[o.lng(),o.lat()];return{type:"Feature",geometry:{type:"Point",coordinates:a},properties:{marker:r}}});this.superCluster.load(s)}return n||(this.state.zoom<=this.maxZoom||i.zoom<=this.maxZoom)&&(n=!wE(this.state,i)),this.state=i,n&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:n}}cluster(e){var{map:n}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(n.getZoom())).map(i=>this.transformCluster(i))}transformCluster(e){var{geometry:{coordinates:[n,i]},properties:s}=e;if(s.cluster)return new Bg({markers:this.superCluster.getLeaves(s.cluster_id,1/0).map(o=>o.properties.marker),position:{lat:i,lng:n}});var r=s.marker;return new Bg({markers:[r],position:Zn.getPosition(r)})}}class uP{constructor(e,n){this.markers={sum:e.length};var i=n.map(r=>r.count),s=i.reduce((r,o)=>r+o,0);this.clusters={count:n.length,markers:{mean:s/n.length,sum:s,min:Math.min(...i),max:Math.max(...i)}}}}class cP{render(e,n,i){var{count:s,position:r}=e,o=s>Math.max(10,n.clusters.markers.mean)?"#ff0000":"#0000ff",a='<svg fill="'.concat(o,`" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">
<circle cx="120" cy="120" opacity=".6" r="70" />
<circle cx="120" cy="120" opacity=".3" r="90" />
<circle cx="120" cy="120" opacity=".2" r="110" />
<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">`).concat(s,`</text>
</svg>`),c="Cluster of ".concat(s," markers"),d=Number(google.maps.Marker.MAX_ZINDEX)+s;if(Zn.isAdvancedMarkerAvailable(i)){var h=new DOMParser,m=h.parseFromString(a,"image/svg+xml").documentElement;m.setAttribute("transform","translate(0 25)");var g={map:i,position:r,zIndex:d,title:c,content:m};return new google.maps.marker.AdvancedMarkerElement(g)}var v={position:r,zIndex:d,title:c,icon:{url:"data:image/svg+xml;base64,".concat(btoa(a)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(v)}}function dP(t,e){for(var n in e.prototype)t.prototype[n]=e.prototype[n]}class Pv{constructor(){dP(Pv,google.maps.OverlayView)}}var Vu;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(Vu||(Vu={}));var fP=(t,e,n)=>{n.fitBounds(e.bounds)};class hP extends Pv{constructor(e){var{map:n,markers:i=[],algorithmOptions:s={},algorithm:r=new lP(s),renderer:o=new cP,onClusterClick:a=fP}=e;super(),this.markers=[...i],this.clusters=[],this.algorithm=r,this.renderer=o,this.onClusterClick=a,n&&this.setMap(n)}addMarker(e,n){this.markers.includes(e)||(this.markers.push(e),n||this.render())}addMarkers(e,n){e.forEach(i=>{this.addMarker(i,!0)}),n||this.render()}removeMarker(e,n){var i=this.markers.indexOf(e);return i===-1?!1:(Zn.setMap(e,null),this.markers.splice(i,1),n||this.render(),!0)}removeMarkers(e,n){var i=!1;return e.forEach(s=>{i=this.removeMarker(s,!0)||i}),i&&!n&&this.render(),i}clearMarkers(e){this.markers.length=0,e||this.render()}render(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,Vu.CLUSTERING_BEGIN,this);var{clusters:n,changed:i}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(i||i==null){var s=new Set;for(var r of n)r.markers.length==1&&s.add(r.markers[0]);var o=[];for(var a of this.clusters)a.marker!=null&&(a.markers.length==1?s.has(a.marker)||Zn.setMap(a.marker,null):o.push(a.marker));this.clusters=n,this.renderClusters(),requestAnimationFrame(()=>o.forEach(c=>Zn.setMap(c,null)))}google.maps.event.trigger(this,Vu.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>Zn.setMap(e,null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){var e=new uP(this.markers,this.clusters),n=this.getMap();this.clusters.forEach(i=>{i.markers.length===1?i.marker=i.markers[0]:(i.marker=this.renderer.render(i,e,n),i.markers.forEach(s=>Zn.setMap(s,null)),this.onClusterClick&&i.marker.addListener("click",s=>{google.maps.event.trigger(this,Vu.CLUSTER_CLICK,i),this.onClusterClick(s,i,n)})),Zn.setMap(i.marker,n)})}}function RE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function kE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RE(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function pP(t){var e=oD(),[n,i]=y.useState(null);return y.useEffect(()=>{if(e&&n===null){var s=new hP(kE(kE({},t),{},{map:e}));i(s)}},[e]),n}function mP(t){var{children:e,options:n}=t,i=pP(n);return i!==null?e(i):null}y.memo(mP);var NE={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},LE={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function gP(t){var{children:e,anchor:n,options:i,position:s,zIndex:r,onCloseClick:o,onDomReady:a,onContentChanged:c,onPositionChanged:d,onZindexChanged:h,onLoad:m,onUnmount:g}=t,v=y.useContext(De),[T,w]=y.useState(null),[I,b]=y.useState(null),[E,A]=y.useState(null),[R,P]=y.useState(null),[U,S]=y.useState(null),[M,C]=y.useState(null),k=y.useRef(null);return y.useEffect(()=>{T!==null&&(T.close(),n?T.open(v,n):T.getPosition()&&T.open(v))},[v,T,n]),y.useEffect(()=>{i&&T!==null&&T.setOptions(i)},[T,i]),y.useEffect(()=>{s&&T!==null&&T.setPosition(s)},[s]),y.useEffect(()=>{typeof r=="number"&&T!==null&&T.setZIndex(r)},[r]),y.useEffect(()=>{T&&o&&(I!==null&&google.maps.event.removeListener(I),b(google.maps.event.addListener(T,"closeclick",o)))},[o]),y.useEffect(()=>{T&&a&&(E!==null&&google.maps.event.removeListener(E),A(google.maps.event.addListener(T,"domready",a)))},[a]),y.useEffect(()=>{T&&c&&(R!==null&&google.maps.event.removeListener(R),P(google.maps.event.addListener(T,"content_changed",c)))},[c]),y.useEffect(()=>{T&&d&&(U!==null&&google.maps.event.removeListener(U),S(google.maps.event.addListener(T,"position_changed",d)))},[d]),y.useEffect(()=>{T&&h&&(M!==null&&google.maps.event.removeListener(M),C(google.maps.event.addListener(T,"zindex_changed",h)))},[h]),y.useEffect(()=>{var N=new google.maps.InfoWindow(i);return w(N),k.current=document.createElement("div"),o&&b(google.maps.event.addListener(N,"closeclick",o)),a&&A(google.maps.event.addListener(N,"domready",a)),c&&P(google.maps.event.addListener(N,"content_changed",c)),d&&S(google.maps.event.addListener(N,"position_changed",d)),h&&C(google.maps.event.addListener(N,"zindex_changed",h)),N.setContent(k.current),s&&N.setPosition(s),r&&N.setZIndex(r),n?N.open(v,n):N.getPosition()?N.open(v):sn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),m&&m(N),()=>{I&&google.maps.event.removeListener(I),R&&google.maps.event.removeListener(R),E&&google.maps.event.removeListener(E),U&&google.maps.event.removeListener(U),M&&google.maps.event.removeListener(M),g&&g(N),N.close()}},[]),k.current?qo.createPortal(y.Children.only(e),k.current):null}var yP=y.memo(gP);class vP extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"containerElement",null),G(this,"state",{infoWindow:null}),G(this,"open",(e,n)=>{n?e.open(this.context,n):e.getPosition()?e.open(this.context):sn(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")}),G(this,"setInfoWindowCallback",()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))})}componentDidMount(){var e=new google.maps.InfoWindow(this.props.options);this.containerElement=document.createElement("div"),this.registeredEvents=Oe({updaterMap:LE,eventMap:NE,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:LE,eventMap:NE,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(ze(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?qo.createPortal(y.Children.only(this.props.children),this.containerElement):null}}G(vP,"contextType",De);function DE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function Kf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?DE(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):DE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var PE={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},VE={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},_P={};function TP(t){var{options:e,draggable:n,editable:i,visible:s,path:r,onDblClick:o,onDragEnd:a,onDragStart:c,onMouseDown:d,onMouseMove:h,onMouseOut:m,onMouseOver:g,onMouseUp:v,onRightClick:T,onClick:w,onDrag:I,onLoad:b,onUnmount:E}=t,A=y.useContext(De),[R,P]=y.useState(null),[U,S]=y.useState(null),[M,C]=y.useState(null),[k,N]=y.useState(null),[V,L]=y.useState(null),[$,Z]=y.useState(null),[j,ee]=y.useState(null),[q,X]=y.useState(null),[ie,te]=y.useState(null),[ce,ne]=y.useState(null),[fe,F]=y.useState(null),[Re,se]=y.useState(null);return y.useEffect(()=>{R!==null&&R.setMap(A)},[A]),y.useEffect(()=>{typeof e<"u"&&R!==null&&R.setOptions(e)},[R,e]),y.useEffect(()=>{typeof n<"u"&&R!==null&&R.setDraggable(n)},[R,n]),y.useEffect(()=>{typeof i<"u"&&R!==null&&R.setEditable(i)},[R,i]),y.useEffect(()=>{typeof s<"u"&&R!==null&&R.setVisible(s)},[R,s]),y.useEffect(()=>{typeof r<"u"&&R!==null&&R.setPath(r)},[R,r]),y.useEffect(()=>{R&&o&&(U!==null&&google.maps.event.removeListener(U),S(google.maps.event.addListener(R,"dblclick",o)))},[o]),y.useEffect(()=>{R&&a&&(M!==null&&google.maps.event.removeListener(M),C(google.maps.event.addListener(R,"dragend",a)))},[a]),y.useEffect(()=>{R&&c&&(k!==null&&google.maps.event.removeListener(k),N(google.maps.event.addListener(R,"dragstart",c)))},[c]),y.useEffect(()=>{R&&d&&(V!==null&&google.maps.event.removeListener(V),L(google.maps.event.addListener(R,"mousedown",d)))},[d]),y.useEffect(()=>{R&&h&&($!==null&&google.maps.event.removeListener($),Z(google.maps.event.addListener(R,"mousemove",h)))},[h]),y.useEffect(()=>{R&&m&&(j!==null&&google.maps.event.removeListener(j),ee(google.maps.event.addListener(R,"mouseout",m)))},[m]),y.useEffect(()=>{R&&g&&(q!==null&&google.maps.event.removeListener(q),X(google.maps.event.addListener(R,"mouseover",g)))},[g]),y.useEffect(()=>{R&&v&&(ie!==null&&google.maps.event.removeListener(ie),te(google.maps.event.addListener(R,"mouseup",v)))},[v]),y.useEffect(()=>{R&&T&&(ce!==null&&google.maps.event.removeListener(ce),ne(google.maps.event.addListener(R,"rightclick",T)))},[T]),y.useEffect(()=>{R&&w&&(fe!==null&&google.maps.event.removeListener(fe),F(google.maps.event.addListener(R,"click",w)))},[w]),y.useEffect(()=>{R&&I&&(Re!==null&&google.maps.event.removeListener(Re),se(google.maps.event.addListener(R,"drag",I)))},[I]),y.useEffect(()=>{var _e=new google.maps.Polyline(Kf(Kf({},e||_P),{},{map:A}));return r&&_e.setPath(r),typeof s<"u"&&_e.setVisible(s),typeof i<"u"&&_e.setEditable(i),typeof n<"u"&&_e.setDraggable(n),o&&S(google.maps.event.addListener(_e,"dblclick",o)),a&&C(google.maps.event.addListener(_e,"dragend",a)),c&&N(google.maps.event.addListener(_e,"dragstart",c)),d&&L(google.maps.event.addListener(_e,"mousedown",d)),h&&Z(google.maps.event.addListener(_e,"mousemove",h)),m&&ee(google.maps.event.addListener(_e,"mouseout",m)),g&&X(google.maps.event.addListener(_e,"mouseover",g)),v&&te(google.maps.event.addListener(_e,"mouseup",v)),T&&ne(google.maps.event.addListener(_e,"rightclick",T)),w&&F(google.maps.event.addListener(_e,"click",w)),I&&se(google.maps.event.addListener(_e,"drag",I)),P(_e),b&&b(_e),()=>{U!==null&&google.maps.event.removeListener(U),M!==null&&google.maps.event.removeListener(M),k!==null&&google.maps.event.removeListener(k),V!==null&&google.maps.event.removeListener(V),$!==null&&google.maps.event.removeListener($),j!==null&&google.maps.event.removeListener(j),q!==null&&google.maps.event.removeListener(q),ie!==null&&google.maps.event.removeListener(ie),ce!==null&&google.maps.event.removeListener(ce),fe!==null&&google.maps.event.removeListener(fe),E&&E(_e),_e.setMap(null)}},[]),null}y.memo(TP);class EP extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"state",{polyline:null}),G(this,"setPolylineCallback",()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)})}componentDidMount(){var e=new google.maps.Polyline(Kf(Kf({},this.props.options),{},{map:this.context}));this.registeredEvents=Oe({updaterMap:VE,eventMap:PE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:VE,eventMap:PE,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),ze(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}G(EP,"contextType",De);function UE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function OE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?UE(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):UE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var BE={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},FE={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function xP(t){var{options:e,draggable:n,editable:i,visible:s,path:r,paths:o,onDblClick:a,onDragEnd:c,onDragStart:d,onMouseDown:h,onMouseMove:m,onMouseOut:g,onMouseOver:v,onMouseUp:T,onRightClick:w,onClick:I,onDrag:b,onLoad:E,onUnmount:A,onEdit:R}=t,P=y.useContext(De),[U,S]=y.useState(null),[M,C]=y.useState(null),[k,N]=y.useState(null),[V,L]=y.useState(null),[$,Z]=y.useState(null),[j,ee]=y.useState(null),[q,X]=y.useState(null),[ie,te]=y.useState(null),[ce,ne]=y.useState(null),[fe,F]=y.useState(null),[Re,se]=y.useState(null),[_e,Ue]=y.useState(null);return y.useEffect(()=>{U!==null&&U.setMap(P)},[P]),y.useEffect(()=>{typeof e<"u"&&U!==null&&U.setOptions(e)},[U,e]),y.useEffect(()=>{typeof n<"u"&&U!==null&&U.setDraggable(n)},[U,n]),y.useEffect(()=>{typeof i<"u"&&U!==null&&U.setEditable(i)},[U,i]),y.useEffect(()=>{typeof s<"u"&&U!==null&&U.setVisible(s)},[U,s]),y.useEffect(()=>{typeof r<"u"&&U!==null&&U.setPath(r)},[U,r]),y.useEffect(()=>{typeof o<"u"&&U!==null&&U.setPaths(o)},[U,o]),y.useEffect(()=>{U&&typeof a=="function"&&(M!==null&&google.maps.event.removeListener(M),C(google.maps.event.addListener(U,"dblclick",a)))},[a]),y.useEffect(()=>{U&&(google.maps.event.addListener(U.getPath(),"insert_at",()=>{R==null||R(U)}),google.maps.event.addListener(U.getPath(),"set_at",()=>{R==null||R(U)}),google.maps.event.addListener(U.getPath(),"remove_at",()=>{R==null||R(U)}))},[U,R]),y.useEffect(()=>{U&&typeof c=="function"&&(k!==null&&google.maps.event.removeListener(k),N(google.maps.event.addListener(U,"dragend",c)))},[c]),y.useEffect(()=>{U&&typeof d=="function"&&(V!==null&&google.maps.event.removeListener(V),L(google.maps.event.addListener(U,"dragstart",d)))},[d]),y.useEffect(()=>{U&&typeof h=="function"&&($!==null&&google.maps.event.removeListener($),Z(google.maps.event.addListener(U,"mousedown",h)))},[h]),y.useEffect(()=>{U&&typeof m=="function"&&(j!==null&&google.maps.event.removeListener(j),ee(google.maps.event.addListener(U,"mousemove",m)))},[m]),y.useEffect(()=>{U&&typeof g=="function"&&(q!==null&&google.maps.event.removeListener(q),X(google.maps.event.addListener(U,"mouseout",g)))},[g]),y.useEffect(()=>{U&&typeof v=="function"&&(ie!==null&&google.maps.event.removeListener(ie),te(google.maps.event.addListener(U,"mouseover",v)))},[v]),y.useEffect(()=>{U&&typeof T=="function"&&(ce!==null&&google.maps.event.removeListener(ce),ne(google.maps.event.addListener(U,"mouseup",T)))},[T]),y.useEffect(()=>{U&&typeof w=="function"&&(fe!==null&&google.maps.event.removeListener(fe),F(google.maps.event.addListener(U,"rightclick",w)))},[w]),y.useEffect(()=>{U&&typeof I=="function"&&(Re!==null&&google.maps.event.removeListener(Re),se(google.maps.event.addListener(U,"click",I)))},[I]),y.useEffect(()=>{U&&typeof b=="function"&&(_e!==null&&google.maps.event.removeListener(_e),Ue(google.maps.event.addListener(U,"drag",b)))},[b]),y.useEffect(()=>{var pe=new google.maps.Polygon(OE(OE({},e),{},{map:P}));return r&&pe.setPath(r),o&&pe.setPaths(o),typeof s<"u"&&pe.setVisible(s),typeof i<"u"&&pe.setEditable(i),typeof n<"u"&&pe.setDraggable(n),a&&C(google.maps.event.addListener(pe,"dblclick",a)),c&&N(google.maps.event.addListener(pe,"dragend",c)),d&&L(google.maps.event.addListener(pe,"dragstart",d)),h&&Z(google.maps.event.addListener(pe,"mousedown",h)),m&&ee(google.maps.event.addListener(pe,"mousemove",m)),g&&X(google.maps.event.addListener(pe,"mouseout",g)),v&&te(google.maps.event.addListener(pe,"mouseover",v)),T&&ne(google.maps.event.addListener(pe,"mouseup",T)),w&&F(google.maps.event.addListener(pe,"rightclick",w)),I&&se(google.maps.event.addListener(pe,"click",I)),b&&Ue(google.maps.event.addListener(pe,"drag",b)),S(pe),E&&E(pe),()=>{M!==null&&google.maps.event.removeListener(M),k!==null&&google.maps.event.removeListener(k),V!==null&&google.maps.event.removeListener(V),$!==null&&google.maps.event.removeListener($),j!==null&&google.maps.event.removeListener(j),q!==null&&google.maps.event.removeListener(q),ie!==null&&google.maps.event.removeListener(ie),ce!==null&&google.maps.event.removeListener(ce),fe!==null&&google.maps.event.removeListener(fe),Re!==null&&google.maps.event.removeListener(Re),A&&A(pe),pe.setMap(null)}},[]),null}y.memo(xP);class CP extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[])}componentDidMount(){var e=this.props.options||{};this.polygon=new google.maps.Polygon(e),this.polygon.setMap(this.context),this.registeredEvents=Oe({updaterMap:FE,eventMap:BE,prevProps:{},nextProps:this.props,instance:this.polygon}),this.props.onLoad&&this.props.onLoad(this.polygon)}componentDidUpdate(e){this.polygon&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:FE,eventMap:BE,prevProps:e,nextProps:this.props,instance:this.polygon}))}componentWillUnmount(){this.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.polygon),ze(this.registeredEvents),this.polygon&&this.polygon.setMap(null))}render(){return null}}G(CP,"contextType",De);function jE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function Jf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jE(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var zE={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},qE={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function SP(t){var{options:e,bounds:n,draggable:i,editable:s,visible:r,onDblClick:o,onDragEnd:a,onDragStart:c,onMouseDown:d,onMouseMove:h,onMouseOut:m,onMouseOver:g,onMouseUp:v,onRightClick:T,onClick:w,onDrag:I,onBoundsChanged:b,onLoad:E,onUnmount:A}=t,R=y.useContext(De),[P,U]=y.useState(null),[S,M]=y.useState(null),[C,k]=y.useState(null),[N,V]=y.useState(null),[L,$]=y.useState(null),[Z,j]=y.useState(null),[ee,q]=y.useState(null),[X,ie]=y.useState(null),[te,ce]=y.useState(null),[ne,fe]=y.useState(null),[F,Re]=y.useState(null),[se,_e]=y.useState(null),[Ue,pe]=y.useState(null);return y.useEffect(()=>{P!==null&&P.setMap(R)},[R]),y.useEffect(()=>{typeof e<"u"&&P!==null&&P.setOptions(e)},[P,e]),y.useEffect(()=>{typeof i<"u"&&P!==null&&P.setDraggable(i)},[P,i]),y.useEffect(()=>{typeof s<"u"&&P!==null&&P.setEditable(s)},[P,s]),y.useEffect(()=>{typeof r<"u"&&P!==null&&P.setVisible(r)},[P,r]),y.useEffect(()=>{typeof n<"u"&&P!==null&&P.setBounds(n)},[P,n]),y.useEffect(()=>{P&&o&&(S!==null&&google.maps.event.removeListener(S),M(google.maps.event.addListener(P,"dblclick",o)))},[o]),y.useEffect(()=>{P&&a&&(C!==null&&google.maps.event.removeListener(C),k(google.maps.event.addListener(P,"dragend",a)))},[a]),y.useEffect(()=>{P&&c&&(N!==null&&google.maps.event.removeListener(N),V(google.maps.event.addListener(P,"dragstart",c)))},[c]),y.useEffect(()=>{P&&d&&(L!==null&&google.maps.event.removeListener(L),$(google.maps.event.addListener(P,"mousedown",d)))},[d]),y.useEffect(()=>{P&&h&&(Z!==null&&google.maps.event.removeListener(Z),j(google.maps.event.addListener(P,"mousemove",h)))},[h]),y.useEffect(()=>{P&&m&&(ee!==null&&google.maps.event.removeListener(ee),q(google.maps.event.addListener(P,"mouseout",m)))},[m]),y.useEffect(()=>{P&&g&&(X!==null&&google.maps.event.removeListener(X),ie(google.maps.event.addListener(P,"mouseover",g)))},[g]),y.useEffect(()=>{P&&v&&(te!==null&&google.maps.event.removeListener(te),ce(google.maps.event.addListener(P,"mouseup",v)))},[v]),y.useEffect(()=>{P&&T&&(ne!==null&&google.maps.event.removeListener(ne),fe(google.maps.event.addListener(P,"rightclick",T)))},[T]),y.useEffect(()=>{P&&w&&(F!==null&&google.maps.event.removeListener(F),Re(google.maps.event.addListener(P,"click",w)))},[w]),y.useEffect(()=>{P&&I&&(se!==null&&google.maps.event.removeListener(se),_e(google.maps.event.addListener(P,"drag",I)))},[I]),y.useEffect(()=>{P&&b&&(Ue!==null&&google.maps.event.removeListener(Ue),pe(google.maps.event.addListener(P,"bounds_changed",b)))},[b]),y.useEffect(()=>{var Ee=new google.maps.Rectangle(Jf(Jf({},e),{},{map:R}));return typeof r<"u"&&Ee.setVisible(r),typeof s<"u"&&Ee.setEditable(s),typeof i<"u"&&Ee.setDraggable(i),typeof n<"u"&&Ee.setBounds(n),o&&M(google.maps.event.addListener(Ee,"dblclick",o)),a&&k(google.maps.event.addListener(Ee,"dragend",a)),c&&V(google.maps.event.addListener(Ee,"dragstart",c)),d&&$(google.maps.event.addListener(Ee,"mousedown",d)),h&&j(google.maps.event.addListener(Ee,"mousemove",h)),m&&q(google.maps.event.addListener(Ee,"mouseout",m)),g&&ie(google.maps.event.addListener(Ee,"mouseover",g)),v&&ce(google.maps.event.addListener(Ee,"mouseup",v)),T&&fe(google.maps.event.addListener(Ee,"rightclick",T)),w&&Re(google.maps.event.addListener(Ee,"click",w)),I&&_e(google.maps.event.addListener(Ee,"drag",I)),b&&pe(google.maps.event.addListener(Ee,"bounds_changed",b)),U(Ee),E&&E(Ee),()=>{S!==null&&google.maps.event.removeListener(S),C!==null&&google.maps.event.removeListener(C),N!==null&&google.maps.event.removeListener(N),L!==null&&google.maps.event.removeListener(L),Z!==null&&google.maps.event.removeListener(Z),ee!==null&&google.maps.event.removeListener(ee),X!==null&&google.maps.event.removeListener(X),te!==null&&google.maps.event.removeListener(te),ne!==null&&google.maps.event.removeListener(ne),F!==null&&google.maps.event.removeListener(F),se!==null&&google.maps.event.removeListener(se),Ue!==null&&google.maps.event.removeListener(Ue),A&&A(Ee),Ee.setMap(null)}},[]),null}y.memo(SP);class wP extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"state",{rectangle:null}),G(this,"setRectangleCallback",()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)})}componentDidMount(){var e=new google.maps.Rectangle(Jf(Jf({},this.props.options),{},{map:this.context}));this.registeredEvents=Oe({updaterMap:qE,eventMap:zE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:qE,eventMap:zE,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),ze(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}G(wP,"contextType",De);function HE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function Yf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HE(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var GE={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},$E={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},bP={};function AP(t){var{options:e,center:n,radius:i,draggable:s,editable:r,visible:o,onDblClick:a,onDragEnd:c,onDragStart:d,onMouseDown:h,onMouseMove:m,onMouseOut:g,onMouseOver:v,onMouseUp:T,onRightClick:w,onClick:I,onDrag:b,onCenterChanged:E,onRadiusChanged:A,onLoad:R,onUnmount:P}=t,U=y.useContext(De),[S,M]=y.useState(null),[C,k]=y.useState(null),[N,V]=y.useState(null),[L,$]=y.useState(null),[Z,j]=y.useState(null),[ee,q]=y.useState(null),[X,ie]=y.useState(null),[te,ce]=y.useState(null),[ne,fe]=y.useState(null),[F,Re]=y.useState(null),[se,_e]=y.useState(null),[Ue,pe]=y.useState(null),[Ee,he]=y.useState(null),[pt,Vt]=y.useState(null);return y.useEffect(()=>{S!==null&&S.setMap(U)},[U]),y.useEffect(()=>{typeof e<"u"&&S!==null&&S.setOptions(e)},[S,e]),y.useEffect(()=>{typeof s<"u"&&S!==null&&S.setDraggable(s)},[S,s]),y.useEffect(()=>{typeof r<"u"&&S!==null&&S.setEditable(r)},[S,r]),y.useEffect(()=>{typeof o<"u"&&S!==null&&S.setVisible(o)},[S,o]),y.useEffect(()=>{typeof i=="number"&&S!==null&&S.setRadius(i)},[S,i]),y.useEffect(()=>{typeof n<"u"&&S!==null&&S.setCenter(n)},[S,n]),y.useEffect(()=>{S&&a&&(C!==null&&google.maps.event.removeListener(C),k(google.maps.event.addListener(S,"dblclick",a)))},[a]),y.useEffect(()=>{S&&c&&(N!==null&&google.maps.event.removeListener(N),V(google.maps.event.addListener(S,"dragend",c)))},[c]),y.useEffect(()=>{S&&d&&(L!==null&&google.maps.event.removeListener(L),$(google.maps.event.addListener(S,"dragstart",d)))},[d]),y.useEffect(()=>{S&&h&&(Z!==null&&google.maps.event.removeListener(Z),j(google.maps.event.addListener(S,"mousedown",h)))},[h]),y.useEffect(()=>{S&&m&&(ee!==null&&google.maps.event.removeListener(ee),q(google.maps.event.addListener(S,"mousemove",m)))},[m]),y.useEffect(()=>{S&&g&&(X!==null&&google.maps.event.removeListener(X),ie(google.maps.event.addListener(S,"mouseout",g)))},[g]),y.useEffect(()=>{S&&v&&(te!==null&&google.maps.event.removeListener(te),ce(google.maps.event.addListener(S,"mouseover",v)))},[v]),y.useEffect(()=>{S&&T&&(ne!==null&&google.maps.event.removeListener(ne),fe(google.maps.event.addListener(S,"mouseup",T)))},[T]),y.useEffect(()=>{S&&w&&(F!==null&&google.maps.event.removeListener(F),Re(google.maps.event.addListener(S,"rightclick",w)))},[w]),y.useEffect(()=>{S&&I&&(se!==null&&google.maps.event.removeListener(se),_e(google.maps.event.addListener(S,"click",I)))},[I]),y.useEffect(()=>{S&&b&&(Ue!==null&&google.maps.event.removeListener(Ue),pe(google.maps.event.addListener(S,"drag",b)))},[b]),y.useEffect(()=>{S&&E&&(Ee!==null&&google.maps.event.removeListener(Ee),he(google.maps.event.addListener(S,"center_changed",E)))},[I]),y.useEffect(()=>{S&&A&&(pt!==null&&google.maps.event.removeListener(pt),Vt(google.maps.event.addListener(S,"radius_changed",A)))},[A]),y.useEffect(()=>{var Pe=new google.maps.Circle(Yf(Yf({},e||bP),{},{map:U}));return typeof i=="number"&&Pe.setRadius(i),typeof n<"u"&&Pe.setCenter(n),typeof i=="number"&&Pe.setRadius(i),typeof o<"u"&&Pe.setVisible(o),typeof r<"u"&&Pe.setEditable(r),typeof s<"u"&&Pe.setDraggable(s),a&&k(google.maps.event.addListener(Pe,"dblclick",a)),c&&V(google.maps.event.addListener(Pe,"dragend",c)),d&&$(google.maps.event.addListener(Pe,"dragstart",d)),h&&j(google.maps.event.addListener(Pe,"mousedown",h)),m&&q(google.maps.event.addListener(Pe,"mousemove",m)),g&&ie(google.maps.event.addListener(Pe,"mouseout",g)),v&&ce(google.maps.event.addListener(Pe,"mouseover",v)),T&&fe(google.maps.event.addListener(Pe,"mouseup",T)),w&&Re(google.maps.event.addListener(Pe,"rightclick",w)),I&&_e(google.maps.event.addListener(Pe,"click",I)),b&&pe(google.maps.event.addListener(Pe,"drag",b)),E&&he(google.maps.event.addListener(Pe,"center_changed",E)),A&&Vt(google.maps.event.addListener(Pe,"radius_changed",A)),M(Pe),R&&R(Pe),()=>{C!==null&&google.maps.event.removeListener(C),N!==null&&google.maps.event.removeListener(N),L!==null&&google.maps.event.removeListener(L),Z!==null&&google.maps.event.removeListener(Z),ee!==null&&google.maps.event.removeListener(ee),X!==null&&google.maps.event.removeListener(X),te!==null&&google.maps.event.removeListener(te),ne!==null&&google.maps.event.removeListener(ne),F!==null&&google.maps.event.removeListener(F),se!==null&&google.maps.event.removeListener(se),Ee!==null&&google.maps.event.removeListener(Ee),pt!==null&&google.maps.event.removeListener(pt),P&&P(Pe),Pe.setMap(null)}},[]),null}y.memo(AP);class IP extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"state",{circle:null}),G(this,"setCircleCallback",()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)})}componentDidMount(){var e=new google.maps.Circle(Yf(Yf({},this.props.options),{},{map:this.context}));this.registeredEvents=Oe({updaterMap:$E,eventMap:GE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:$E,eventMap:GE,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){if(this.state.circle!==null){var e;this.props.onUnmount&&this.props.onUnmount(this.state.circle),ze(this.registeredEvents),(e=this.state.circle)===null||e===void 0||e.setMap(null)}}render(){return null}}G(IP,"contextType",De);function KE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function Wf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?KE(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):KE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var JE={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},YE={add(t,e){t.add(e)},addgeojson(t,e,n){t.addGeoJson(e,n)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,n,i){t.loadGeoJson(e,n,i)},overridestyle(t,e,n){t.overrideStyle(e,n)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function MP(t){var{options:e,onClick:n,onDblClick:i,onMouseDown:s,onMouseMove:r,onMouseOut:o,onMouseOver:a,onMouseUp:c,onRightClick:d,onAddFeature:h,onRemoveFeature:m,onRemoveProperty:g,onSetGeometry:v,onSetProperty:T,onLoad:w,onUnmount:I}=t,b=y.useContext(De),[E,A]=y.useState(null),[R,P]=y.useState(null),[U,S]=y.useState(null),[M,C]=y.useState(null),[k,N]=y.useState(null),[V,L]=y.useState(null),[$,Z]=y.useState(null),[j,ee]=y.useState(null),[q,X]=y.useState(null),[ie,te]=y.useState(null),[ce,ne]=y.useState(null),[fe,F]=y.useState(null),[Re,se]=y.useState(null),[_e,Ue]=y.useState(null);return y.useEffect(()=>{E!==null&&E.setMap(b)},[b]),y.useEffect(()=>{E&&i&&(R!==null&&google.maps.event.removeListener(R),P(google.maps.event.addListener(E,"dblclick",i)))},[i]),y.useEffect(()=>{E&&s&&(U!==null&&google.maps.event.removeListener(U),S(google.maps.event.addListener(E,"mousedown",s)))},[s]),y.useEffect(()=>{E&&r&&(M!==null&&google.maps.event.removeListener(M),C(google.maps.event.addListener(E,"mousemove",r)))},[r]),y.useEffect(()=>{E&&o&&(k!==null&&google.maps.event.removeListener(k),N(google.maps.event.addListener(E,"mouseout",o)))},[o]),y.useEffect(()=>{E&&a&&(V!==null&&google.maps.event.removeListener(V),L(google.maps.event.addListener(E,"mouseover",a)))},[a]),y.useEffect(()=>{E&&c&&($!==null&&google.maps.event.removeListener($),Z(google.maps.event.addListener(E,"mouseup",c)))},[c]),y.useEffect(()=>{E&&d&&(j!==null&&google.maps.event.removeListener(j),ee(google.maps.event.addListener(E,"rightclick",d)))},[d]),y.useEffect(()=>{E&&n&&(q!==null&&google.maps.event.removeListener(q),X(google.maps.event.addListener(E,"click",n)))},[n]),y.useEffect(()=>{E&&h&&(ie!==null&&google.maps.event.removeListener(ie),te(google.maps.event.addListener(E,"addfeature",h)))},[h]),y.useEffect(()=>{E&&m&&(ce!==null&&google.maps.event.removeListener(ce),ne(google.maps.event.addListener(E,"removefeature",m)))},[m]),y.useEffect(()=>{E&&g&&(fe!==null&&google.maps.event.removeListener(fe),F(google.maps.event.addListener(E,"removeproperty",g)))},[g]),y.useEffect(()=>{E&&v&&(Re!==null&&google.maps.event.removeListener(Re),se(google.maps.event.addListener(E,"setgeometry",v)))},[v]),y.useEffect(()=>{E&&T&&(_e!==null&&google.maps.event.removeListener(_e),Ue(google.maps.event.addListener(E,"setproperty",T)))},[T]),y.useEffect(()=>{if(b!==null){var pe=new google.maps.Data(Wf(Wf({},e),{},{map:b}));i&&P(google.maps.event.addListener(pe,"dblclick",i)),s&&S(google.maps.event.addListener(pe,"mousedown",s)),r&&C(google.maps.event.addListener(pe,"mousemove",r)),o&&N(google.maps.event.addListener(pe,"mouseout",o)),a&&L(google.maps.event.addListener(pe,"mouseover",a)),c&&Z(google.maps.event.addListener(pe,"mouseup",c)),d&&ee(google.maps.event.addListener(pe,"rightclick",d)),n&&X(google.maps.event.addListener(pe,"click",n)),h&&te(google.maps.event.addListener(pe,"addfeature",h)),m&&ne(google.maps.event.addListener(pe,"removefeature",m)),g&&F(google.maps.event.addListener(pe,"removeproperty",g)),v&&se(google.maps.event.addListener(pe,"setgeometry",v)),T&&Ue(google.maps.event.addListener(pe,"setproperty",T)),A(pe),w&&w(pe)}return()=>{E&&(R!==null&&google.maps.event.removeListener(R),U!==null&&google.maps.event.removeListener(U),M!==null&&google.maps.event.removeListener(M),k!==null&&google.maps.event.removeListener(k),V!==null&&google.maps.event.removeListener(V),$!==null&&google.maps.event.removeListener($),j!==null&&google.maps.event.removeListener(j),q!==null&&google.maps.event.removeListener(q),ie!==null&&google.maps.event.removeListener(ie),ce!==null&&google.maps.event.removeListener(ce),fe!==null&&google.maps.event.removeListener(fe),Re!==null&&google.maps.event.removeListener(Re),_e!==null&&google.maps.event.removeListener(_e),I&&I(E),E.setMap(null))}},[]),null}y.memo(MP);class RP extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"state",{data:null}),G(this,"setDataCallback",()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)})}componentDidMount(){if(this.context!==null){var e=new google.maps.Data(Wf(Wf({},this.props.options),{},{map:this.context}));this.registeredEvents=Oe({updaterMap:YE,eventMap:JE,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:YE,eventMap:JE,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),ze(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}G(RP,"contextType",De);function WE(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function QE(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?WE(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):WE(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var ZE={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},XE={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class kP extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"state",{kmlLayer:null}),G(this,"setKmlLayerCallback",()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)})}componentDidMount(){var e=new google.maps.KmlLayer(QE(QE({},this.props.options),{},{map:this.context}));this.registeredEvents=Oe({updaterMap:XE,eventMap:ZE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:XE,eventMap:ZE,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),ze(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}G(kP,"contextType",De);function XI(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function NP(t,e){return new e(t.lat,t.lng)}function LP(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function DP(t,e,n){return t instanceof e?t:n(t,e)}function PP(t,e,n){return t instanceof e?t:n(t,e)}function VP(t,e,n){var i=t&&t.fromLatLngToDivPixel(n.getNorthEast()),s=t&&t.fromLatLngToDivPixel(n.getSouthWest());return i&&s?{left:"".concat(s.x+e.x,"px"),top:"".concat(i.y+e.y,"px"),width:"".concat(i.x-s.x-e.x,"px"),height:"".concat(s.y-i.y-e.y,"px")}:{left:"-9999px",top:"-9999px"}}function UP(t,e,n){var i=t&&t.fromLatLngToDivPixel(n);if(i){var{x:s,y:r}=i;return{left:"".concat(s+e.x,"px"),top:"".concat(r+e.y,"px")}}return{left:"-9999px",top:"-9999px"}}function e1(t,e,n,i){return n!==void 0?VP(t,e,PP(n,google.maps.LatLngBounds,LP)):UP(t,e,DP(i,google.maps.LatLng,NP))}function OP(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function ex(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function BP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ex(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ex(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function FP(t,e,n,i,s){class r extends google.maps.OverlayView{constructor(a,c,d,h){super(),this.container=a,this.pane=c,this.position=d,this.bounds=h}onAdd(){var a,c=(a=this.getPanes())===null||a===void 0?void 0:a[this.pane];c==null||c.appendChild(this.container)}draw(){var a=this.getProjection(),c=BP({},this.container?XI(this.container,s):{x:0,y:0}),d=e1(a,c,this.bounds,this.position);for(var[h,m]of Object.entries(d))this.container.style[h]=m}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new r(t,e,n,i)}function tx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function jP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tx(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tx(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function nx(t){if(!t)return"";var e=t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng);return e+""}function ix(t){if(!t)return"";var e=t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west));return e+""}function zP(t){var{position:e,bounds:n,mapPaneName:i,zIndex:s,onLoad:r,onUnmount:o,getPixelPositionOffset:a,children:c}=t,d=y.useContext(De),h=y.useMemo(()=>{var g=document.createElement("div");return g.style.position="absolute",g},[]),m=y.useMemo(()=>FP(h,i,e,n,a),[h,i,e,n]);return y.useEffect(()=>(r==null||r(m),m==null||m.setMap(d),()=>{o==null||o(m),m==null||m.setMap(null)}),[d,m]),y.useEffect(()=>{h.style.zIndex="".concat(s)},[s,h]),qo.createPortal(c,h)}y.memo(zP);class bl extends y.PureComponent{constructor(e){super(e),G(this,"state",{paneEl:null,containerStyle:{position:"absolute"}}),G(this,"updatePane",()=>{var i=this.props.mapPaneName,s=this.overlayView.getPanes();sn(!!i,"OverlayView requires props.mapPaneName but got %s",i),s?this.setState({paneEl:s[i]}):this.setState({paneEl:null})}),G(this,"onAdd",()=>{var i,s;this.updatePane(),(i=(s=this.props).onLoad)===null||i===void 0||i.call(s,this.overlayView)}),G(this,"onPositionElement",()=>{var i=this.overlayView.getProjection(),s=jP({x:0,y:0},this.containerRef.current?XI(this.containerRef.current,this.props.getPixelPositionOffset):{}),r=e1(i,s,this.props.bounds,this.props.position);if(!OP(r,{left:this.state.containerStyle.left,top:this.state.containerStyle.top,width:this.state.containerStyle.width,height:this.state.containerStyle.height})){var o,a,c,d;this.setState({containerStyle:{top:(o=r.top)!==null&&o!==void 0?o:0,left:(a=r.left)!==null&&a!==void 0?a:0,width:(c=r.width)!==null&&c!==void 0?c:0,height:(d=r.height)!==null&&d!==void 0?d:0,position:"absolute"}})}}),G(this,"draw",()=>{this.onPositionElement()}),G(this,"onRemove",()=>{var i,s;this.setState(()=>({paneEl:null})),(i=(s=this.props).onUnmount)===null||i===void 0||i.call(s,this.overlayView)}),this.containerRef=y.createRef();var n=new google.maps.OverlayView;n.onAdd=this.onAdd,n.draw=this.draw,n.onRemove=this.onRemove,this.overlayView=n}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){var n=nx(e.position),i=nx(this.props.position),s=ix(e.bounds),r=ix(this.props.bounds);(n!==i||s!==r)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){var e=this.state.paneEl;return e?qo.createPortal(f.jsx("div",{ref:this.containerRef,style:this.state.containerStyle,children:y.Children.only(this.props.children)}),e):null}}G(bl,"FLOAT_PANE","floatPane");G(bl,"MAP_PANE","mapPane");G(bl,"MARKER_LAYER","markerLayer");G(bl,"OVERLAY_LAYER","overlayLayer");G(bl,"OVERLAY_MOUSE_TARGET","overlayMouseTarget");G(bl,"contextType",De);function qP(){}function sx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function rx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sx(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sx(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var ox={onDblClick:"dblclick",onClick:"click"},ax={opacity(t,e){t.setOpacity(e)}};function HP(t){var{url:e,bounds:n,options:i,visible:s}=t,r=y.useContext(De),o=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east)),a=y.useMemo(()=>new google.maps.GroundOverlay(e,o,i),[]);return y.useEffect(()=>{a!==null&&a.setMap(r)},[r]),y.useEffect(()=>{typeof e<"u"&&a!==null&&(a.set("url",e),a.setMap(r))},[a,e]),y.useEffect(()=>{typeof s<"u"&&a!==null&&a.setOpacity(s?1:0)},[a,s]),y.useEffect(()=>{var c=new google.maps.LatLngBounds(new google.maps.LatLng(n.south,n.west),new google.maps.LatLng(n.north,n.east));typeof n<"u"&&a!==null&&(a.set("bounds",c),a.setMap(r))},[a,n]),null}y.memo(HP);class t1 extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"state",{groundOverlay:null}),G(this,"setGroundOverlayCallback",()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)})}componentDidMount(){sn(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,rx(rx({},this.props.options),{},{map:this.context}));this.registeredEvents=Oe({updaterMap:ax,eventMap:ox,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:ax,eventMap:ox,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}G(t1,"defaultProps",{onLoad:qP});G(t1,"contextType",De);function lx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function Qf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lx(Object(n),!0).forEach(function(i){G(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lx(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}var ux={},cx={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function GP(t){var{data:e,onLoad:n,onUnmount:i,options:s}=t,r=y.useContext(De),[o,a]=y.useState(null);return y.useEffect(()=>{google.maps.visualization||sn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),y.useEffect(()=>{sn(!!e,"data property is required in HeatmapLayer %s",e)},[e]),y.useEffect(()=>{o!==null&&o.setMap(r)},[r]),y.useEffect(()=>{s&&o!==null&&o.setOptions(s)},[o,s]),y.useEffect(()=>{var c=new google.maps.visualization.HeatmapLayer(Qf(Qf({},s),{},{data:e,map:r}));return a(c),n&&n(c),()=>{o!==null&&(i&&i(o),o.setMap(null))}},[]),null}y.memo(GP);class $P extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"state",{heatmapLayer:null}),G(this,"setHeatmapLayerCallback",()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)})}componentDidMount(){sn(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),sn(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(Qf(Qf({},this.props.options),{},{data:this.props.data,map:this.context}));this.registeredEvents=Oe({updaterMap:cx,eventMap:ux,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:cx,eventMap:ux,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),ze(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}G($P,"contextType",De);var dx={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},fx={register(t,e,n){t.registerPanoProvider(e,n)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class KP extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"state",{streetViewPanorama:null}),G(this,"setStreetViewPanoramaCallback",()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)})}componentDidMount(){var e,n,i=(e=(n=this.context)===null||n===void 0?void 0:n.getStreetView())!==null&&e!==void 0?e:null;this.registeredEvents=Oe({updaterMap:fx,eventMap:dx,prevProps:{},nextProps:this.props,instance:i}),this.setState(()=>({streetViewPanorama:i}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:fx,eventMap:dx,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),ze(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}G(KP,"contextType",De);class JP extends y.PureComponent{constructor(){super(...arguments),G(this,"state",{streetViewService:null}),G(this,"setStreetViewServiceCallback",()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)})}componentDidMount(){var e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}G(JP,"contextType",De);var hx={onDirectionsChanged:"directions_changed"},px={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class Vv extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"state",{directionsRenderer:null}),G(this,"setDirectionsRendererCallback",()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))})}componentDidMount(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=Oe({updaterMap:px,eventMap:hx,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:px,eventMap:hx,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),ze(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return null}}G(Vv,"contextType",De);var mx={onPlacesChanged:"places_changed"},gx={bounds(t,e){t.setBounds(e)}};class Kh extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"containerElement",y.createRef()),G(this,"state",{searchBox:null}),G(this,"setSearchBoxCallback",()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)})}componentDidMount(){if(sn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){var e=this.containerElement.current.querySelector("input");if(e!==null){var n=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=Oe({updaterMap:gx,eventMap:mx,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{searchBox:n}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:gx,eventMap:mx,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),ze(this.registeredEvents))}render(){return f.jsx("div",{ref:this.containerElement,children:y.Children.only(this.props.children)})}}G(Kh,"contextType",De);var yx={onPlaceChanged:"place_changed"},vx={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class n1 extends y.PureComponent{constructor(){super(...arguments),G(this,"registeredEvents",[]),G(this,"containerElement",y.createRef()),G(this,"state",{autocomplete:null}),G(this,"setAutocompleteCallback",()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)})}componentDidMount(){var e;sn(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var n=(e=this.containerElement.current)===null||e===void 0?void 0:e.querySelector("input");if(n){var i=new google.maps.places.Autocomplete(n,this.props.options);this.registeredEvents=Oe({updaterMap:vx,eventMap:yx,prevProps:{},nextProps:this.props,instance:i}),this.setState(()=>({autocomplete:i}),this.setAutocompleteCallback)}}componentDidUpdate(e){ze(this.registeredEvents),this.registeredEvents=Oe({updaterMap:vx,eventMap:yx,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&ze(this.registeredEvents)}render(){return f.jsx("div",{ref:this.containerElement,className:this.props.className,children:y.Children.only(this.props.children)})}}G(n1,"defaultProps",{className:""});G(n1,"contextType",De);const i1=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("circle",{cx:"12",cy:"12",r:"6"}),f.jsx("line",{x1:"21",y1:"12",x2:"19",y2:"12"}),f.jsx("line",{x1:"5",y1:"12",x2:"3",y2:"12"}),f.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"19"}),f.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"3"})]}),YP={[ue.Travel]:'<path d="M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 5.2 5.2c.4.4 1 .5 1.4.3l.5-.3c.4-.3.6-.7.5-1.2z" />',[ue.Event]:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><path d="M23 21v-2a4 4 0 0 0-3-3.87" /><path d="M16 3.13a4 4 0 0 1 0 7.75" />',[ue.Hiking]:'<path d="m8 3 4 8 5-5 5 15H2L8 3z" />',[ue.Camping]:'<path d="M19 20 L19 10 L12 3 L5 10 L5 20" /><path d="M12 11 L12 20" /><path d="M3 20 L21 20" />',[ue.Volunteering]:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />',[ue.Cycling]:'<circle cx="5.5" cy="17.5" r="3.5" /><circle cx="18.5" cy="17.5" r="3.5" /><path d="M15 17.5h-5.5l1.5-5 4-3 2 3h-3" /><path d="M5.5 14l-3-3" />'},WP=t=>{const n=`
    <svg width="36" height="48" viewBox="0 0 36 48" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M18 0C8.05887 0 0 8.05887 0 18C0 29.9348 15.8553 45.7196 17.2912 47.4623C17.6853 47.9429 18.3147 47.9429 18.7088 47.4623C20.1447 45.7196 36 29.9348 36 18C36 8.05887 27.9411 0 18 0Z" fill="#F97316"/>
      <g transform="translate(6, 6)" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
        ${YP[t]||""}
      </g>
    </svg>
  `.replace(/\s\s+/g," ");return`data:image/svg+xml;base64,${btoa(n)}`},QP={width:"100%",height:"100%"},ZP=({icon:t,label:e,isActive:n,onClick:i})=>f.jsxs("button",{onClick:i,className:`flex-shrink-0 flex flex-col items-center justify-center w-20 h-16 rounded-xl transition-colors duration-200 ${n?"bg-brand-orange/10 dark:bg-brand-orange/20":"bg-light-bg-secondary dark:bg-dark-bg-secondary hover:bg-slate-100 dark:hover:bg-zinc-700/50"}`,children:[f.jsx("div",{className:`w-6 h-6 flex items-center justify-center ${n?"text-brand-orange":"text-gray-500 dark:text-gray-400"}`,children:t}),f.jsx("span",{className:`text-xs mt-1 text-center ${n?"font-semibold text-brand-orange dark:text-brand-orange-light":"text-gray-600 dark:text-gray-300"}`,children:e})]}),XP=({adventuresToShow:t,isLoaded:e,onShowToast:n,onSelectAdventure:i})=>{var C,k;const{t:s,language:r}=Be(),[o,a]=y.useState(null),[c,d]=y.useState(null),[h,m]=y.useState("all"),[g,v]=y.useState(null),T=y.useRef(null),w=y.useCallback(N=>{T.current=N},[]),I=y.useMemo(()=>{const N=new Date,V=t.filter(L=>new Date(L.startDate)>=N);return h==="all"?V:V.filter(L=>L.type===h)},[t,h]),b=I.find(N=>N.coordinates),E={lat:((C=b==null?void 0:b.coordinates)==null?void 0:C.lat)??51.505,lng:((k=b==null?void 0:b.coordinates)==null?void 0:k.lng)??-.09},A=N=>{a(N),v(null),(N.type===ue.Hiking||N.type===ue.Cycling)&&N.coordinates&&N.endCoordinates&&new window.google.maps.DirectionsService().route({origin:N.coordinates,destination:N.endCoordinates,travelMode:window.google.maps.TravelMode.WALKING},(L,$)=>{$===window.google.maps.DirectionsStatus.OK&&L?v(L):console.error(`error fetching directions ${L}`)})},R=()=>{a(null),v(null)},P=N=>{i(N),a(null)},U=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(N=>{var L,$;const V={lat:N.coords.latitude,lng:N.coords.longitude};d(V),(L=T.current)==null||L.panTo(V),($=T.current)==null||$.setZoom(14)},()=>{n(s("locationPermissionDenied"))}):n(s("locationUnavailable"))};y.useEffect(()=>{a(null),v(null)},[h]);const S=N=>new Date(N).toLocaleDateString(r,{month:"short",day:"numeric"}),M=[{type:"all",icon:f.jsx(Gh,{}),labelKey:"allTypes"},{type:ue.Travel,icon:f.jsx(Av,{}),labelKey:`AdventureType_${ue.Travel}`},{type:ue.Volunteering,icon:f.jsx($h,{}),labelKey:`AdventureType_${ue.Volunteering}`},{type:ue.Hiking,icon:f.jsx(Mv,{}),labelKey:`AdventureType_${ue.Hiking}`},{type:ue.Camping,icon:f.jsx(Rv,{}),labelKey:`AdventureType_${ue.Camping}`},{type:ue.Cycling,icon:f.jsx(kv,{}),labelKey:`AdventureType_${ue.Cycling}`},{type:ue.Event,icon:f.jsx(Iv,{}),labelKey:`AdventureType_${ue.Event}`}];return f.jsxs("div",{className:"w-full h-full flex flex-col",children:[f.jsx("div",{className:"bg-light-bg dark:bg-dark-bg border-b dark:border-zinc-800 p-2 overflow-x-auto",children:f.jsx("div",{className:"flex space-x-2",children:M.map(N=>f.jsx(ZP,{icon:N.icon,label:s(N.labelKey),isActive:h===N.type,onClick:()=>m(N.type)},N.type))})}),f.jsx("div",{className:"w-full flex-grow relative",children:e?f.jsxs(f.Fragment,{children:[f.jsxs(qI,{mapContainerStyle:QP,center:E,zoom:b?10:2,onLoad:w,options:{disableDefaultUI:!0,zoomControl:!0,mapTypeId:"terrain"},children:[I.map(N=>N.coordinates&&f.jsx(Pu,{position:N.coordinates,onClick:()=>A(N),icon:{url:WP(N.type),scaledSize:new window.google.maps.Size(36,48)}},N.id)),c&&f.jsx(Pu,{position:c,icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:7,fillColor:"#4285F4",fillOpacity:1,strokeColor:"white",strokeWeight:2}}),o&&o.coordinates&&!g&&f.jsx(yP,{position:o.coordinates,onCloseClick:R,children:f.jsxs("div",{className:"p-1 w-48 text-gray-800",children:[f.jsx("p",{className:"text-xs font-semibold text-brand-orange",children:s(`AdventureType_${o.type}`)}),f.jsx("h3",{className:"font-bold text-base mb-1",children:o.title}),f.jsxs("p",{className:"text-xs text-gray-600",children:[" ",S(o.startDate),o.endDate&&` - ${S(o.endDate)}`]}),f.jsx("button",{onClick:()=>P(o),className:"mt-2 w-full bg-brand-orange text-white text-xs font-bold py-1 px-2 rounded-md hover:bg-brand-orange-light transition-colors",children:s("viewAdventure")})]})}),g&&f.jsx(Vv,{directions:g,options:{suppressMarkers:!0,polylineOptions:{strokeColor:"#F97316",strokeWeight:5}}})]}),f.jsx("button",{onClick:U,className:"absolute bottom-4 end-4 z-10 bg-white dark:bg-zinc-800 p-3 rounded-full shadow-lg","aria-label":s("showMyLocation"),children:f.jsx(i1,{className:"w-6 h-6 text-gray-700 dark:text-gray-200"})})]}):f.jsx("div",{className:"h-full w-full flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-brand-orange"})})})]})},eV=Sh.memo(XP),tV={width:"100%",height:"100%"},nV={lat:51.5072,lng:-.1276},s1=({isOpen:t,onClose:e,onLocationSelect:n,onRouteSelect:i,initialPosition:s,mode:r="point"})=>{const{t:o}=Be(),[a,c]=y.useState(s||null),[d,h]=y.useState(null),[m,g]=y.useState(null),[v,T]=y.useState(null),w=y.useRef(null),I=y.useRef(null),[b,E]=y.useState(null),A=y.useCallback(L=>{w.current=L,s&&L.panTo(s)},[s]),R=y.useCallback(L=>{I.current=L},[]),P=()=>{var $,Z,j,ee;const L=($=I.current)==null?void 0:$.getPlaces();if(L&&L.length>0&&((Z=L[0].geometry)!=null&&Z.location)){const q=L[0].geometry.location,X={lat:q.lat(),lng:q.lng()};c(X),r==="point"&&((j=w.current)==null||j.panTo(X),(ee=w.current)==null||ee.setZoom(15))}},U=y.useCallback(L=>{if(L.latLng){const $={lat:L.latLng.lat(),lng:L.latLng.lng()};new window.google.maps.Geocoder().geocode({location:$},(j,ee)=>{if(ee==="OK"&&j&&j[0]){const q=j[0].formatted_address;r==="point"?c($):d?m||g({address:q,coords:$}):h({address:q,coords:$})}else E(o("noAddressFound"))})}},[r,d,m,o]);y.useEffect(()=>{r==="route"&&d&&m&&new window.google.maps.DirectionsService().route({origin:d.coords,destination:m.coords,travelMode:window.google.maps.TravelMode.WALKING},($,Z)=>{Z===window.google.maps.DirectionsStatus.OK&&$&&T($)})},[d,m,r]);const S=()=>{if(r==="point"){if(!a)return;new window.google.maps.Geocoder().geocode({location:a},($,Z)=>{Z==="OK"&&$&&$[0]?n($[0].formatted_address,a):E(o("noAddressFound"))})}else d&&m&&i&&i(d,m)},M=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(L=>{var Z,j;const $={lat:L.coords.latitude,lng:L.coords.longitude};r==="point"&&c($),(Z=w.current)==null||Z.panTo($),(j=w.current)==null||j.setZoom(15)},()=>{E(o("locationPermissionDenied"))}):E(o("locationUnavailable"))},C=()=>{h(null),g(null),T(null)},k=()=>{c(s||null),C(),e()};if(!t)return null;const N=()=>o(r==="route"?d?m?"routeSelected":"selectEndPoint":"selectStartPoint":"searchForLocation"),V=r==="point"?!a:!d||!m;return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[102] flex justify-center items-center p-4 animate-fade-in",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-2xl h-[80vh] flex flex-col relative",children:[f.jsxs("div",{className:"p-4 border-b dark:border-neutral-800 flex justify-between items-center",children:[f.jsx("h2",{className:"text-xl font-bold dark:text-white",children:o(r==="route"?"drawRouteOnMap":"selectOnMap")}),f.jsx("button",{onClick:k,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl font-bold",children:""})]}),f.jsxs("div",{className:"flex-grow relative",children:[f.jsxs(qI,{mapContainerStyle:tV,center:s||nV,zoom:s?15:8,onLoad:A,onClick:U,children:[r==="point"&&a&&f.jsx(Pu,{position:a}),r==="route"&&d&&f.jsx(Pu,{position:d.coords,label:"A"}),r==="route"&&m&&f.jsx(Pu,{position:m.coords,label:"B"}),v&&f.jsx(Vv,{directions:v,options:{suppressMarkers:!0,polylineOptions:{strokeColor:"#F97316",strokeWeight:5}}})]}),f.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 w-[90%] max-w-md",children:r==="point"?f.jsx(Kh,{onLoad:R,onPlacesChanged:P,children:f.jsx("input",{type:"text",placeholder:o("searchForLocation"),className:"w-full p-3 rounded-md shadow-lg border-none focus:ring-2 focus:ring-orange-500"})}):f.jsx("div",{className:"p-3 rounded-md shadow-lg bg-white dark:bg-neutral-800 text-center font-semibold text-gray-800 dark:text-gray-200",children:N()})}),f.jsx("button",{onClick:M,className:"absolute bottom-4 end-4 z-10 bg-white dark:bg-zinc-800 p-3 rounded-full shadow-lg","aria-label":o("showMyLocation"),children:f.jsx(i1,{className:"w-6 h-6 text-gray-700 dark:text-gray-200"})})]}),f.jsxs("div",{className:"p-4 border-t dark:border-neutral-800 flex items-center space-x-2",children:[r==="route"&&d&&f.jsx("button",{onClick:C,className:"flex-grow bg-gray-200 dark:bg-zinc-700 text-gray-800 dark:text-gray-200 font-bold py-3 rounded-md hover:bg-gray-300 dark:hover:bg-zinc-600 transition-colors",children:o("reset")}),f.jsx("button",{onClick:S,disabled:V,className:"flex-grow bg-orange-600 text-white font-bold py-3 rounded-md hover:bg-orange-700 disabled:bg-orange-300 transition-colors",children:o("confirmLocation")})]}),b&&f.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center z-20",role:"alertdialog","aria-modal":"true","aria-labelledby":"alert-dialog-title",children:f.jsxs("div",{className:"bg-light-bg-secondary dark:bg-dark-bg-secondary rounded-2xl p-6 w-11/12 max-w-sm text-center shadow-xl animate-fade-in-up",children:[f.jsx("p",{id:"alert-dialog-title",className:"text-gray-800 dark:text-gray-200 mb-6",children:b}),f.jsx("button",{onClick:()=>E(null),className:"bg-brand-orange text-white px-8 py-2.5 rounded-full font-semibold hover:bg-brand-orange-light transition-colors",children:o("ok")})]})})]})})};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let iV,sV;function rV(){return{geminiUrl:iV,vertexUrl:sV}}function oV(t,e,n,i){var s,r;if(!(t!=null&&t.baseUrl)){const o=rV();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:n:(r=o.geminiUrl)!==null&&r!==void 0?r:i}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yo{}function ve(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const r=e[s];return r!=null?String(r):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function u(t,e,n){for(let r=0;r<e.length-1;r++){const o=e[r];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[a])){const c=t[a];if(Array.isArray(n))for(let d=0;d<c.length;d++){const h=c[d];u(h,e.slice(r+1),n[d])}else for(const d of c)u(d,e.slice(r+1),n)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in t||(t[a]=[{}]);const c=t[a];u(c[0],e.slice(r+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const i=e[e.length-1],s=t[i];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[i]=n}function l(t,e){try{if(e.length===1&&e[0]==="_self")return t;for(let n=0;n<e.length;n++){if(typeof t!="object"||t===null)return;const i=e[n];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const r=t[s];return Array.isArray(r)?r.map(o=>l(o,e.slice(n+1))):void 0}else return}else t=t[i]}return t}catch(n){if(n instanceof TypeError)return;throw n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uv(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aV(t){const e={},n=l(t,["operationName"]);n!=null&&u(e,["operationName"],n);const i=l(t,["resourceName"]);return i!=null&&u(e,["_url","resourceName"],i),e}function lV(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["metadata"]);i!=null&&u(e,["metadata"],i);const s=l(t,["done"]);s!=null&&u(e,["done"],s);const r=l(t,["error"]);r!=null&&u(e,["error"],r);const o=l(t,["response","generateVideoResponse"]);return o!=null&&u(e,["response"],cV(o)),e}function uV(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["metadata"]);i!=null&&u(e,["metadata"],i);const s=l(t,["done"]);s!=null&&u(e,["done"],s);const r=l(t,["error"]);r!=null&&u(e,["error"],r);const o=l(t,["response"]);return o!=null&&u(e,["response"],dV(o)),e}function cV(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>fV(o))),u(e,["generatedVideos"],r)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const s=l(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function dV(t){const e={},n=l(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>hV(o))),u(e,["generatedVideos"],r)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const s=l(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function fV(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],gV(n)),e}function hV(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],yV(n)),e}function pV(t){const e={},n=l(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function mV(t){const e={},n=l(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function gV(t){const e={},n=l(t,["video","uri"]);n!=null&&u(e,["uri"],n);const i=l(t,["video","encodedVideo"]);i!=null&&u(e,["videoBytes"],Uv(i));const s=l(t,["encoding"]);return s!=null&&u(e,["mimeType"],s),e}function yV(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const i=l(t,["bytesBase64Encoded"]);i!=null&&u(e,["videoBytes"],Uv(i));const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var _x;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(_x||(_x={}));var Tx;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(Tx||(Tx={}));var Cr;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Cr||(Cr={}));var Ex;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Ex||(Ex={}));var xx;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(xx||(xx={}));var Cx;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(Cx||(Cx={}));var Sx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Sx||(Sx={}));var wx;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(wx||(wx={}));var bx;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(bx||(bx={}));var Ax;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Ax||(Ax={}));var Ix;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT"})(Ix||(Ix={}));var Mx;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Mx||(Mx={}));var Rx;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Rx||(Rx={}));var kx;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY"})(kx||(kx={}));var Nx;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Nx||(Nx={}));var Zf;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Zf||(Zf={}));var Lx;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Lx||(Lx={}));var Fg;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Fg||(Fg={}));var Dx;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Dx||(Dx={}));var Px;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Px||(Px={}));var Vx;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(Vx||(Vx={}));var Ux;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Ux||(Ux={}));var Ox;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ox||(Ox={}));var Bx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Bx||(Bx={}));var Fx;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Fx||(Fx={}));var jx;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(jx||(jx={}));var zx;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(zx||(zx={}));var qx;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(qx||(qx={}));var Hx;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Hx||(Hx={}));var Gx;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Gx||(Gx={}));var $x;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})($x||($x={}));var Kx;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Kx||(Kx={}));var Jx;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Jx||(Jx={}));var Yx;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(Yx||(Yx={}));var Wx;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(Wx||(Wx={}));var Qx;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Qx||(Qx={}));var Zx;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Zx||(Zx={}));var Xx;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(Xx||(Xx={}));var eC;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(eC||(eC={}));var tC;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(tC||(tC={}));var nC;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(nC||(nC={}));var iC;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(iC||(iC={}));var sC;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(sC||(sC={}));var rC;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(rC||(rC={}));var oC;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(oC||(oC={}));var aC;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(aC||(aC={}));var lC;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(lC||(lC={}));var uC;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(uC||(uC={}));var La;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(La||(La={}));class jg{constructor(e){const n={};for(const i of e.headers.entries())n[i[0]]=i[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class lu{get text(){var e,n,i,s,r,o,a,c;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",h=!1;const m=[];for(const g of(c=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[v,T]of Object.entries(g))v!=="text"&&v!=="thought"&&(T!==null||T!==void 0)&&m.push(v);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;h=!0,d+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?d:void 0}get data(){var e,n,i,s,r,o,a,c;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const h=[];for(const m of(c=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&c!==void 0?c:[]){for(const[g,v]of Object.entries(m))g!=="inlineData"&&(v!==null||v!==void 0)&&h.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,i,s,r,o,a,c;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,i,s,r,o,a,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(c=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,i,s,r,o,a,c,d;if(((s=(i=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(c=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||c===void 0?void 0:c.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.output}}class cC{}class dC{}class vV{}class _V{}class TV{}class EV{}class fC{}class hC{}class pC{}class xV{}class Xf{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const i=new Xf;let s;const r=e;return n?s=uV(r):s=lV(r),Object.assign(i,s),i}}class mC{}class gC{}class yC{}class CV{}class SV{}class wV{}class vC{}class bV{get text(){var e,n,i;let s="",r=!1;const o=[];for(const a of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[c,d]of Object.entries(a))c!=="text"&&c!=="thought"&&d!==null&&o.push(c);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;r=!0,s+=a.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),r?s:void 0}get data(){var e,n,i;let s="";const r=[];for(const o of(i=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&i!==void 0?i:[]){for(const[a,c]of Object.entries(o))a!=="inlineData"&&c!==null&&r.push(a);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return r.length>0&&console.warn(`there are non-data parts ${r} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class AV{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function et(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function r1(t,e){const n=et(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function o1(t){return Array.isArray(t)?t.map(e=>eh(e)):[eh(t)]}function eh(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function a1(t){const e=eh(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function l1(t){const e=eh(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function _C(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function u1(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>_C(e)):[_C(t)]}function zg(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function TC(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function EC(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function An(t){if(t==null)throw new Error("ContentUnion is required");return zg(t)?t:{role:"user",parts:u1(t)}}function Ov(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const i=An(n);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(t.isVertexAI()){const n=An(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>An(n)):[An(e)]}function Si(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(TC(t)||EC(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[An(t)]}const e=[],n=[],i=zg(t[0]);for(const s of t){const r=zg(s);if(r!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(r)e.push(s);else{if(TC(s)||EC(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return i||e.push({role:"user",parts:u1(n)}),e}function IV(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(i=>i!=="null");if(n.length===1)e.type=Object.values(Cr).includes(n[0].toUpperCase())?n[0].toUpperCase():Cr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of n)e.anyOf.push({type:Object.values(Cr).includes(i.toUpperCase())?i.toUpperCase():Cr.TYPE_UNSPECIFIED})}}function Ha(t){const e={},n=["items"],i=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const r=t.anyOf;r!=null&&r.length==2&&(r[0].type==="null"?(e.nullable=!0,t=r[1]):r[1].type==="null"&&(e.nullable=!0,t=r[0])),t.type instanceof Array&&IV(t.type,e);for(const[o,a]of Object.entries(t))if(a!=null)if(o=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(Cr).includes(a.toUpperCase())?a.toUpperCase():Cr.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=Ha(a);else if(i.includes(o)){const c=[];for(const d of a){if(d.type=="null"){e.nullable=!0;continue}c.push(Ha(d))}e[o]=c}else if(s.includes(o)){const c={};for(const[d,h]of Object.entries(a))c[d]=Ha(h);e[o]=c}else{if(o==="additionalProperties")continue;e[o]=a}return e}function Bv(t){return Ha(t)}function Fv(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function jv(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Al(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Ha(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Ha(e.response));return t}function Il(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function MV(t,e,n,i=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===i;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function zs(t,e){if(typeof e!="string")throw new Error("name must be a string");return MV(t,e,"cachedContents")}function c1(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Wo(t){return Uv(t)}function RV(t){return t!=null&&typeof t=="object"&&"name"in t}function kV(t){return t!=null&&typeof t=="object"&&"video"in t}function NV(t){return t!=null&&typeof t=="object"&&"uri"in t}function d1(t){var e;let n;if(RV(t)&&(n=t.name),!(NV(t)&&(n=t.uri,n===void 0))&&!(kV(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function f1(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function h1(t){for(const e of["models","tunedModels","publisherModels"])if(LV(t,e))return t[e];return[]}function LV(t,e){return t!==null&&typeof t=="object"&&e in t}function DV(t,e={}){const n=t,i={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(i.responseJsonSchema=n.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function PV(t,e={}){const n=[],i=new Set;for(const s of t){const r=s.name;if(i.has(r))throw new Error(`Duplicate function name ${r} found in MCP tools. Please ensure function names are unique.`);i.add(r);const o=DV(s,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function p1(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const i=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function VV(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function m1(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let r=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const c=o.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){r=!0;break}}return r&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Ml(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function g1(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UV(t){const e={},n=l(t,["responsesFile"]);n!=null&&u(e,["fileName"],n);const i=l(t,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>w4(o))),u(e,["inlinedResponses"],r)}const s=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>C4(o))),u(e,["inlinedEmbedContentResponses"],r)}return e}function OV(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&u(e,["format"],n);const i=l(t,["gcsDestination","outputUriPrefix"]);i!=null&&u(e,["gcsUri"],i);const s=l(t,["bigqueryDestination","outputUri"]);return s!=null&&u(e,["bigqueryUri"],s),e}function BV(t){const e={},n=l(t,["format"]);n!=null&&u(e,["predictionsFormat"],n);const i=l(t,["gcsUri"]);i!=null&&u(e,["gcsDestination","outputUriPrefix"],i);const s=l(t,["bigqueryUri"]);if(s!=null&&u(e,["bigqueryDestination","outputUri"],s),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function pa(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["metadata","displayName"]);i!=null&&u(e,["displayName"],i);const s=l(t,["metadata","state"]);s!=null&&u(e,["state"],g1(s));const r=l(t,["metadata","createTime"]);r!=null&&u(e,["createTime"],r);const o=l(t,["metadata","endTime"]);o!=null&&u(e,["endTime"],o);const a=l(t,["metadata","updateTime"]);a!=null&&u(e,["updateTime"],a);const c=l(t,["metadata","model"]);c!=null&&u(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&u(e,["dest"],UV(m1(d))),e}function qg(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const s=l(t,["state"]);s!=null&&u(e,["state"],g1(s));const r=l(t,["error"]);r!=null&&u(e,["error"],v1(r));const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const a=l(t,["startTime"]);a!=null&&u(e,["startTime"],a);const c=l(t,["endTime"]);c!=null&&u(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&u(e,["updateTime"],d);const h=l(t,["model"]);h!=null&&u(e,["model"],h);const m=l(t,["inputConfig"]);m!=null&&u(e,["src"],FV(m));const g=l(t,["outputConfig"]);return g!=null&&u(e,["dest"],OV(m1(g))),e}function FV(t){const e={},n=l(t,["instancesFormat"]);n!=null&&u(e,["format"],n);const i=l(t,["gcsSource","uris"]);i!=null&&u(e,["gcsUri"],i);const s=l(t,["bigquerySource","inputUri"]);return s!=null&&u(e,["bigqueryUri"],s),e}function jV(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=l(e,["fileName"]);i!=null&&u(n,["fileName"],i);const s=l(e,["inlinedRequests"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>S4(t,o))),u(n,["requests","requests"],r)}return n}function zV(t){const e={},n=l(t,["format"]);n!=null&&u(e,["instancesFormat"],n);const i=l(t,["gcsUri"]);i!=null&&u(e,["gcsSource","uris"],i);const s=l(t,["bigqueryUri"]);if(s!=null&&u(e,["bigquerySource","inputUri"],s),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function qV(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function HV(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function GV(t,e){const n={},i=l(e,["name"]);return i!=null&&u(n,["_url","name"],Ml(t,i)),n}function $V(t,e){const n={},i=l(e,["name"]);return i!=null&&u(n,["_url","name"],Ml(t,i)),n}function KV(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],QV(n));const i=l(t,["citationMetadata"]);i!=null&&u(e,["citationMetadata"],JV(i));const s=l(t,["tokenCount"]);s!=null&&u(e,["tokenCount"],s);const r=l(t,["finishReason"]);r!=null&&u(e,["finishReason"],r);const o=l(t,["urlContextMetadata"]);o!=null&&u(e,["urlContextMetadata"],K4(o));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&u(e,["index"],d);const h=l(t,["logprobsResult"]);h!=null&&u(e,["logprobsResult"],h);const m=l(t,["safetyRatings"]);return m!=null&&u(e,["safetyRatings"],m),e}function JV(t){const e={},n=l(t,["citationSources"]);return n!=null&&u(e,["citations"],n),e}function YV(t){const e={},n=l(t,["environment"]);n!=null&&u(e,["environment"],n);const i=l(t,["excludedPredefinedFunctions"]);return i!=null&&u(e,["excludedPredefinedFunctions"],i),e}function WV(t){const e={},n=l(t,["values"]);return n!=null&&u(e,["values"],n),e}function QV(t){const e={},n=l(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>P4(r))),u(e,["parts"],s)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function y1(t){const e={},n=l(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>V4(r))),u(e,["parts"],s)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function ZV(t,e){const n={},i=l(t,["displayName"]);if(e!==void 0&&i!=null&&u(e,["batch","displayName"],i),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function XV(t,e){const n={},i=l(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=l(t,["dest"]);return e!==void 0&&s!=null&&u(e,["outputConfig"],BV(VV(s))),n}function Em(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["src"]);s!=null&&u(n,["batch","inputConfig"],jV(t,p1(t,s)));const r=l(e,["config"]);return r!=null&&ZV(r,n),n}function e4(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["model"],et(t,i));const s=l(e,["src"]);s!=null&&u(n,["inputConfig"],zV(p1(t,s)));const r=l(e,["config"]);return r!=null&&XV(r,n),n}function t4(t,e){const n={},i=l(t,["displayName"]);return e!==void 0&&i!=null&&u(e,["batch","displayName"],i),n}function xm(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["src"]);s!=null&&u(n,["batch","inputConfig"],u4(t,s));const r=l(e,["config"]);return r!=null&&t4(r,n),n}function n4(t,e){const n={},i=l(e,["name"]);return i!=null&&u(n,["_url","name"],Ml(t,i)),n}function i4(t,e){const n={},i=l(e,["name"]);return i!=null&&u(n,["_url","name"],Ml(t,i)),n}function s4(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const s=l(t,["done"]);s!=null&&u(e,["done"],s);const r=l(t,["error"]);return r!=null&&u(e,["error"],zv(r)),e}function r4(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const s=l(t,["done"]);s!=null&&u(e,["done"],s);const r=l(t,["error"]);return r!=null&&u(e,["error"],v1(r)),e}function o4(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function a4(t,e){const n={},i=l(e,["contents"]);i!=null&&u(n,["requests[]","request","content"],Ov(t,i));const s=l(e,["config"]);return s!=null&&u(n,["config"],l4(s,n)),n}function l4(t,e){const n={},i=l(t,["taskType"]);e!==void 0&&i!=null&&u(e,["requests[]","taskType"],i);const s=l(t,["title"]);e!==void 0&&s!=null&&u(e,["requests[]","title"],s);const r=l(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&u(e,["requests[]","outputDimensionality"],r),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function u4(t,e){const n={},i=l(e,["fileName"]);i!=null&&u(n,["file_name"],i);const s=l(e,["inlinedRequests"]);return s!=null&&u(n,["requests"],a4(t,s)),n}function c4(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function d4(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function f4(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const s=l(t,["name"]);return s!=null&&u(e,["name"],s),e}function h4(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const s=l(t,["name"]);return s!=null&&u(e,["name"],s),e}function p4(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["allowedFunctionNames"]);return i!=null&&u(e,["allowedFunctionNames"],i),e}function m4(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const s=l(t,["name"]);s!=null&&u(e,["name"],s);const r=l(t,["parameters"]);r!=null&&u(e,["parameters"],r);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function g4(t,e,n){const i={},s=l(e,["systemInstruction"]);n!==void 0&&s!=null&&u(n,["systemInstruction"],y1(An(s)));const r=l(e,["temperature"]);r!=null&&u(i,["temperature"],r);const o=l(e,["topP"]);o!=null&&u(i,["topP"],o);const a=l(e,["topK"]);a!=null&&u(i,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(i,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(i,["maxOutputTokens"],d);const h=l(e,["stopSequences"]);h!=null&&u(i,["stopSequences"],h);const m=l(e,["responseLogprobs"]);m!=null&&u(i,["responseLogprobs"],m);const g=l(e,["logprobs"]);g!=null&&u(i,["logprobs"],g);const v=l(e,["presencePenalty"]);v!=null&&u(i,["presencePenalty"],v);const T=l(e,["frequencyPenalty"]);T!=null&&u(i,["frequencyPenalty"],T);const w=l(e,["seed"]);w!=null&&u(i,["seed"],w);const I=l(e,["responseMimeType"]);I!=null&&u(i,["responseMimeType"],I);const b=l(e,["responseSchema"]);b!=null&&u(i,["responseSchema"],F4(Bv(b)));const E=l(e,["responseJsonSchema"]);if(E!=null&&u(i,["responseJsonSchema"],E),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=l(e,["safetySettings"]);if(n!==void 0&&A!=null){let V=A;Array.isArray(V)&&(V=V.map(L=>B4(L))),u(n,["safetySettings"],V)}const R=l(e,["tools"]);if(n!==void 0&&R!=null){let V=Il(R);Array.isArray(V)&&(V=V.map(L=>$4(Al(L)))),u(n,["tools"],V)}const P=l(e,["toolConfig"]);if(n!==void 0&&P!=null&&u(n,["toolConfig"],G4(P)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=l(e,["cachedContent"]);n!==void 0&&U!=null&&u(n,["cachedContent"],zs(t,U));const S=l(e,["responseModalities"]);S!=null&&u(i,["responseModalities"],S);const M=l(e,["mediaResolution"]);M!=null&&u(i,["mediaResolution"],M);const C=l(e,["speechConfig"]);if(C!=null&&u(i,["speechConfig"],q4(Fv(C))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=l(e,["thinkingConfig"]);k!=null&&u(i,["thinkingConfig"],H4(k));const N=l(e,["imageConfig"]);return N!=null&&u(i,["imageConfig"],x4(N)),i}function y4(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>KV(d))),u(e,["candidates"],c)}const s=l(t,["modelVersion"]);s!=null&&u(e,["modelVersion"],s);const r=l(t,["promptFeedback"]);r!=null&&u(e,["promptFeedback"],r);const o=l(t,["responseId"]);o!=null&&u(e,["responseId"],o);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function v4(t,e){const n={},i=l(e,["name"]);return i!=null&&u(n,["_url","name"],Ml(t,i)),n}function _4(t,e){const n={},i=l(e,["name"]);return i!=null&&u(n,["_url","name"],Ml(t,i)),n}function T4(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],o4(n)),e}function E4(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],b4(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function x4(t){const e={},n=l(t,["aspectRatio"]);return n!=null&&u(e,["aspectRatio"],n),e}function C4(t){const e={},n=l(t,["response"]);n!=null&&u(e,["response"],j4(n));const i=l(t,["error"]);return i!=null&&u(e,["error"],zv(i)),e}function S4(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["request","model"],et(t,i));const s=l(e,["contents"]);if(s!=null){let o=Si(s);Array.isArray(o)&&(o=o.map(a=>y1(a))),u(n,["request","contents"],o)}const r=l(e,["config"]);return r!=null&&u(n,["request","generationConfig"],g4(t,r,n)),n}function w4(t){const e={},n=l(t,["response"]);n!=null&&u(e,["response"],y4(n));const i=l(t,["error"]);return i!=null&&u(e,["error"],zv(i)),e}function b4(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function zv(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const i=l(t,["code"]);i!=null&&u(e,["code"],i);const s=l(t,["message"]);return s!=null&&u(e,["message"],s),e}function v1(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const i=l(t,["code"]);i!=null&&u(e,["code"],i);const s=l(t,["message"]);return s!=null&&u(e,["message"],s),e}function A4(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const i=l(t,["longitude"]);return i!=null&&u(e,["longitude"],i),e}function I4(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=l(t,["pageToken"]);if(e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function M4(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=l(t,["pageToken"]);e!==void 0&&s!=null&&u(e,["_query","pageToken"],s);const r=l(t,["filter"]);return e!==void 0&&r!=null&&u(e,["_query","filter"],r),n}function R4(t){const e={},n=l(t,["config"]);return n!=null&&I4(n,e),e}function k4(t){const e={},n=l(t,["config"]);return n!=null&&M4(n,e),e}function N4(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=l(t,["operations"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>pa(o))),u(e,["batchJobs"],r)}return e}function L4(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=l(t,["batchPredictionJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>qg(o))),u(e,["batchJobs"],r)}return e}function D4(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>z4(s))),u(e,["speakerVoiceConfigs"],i)}return e}function P4(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],W4(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const s=l(t,["inlineData"]);s!=null&&u(e,["inlineData"],qV(s));const r=l(t,["fileData"]);r!=null&&u(e,["fileData"],c4(r));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["functionCall"]);a!=null&&u(e,["functionCall"],f4(a));const c=l(t,["codeExecutionResult"]);c!=null&&u(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&u(e,["executableCode"],d);const h=l(t,["functionResponse"]);h!=null&&u(e,["functionResponse"],h);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function V4(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],Q4(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const s=l(t,["inlineData"]);s!=null&&u(e,["inlineData"],HV(s));const r=l(t,["fileData"]);r!=null&&u(e,["fileData"],d4(r));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["functionCall"]);a!=null&&u(e,["functionCall"],h4(a));const c=l(t,["codeExecutionResult"]);c!=null&&u(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&u(e,["executableCode"],d);const h=l(t,["functionResponse"]);h!=null&&u(e,["functionResponse"],h);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function U4(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function O4(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],A4(n));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function B4(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&u(e,["category"],n);const i=l(t,["threshold"]);return i!=null&&u(e,["threshold"],i),e}function F4(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const i=l(t,["default"]);i!=null&&u(e,["default"],i);const s=l(t,["description"]);s!=null&&u(e,["description"],s);const r=l(t,["enum"]);r!=null&&u(e,["enum"],r);const o=l(t,["example"]);o!=null&&u(e,["example"],o);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const d=l(t,["maxItems"]);d!=null&&u(e,["maxItems"],d);const h=l(t,["maxLength"]);h!=null&&u(e,["maxLength"],h);const m=l(t,["maxProperties"]);m!=null&&u(e,["maxProperties"],m);const g=l(t,["maximum"]);g!=null&&u(e,["maximum"],g);const v=l(t,["minItems"]);v!=null&&u(e,["minItems"],v);const T=l(t,["minLength"]);T!=null&&u(e,["minLength"],T);const w=l(t,["minProperties"]);w!=null&&u(e,["minProperties"],w);const I=l(t,["minimum"]);I!=null&&u(e,["minimum"],I);const b=l(t,["nullable"]);b!=null&&u(e,["nullable"],b);const E=l(t,["pattern"]);E!=null&&u(e,["pattern"],E);const A=l(t,["properties"]);A!=null&&u(e,["properties"],A);const R=l(t,["propertyOrdering"]);R!=null&&u(e,["propertyOrdering"],R);const P=l(t,["required"]);P!=null&&u(e,["required"],P);const U=l(t,["title"]);U!=null&&u(e,["title"],U);const S=l(t,["type"]);return S!=null&&u(e,["type"],S),e}function j4(t){const e={},n=l(t,["embedding"]);n!=null&&u(e,["embedding"],WV(n));const i=l(t,["tokenCount"]);return i!=null&&u(e,["tokenCount"],i),e}function z4(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const i=l(t,["voiceConfig"]);return i!=null&&u(e,["voiceConfig"],_1(i)),e}function q4(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],_1(n));const i=l(t,["multiSpeakerVoiceConfig"]);i!=null&&u(e,["multiSpeakerVoiceConfig"],D4(i));const s=l(t,["languageCode"]);return s!=null&&u(e,["languageCode"],s),e}function H4(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const i=l(t,["thinkingBudget"]);return i!=null&&u(e,["thinkingBudget"],i),e}function G4(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],p4(n));const i=l(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],O4(i)),e}function $4(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>m4(d))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],E4(i));const s=l(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],T4(s)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],J4());const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],YV(o));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function K4(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Y4(s))),u(e,["urlMetadata"],i)}return e}function J4(){return{}}function Y4(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const i=l(t,["urlRetrievalStatus"]);return i!=null&&u(e,["urlRetrievalStatus"],i),e}function W4(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const s=l(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function Q4(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const s=l(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function _1(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],U4(n)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Vo;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Vo||(Vo={}));class kc{constructor(e,n,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,i,s)}init(e,n,i){var s,r;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!i||Object.keys(i).length===0?o={config:{}}:typeof i=="object"?o=Object.assign({},i):o=i,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(r=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Z4 extends Yo{constructor(e){super(),this.apiClient=e,this.create=async n=>{var i,s;if(this.apiClient.isVertexAI())return n.config=this.formatDestination(n.src,n.config),this.createInternal(n);const r=n.src;if(!(Array.isArray(n.src)||r.inlinedRequests!==void 0))return this.createInternal(n);const a=this.createInlinedGenerateContentRequest(n),c=a.path,d=a.body,h=Em(this.apiClient,n)._query||{};return this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()).then(g=>pa(g))},this.createEmbeddings=async n=>{var i,s;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(n.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(n);const a=this.createInlinedEmbedContentRequest(n),c=a.path,d=a.body,h=xm(this.apiClient,n)._query||{};return this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=n.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=n.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()).then(g=>pa(g))},this.list=async(n={})=>new kc(Vo.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=Em(this.apiClient,e),i=n._url,s=ve("{model}:batchGenerateContent",i),a=n.batch.inputConfig.requests,c=a.requests,d=[];for(const h of c){const m=Object.assign({},h);if(m.systemInstruction){const g=m.systemInstruction;delete m.systemInstruction;const v=m.request;v.systemInstruction=g,m.request=v}d.push(m)}return a.requests=d,delete n.config,delete n._url,delete n._query,{path:s,body:n}}createInlinedEmbedContentRequest(e){const n=xm(this.apiClient,e),i=n._url,s=ve("{model}:asyncBatchEmbedContent",i),a=n.batch.inputConfig.requests,c=a.requests,d=[];delete a.config;for(const h of c){const m=Object.assign({},h),g=m.request;for(const v in m)v!=="request"&&(g[v]=m[v],delete m[v]);d.push(m)}return a.requests=d,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const i=n?Object.assign({},n):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const r=this.getGcsUri(e),o=this.getBigqueryUri(e);if(r)r.endsWith(".jsonl")?i.dest=`${r.slice(0,-6)}/dest`:i.dest=`${r}_dest_${s}`;else if(o)i.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=e4(this.apiClient,e);return a=ve("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>qg(h))}else{const d=Em(this.apiClient,e);return a=ve("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>pa(h))}}async createEmbeddingsInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=xm(this.apiClient,e);return r=ve("{model}:asyncBatchEmbedContent",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s.then(c=>pa(c))}}async get(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=_4(this.apiClient,e);return a=ve("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>qg(h))}else{const d=v4(this.apiClient,e);return a=ve("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>pa(h))}}async cancel(e){var n,i,s,r;let o="",a={};if(this.apiClient.isVertexAI()){const c=$V(this.apiClient,e);o=ve("batchPredictionJobs/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=GV(this.apiClient,e);o=ve("batches/{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=k4(e);return a=ve("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=L4(h),g=new vC;return Object.assign(g,m),g})}else{const d=R4(e);return a=ve("batches",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=N4(h),g=new vC;return Object.assign(g,m),g})}}async delete(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=i4(this.apiClient,e);return a=ve("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>r4(h))}else{const d=n4(this.apiClient,e);return a=ve("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>s4(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X4(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function eU(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],X4(n));const i=l(t,["authType"]);i!=null&&u(e,["authType"],i);const s=l(t,["googleServiceAccountConfig"]);s!=null&&u(e,["googleServiceAccountConfig"],s);const r=l(t,["httpBasicAuthConfig"]);r!=null&&u(e,["httpBasicAuthConfig"],r);const o=l(t,["oauthConfig"]);o!=null&&u(e,["oauthConfig"],o);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function tU(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function nU(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["data"]);i!=null&&u(e,["data"],i);const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function tf(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const s=l(t,["model"]);s!=null&&u(e,["model"],s);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const o=l(t,["updateTime"]);o!=null&&u(e,["updateTime"],o);const a=l(t,["expireTime"]);a!=null&&u(e,["expireTime"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function nf(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const s=l(t,["model"]);s!=null&&u(e,["model"],s);const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const o=l(t,["updateTime"]);o!=null&&u(e,["updateTime"],o);const a=l(t,["expireTime"]);a!=null&&u(e,["expireTime"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function iU(t){const e={},n=l(t,["environment"]);n!=null&&u(e,["environment"],n);const i=l(t,["excludedPredefinedFunctions"]);return i!=null&&u(e,["excludedPredefinedFunctions"],i),e}function sU(t){const e={},n=l(t,["environment"]);n!=null&&u(e,["environment"],n);const i=l(t,["excludedPredefinedFunctions"]);return i!=null&&u(e,["excludedPredefinedFunctions"],i),e}function xC(t){const e={},n=l(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>jU(r))),u(e,["parts"],s)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function CC(t){const e={},n=l(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>zU(r))),u(e,["parts"],s)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function rU(t,e){const n={},i=l(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const s=l(t,["expireTime"]);e!==void 0&&s!=null&&u(e,["expireTime"],s);const r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(t,["contents"]);if(e!==void 0&&o!=null){let h=Si(o);Array.isArray(h)&&(h=h.map(m=>xC(m))),u(e,["contents"],h)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],xC(An(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let h=c;Array.isArray(h)&&(h=h.map(m=>KU(m))),u(e,["tools"],h)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&u(e,["toolConfig"],GU(d)),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function oU(t,e){const n={},i=l(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const s=l(t,["expireTime"]);e!==void 0&&s!=null&&u(e,["expireTime"],s);const r=l(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);const o=l(t,["contents"]);if(e!==void 0&&o!=null){let m=Si(o);Array.isArray(m)&&(m=m.map(g=>CC(g))),u(e,["contents"],m)}const a=l(t,["systemInstruction"]);e!==void 0&&a!=null&&u(e,["systemInstruction"],CC(An(a)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>JU(g))),u(e,["tools"],m)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&u(e,["toolConfig"],$U(d));const h=l(t,["kmsKeyName"]);return e!==void 0&&h!=null&&u(e,["encryption_spec","kmsKeyName"],h),n}function aU(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["model"],r1(t,i));const s=l(e,["config"]);return s!=null&&rU(s,n),n}function lU(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["model"],r1(t,i));const s=l(e,["config"]);return s!=null&&oU(s,n),n}function uU(t,e){const n={},i=l(e,["name"]);return i!=null&&u(n,["_url","name"],zs(t,i)),n}function cU(t,e){const n={},i=l(e,["name"]);return i!=null&&u(n,["_url","name"],zs(t,i)),n}function dU(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function fU(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function hU(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function pU(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function mU(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function gU(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function yU(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function vU(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const s=l(t,["name"]);return s!=null&&u(e,["name"],s),e}function _U(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const s=l(t,["name"]);return s!=null&&u(e,["name"],s),e}function TU(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["allowedFunctionNames"]);return i!=null&&u(e,["allowedFunctionNames"],i),e}function EU(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["allowedFunctionNames"]);return i!=null&&u(e,["allowedFunctionNames"],i),e}function xU(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const s=l(t,["name"]);s!=null&&u(e,["name"],s);const r=l(t,["parameters"]);r!=null&&u(e,["parameters"],r);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function CU(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const s=l(t,["parameters"]);s!=null&&u(e,["parameters"],s);const r=l(t,["parametersJsonSchema"]);r!=null&&u(e,["parametersJsonSchema"],r);const o=l(t,["response"]);o!=null&&u(e,["response"],o);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function SU(t,e){const n={},i=l(e,["name"]);return i!=null&&u(n,["_url","name"],zs(t,i)),n}function wU(t,e){const n={},i=l(e,["name"]);return i!=null&&u(n,["_url","name"],zs(t,i)),n}function bU(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],eU(n)),e}function AU(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],hU(n)),e}function IU(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],pU(n)),e}function MU(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],kU(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function RU(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],NU(n));const i=l(t,["excludeDomains"]);return i!=null&&u(e,["excludeDomains"],i),e}function kU(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function NU(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function LU(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const i=l(t,["longitude"]);return i!=null&&u(e,["longitude"],i),e}function DU(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const i=l(t,["longitude"]);return i!=null&&u(e,["longitude"],i),e}function PU(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=l(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),n}function VU(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=l(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),n}function UU(t){const e={},n=l(t,["config"]);return n!=null&&PU(n,e),e}function OU(t){const e={},n=l(t,["config"]);return n!=null&&VU(n,e),e}function BU(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=l(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>tf(o))),u(e,["cachedContents"],r)}return e}function FU(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=l(t,["cachedContents"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>nf(o))),u(e,["cachedContents"],r)}return e}function jU(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],tO(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const s=l(t,["inlineData"]);s!=null&&u(e,["inlineData"],tU(s));const r=l(t,["fileData"]);r!=null&&u(e,["fileData"],gU(r));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["functionCall"]);a!=null&&u(e,["functionCall"],vU(a));const c=l(t,["codeExecutionResult"]);c!=null&&u(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&u(e,["executableCode"],d);const h=l(t,["functionResponse"]);h!=null&&u(e,["functionResponse"],h);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function zU(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],nO(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const s=l(t,["inlineData"]);s!=null&&u(e,["inlineData"],nU(s));const r=l(t,["fileData"]);r!=null&&u(e,["fileData"],yU(r));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["functionCall"]);a!=null&&u(e,["functionCall"],_U(a));const c=l(t,["codeExecutionResult"]);c!=null&&u(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&u(e,["executableCode"],d);const h=l(t,["functionResponse"]);h!=null&&u(e,["functionResponse"],h);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function qU(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],LU(n));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function HU(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],DU(n));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function GU(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],TU(n));const i=l(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],qU(i)),e}function $U(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],EU(n));const i=l(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],HU(i)),e}function KU(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>xU(d))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],MU(i));const s=l(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],AU(s)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],XU());const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],iU(o));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function JU(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>CU(g))),u(e,["functionDeclarations"],m)}const i=l(t,["retrieval"]);i!=null&&u(e,["retrieval"],i);const s=l(t,["googleSearch"]);s!=null&&u(e,["googleSearch"],RU(s));const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],IU(r));const o=l(t,["enterpriseWebSearch"]);o!=null&&u(e,["enterpriseWebSearch"],mU(o));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],bU(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],eO());const d=l(t,["computerUse"]);d!=null&&u(e,["computerUse"],sU(d));const h=l(t,["codeExecution"]);return h!=null&&u(e,["codeExecution"],h),e}function YU(t,e){const n={},i=l(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const s=l(t,["expireTime"]);return e!==void 0&&s!=null&&u(e,["expireTime"],s),n}function WU(t,e){const n={},i=l(t,["ttl"]);e!==void 0&&i!=null&&u(e,["ttl"],i);const s=l(t,["expireTime"]);return e!==void 0&&s!=null&&u(e,["expireTime"],s),n}function QU(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],zs(t,i));const s=l(e,["config"]);return s!=null&&YU(s,n),n}function ZU(t,e){const n={},i=l(e,["name"]);i!=null&&u(n,["_url","name"],zs(t,i));const s=l(e,["config"]);return s!=null&&WU(s,n),n}function XU(){return{}}function eO(){return{}}function tO(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const s=l(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function nO(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const s=l(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iO extends Yo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new kc(Vo.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(n),n)}async create(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=lU(this.apiClient,e);return a=ve("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>nf(h))}else{const d=aU(this.apiClient,e);return a=ve("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>tf(h))}}async get(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=wU(this.apiClient,e);return a=ve("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>nf(h))}else{const d=SU(this.apiClient,e);return a=ve("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>tf(h))}}async delete(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=cU(this.apiClient,e);return a=ve("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=fU(h),g=new gC;return Object.assign(g,m),g})}else{const d=uU(this.apiClient,e);return a=ve("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=dU(h),g=new gC;return Object.assign(g,m),g})}}async update(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=ZU(this.apiClient,e);return a=ve("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>nf(h))}else{const d=QU(this.apiClient,e);return a=ve("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>tf(h))}}async listInternal(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=OU(e);return a=ve("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=FU(h),g=new yC;return Object.assign(g,m),g})}else{const d=UU(e);return a=ve("cachedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=BU(h),g=new yC;return Object.assign(g,m),g})}}}function SC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Et(t){return this instanceof Et?(this.v=t,this):new Et(t)}function Ga(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(v){return function(T){return Promise.resolve(T).then(v,m)}}function a(v,T){i[v]&&(s[v]=function(w){return new Promise(function(I,b){r.push([v,w,I,b])>1||c(v,w)})},T&&(s[v]=T(s[v])))}function c(v,T){try{d(i[v](T))}catch(w){g(r[0][3],w)}}function d(v){v.value instanceof Et?Promise.resolve(v.value.v).then(h,m):g(r[0][2],v)}function h(v){c("next",v)}function m(v){c("throw",v)}function g(v,T){v(T),r.shift(),r.length&&c(r[0][0],r[0][1])}}function Uu(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof SC=="function"?SC(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=t[r]&&function(o){return new Promise(function(a,c){o=t[r](o),s(a,c,o.done,o.value)})}}function s(r,o,a,c){Promise.resolve(c).then(function(d){r({value:d,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sO(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:T1(n)}function T1(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function rO(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function wC(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let i=0;for(;i<n;)if(t[i].role==="user")e.push(t[i]),i++;else{const s=[];let r=!0;for(;i<n&&t[i].role==="model";)s.push(t[i]),r&&!T1(t[i])&&(r=!1),i++;r?e.push(...s):e.pop()}return e}class oO{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new aO(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class aO{constructor(e,n,i,s={},r=[]){this.apiClient=e,this.modelsModule=n,this.model=i,this.config=s,this.history=r,this.sendPromise=Promise.resolve(),rO(r)}async sendMessage(e){var n;await this.sendPromise;const i=An(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var r,o,a;const c=await s,d=(o=(r=c.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content,h=c.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];h!=null&&(g=(a=h.slice(m))!==null&&a!==void 0?a:[]);const v=d?[d]:[];this.recordHistory(i,v,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const i=An(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const r=await s;return this.processStreamResponse(r,i)}getHistory(e=!1){const n=e?wC(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var i,s;return Ga(this,arguments,function*(){var o,a,c,d;const h=[];try{for(var m=!0,g=Uu(e),v;v=yield Et(g.next()),o=v.done,!o;m=!0){d=v.value,m=!1;const T=d;if(sO(T)){const w=(s=(i=T.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;w!==void 0&&h.push(w)}yield yield Et(T)}}catch(T){a={error:T}}finally{try{!m&&!o&&(c=g.return)&&(yield Et(c.call(g)))}finally{if(a)throw a.error}}this.recordHistory(n,h)})}recordHistory(e,n,i){let s=[];n.length>0&&n.every(r=>r.role!==void 0)?s=n:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...wC(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Jh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Jh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lO(t){const e={},n=l(t,["file"]);return n!=null&&u(e,["file"],pO(n)),e}function uO(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function cO(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","file"],d1(n)),e}function dO(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function Hg(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const s=l(t,["mimeType"]);s!=null&&u(e,["mimeType"],s);const r=l(t,["sizeBytes"]);r!=null&&u(e,["sizeBytes"],r);const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const a=l(t,["expirationTime"]);a!=null&&u(e,["expirationTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const d=l(t,["sha256Hash"]);d!=null&&u(e,["sha256Hash"],d);const h=l(t,["uri"]);h!=null&&u(e,["uri"],h);const m=l(t,["downloadUri"]);m!=null&&u(e,["downloadUri"],m);const g=l(t,["state"]);g!=null&&u(e,["state"],g);const v=l(t,["source"]);v!=null&&u(e,["source"],v);const T=l(t,["videoMetadata"]);T!=null&&u(e,["videoMetadata"],T);const w=l(t,["error"]);return w!=null&&u(e,["error"],fO(w)),e}function fO(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const i=l(t,["message"]);i!=null&&u(e,["message"],i);const s=l(t,["code"]);return s!=null&&u(e,["code"],s),e}function hO(t){const e={},n=l(t,["details"]);n!=null&&u(e,["details"],n);const i=l(t,["message"]);i!=null&&u(e,["message"],i);const s=l(t,["code"]);return s!=null&&u(e,["code"],s),e}function pO(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const s=l(t,["mimeType"]);s!=null&&u(e,["mimeType"],s);const r=l(t,["sizeBytes"]);r!=null&&u(e,["sizeBytes"],r);const o=l(t,["createTime"]);o!=null&&u(e,["createTime"],o);const a=l(t,["expirationTime"]);a!=null&&u(e,["expirationTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const d=l(t,["sha256Hash"]);d!=null&&u(e,["sha256Hash"],d);const h=l(t,["uri"]);h!=null&&u(e,["uri"],h);const m=l(t,["downloadUri"]);m!=null&&u(e,["downloadUri"],m);const g=l(t,["state"]);g!=null&&u(e,["state"],g);const v=l(t,["source"]);v!=null&&u(e,["source"],v);const T=l(t,["videoMetadata"]);T!=null&&u(e,["videoMetadata"],T);const w=l(t,["error"]);return w!=null&&u(e,["error"],hO(w)),e}function mO(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","file"],d1(n)),e}function gO(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=l(t,["pageToken"]);return e!==void 0&&s!=null&&u(e,["_query","pageToken"],s),n}function yO(t){const e={},n=l(t,["config"]);return n!=null&&gO(n,e),e}function vO(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=l(t,["files"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Hg(o))),u(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _O extends Yo{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new kc(Vo.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>Hg(n))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=yO(e);return r=ve("files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=vO(c),h=new CV;return Object.assign(h,d),h})}}async createInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=lO(e);return r=ve("upload/v1beta/files",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s.then(c=>{const d=uO(c),h=new SV;return Object.assign(h,d),h})}}async get(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=mO(e);return r=ve("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s.then(c=>Hg(c))}}async delete(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=cO(e);return r=ve("files/{file}",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=dO(c),h=new wV;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TO(){return{}}function EO(){return{}}function xO(){return{}}function CO(){return{}}function SO(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function wO(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);i!=null&&u(e,["mimeType"],i);const s=l(t,["sourceMetadata"]);return s!=null&&u(e,["sourceMetadata"],y3(s)),e}function bC(){return{}}function AC(){return{}}function bO(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],SO(n));const i=l(t,["authType"]);i!=null&&u(e,["authType"],i);const s=l(t,["googleServiceAccountConfig"]);s!=null&&u(e,["googleServiceAccountConfig"],s);const r=l(t,["httpBasicAuthConfig"]);r!=null&&u(e,["httpBasicAuthConfig"],r);const o=l(t,["oauthConfig"]);o!=null&&u(e,["oauthConfig"],o);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function AO(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const i=l(t,["startOfSpeechSensitivity"]);i!=null&&u(e,["startOfSpeechSensitivity"],i);const s=l(t,["endOfSpeechSensitivity"]);s!=null&&u(e,["endOfSpeechSensitivity"],s);const r=l(t,["prefixPaddingMs"]);r!=null&&u(e,["prefixPaddingMs"],r);const o=l(t,["silenceDurationMs"]);return o!=null&&u(e,["silenceDurationMs"],o),e}function IO(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const i=l(t,["startOfSpeechSensitivity"]);i!=null&&u(e,["startOfSpeechSensitivity"],i);const s=l(t,["endOfSpeechSensitivity"]);s!=null&&u(e,["endOfSpeechSensitivity"],s);const r=l(t,["prefixPaddingMs"]);r!=null&&u(e,["prefixPaddingMs"],r);const o=l(t,["silenceDurationMs"]);return o!=null&&u(e,["silenceDurationMs"],o),e}function MO(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function RO(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["data"]);i!=null&&u(e,["data"],i);const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function kO(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function NO(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["data"]);i!=null&&u(e,["data"],i);const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function LO(t){const e={},n=l(t,["environment"]);n!=null&&u(e,["environment"],n);const i=l(t,["excludedPredefinedFunctions"]);return i!=null&&u(e,["excludedPredefinedFunctions"],i),e}function DO(t){const e={},n=l(t,["environment"]);n!=null&&u(e,["environment"],n);const i=l(t,["excludedPredefinedFunctions"]);return i!=null&&u(e,["excludedPredefinedFunctions"],i),e}function PO(t){const e={},n=l(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>P3(r))),u(e,["parts"],s)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function VO(t){const e={},n=l(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>V3(r))),u(e,["parts"],s)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function UO(t){const e={},n=l(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>U3(r))),u(e,["parts"],s)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function OO(t){const e={},n=l(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>O3(r))),u(e,["parts"],s)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function BO(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const i=l(t,["slidingWindow"]);return i!=null&&u(e,["slidingWindow"],K3(i)),e}function FO(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const i=l(t,["slidingWindow"]);return i!=null&&u(e,["slidingWindow"],J3(i)),e}function jO(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function zO(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function qO(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function HO(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function GO(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function $O(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function KO(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function E1(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const s=l(t,["name"]);return s!=null&&u(e,["name"],s),e}function x1(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const s=l(t,["name"]);return s!=null&&u(e,["name"],s),e}function JO(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const s=l(t,["name"]);return s!=null&&u(e,["name"],s),e}function YO(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const s=l(t,["name"]);return s!=null&&u(e,["name"],s),e}function WO(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const s=l(t,["name"]);s!=null&&u(e,["name"],s);const r=l(t,["parameters"]);r!=null&&u(e,["parameters"],r);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function QO(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const s=l(t,["parameters"]);s!=null&&u(e,["parameters"],s);const r=l(t,["parametersJsonSchema"]);r!=null&&u(e,["parametersJsonSchema"],r);const o=l(t,["response"]);o!=null&&u(e,["response"],o);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function ZO(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],bO(n)),e}function XO(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],jO(n)),e}function e3(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],zO(n)),e}function t3(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],i3(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function n3(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],s3(n));const i=l(t,["excludeDomains"]);return i!=null&&u(e,["excludeDomains"],i),e}function i3(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function s3(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function r3(t,e){const n={},i=l(t,["generationConfig"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig"],i);const s=l(t,["responseModalities"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","responseModalities"],s);const r=l(t,["temperature"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig","temperature"],r);const o=l(t,["topP"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","topP"],o);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const h=l(t,["seed"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","seed"],h);const m=l(t,["speechConfig"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","speechConfig"],W3(jv(m)));const g=l(t,["thinkingConfig"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","thinkingConfig"],Z3(g));const v=l(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],v);const T=l(t,["systemInstruction"]);e!==void 0&&T!=null&&u(e,["setup","systemInstruction"],UO(An(T)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let U=Il(w);Array.isArray(U)&&(U=U.map(S=>e5(Al(S)))),u(e,["setup","tools"],U)}const I=l(t,["sessionResumption"]);e!==void 0&&I!=null&&u(e,["setup","sessionResumption"],G3(I));const b=l(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&u(e,["setup","inputAudioTranscription"],bC());const E=l(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&u(e,["setup","outputAudioTranscription"],bC());const A=l(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&u(e,["setup","realtimeInputConfig"],q3(A));const R=l(t,["contextWindowCompression"]);e!==void 0&&R!=null&&u(e,["setup","contextWindowCompression"],BO(R));const P=l(t,["proactivity"]);return e!==void 0&&P!=null&&u(e,["setup","proactivity"],j3(P)),n}function o3(t,e){const n={},i=l(t,["generationConfig"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig"],i);const s=l(t,["responseModalities"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","responseModalities"],s);const r=l(t,["temperature"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig","temperature"],r);const o=l(t,["topP"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","topP"],o);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const h=l(t,["seed"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","seed"],h);const m=l(t,["speechConfig"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","speechConfig"],Q3(jv(m)));const g=l(t,["thinkingConfig"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","thinkingConfig"],X3(g));const v=l(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],v);const T=l(t,["systemInstruction"]);e!==void 0&&T!=null&&u(e,["setup","systemInstruction"],OO(An(T)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let U=Il(w);Array.isArray(U)&&(U=U.map(S=>t5(Al(S)))),u(e,["setup","tools"],U)}const I=l(t,["sessionResumption"]);e!==void 0&&I!=null&&u(e,["setup","sessionResumption"],$3(I));const b=l(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&u(e,["setup","inputAudioTranscription"],AC());const E=l(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&u(e,["setup","outputAudioTranscription"],AC());const A=l(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&u(e,["setup","realtimeInputConfig"],H3(A));const R=l(t,["contextWindowCompression"]);e!==void 0&&R!=null&&u(e,["setup","contextWindowCompression"],FO(R));const P=l(t,["proactivity"]);return e!==void 0&&P!=null&&u(e,["setup","proactivity"],z3(P)),n}function a3(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["setup","model"],et(t,i));const s=l(e,["config"]);return s!=null&&u(n,["config"],r3(s,n)),n}function l3(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["setup","model"],et(t,i));const s=l(e,["config"]);return s!=null&&u(n,["config"],o3(s,n)),n}function u3(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>h5(s))),u(e,["weightedPrompts"],i)}return e}function C1(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>A1(s))),u(e,["weightedPrompts"],i)}return e}function Gg(t){const e={},n=l(t,["setup"]);n!=null&&u(e,["setup"],S1(n));const i=l(t,["clientContent"]);i!=null&&u(e,["clientContent"],C1(i));const s=l(t,["musicGenerationConfig"]);s!=null&&u(e,["musicGenerationConfig"],w1(s));const r=l(t,["playbackControl"]);return r!=null&&u(e,["playbackControl"],r),e}function S1(t){const e={},n=l(t,["model"]);return n!=null&&u(e,["model"],n),e}function c3(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const i=l(t,["filteredReason"]);return i!=null&&u(e,["filteredReason"],i),e}function d3(t){const e={},n=l(t,["temperature"]);n!=null&&u(e,["temperature"],n);const i=l(t,["topK"]);i!=null&&u(e,["topK"],i);const s=l(t,["seed"]);s!=null&&u(e,["seed"],s);const r=l(t,["guidance"]);r!=null&&u(e,["guidance"],r);const o=l(t,["bpm"]);o!=null&&u(e,["bpm"],o);const a=l(t,["density"]);a!=null&&u(e,["density"],a);const c=l(t,["brightness"]);c!=null&&u(e,["brightness"],c);const d=l(t,["scale"]);d!=null&&u(e,["scale"],d);const h=l(t,["muteBass"]);h!=null&&u(e,["muteBass"],h);const m=l(t,["muteDrums"]);m!=null&&u(e,["muteDrums"],m);const g=l(t,["onlyBassAndDrums"]);g!=null&&u(e,["onlyBassAndDrums"],g);const v=l(t,["musicGenerationMode"]);return v!=null&&u(e,["musicGenerationMode"],v),e}function w1(t){const e={},n=l(t,["temperature"]);n!=null&&u(e,["temperature"],n);const i=l(t,["topK"]);i!=null&&u(e,["topK"],i);const s=l(t,["seed"]);s!=null&&u(e,["seed"],s);const r=l(t,["guidance"]);r!=null&&u(e,["guidance"],r);const o=l(t,["bpm"]);o!=null&&u(e,["bpm"],o);const a=l(t,["density"]);a!=null&&u(e,["density"],a);const c=l(t,["brightness"]);c!=null&&u(e,["brightness"],c);const d=l(t,["scale"]);d!=null&&u(e,["scale"],d);const h=l(t,["muteBass"]);h!=null&&u(e,["muteBass"],h);const m=l(t,["muteDrums"]);m!=null&&u(e,["muteDrums"],m);const g=l(t,["onlyBassAndDrums"]);g!=null&&u(e,["onlyBassAndDrums"],g);const v=l(t,["musicGenerationMode"]);return v!=null&&u(e,["musicGenerationMode"],v),e}function f3(t){const e={},n=l(t,["audioChunks"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>wO(s))),u(e,["audioChunks"],i)}return e}function h3(t){const e={};l(t,["setupComplete"])!=null&&u(e,["setupComplete"],p3());const i=l(t,["serverContent"]);i!=null&&u(e,["serverContent"],f3(i));const s=l(t,["filteredPrompt"]);return s!=null&&u(e,["filteredPrompt"],c3(s)),e}function p3(){return{}}function m3(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&u(e,["musicGenerationConfig"],w1(n)),e}function g3(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>A1(s))),u(e,["weightedPrompts"],i)}return e}function y3(t){const e={},n=l(t,["clientContent"]);n!=null&&u(e,["clientContent"],u3(n));const i=l(t,["musicGenerationConfig"]);return i!=null&&u(e,["musicGenerationConfig"],d3(i)),e}function v3(t){const e={},n=l(t,["media"]);if(n!=null){let d=o1(n);Array.isArray(d)&&(d=d.map(h=>h)),u(e,["mediaChunks"],d)}const i=l(t,["audio"]);i!=null&&u(e,["audio"],l1(i));const s=l(t,["audioStreamEnd"]);s!=null&&u(e,["audioStreamEnd"],s);const r=l(t,["video"]);r!=null&&u(e,["video"],a1(r));const o=l(t,["text"]);return o!=null&&u(e,["text"],o),l(t,["activityStart"])!=null&&u(e,["activityStart"],xO()),l(t,["activityEnd"])!=null&&u(e,["activityEnd"],TO()),e}function _3(t){const e={},n=l(t,["media"]);if(n!=null){let d=o1(n);Array.isArray(d)&&(d=d.map(h=>h)),u(e,["mediaChunks"],d)}const i=l(t,["audio"]);i!=null&&u(e,["audio"],l1(i));const s=l(t,["audioStreamEnd"]);s!=null&&u(e,["audioStreamEnd"],s);const r=l(t,["video"]);r!=null&&u(e,["video"],a1(r));const o=l(t,["text"]);return o!=null&&u(e,["text"],o),l(t,["activityStart"])!=null&&u(e,["activityStart"],CO()),l(t,["activityEnd"])!=null&&u(e,["activityEnd"],EO()),e}function T3(t){const e={},n=l(t,["modelTurn"]);n!=null&&u(e,["modelTurn"],PO(n));const i=l(t,["turnComplete"]);i!=null&&u(e,["turnComplete"],i);const s=l(t,["interrupted"]);s!=null&&u(e,["interrupted"],s);const r=l(t,["groundingMetadata"]);r!=null&&u(e,["groundingMetadata"],r);const o=l(t,["generationComplete"]);o!=null&&u(e,["generationComplete"],o);const a=l(t,["inputTranscription"]);a!=null&&u(e,["inputTranscription"],IC(a));const c=l(t,["outputTranscription"]);c!=null&&u(e,["outputTranscription"],IC(c));const d=l(t,["urlContextMetadata"]);d!=null&&u(e,["urlContextMetadata"],n5(d));const h=l(t,["turnCompleteReason"]);h!=null&&u(e,["turnCompleteReason"],h);const m=l(t,["waitingForInput"]);return m!=null&&u(e,["waitingForInput"],m),e}function E3(t){const e={},n=l(t,["modelTurn"]);n!=null&&u(e,["modelTurn"],VO(n));const i=l(t,["turnComplete"]);i!=null&&u(e,["turnComplete"],i);const s=l(t,["interrupted"]);s!=null&&u(e,["interrupted"],s);const r=l(t,["groundingMetadata"]);r!=null&&u(e,["groundingMetadata"],r);const o=l(t,["generationComplete"]);o!=null&&u(e,["generationComplete"],o);const a=l(t,["inputTranscription"]);a!=null&&u(e,["inputTranscription"],MC(a));const c=l(t,["outputTranscription"]);c!=null&&u(e,["outputTranscription"],MC(c));const d=l(t,["turnCompleteReason"]);d!=null&&u(e,["turnCompleteReason"],d);const h=l(t,["waitingForInput"]);return h!=null&&u(e,["waitingForInput"],h),e}function x3(t){const e={},n=l(t,["timeLeft"]);return n!=null&&u(e,["timeLeft"],n),e}function C3(t){const e={},n=l(t,["timeLeft"]);return n!=null&&u(e,["timeLeft"],n),e}function S3(t){const e={};l(t,["setupComplete"])!=null&&u(e,["setupComplete"],I3());const i=l(t,["serverContent"]);i!=null&&u(e,["serverContent"],T3(i));const s=l(t,["toolCall"]);s!=null&&u(e,["toolCall"],N3(s));const r=l(t,["toolCallCancellation"]);r!=null&&u(e,["toolCallCancellation"],R3(r));const o=l(t,["usageMetadata"]);o!=null&&u(e,["usageMetadata"],o5(o));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],x3(a));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],b3(c)),e}function w3(t){const e={},n=l(t,["setupComplete"]);n!=null&&u(e,["setupComplete"],M3(n));const i=l(t,["serverContent"]);i!=null&&u(e,["serverContent"],E3(i));const s=l(t,["toolCall"]);s!=null&&u(e,["toolCall"],L3(s));const r=l(t,["toolCallCancellation"]);r!=null&&u(e,["toolCallCancellation"],k3(r));const o=l(t,["usageMetadata"]);o!=null&&u(e,["usageMetadata"],a5(o));const a=l(t,["goAway"]);a!=null&&u(e,["goAway"],C3(a));const c=l(t,["sessionResumptionUpdate"]);return c!=null&&u(e,["sessionResumptionUpdate"],A3(c)),e}function b3(t){const e={},n=l(t,["newHandle"]);n!=null&&u(e,["newHandle"],n);const i=l(t,["resumable"]);i!=null&&u(e,["resumable"],i);const s=l(t,["lastConsumedClientMessageIndex"]);return s!=null&&u(e,["lastConsumedClientMessageIndex"],s),e}function A3(t){const e={},n=l(t,["newHandle"]);n!=null&&u(e,["newHandle"],n);const i=l(t,["resumable"]);i!=null&&u(e,["resumable"],i);const s=l(t,["lastConsumedClientMessageIndex"]);return s!=null&&u(e,["lastConsumedClientMessageIndex"],s),e}function I3(){return{}}function M3(t){const e={},n=l(t,["sessionId"]);return n!=null&&u(e,["sessionId"],n),e}function R3(t){const e={},n=l(t,["ids"]);return n!=null&&u(e,["ids"],n),e}function k3(t){const e={},n=l(t,["ids"]);return n!=null&&u(e,["ids"],n),e}function N3(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>E1(s))),u(e,["functionCalls"],i)}return e}function L3(t){const e={},n=l(t,["functionCalls"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>x1(s))),u(e,["functionCalls"],i)}return e}function Sd(t){const e={},n=l(t,["modality"]);n!=null&&u(e,["modality"],n);const i=l(t,["tokenCount"]);return i!=null&&u(e,["tokenCount"],i),e}function wd(t){const e={},n=l(t,["modality"]);n!=null&&u(e,["modality"],n);const i=l(t,["tokenCount"]);return i!=null&&u(e,["tokenCount"],i),e}function D3(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Y3(s))),u(e,["speakerVoiceConfigs"],i)}return e}function P3(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],l5(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const s=l(t,["inlineData"]);s!=null&&u(e,["inlineData"],MO(s));const r=l(t,["fileData"]);r!=null&&u(e,["fileData"],HO(r));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["functionCall"]);a!=null&&u(e,["functionCall"],E1(a));const c=l(t,["codeExecutionResult"]);c!=null&&u(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&u(e,["executableCode"],d);const h=l(t,["functionResponse"]);h!=null&&u(e,["functionResponse"],h);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function V3(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],u5(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const s=l(t,["inlineData"]);s!=null&&u(e,["inlineData"],RO(s));const r=l(t,["fileData"]);r!=null&&u(e,["fileData"],GO(r));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["functionCall"]);a!=null&&u(e,["functionCall"],x1(a));const c=l(t,["codeExecutionResult"]);c!=null&&u(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&u(e,["executableCode"],d);const h=l(t,["functionResponse"]);h!=null&&u(e,["functionResponse"],h);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function U3(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],c5(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const s=l(t,["inlineData"]);s!=null&&u(e,["inlineData"],kO(s));const r=l(t,["fileData"]);r!=null&&u(e,["fileData"],$O(r));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["functionCall"]);a!=null&&u(e,["functionCall"],JO(a));const c=l(t,["codeExecutionResult"]);c!=null&&u(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&u(e,["executableCode"],d);const h=l(t,["functionResponse"]);h!=null&&u(e,["functionResponse"],h);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function O3(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],d5(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const s=l(t,["inlineData"]);s!=null&&u(e,["inlineData"],NO(s));const r=l(t,["fileData"]);r!=null&&u(e,["fileData"],KO(r));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["functionCall"]);a!=null&&u(e,["functionCall"],YO(a));const c=l(t,["codeExecutionResult"]);c!=null&&u(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&u(e,["executableCode"],d);const h=l(t,["functionResponse"]);h!=null&&u(e,["functionResponse"],h);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function B3(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function F3(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function j3(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function z3(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function q3(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],AO(n));const i=l(t,["activityHandling"]);i!=null&&u(e,["activityHandling"],i);const s=l(t,["turnCoverage"]);return s!=null&&u(e,["turnCoverage"],s),e}function H3(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],IO(n));const i=l(t,["activityHandling"]);i!=null&&u(e,["activityHandling"],i);const s=l(t,["turnCoverage"]);return s!=null&&u(e,["turnCoverage"],s),e}function G3(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $3(t){const e={},n=l(t,["handle"]);n!=null&&u(e,["handle"],n);const i=l(t,["transparent"]);return i!=null&&u(e,["transparent"],i),e}function K3(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function J3(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function Y3(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const i=l(t,["voiceConfig"]);return i!=null&&u(e,["voiceConfig"],b1(i)),e}function W3(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],b1(n));const i=l(t,["multiSpeakerVoiceConfig"]);i!=null&&u(e,["multiSpeakerVoiceConfig"],D3(i));const s=l(t,["languageCode"]);return s!=null&&u(e,["languageCode"],s),e}function Q3(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&u(e,["voiceConfig"],f5(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function Z3(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const i=l(t,["thinkingBudget"]);return i!=null&&u(e,["thinkingBudget"],i),e}function X3(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const i=l(t,["thinkingBudget"]);return i!=null&&u(e,["thinkingBudget"],i),e}function e5(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>WO(d))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],t3(i));const s=l(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],XO(s)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],i5());const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],LO(o));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function t5(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>QO(g))),u(e,["functionDeclarations"],m)}const i=l(t,["retrieval"]);i!=null&&u(e,["retrieval"],i);const s=l(t,["googleSearch"]);s!=null&&u(e,["googleSearch"],n3(s));const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],e3(r));const o=l(t,["enterpriseWebSearch"]);o!=null&&u(e,["enterpriseWebSearch"],qO(o));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],ZO(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],s5());const d=l(t,["computerUse"]);d!=null&&u(e,["computerUse"],DO(d));const h=l(t,["codeExecution"]);return h!=null&&u(e,["codeExecution"],h),e}function IC(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const i=l(t,["finished"]);return i!=null&&u(e,["finished"],i),e}function MC(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const i=l(t,["finished"]);return i!=null&&u(e,["finished"],i),e}function n5(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>r5(s))),u(e,["urlMetadata"],i)}return e}function i5(){return{}}function s5(){return{}}function r5(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const i=l(t,["urlRetrievalStatus"]);return i!=null&&u(e,["urlRetrievalStatus"],i),e}function o5(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const i=l(t,["cachedContentTokenCount"]);i!=null&&u(e,["cachedContentTokenCount"],i);const s=l(t,["responseTokenCount"]);s!=null&&u(e,["responseTokenCount"],s);const r=l(t,["toolUsePromptTokenCount"]);r!=null&&u(e,["toolUsePromptTokenCount"],r);const o=l(t,["thoughtsTokenCount"]);o!=null&&u(e,["thoughtsTokenCount"],o);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>Sd(v))),u(e,["promptTokensDetails"],g)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(v=>Sd(v))),u(e,["cacheTokensDetails"],g)}const h=l(t,["responseTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>Sd(v))),u(e,["responseTokensDetails"],g)}const m=l(t,["toolUsePromptTokensDetails"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(v=>Sd(v))),u(e,["toolUsePromptTokensDetails"],g)}return e}function a5(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);const i=l(t,["cachedContentTokenCount"]);i!=null&&u(e,["cachedContentTokenCount"],i);const s=l(t,["candidatesTokenCount"]);s!=null&&u(e,["responseTokenCount"],s);const r=l(t,["toolUsePromptTokenCount"]);r!=null&&u(e,["toolUsePromptTokenCount"],r);const o=l(t,["thoughtsTokenCount"]);o!=null&&u(e,["thoughtsTokenCount"],o);const a=l(t,["totalTokenCount"]);a!=null&&u(e,["totalTokenCount"],a);const c=l(t,["promptTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(T=>wd(T))),u(e,["promptTokensDetails"],v)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(T=>wd(T))),u(e,["cacheTokensDetails"],v)}const h=l(t,["candidatesTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(T=>wd(T))),u(e,["responseTokensDetails"],v)}const m=l(t,["toolUsePromptTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(T=>wd(T))),u(e,["toolUsePromptTokensDetails"],v)}const g=l(t,["trafficType"]);return g!=null&&u(e,["trafficType"],g),e}function l5(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const s=l(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function u5(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const s=l(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function c5(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const s=l(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function d5(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const s=l(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function b1(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],B3(n)),e}function f5(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],F3(n)),e}function h5(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const i=l(t,["weight"]);return i!=null&&u(e,["weight"],i),e}function A1(t){const e={},n=l(t,["text"]);n!=null&&u(e,["text"],n);const i=l(t,["weight"]);return i!=null&&u(e,["weight"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function p5(t){const e={},n=l(t,["apiKeyString"]);return n!=null&&u(e,["apiKeyString"],n),e}function m5(t){const e={},n=l(t,["apiKeyConfig"]);n!=null&&u(e,["apiKeyConfig"],p5(n));const i=l(t,["authType"]);i!=null&&u(e,["authType"],i);const s=l(t,["googleServiceAccountConfig"]);s!=null&&u(e,["googleServiceAccountConfig"],s);const r=l(t,["httpBasicAuthConfig"]);r!=null&&u(e,["httpBasicAuthConfig"],r);const o=l(t,["oauthConfig"]);o!=null&&u(e,["oauthConfig"],o);const a=l(t,["oidcConfig"]);return a!=null&&u(e,["oidcConfig"],a),e}function g5(t){const e={},n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function y5(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["data"]);i!=null&&u(e,["data"],i);const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function v5(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function _5(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["data"]);i!=null&&u(e,["data"],i);const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function T5(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],N5(n));const i=l(t,["citationMetadata"]);i!=null&&u(e,["citationMetadata"],C5(i));const s=l(t,["tokenCount"]);s!=null&&u(e,["tokenCount"],s);const r=l(t,["finishReason"]);r!=null&&u(e,["finishReason"],r);const o=l(t,["urlContextMetadata"]);o!=null&&u(e,["urlContextMetadata"],ZB(o));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&u(e,["index"],d);const h=l(t,["logprobsResult"]);h!=null&&u(e,["logprobsResult"],h);const m=l(t,["safetyRatings"]);return m!=null&&u(e,["safetyRatings"],m),e}function E5(t){const e={},n=l(t,["content"]);n!=null&&u(e,["content"],L5(n));const i=l(t,["citationMetadata"]);i!=null&&u(e,["citationMetadata"],S5(i));const s=l(t,["finishMessage"]);s!=null&&u(e,["finishMessage"],s);const r=l(t,["finishReason"]);r!=null&&u(e,["finishReason"],r);const o=l(t,["urlContextMetadata"]);o!=null&&u(e,["urlContextMetadata"],XB(o));const a=l(t,["avgLogprobs"]);a!=null&&u(e,["avgLogprobs"],a);const c=l(t,["groundingMetadata"]);c!=null&&u(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&u(e,["index"],d);const h=l(t,["logprobsResult"]);h!=null&&u(e,["logprobsResult"],h);const m=l(t,["safetyRatings"]);return m!=null&&u(e,["safetyRatings"],m),e}function x5(t){const e={},n=l(t,["checkpointId"]);n!=null&&u(e,["checkpointId"],n);const i=l(t,["epoch"]);i!=null&&u(e,["epoch"],i);const s=l(t,["step"]);return s!=null&&u(e,["step"],s),e}function C5(t){const e={},n=l(t,["citationSources"]);return n!=null&&u(e,["citations"],n),e}function S5(t){const e={},n=l(t,["citations"]);return n!=null&&u(e,["citations"],n),e}function w5(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["contents"]);if(s!=null){let r=Si(s);Array.isArray(r)&&(r=r.map(o=>Rl(o))),u(n,["contents"],r)}return n}function b5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["tokensInfo"]);return i!=null&&u(e,["tokensInfo"],i),e}function A5(t){const e={},n=l(t,["environment"]);n!=null&&u(e,["environment"],n);const i=l(t,["excludedPredefinedFunctions"]);return i!=null&&u(e,["excludedPredefinedFunctions"],i),e}function I5(t){const e={},n=l(t,["environment"]);n!=null&&u(e,["environment"],n);const i=l(t,["excludedPredefinedFunctions"]);return i!=null&&u(e,["excludedPredefinedFunctions"],i),e}function M5(t){const e={},n=l(t,["values"]);return n!=null&&u(e,["values"],n),e}function R5(t){const e={},n=l(t,["values"]);n!=null&&u(e,["values"],n);const i=l(t,["statistics"]);return i!=null&&u(e,["statistics"],k5(i)),e}function k5(t){const e={},n=l(t,["truncated"]);n!=null&&u(e,["truncated"],n);const i=l(t,["token_count"]);return i!=null&&u(e,["tokenCount"],i),e}function N5(t){const e={},n=l(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>cB(r))),u(e,["parts"],s)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function L5(t){const e={},n=l(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>dB(r))),u(e,["parts"],s)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function Yh(t){const e={},n=l(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>fB(r))),u(e,["parts"],s)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function Rl(t){const e={},n=l(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>hB(r))),u(e,["parts"],s)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function D5(t){const e={},n=l(t,["controlType"]);n!=null&&u(e,["controlType"],n);const i=l(t,["enableControlImageComputation"]);return i!=null&&u(e,["computeControl"],i),e}function P5(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function V5(t,e){const n={},i=l(t,["systemInstruction"]);e!==void 0&&i!=null&&u(e,["systemInstruction"],Rl(An(i)));const s=l(t,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>N1(a))),u(e,["tools"],o)}const r=l(t,["generationConfig"]);return e!==void 0&&r!=null&&u(e,["generationConfig"],r),n}function U5(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["contents"]);if(s!=null){let o=Si(s);Array.isArray(o)&&(o=o.map(a=>Yh(a))),u(n,["contents"],o)}const r=l(e,["config"]);return r!=null&&P5(r),n}function O5(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["contents"]);if(s!=null){let o=Si(s);Array.isArray(o)&&(o=o.map(a=>Rl(a))),u(n,["contents"],o)}const r=l(e,["config"]);return r!=null&&V5(r,n),n}function B5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["totalTokens"]);i!=null&&u(e,["totalTokens"],i);const s=l(t,["cachedContentTokenCount"]);return s!=null&&u(e,["cachedContentTokenCount"],s),e}function F5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["totalTokens"]);return i!=null&&u(e,["totalTokens"],i),e}function j5(t,e){const n={},i=l(e,["model"]);return i!=null&&u(n,["_url","name"],et(t,i)),n}function z5(t,e){const n={},i=l(e,["model"]);return i!=null&&u(n,["_url","name"],et(t,i)),n}function q5(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function H5(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function G5(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function $5(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function K5(t,e){const n={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const s=l(t,["negativePrompt"]);e!==void 0&&s!=null&&u(e,["parameters","negativePrompt"],s);const r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(t,["aspectRatio"]);e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&u(e,["parameters","personGeneration"],h);const m=l(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&u(e,["parameters","includeSafetyAttributes"],m);const g=l(t,["includeRaiReason"]);e!==void 0&&g!=null&&u(e,["parameters","includeRaiReason"],g);const v=l(t,["language"]);e!==void 0&&v!=null&&u(e,["parameters","language"],v);const T=l(t,["outputMimeType"]);e!==void 0&&T!=null&&u(e,["parameters","outputOptions","mimeType"],T);const w=l(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","compressionQuality"],w);const I=l(t,["addWatermark"]);e!==void 0&&I!=null&&u(e,["parameters","addWatermark"],I);const b=l(t,["editMode"]);e!==void 0&&b!=null&&u(e,["parameters","editMode"],b);const E=l(t,["baseSteps"]);return e!==void 0&&E!=null&&u(e,["parameters","editConfig","baseSteps"],E),n}function J5(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["prompt"]);s!=null&&u(n,["instances[0]","prompt"],s);const r=l(e,["referenceImages"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(c=>EB(c))),u(n,["instances[0]","referenceImages"],a)}const o=l(e,["config"]);return o!=null&&K5(o,n),n}function Y5(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Wh(r))),u(e,["generatedImages"],s)}return e}function W5(t,e){const n={},i=l(t,["taskType"]);e!==void 0&&i!=null&&u(e,["requests[]","taskType"],i);const s=l(t,["title"]);e!==void 0&&s!=null&&u(e,["requests[]","title"],s);const r=l(t,["outputDimensionality"]);if(e!==void 0&&r!=null&&u(e,["requests[]","outputDimensionality"],r),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Q5(t,e){const n={},i=l(t,["taskType"]);e!==void 0&&i!=null&&u(e,["instances[]","task_type"],i);const s=l(t,["title"]);e!==void 0&&s!=null&&u(e,["instances[]","title"],s);const r=l(t,["outputDimensionality"]);e!==void 0&&r!=null&&u(e,["parameters","outputDimensionality"],r);const o=l(t,["mimeType"]);e!==void 0&&o!=null&&u(e,["instances[]","mimeType"],o);const a=l(t,["autoTruncate"]);return e!==void 0&&a!=null&&u(e,["parameters","autoTruncate"],a),n}function Z5(){return{}}function X5(t){const e={},n=l(t,["billableCharacterCount"]);return n!=null&&u(e,["billableCharacterCount"],n),e}function e6(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["contents"]);s!=null&&u(n,["requests[]","content"],Ov(t,s));const r=l(e,["config"]);r!=null&&W5(r,n);const o=l(e,["model"]);return o!==void 0&&u(n,["requests[]","model"],et(t,o)),n}function t6(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["contents"]);s!=null&&u(n,["instances[]","content"],Ov(t,s));const r=l(e,["config"]);return r!=null&&Q5(r,n),n}function n6(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>M5(o))),u(e,["embeddings"],r)}return l(t,["metadata"])!=null&&u(e,["metadata"],Z5()),e}function i6(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["predictions[]","embeddings"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>R5(o))),u(e,["embeddings"],r)}const s=l(t,["metadata"]);return s!=null&&u(e,["metadata"],X5(s)),e}function s6(t){const e={},n=l(t,["endpoint"]);n!=null&&u(e,["name"],n);const i=l(t,["deployedModelId"]);return i!=null&&u(e,["deployedModelId"],i),e}function r6(t){const e={},n=l(t,["excludeDomains"]);return n!=null&&u(e,["excludeDomains"],n),e}function o6(t){const e={},n=l(t,["label"]);n!=null&&u(e,["label"],n);const i=l(t,["score"]);return i!=null&&u(e,["score"],i),e}function a6(t){const e={},n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function l6(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function u6(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function c6(t){const e={},n=l(t,["displayName"]);n!=null&&u(e,["displayName"],n);const i=l(t,["fileUri"]);i!=null&&u(e,["fileUri"],i);const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function d6(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const s=l(t,["name"]);return s!=null&&u(e,["name"],s),e}function f6(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const s=l(t,["name"]);return s!=null&&u(e,["name"],s),e}function h6(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const s=l(t,["name"]);return s!=null&&u(e,["name"],s),e}function p6(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const s=l(t,["name"]);return s!=null&&u(e,["name"],s),e}function m6(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["allowedFunctionNames"]);return i!=null&&u(e,["allowedFunctionNames"],i),e}function g6(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["allowedFunctionNames"]);return i!=null&&u(e,["allowedFunctionNames"],i),e}function y6(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const s=l(t,["name"]);s!=null&&u(e,["name"],s);const r=l(t,["parameters"]);r!=null&&u(e,["parameters"],r);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function v6(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&u(e,["description"],n);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const s=l(t,["parameters"]);s!=null&&u(e,["parameters"],s);const r=l(t,["parametersJsonSchema"]);r!=null&&u(e,["parametersJsonSchema"],r);const o=l(t,["response"]);o!=null&&u(e,["response"],o);const a=l(t,["responseJsonSchema"]);return a!=null&&u(e,["responseJsonSchema"],a),e}function _6(t,e,n){const i={},s=l(e,["systemInstruction"]);n!==void 0&&s!=null&&u(n,["systemInstruction"],Yh(An(s)));const r=l(e,["temperature"]);r!=null&&u(i,["temperature"],r);const o=l(e,["topP"]);o!=null&&u(i,["topP"],o);const a=l(e,["topK"]);a!=null&&u(i,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(i,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(i,["maxOutputTokens"],d);const h=l(e,["stopSequences"]);h!=null&&u(i,["stopSequences"],h);const m=l(e,["responseLogprobs"]);m!=null&&u(i,["responseLogprobs"],m);const g=l(e,["logprobs"]);g!=null&&u(i,["logprobs"],g);const v=l(e,["presencePenalty"]);v!=null&&u(i,["presencePenalty"],v);const T=l(e,["frequencyPenalty"]);T!=null&&u(i,["frequencyPenalty"],T);const w=l(e,["seed"]);w!=null&&u(i,["seed"],w);const I=l(e,["responseMimeType"]);I!=null&&u(i,["responseMimeType"],I);const b=l(e,["responseSchema"]);b!=null&&u(i,["responseSchema"],bB(Bv(b)));const E=l(e,["responseJsonSchema"]);if(E!=null&&u(i,["responseJsonSchema"],E),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const A=l(e,["safetySettings"]);if(n!==void 0&&A!=null){let V=A;Array.isArray(V)&&(V=V.map(L=>SB(L))),u(n,["safetySettings"],V)}const R=l(e,["tools"]);if(n!==void 0&&R!=null){let V=Il(R);Array.isArray(V)&&(V=V.map(L=>zB(Al(L)))),u(n,["tools"],V)}const P=l(e,["toolConfig"]);if(n!==void 0&&P!=null&&u(n,["toolConfig"],FB(P)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=l(e,["cachedContent"]);n!==void 0&&U!=null&&u(n,["cachedContent"],zs(t,U));const S=l(e,["responseModalities"]);S!=null&&u(i,["responseModalities"],S);const M=l(e,["mediaResolution"]);M!=null&&u(i,["mediaResolution"],M);const C=l(e,["speechConfig"]);if(C!=null&&u(i,["speechConfig"],DB(Fv(C))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const k=l(e,["thinkingConfig"]);k!=null&&u(i,["thinkingConfig"],OB(k));const N=l(e,["imageConfig"]);return N!=null&&u(i,["imageConfig"],J6(N)),i}function T6(t,e,n){const i={},s=l(e,["systemInstruction"]);n!==void 0&&s!=null&&u(n,["systemInstruction"],Rl(An(s)));const r=l(e,["temperature"]);r!=null&&u(i,["temperature"],r);const o=l(e,["topP"]);o!=null&&u(i,["topP"],o);const a=l(e,["topK"]);a!=null&&u(i,["topK"],a);const c=l(e,["candidateCount"]);c!=null&&u(i,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&u(i,["maxOutputTokens"],d);const h=l(e,["stopSequences"]);h!=null&&u(i,["stopSequences"],h);const m=l(e,["responseLogprobs"]);m!=null&&u(i,["responseLogprobs"],m);const g=l(e,["logprobs"]);g!=null&&u(i,["logprobs"],g);const v=l(e,["presencePenalty"]);v!=null&&u(i,["presencePenalty"],v);const T=l(e,["frequencyPenalty"]);T!=null&&u(i,["frequencyPenalty"],T);const w=l(e,["seed"]);w!=null&&u(i,["seed"],w);const I=l(e,["responseMimeType"]);I!=null&&u(i,["responseMimeType"],I);const b=l(e,["responseSchema"]);b!=null&&u(i,["responseSchema"],AB(Bv(b)));const E=l(e,["responseJsonSchema"]);E!=null&&u(i,["responseJsonSchema"],E);const A=l(e,["routingConfig"]);A!=null&&u(i,["routingConfig"],A);const R=l(e,["modelSelectionConfig"]);R!=null&&u(i,["modelConfig"],lB(R));const P=l(e,["safetySettings"]);if(n!==void 0&&P!=null){let j=P;Array.isArray(j)&&(j=j.map(ee=>wB(ee))),u(n,["safetySettings"],j)}const U=l(e,["tools"]);if(n!==void 0&&U!=null){let j=Il(U);Array.isArray(j)&&(j=j.map(ee=>N1(Al(ee)))),u(n,["tools"],j)}const S=l(e,["toolConfig"]);n!==void 0&&S!=null&&u(n,["toolConfig"],jB(S));const M=l(e,["labels"]);n!==void 0&&M!=null&&u(n,["labels"],M);const C=l(e,["cachedContent"]);n!==void 0&&C!=null&&u(n,["cachedContent"],zs(t,C));const k=l(e,["responseModalities"]);k!=null&&u(i,["responseModalities"],k);const N=l(e,["mediaResolution"]);N!=null&&u(i,["mediaResolution"],N);const V=l(e,["speechConfig"]);V!=null&&u(i,["speechConfig"],PB(Fv(V)));const L=l(e,["audioTimestamp"]);L!=null&&u(i,["audioTimestamp"],L);const $=l(e,["thinkingConfig"]);$!=null&&u(i,["thinkingConfig"],BB($));const Z=l(e,["imageConfig"]);return Z!=null&&u(i,["imageConfig"],Y6(Z)),i}function RC(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["contents"]);if(s!=null){let o=Si(s);Array.isArray(o)&&(o=o.map(a=>Yh(a))),u(n,["contents"],o)}const r=l(e,["config"]);return r!=null&&u(n,["generationConfig"],_6(t,r,n)),n}function kC(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["contents"]);if(s!=null){let o=Si(s);Array.isArray(o)&&(o=o.map(a=>Rl(a))),u(n,["contents"],o)}const r=l(e,["config"]);return r!=null&&u(n,["generationConfig"],T6(t,r,n)),n}function NC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(d=>T5(d))),u(e,["candidates"],c)}const s=l(t,["modelVersion"]);s!=null&&u(e,["modelVersion"],s);const r=l(t,["promptFeedback"]);r!=null&&u(e,["promptFeedback"],r);const o=l(t,["responseId"]);o!=null&&u(e,["responseId"],o);const a=l(t,["usageMetadata"]);return a!=null&&u(e,["usageMetadata"],a),e}function LC(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>E5(h))),u(e,["candidates"],d)}const s=l(t,["createTime"]);s!=null&&u(e,["createTime"],s);const r=l(t,["modelVersion"]);r!=null&&u(e,["modelVersion"],r);const o=l(t,["promptFeedback"]);o!=null&&u(e,["promptFeedback"],o);const a=l(t,["responseId"]);a!=null&&u(e,["responseId"],a);const c=l(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function E6(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);const r=l(t,["guidanceScale"]);if(e!==void 0&&r!=null&&u(e,["parameters","guidanceScale"],r),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=l(t,["safetyFilterLevel"]);e!==void 0&&o!=null&&u(e,["parameters","safetySetting"],o);const a=l(t,["personGeneration"]);e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&u(e,["parameters","includeSafetyAttributes"],c);const d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&u(e,["parameters","includeRaiReason"],d);const h=l(t,["language"]);e!==void 0&&h!=null&&u(e,["parameters","language"],h);const m=l(t,["outputMimeType"]);e!==void 0&&m!=null&&u(e,["parameters","outputOptions","mimeType"],m);const g=l(t,["outputCompressionQuality"]);if(e!==void 0&&g!=null&&u(e,["parameters","outputOptions","compressionQuality"],g),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const v=l(t,["imageSize"]);if(e!==void 0&&v!=null&&u(e,["parameters","sampleImageSize"],v),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function x6(t,e){const n={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const s=l(t,["negativePrompt"]);e!==void 0&&s!=null&&u(e,["parameters","negativePrompt"],s);const r=l(t,["numberOfImages"]);e!==void 0&&r!=null&&u(e,["parameters","sampleCount"],r);const o=l(t,["aspectRatio"]);e!==void 0&&o!=null&&u(e,["parameters","aspectRatio"],o);const a=l(t,["guidanceScale"]);e!==void 0&&a!=null&&u(e,["parameters","guidanceScale"],a);const c=l(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&u(e,["parameters","personGeneration"],h);const m=l(t,["includeSafetyAttributes"]);e!==void 0&&m!=null&&u(e,["parameters","includeSafetyAttributes"],m);const g=l(t,["includeRaiReason"]);e!==void 0&&g!=null&&u(e,["parameters","includeRaiReason"],g);const v=l(t,["language"]);e!==void 0&&v!=null&&u(e,["parameters","language"],v);const T=l(t,["outputMimeType"]);e!==void 0&&T!=null&&u(e,["parameters","outputOptions","mimeType"],T);const w=l(t,["outputCompressionQuality"]);e!==void 0&&w!=null&&u(e,["parameters","outputOptions","compressionQuality"],w);const I=l(t,["addWatermark"]);e!==void 0&&I!=null&&u(e,["parameters","addWatermark"],I);const b=l(t,["imageSize"]);e!==void 0&&b!=null&&u(e,["parameters","sampleImageSize"],b);const E=l(t,["enhancePrompt"]);return e!==void 0&&E!=null&&u(e,["parameters","enhancePrompt"],E),n}function C6(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["prompt"]);s!=null&&u(n,["instances[0]","prompt"],s);const r=l(e,["config"]);return r!=null&&E6(r,n),n}function S6(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["prompt"]);s!=null&&u(n,["instances[0]","prompt"],s);const r=l(e,["config"]);return r!=null&&x6(r,n),n}function w6(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>U6(o))),u(e,["generatedImages"],r)}const s=l(t,["positivePromptSafetyAttributes"]);return s!=null&&u(e,["positivePromptSafetyAttributes"],R1(s)),e}function b6(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(o=>Wh(o))),u(e,["generatedImages"],r)}const s=l(t,["positivePromptSafetyAttributes"]);return s!=null&&u(e,["positivePromptSafetyAttributes"],k1(s)),e}function A6(t,e){const n={},i=l(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=l(t,["durationSeconds"]);if(e!==void 0&&s!=null&&u(e,["parameters","durationSeconds"],s),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=l(t,["aspectRatio"]);e!==void 0&&r!=null&&u(e,["parameters","aspectRatio"],r);const o=l(t,["resolution"]);e!==void 0&&o!=null&&u(e,["parameters","resolution"],o);const a=l(t,["personGeneration"]);if(e!==void 0&&a!=null&&u(e,["parameters","personGeneration"],a),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(t,["negativePrompt"]);e!==void 0&&c!=null&&u(e,["parameters","negativePrompt"],c);const d=l(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&u(e,["parameters","enhancePrompt"],d),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(l(t,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(l(t,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function I6(t,e){const n={},i=l(t,["numberOfVideos"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const s=l(t,["outputGcsUri"]);e!==void 0&&s!=null&&u(e,["parameters","storageUri"],s);const r=l(t,["fps"]);e!==void 0&&r!=null&&u(e,["parameters","fps"],r);const o=l(t,["durationSeconds"]);e!==void 0&&o!=null&&u(e,["parameters","durationSeconds"],o);const a=l(t,["seed"]);e!==void 0&&a!=null&&u(e,["parameters","seed"],a);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);const d=l(t,["resolution"]);e!==void 0&&d!=null&&u(e,["parameters","resolution"],d);const h=l(t,["personGeneration"]);e!==void 0&&h!=null&&u(e,["parameters","personGeneration"],h);const m=l(t,["pubsubTopic"]);e!==void 0&&m!=null&&u(e,["parameters","pubsubTopic"],m);const g=l(t,["negativePrompt"]);e!==void 0&&g!=null&&u(e,["parameters","negativePrompt"],g);const v=l(t,["enhancePrompt"]);e!==void 0&&v!=null&&u(e,["parameters","enhancePrompt"],v);const T=l(t,["generateAudio"]);e!==void 0&&T!=null&&u(e,["parameters","generateAudio"],T);const w=l(t,["lastFrame"]);e!==void 0&&w!=null&&u(e,["instances[0]","lastFrame"],Vi(w));const I=l(t,["referenceImages"]);if(e!==void 0&&I!=null){let A=I;Array.isArray(A)&&(A=A.map(R=>aF(R))),u(e,["instances[0]","referenceImages"],A)}const b=l(t,["mask"]);e!==void 0&&b!=null&&u(e,["instances[0]","mask"],oF(b));const E=l(t,["compressionQuality"]);return e!==void 0&&E!=null&&u(e,["parameters","compressionQuality"],E),n}function M6(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["metadata"]);i!=null&&u(e,["metadata"],i);const s=l(t,["done"]);s!=null&&u(e,["done"],s);const r=l(t,["error"]);r!=null&&u(e,["error"],r);const o=l(t,["response","generateVideoResponse"]);return o!=null&&u(e,["response"],L6(o)),e}function R6(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["metadata"]);i!=null&&u(e,["metadata"],i);const s=l(t,["done"]);s!=null&&u(e,["done"],s);const r=l(t,["error"]);r!=null&&u(e,["error"],r);const o=l(t,["response"]);return o!=null&&u(e,["response"],D6(o)),e}function k6(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["prompt"]);s!=null&&u(n,["instances[0]","prompt"],s);const r=l(e,["image"]);if(r!=null&&u(n,["instances[0]","image"],M1(r)),l(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const o=l(e,["source"]);o!=null&&P6(o,n);const a=l(e,["config"]);return a!=null&&A6(a,n),n}function N6(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["prompt"]);s!=null&&u(n,["instances[0]","prompt"],s);const r=l(e,["image"]);r!=null&&u(n,["instances[0]","image"],Vi(r));const o=l(e,["video"]);o!=null&&u(n,["instances[0]","video"],L1(o));const a=l(e,["source"]);a!=null&&V6(a,n);const c=l(e,["config"]);return c!=null&&I6(c,n),n}function L6(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>B6(o))),u(e,["generatedVideos"],r)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const s=l(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function D6(t){const e={},n=l(t,["videos"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>F6(o))),u(e,["generatedVideos"],r)}const i=l(t,["raiMediaFilteredCount"]);i!=null&&u(e,["raiMediaFilteredCount"],i);const s=l(t,["raiMediaFilteredReasons"]);return s!=null&&u(e,["raiMediaFilteredReasons"],s),e}function P6(t,e){const n={},i=l(t,["prompt"]);e!==void 0&&i!=null&&u(e,["instances[0]","prompt"],i);const s=l(t,["image"]);if(e!==void 0&&s!=null&&u(e,["instances[0]","image"],M1(s)),l(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return n}function V6(t,e){const n={},i=l(t,["prompt"]);e!==void 0&&i!=null&&u(e,["instances[0]","prompt"],i);const s=l(t,["image"]);e!==void 0&&s!=null&&u(e,["instances[0]","image"],Vi(s));const r=l(t,["video"]);return e!==void 0&&r!=null&&u(e,["instances[0]","video"],L1(r)),n}function U6(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],W6(n));const i=l(t,["raiFilteredReason"]);i!=null&&u(e,["raiFilteredReason"],i);const s=l(t,["_self"]);return s!=null&&u(e,["safetyAttributes"],R1(s)),e}function Wh(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["image"],I1(n));const i=l(t,["raiFilteredReason"]);i!=null&&u(e,["raiFilteredReason"],i);const s=l(t,["_self"]);s!=null&&u(e,["safetyAttributes"],k1(s));const r=l(t,["prompt"]);return r!=null&&u(e,["enhancedPrompt"],r),e}function O6(t){const e={},n=l(t,["_self"]);n!=null&&u(e,["mask"],I1(n));const i=l(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>o6(r))),u(e,["labels"],s)}return e}function B6(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],sF(n)),e}function F6(t){const e={},n=l(t,["_self"]);return n!=null&&u(e,["video"],rF(n)),e}function j6(t,e){const n={},i=l(e,["model"]);return i!=null&&u(n,["_url","name"],et(t,i)),n}function z6(t,e){const n={},i=l(e,["model"]);return i!=null&&u(n,["_url","name"],et(t,i)),n}function q6(t){const e={},n=l(t,["authConfig"]);return n!=null&&u(e,["authConfig"],m5(n)),e}function H6(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],G5(n)),e}function G6(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],$5(n)),e}function $6(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],Q6(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function K6(t){const e={},n=l(t,["timeRangeFilter"]);n!=null&&u(e,["timeRangeFilter"],Z6(n));const i=l(t,["excludeDomains"]);return i!=null&&u(e,["excludeDomains"],i),e}function J6(t){const e={},n=l(t,["aspectRatio"]);return n!=null&&u(e,["aspectRatio"],n),e}function Y6(t){const e={},n=l(t,["aspectRatio"]);return n!=null&&u(e,["aspectRatio"],n),e}function W6(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&u(e,["imageBytes"],Wo(n));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function I1(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const i=l(t,["bytesBase64Encoded"]);i!=null&&u(e,["imageBytes"],Wo(i));const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function M1(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&u(e,["bytesBase64Encoded"],Wo(n));const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function Vi(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);const i=l(t,["imageBytes"]);i!=null&&u(e,["bytesBase64Encoded"],Wo(i));const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function Q6(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function Z6(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function X6(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const i=l(t,["longitude"]);return i!=null&&u(e,["longitude"],i),e}function eB(t){const e={},n=l(t,["latitude"]);n!=null&&u(e,["latitude"],n);const i=l(t,["longitude"]);return i!=null&&u(e,["longitude"],i),e}function tB(t,e,n){const i={},s=l(e,["pageSize"]);n!==void 0&&s!=null&&u(n,["_query","pageSize"],s);const r=l(e,["pageToken"]);n!==void 0&&r!=null&&u(n,["_query","pageToken"],r);const o=l(e,["filter"]);n!==void 0&&o!=null&&u(n,["_query","filter"],o);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],f1(t,a)),i}function nB(t,e,n){const i={},s=l(e,["pageSize"]);n!==void 0&&s!=null&&u(n,["_query","pageSize"],s);const r=l(e,["pageToken"]);n!==void 0&&r!=null&&u(n,["_query","pageToken"],r);const o=l(e,["filter"]);n!==void 0&&o!=null&&u(n,["_query","filter"],o);const a=l(e,["queryBase"]);return n!==void 0&&a!=null&&u(n,["_url","models_url"],f1(t,a)),i}function iB(t,e){const n={},i=l(e,["config"]);return i!=null&&tB(t,i,n),n}function sB(t,e){const n={},i=l(e,["config"]);return i!=null&&nB(t,i,n),n}function rB(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=l(t,["_self"]);if(s!=null){let r=h1(s);Array.isArray(r)&&(r=r.map(o=>$g(o))),u(e,["models"],r)}return e}function oB(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=l(t,["_self"]);if(s!=null){let r=h1(s);Array.isArray(r)&&(r=r.map(o=>Kg(o))),u(e,["models"],r)}return e}function aB(t){const e={},n=l(t,["maskMode"]);n!=null&&u(e,["maskMode"],n);const i=l(t,["segmentationClasses"]);i!=null&&u(e,["maskClasses"],i);const s=l(t,["maskDilation"]);return s!=null&&u(e,["dilation"],s),e}function $g(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const s=l(t,["description"]);s!=null&&u(e,["description"],s);const r=l(t,["version"]);r!=null&&u(e,["version"],r);const o=l(t,["_self"]);o!=null&&u(e,["tunedModelInfo"],qB(o));const a=l(t,["inputTokenLimit"]);a!=null&&u(e,["inputTokenLimit"],a);const c=l(t,["outputTokenLimit"]);c!=null&&u(e,["outputTokenLimit"],c);const d=l(t,["supportedGenerationMethods"]);return d!=null&&u(e,["supportedActions"],d),e}function Kg(t){const e={},n=l(t,["name"]);n!=null&&u(e,["name"],n);const i=l(t,["displayName"]);i!=null&&u(e,["displayName"],i);const s=l(t,["description"]);s!=null&&u(e,["description"],s);const r=l(t,["versionId"]);r!=null&&u(e,["version"],r);const o=l(t,["deployedModels"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>s6(g))),u(e,["endpoints"],m)}const a=l(t,["labels"]);a!=null&&u(e,["labels"],a);const c=l(t,["_self"]);c!=null&&u(e,["tunedModelInfo"],HB(c));const d=l(t,["defaultCheckpointId"]);d!=null&&u(e,["defaultCheckpointId"],d);const h=l(t,["checkpoints"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>x5(g))),u(e,["checkpoints"],m)}return e}function lB(t){const e={},n=l(t,["featureSelectionPreference"]);return n!=null&&u(e,["featureSelectionPreference"],n),e}function uB(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>LB(s))),u(e,["speakerVoiceConfigs"],i)}return e}function cB(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],lF(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const s=l(t,["inlineData"]);s!=null&&u(e,["inlineData"],g5(s));const r=l(t,["fileData"]);r!=null&&u(e,["fileData"],a6(r));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["functionCall"]);a!=null&&u(e,["functionCall"],d6(a));const c=l(t,["codeExecutionResult"]);c!=null&&u(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&u(e,["executableCode"],d);const h=l(t,["functionResponse"]);h!=null&&u(e,["functionResponse"],h);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function dB(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],uF(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const s=l(t,["inlineData"]);s!=null&&u(e,["inlineData"],y5(s));const r=l(t,["fileData"]);r!=null&&u(e,["fileData"],l6(r));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["functionCall"]);a!=null&&u(e,["functionCall"],f6(a));const c=l(t,["codeExecutionResult"]);c!=null&&u(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&u(e,["executableCode"],d);const h=l(t,["functionResponse"]);h!=null&&u(e,["functionResponse"],h);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function fB(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],cF(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const s=l(t,["inlineData"]);s!=null&&u(e,["inlineData"],v5(s));const r=l(t,["fileData"]);r!=null&&u(e,["fileData"],u6(r));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["functionCall"]);a!=null&&u(e,["functionCall"],h6(a));const c=l(t,["codeExecutionResult"]);c!=null&&u(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&u(e,["executableCode"],d);const h=l(t,["functionResponse"]);h!=null&&u(e,["functionResponse"],h);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function hB(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],dF(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const s=l(t,["inlineData"]);s!=null&&u(e,["inlineData"],_5(s));const r=l(t,["fileData"]);r!=null&&u(e,["fileData"],c6(r));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["functionCall"]);a!=null&&u(e,["functionCall"],p6(a));const c=l(t,["codeExecutionResult"]);c!=null&&u(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&u(e,["executableCode"],d);const h=l(t,["functionResponse"]);h!=null&&u(e,["functionResponse"],h);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function pB(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function mB(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function gB(t){const e={},n=l(t,["productImage"]);return n!=null&&u(e,["image"],Vi(n)),e}function yB(t,e){const n={},i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);const s=l(t,["baseSteps"]);e!==void 0&&s!=null&&u(e,["parameters","editConfig","baseSteps"],s);const r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);const o=l(t,["seed"]);e!==void 0&&o!=null&&u(e,["parameters","seed"],o);const a=l(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&u(e,["parameters","safetySetting"],a);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);const d=l(t,["addWatermark"]);e!==void 0&&d!=null&&u(e,["parameters","addWatermark"],d);const h=l(t,["outputMimeType"]);e!==void 0&&h!=null&&u(e,["parameters","outputOptions","mimeType"],h);const m=l(t,["outputCompressionQuality"]);e!==void 0&&m!=null&&u(e,["parameters","outputOptions","compressionQuality"],m);const g=l(t,["enhancePrompt"]);return e!==void 0&&g!=null&&u(e,["parameters","enhancePrompt"],g),n}function vB(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["source"]);s!=null&&TB(s,n);const r=l(e,["config"]);return r!=null&&yB(r,n),n}function _B(t){const e={},n=l(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Wh(s))),u(e,["generatedImages"],i)}return e}function TB(t,e){const n={},i=l(t,["prompt"]);e!==void 0&&i!=null&&u(e,["instances[0]","prompt"],i);const s=l(t,["personImage"]);e!==void 0&&s!=null&&u(e,["instances[0]","personImage","image"],Vi(s));const r=l(t,["productImages"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>gB(a))),u(e,["instances[0]","productImages"],o)}return n}function EB(t){const e={},n=l(t,["referenceImage"]);n!=null&&u(e,["referenceImage"],Vi(n));const i=l(t,["referenceId"]);i!=null&&u(e,["referenceId"],i);const s=l(t,["referenceType"]);s!=null&&u(e,["referenceType"],s);const r=l(t,["maskImageConfig"]);r!=null&&u(e,["maskImageConfig"],aB(r));const o=l(t,["controlImageConfig"]);o!=null&&u(e,["controlImageConfig"],D5(o));const a=l(t,["styleImageConfig"]);a!=null&&u(e,["styleImageConfig"],VB(a));const c=l(t,["subjectImageConfig"]);return c!=null&&u(e,["subjectImageConfig"],UB(c)),e}function xB(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],X6(n));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function CB(t){const e={},n=l(t,["latLng"]);n!=null&&u(e,["latLng"],eB(n));const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function R1(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const i=l(t,["safetyAttributes","scores"]);i!=null&&u(e,["scores"],i);const s=l(t,["contentType"]);return s!=null&&u(e,["contentType"],s),e}function k1(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);const i=l(t,["safetyAttributes","scores"]);i!=null&&u(e,["scores"],i);const s=l(t,["contentType"]);return s!=null&&u(e,["contentType"],s),e}function SB(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&u(e,["category"],n);const i=l(t,["threshold"]);return i!=null&&u(e,["threshold"],i),e}function wB(t){const e={},n=l(t,["method"]);n!=null&&u(e,["method"],n);const i=l(t,["category"]);i!=null&&u(e,["category"],i);const s=l(t,["threshold"]);return s!=null&&u(e,["threshold"],s),e}function bB(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const i=l(t,["default"]);i!=null&&u(e,["default"],i);const s=l(t,["description"]);s!=null&&u(e,["description"],s);const r=l(t,["enum"]);r!=null&&u(e,["enum"],r);const o=l(t,["example"]);o!=null&&u(e,["example"],o);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const d=l(t,["maxItems"]);d!=null&&u(e,["maxItems"],d);const h=l(t,["maxLength"]);h!=null&&u(e,["maxLength"],h);const m=l(t,["maxProperties"]);m!=null&&u(e,["maxProperties"],m);const g=l(t,["maximum"]);g!=null&&u(e,["maximum"],g);const v=l(t,["minItems"]);v!=null&&u(e,["minItems"],v);const T=l(t,["minLength"]);T!=null&&u(e,["minLength"],T);const w=l(t,["minProperties"]);w!=null&&u(e,["minProperties"],w);const I=l(t,["minimum"]);I!=null&&u(e,["minimum"],I);const b=l(t,["nullable"]);b!=null&&u(e,["nullable"],b);const E=l(t,["pattern"]);E!=null&&u(e,["pattern"],E);const A=l(t,["properties"]);A!=null&&u(e,["properties"],A);const R=l(t,["propertyOrdering"]);R!=null&&u(e,["propertyOrdering"],R);const P=l(t,["required"]);P!=null&&u(e,["required"],P);const U=l(t,["title"]);U!=null&&u(e,["title"],U);const S=l(t,["type"]);return S!=null&&u(e,["type"],S),e}function AB(t){const e={},n=l(t,["anyOf"]);n!=null&&u(e,["anyOf"],n);const i=l(t,["default"]);i!=null&&u(e,["default"],i);const s=l(t,["description"]);s!=null&&u(e,["description"],s);const r=l(t,["enum"]);r!=null&&u(e,["enum"],r);const o=l(t,["example"]);o!=null&&u(e,["example"],o);const a=l(t,["format"]);a!=null&&u(e,["format"],a);const c=l(t,["items"]);c!=null&&u(e,["items"],c);const d=l(t,["maxItems"]);d!=null&&u(e,["maxItems"],d);const h=l(t,["maxLength"]);h!=null&&u(e,["maxLength"],h);const m=l(t,["maxProperties"]);m!=null&&u(e,["maxProperties"],m);const g=l(t,["maximum"]);g!=null&&u(e,["maximum"],g);const v=l(t,["minItems"]);v!=null&&u(e,["minItems"],v);const T=l(t,["minLength"]);T!=null&&u(e,["minLength"],T);const w=l(t,["minProperties"]);w!=null&&u(e,["minProperties"],w);const I=l(t,["minimum"]);I!=null&&u(e,["minimum"],I);const b=l(t,["nullable"]);b!=null&&u(e,["nullable"],b);const E=l(t,["pattern"]);E!=null&&u(e,["pattern"],E);const A=l(t,["properties"]);A!=null&&u(e,["properties"],A);const R=l(t,["propertyOrdering"]);R!=null&&u(e,["propertyOrdering"],R);const P=l(t,["required"]);P!=null&&u(e,["required"],P);const U=l(t,["title"]);U!=null&&u(e,["title"],U);const S=l(t,["type"]);return S!=null&&u(e,["type"],S),e}function IB(t){const e={},n=l(t,["image"]);return n!=null&&u(e,["image"],Vi(n)),e}function MB(t,e){const n={},i=l(t,["mode"]);e!==void 0&&i!=null&&u(e,["parameters","mode"],i);const s=l(t,["maxPredictions"]);e!==void 0&&s!=null&&u(e,["parameters","maxPredictions"],s);const r=l(t,["confidenceThreshold"]);e!==void 0&&r!=null&&u(e,["parameters","confidenceThreshold"],r);const o=l(t,["maskDilation"]);e!==void 0&&o!=null&&u(e,["parameters","maskDilation"],o);const a=l(t,["binaryColorThreshold"]);return e!==void 0&&a!=null&&u(e,["parameters","binaryColorThreshold"],a),n}function RB(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["source"]);s!=null&&NB(s,n);const r=l(e,["config"]);return r!=null&&MB(r,n),n}function kB(t){const e={},n=l(t,["predictions"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>O6(s))),u(e,["generatedMasks"],i)}return e}function NB(t,e){const n={},i=l(t,["prompt"]);e!==void 0&&i!=null&&u(e,["instances[0]","prompt"],i);const s=l(t,["image"]);e!==void 0&&s!=null&&u(e,["instances[0]","image"],Vi(s));const r=l(t,["scribbleImage"]);return e!==void 0&&r!=null&&u(e,["instances[0]","scribble"],IB(r)),n}function LB(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const i=l(t,["voiceConfig"]);return i!=null&&u(e,["voiceConfig"],D1(i)),e}function DB(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],D1(n));const i=l(t,["multiSpeakerVoiceConfig"]);i!=null&&u(e,["multiSpeakerVoiceConfig"],uB(i));const s=l(t,["languageCode"]);return s!=null&&u(e,["languageCode"],s),e}function PB(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&u(e,["voiceConfig"],fF(n)),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=l(t,["languageCode"]);return i!=null&&u(e,["languageCode"],i),e}function VB(t){const e={},n=l(t,["styleDescription"]);return n!=null&&u(e,["styleDescription"],n),e}function UB(t){const e={},n=l(t,["subjectType"]);n!=null&&u(e,["subjectType"],n);const i=l(t,["subjectDescription"]);return i!=null&&u(e,["subjectDescription"],i),e}function OB(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const i=l(t,["thinkingBudget"]);return i!=null&&u(e,["thinkingBudget"],i),e}function BB(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const i=l(t,["thinkingBudget"]);return i!=null&&u(e,["thinkingBudget"],i),e}function FB(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],m6(n));const i=l(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],xB(i)),e}function jB(t){const e={},n=l(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],g6(n));const i=l(t,["retrievalConfig"]);return i!=null&&u(e,["retrievalConfig"],CB(i)),e}function zB(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>y6(d))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],$6(i));const s=l(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],H6(s)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],eF());const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],A5(o));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function N1(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let m=n;Array.isArray(m)&&(m=m.map(g=>v6(g))),u(e,["functionDeclarations"],m)}const i=l(t,["retrieval"]);i!=null&&u(e,["retrieval"],i);const s=l(t,["googleSearch"]);s!=null&&u(e,["googleSearch"],K6(s));const r=l(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],G6(r));const o=l(t,["enterpriseWebSearch"]);o!=null&&u(e,["enterpriseWebSearch"],r6(o));const a=l(t,["googleMaps"]);a!=null&&u(e,["googleMaps"],q6(a)),l(t,["urlContext"])!=null&&u(e,["urlContext"],tF());const d=l(t,["computerUse"]);d!=null&&u(e,["computerUse"],I5(d));const h=l(t,["codeExecution"]);return h!=null&&u(e,["codeExecution"],h),e}function qB(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const i=l(t,["createTime"]);i!=null&&u(e,["createTime"],i);const s=l(t,["updateTime"]);return s!=null&&u(e,["updateTime"],s),e}function HB(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(e,["baseModel"],n);const i=l(t,["createTime"]);i!=null&&u(e,["createTime"],i);const s=l(t,["updateTime"]);return s!=null&&u(e,["updateTime"],s),e}function GB(t,e){const n={},i=l(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=l(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);const r=l(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&u(e,["defaultCheckpointId"],r),n}function $B(t,e){const n={},i=l(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);const s=l(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);const r=l(t,["defaultCheckpointId"]);return e!==void 0&&r!=null&&u(e,["defaultCheckpointId"],r),n}function KB(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","name"],et(t,i));const s=l(e,["config"]);return s!=null&&GB(s,n),n}function JB(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["config"]);return s!=null&&$B(s,n),n}function YB(t,e){const n={},i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);const s=l(t,["includeRaiReason"]);e!==void 0&&s!=null&&u(e,["parameters","includeRaiReason"],s);const r=l(t,["outputMimeType"]);e!==void 0&&r!=null&&u(e,["parameters","outputOptions","mimeType"],r);const o=l(t,["outputCompressionQuality"]);e!==void 0&&o!=null&&u(e,["parameters","outputOptions","compressionQuality"],o);const a=l(t,["enhanceInputImage"]);e!==void 0&&a!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],a);const c=l(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=l(t,["numberOfImages"]);e!==void 0&&d!=null&&u(e,["parameters","sampleCount"],d);const h=l(t,["mode"]);return e!==void 0&&h!=null&&u(e,["parameters","mode"],h),n}function WB(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["_url","model"],et(t,i));const s=l(e,["image"]);s!=null&&u(n,["instances[0]","image"],Vi(s));const r=l(e,["upscaleFactor"]);r!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],r);const o=l(e,["config"]);return o!=null&&YB(o,n),n}function QB(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(r=>Wh(r))),u(e,["generatedImages"],s)}return e}function ZB(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>nF(s))),u(e,["urlMetadata"],i)}return e}function XB(t){const e={},n=l(t,["urlMetadata"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>iF(s))),u(e,["urlMetadata"],i)}return e}function eF(){return{}}function tF(){return{}}function nF(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const i=l(t,["urlRetrievalStatus"]);return i!=null&&u(e,["urlRetrievalStatus"],i),e}function iF(t){const e={},n=l(t,["retrievedUrl"]);n!=null&&u(e,["retrievedUrl"],n);const i=l(t,["urlRetrievalStatus"]);return i!=null&&u(e,["urlRetrievalStatus"],i),e}function sF(t){const e={},n=l(t,["video","uri"]);n!=null&&u(e,["uri"],n);const i=l(t,["video","encodedVideo"]);i!=null&&u(e,["videoBytes"],Wo(i));const s=l(t,["encoding"]);return s!=null&&u(e,["mimeType"],s),e}function rF(t){const e={},n=l(t,["gcsUri"]);n!=null&&u(e,["uri"],n);const i=l(t,["bytesBase64Encoded"]);i!=null&&u(e,["videoBytes"],Wo(i));const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function oF(t){const e={},n=l(t,["image"]);n!=null&&u(e,["_self"],Vi(n));const i=l(t,["maskMode"]);return i!=null&&u(e,["maskMode"],i),e}function aF(t){const e={},n=l(t,["image"]);n!=null&&u(e,["image"],Vi(n));const i=l(t,["referenceType"]);return i!=null&&u(e,["referenceType"],i),e}function lF(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const s=l(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function uF(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const s=l(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function cF(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const s=l(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function dF(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const s=l(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function L1(t){const e={},n=l(t,["uri"]);n!=null&&u(e,["gcsUri"],n);const i=l(t,["videoBytes"]);i!=null&&u(e,["bytesBase64Encoded"],Wo(i));const s=l(t,["mimeType"]);return s!=null&&u(e,["mimeType"],s),e}function D1(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],pB(n)),e}function fF(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],mB(n)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hF="Content-Type",pF="X-Server-Timeout",mF="User-Agent",Jg="x-goog-api-client",gF="1.22.0",yF=`google-genai-sdk/${gF}`,vF="v1beta1",_F="v1beta",DC=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class TF{constructor(e){var n,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:vF,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:_F,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,i){const s=[this.getRequestUrlInternal(n)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,n,e.abortSignal),this.unaryApiCall(s,r,e.httpMethod)}patchHttpOptions(e,n){const i=JSON.parse(JSON.stringify(e));for(const[s,r]of Object.entries(n))typeof r=="object"?i[s]=Object.assign(Object.assign({},i[s]),r):r!==void 0&&(i[s]=r);return i}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,n,e.abortSignal),this.streamApiCall(s,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,i){if(n&&n.timeout||i){const s=new AbortController,r=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const o=setTimeout(()=>s.abort(),n.timeout);o&&typeof o.unref=="function"&&o.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=r}return n&&n.extraBody!==null&&EF(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await PC(s),new jg(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:i})).then(async s=>(await PC(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Ga(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),r=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:c}=yield Et(s.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=r.decode(c,{stream:!0});try{const m=JSON.parse(d);if("error"in m){const g=JSON.parse(JSON.stringify(m.error)),v=g.status,T=g.code,w=`got status: ${v}. ${JSON.stringify(m)}`;if(T>=400&&T<600)throw new Jh({message:w,status:T})}}catch(m){if(m.name==="ApiError")throw m}o+=d;let h=o.match(DC);for(;h;){const m=h[1];try{const g=new Response(m,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Et(new jg(g)),o=o.slice(h[0].length),h=o.match(DC)}catch(g){throw new Error(`exception parsing stream chunk ${m}. ${g}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},n=yF+" "+this.clientOptions.userAgentExtra;return e[mF]=n,e[Jg]=n,e[hF]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))n.append(i,s);e.timeout&&e.timeout>0&&n.append(pF,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var i;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const r=this.clientOptions.uploader,o=await r.stat(e);s.sizeBytes=String(o.size);const a=(i=n==null?void 0:n.mimeType)!==null&&i!==void 0?i:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const c=await this.fetchUploadUrl(s,n);return r.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var i;let s={};n!=null&&n.httpOptions?s=n.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const r={file:e},o=await this.request({path:ve("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:s});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(i=o==null?void 0:o.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function PC(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let i;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await t.json():i={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(i);throw n>=400&&n<600?new Jh({message:s,status:n}):new Error(s)}}function EF(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const r=JSON.parse(t.body);if(typeof r=="object"&&r!==null&&!Array.isArray(r))n=r;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(r,o){const a=Object.assign({},r);for(const c in o)if(Object.prototype.hasOwnProperty.call(o,c)){const d=o[c],h=a[c];d&&typeof d=="object"&&!Array.isArray(d)&&h&&typeof h=="object"&&!Array.isArray(h)?a[c]=i(h,d):(h&&d&&typeof h!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof h}, New type: ${typeof d}. Overwriting.`),a[c]=d)}return a}const s=i(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xF="mcp_used/unknown";let CF=!1;function P1(t){for(const e of t)if(SF(e)||typeof e=="object"&&"inputSchema"in e)return!0;return CF}function V1(t){var e;const n=(e=t[Jg])!==null&&e!==void 0?e:"";t[Jg]=(n+` ${xF}`).trimStart()}function SF(t){return t!==null&&typeof t=="object"&&t instanceof qv}function wF(t,e=100){return Ga(this,arguments,function*(){let i,s=0;for(;s<e;){const r=yield Et(t.listTools({cursor:i}));for(const o of r.tools)yield yield Et(o),s++;if(!r.nextCursor)break;i=r.nextCursor}})}class qv{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new qv(e,n)}async initialize(){var e,n,i,s;if(this.mcpTools.length>0)return;const r={},o=[];for(const h of this.mcpClients)try{for(var a=!0,c=(n=void 0,Uu(wF(h))),d;d=await c.next(),e=d.done,!e;a=!0){s=d.value,a=!1;const m=s;o.push(m);const g=m.name;if(r[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);r[g]=h}}catch(m){n={error:m}}finally{try{!a&&!e&&(i=c.return)&&await i.call(c)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=r}async tool(){return await this.initialize(),PV(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let r;this.config.timeout&&(r={timeout:this.config.timeout});const o=await s.callTool({name:i.name,arguments:i.args},void 0,r);n.push({functionResponse:{name:i.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function bF(t,e,n){const i=new AV;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data);const r=h3(s);Object.assign(i,r),e(i)}class AF{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i}async connect(e){var n,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),r=this.apiClient.getApiVersion(),o=RF(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),c=`${s}/ws/google.ai.generativelanguage.${r}.GenerativeService.BidiGenerateMusic?key=${a}`;let d=()=>{};const h=new Promise(A=>{d=A}),m=e.callbacks,g=function(){d({})},v=this.apiClient,T={onopen:g,onmessage:A=>{bF(v,m.onmessage,A)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(A){},onclose:(i=m==null?void 0:m.onclose)!==null&&i!==void 0?i:function(A){}},w=this.webSocketFactory.create(c,MF(o),T);w.connect(),await h;const I=et(this.apiClient,e.model),b=S1({model:I}),E=Gg({setup:b});return w.send(JSON.stringify(E)),new IF(w,this.apiClient)}}class IF{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=g3(e),i=C1(n);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=m3(e),i=Gg(n);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const n=Gg({playbackControl:e});this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(La.PLAY)}pause(){this.sendPlaybackControl(La.PAUSE)}stop(){this.sendPlaybackControl(La.STOP)}resetContext(){this.sendPlaybackControl(La.RESET_CONTEXT)}close(){this.conn.close()}}function MF(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function RF(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kF="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function NF(t,e,n){const i=new bV;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const r=JSON.parse(s);if(t.isVertexAI()){const o=w3(r);Object.assign(i,o)}else{const o=S3(r);Object.assign(i,o)}e(i)}class LF{constructor(e,n,i){this.apiClient=e,this.auth=n,this.webSocketFactory=i,this.music=new AF(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,i,s,r,o,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let h;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&P1(e.config.tools)&&V1(m);const g=UF(m);if(this.apiClient.isVertexAI())h=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g);else{const C=this.apiClient.getApiKey();let k="BidiGenerateContent",N="key";C!=null&&C.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),k="BidiGenerateContentConstrained",N="access_token"),h=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${k}?${N}=${C}`}let v=()=>{};const T=new Promise(C=>{v=C}),w=e.callbacks,I=function(){var C;(C=w==null?void 0:w.onopen)===null||C===void 0||C.call(w),v({})},b=this.apiClient,E={onopen:I,onmessage:C=>{NF(b,w.onmessage,C)},onerror:(n=w==null?void 0:w.onerror)!==null&&n!==void 0?n:function(C){},onclose:(i=w==null?void 0:w.onclose)!==null&&i!==void 0?i:function(C){}},A=this.webSocketFactory.create(h,VF(g),E);A.connect(),await T;let R=et(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&R.startsWith("publishers/")){const C=this.apiClient.getProject(),k=this.apiClient.getLocation();R=`projects/${C}/locations/${k}/`+R}let P={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Zf.AUDIO]}:e.config.responseModalities=[Zf.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(a=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[],S=[];for(const C of U)if(this.isCallableTool(C)){const k=C;S.push(await k.tool())}else S.push(C);S.length>0&&(e.config.tools=S);const M={model:R,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=l3(this.apiClient,M):P=a3(this.apiClient,M),delete P.config,A.send(JSON.stringify(P)),new PF(A,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const DF={turnComplete:!0};class PF{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let i=[];try{i=Si(n.turns),e.isVertexAI()?i=i.map(s=>Rl(s)):i=i.map(s=>Yh(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:i,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let i=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?i=n.functionResponses:i=[n.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(kF)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},DF),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:_3(e)}:n={realtimeInput:v3(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function VF(t){const e={};return t.forEach((n,i)=>{e[i]=n}),e}function UF(t){const e=new Headers;for(const[n,i]of Object.entries(t))e.append(n,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const VC=10;function UC(t){var e,n,i;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if($a(o)){s=!0;break}if(!s)return!0;const r=(i=t==null?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return r&&(r<0||!Number.isInteger(r))||r==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",r),!0):!1}function $a(t){return"callTool"in t&&typeof t.callTool=="function"}function OF(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>$a(s)))!==null&&i!==void 0?i:!1}function BF(t){var e,n,i;return(i=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>!$a(s)))!==null&&i!==void 0?i:!1}function OC(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class FF extends Yo{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var i,s,r,o,a;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!OF(n)||UC(n.config))return await this.generateContentInternal(c);if(BF(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,h;const m=Si(c.contents),g=(r=(s=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:VC;let v=0;for(;v<g&&(d=await this.generateContentInternal(c),!(!d.functionCalls||d.functionCalls.length===0));){const T=d.candidates[0].content,w=[];for(const I of(a=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&a!==void 0?a:[])if($a(I)){const E=await I.callTool(d.functionCalls);w.push(...E)}v++,h={role:"user",parts:w},c.contents=Si(c.contents),c.contents.push(T),c.contents.push(h),OC(c.config)&&(m.push(T),m.push(h))}return OC(c.config)&&(d.automaticFunctionCallingHistory=m),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),UC(n.config)){const i=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(i=>{var s;let r;const o=[];if(i!=null&&i.generatedImages)for(const c of i.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((s=c==null?void 0:c.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?r=c==null?void 0:c.safetyAttributes:o.push(c);let a;return r?a={generatedImages:o,positivePromptSafetyAttributes:r,sdkHttpResponse:i.sdkHttpResponse}:a={generatedImages:o,sdkHttpResponse:i.sdkHttpResponse},a}),this.list=async n=>{var i;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((i=o.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new kc(Vo.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(o),o)},this.editImage=async n=>{const i={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(i.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async n=>{let i={numberOfImages:1,mode:"upscale"};n.config&&(i=Object.assign(Object.assign({},i),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,i,s;const r=(n=e.config)===null||n===void 0?void 0:n.tools;if(!r)return e;const o=await Promise.all(r.map(async c=>$a(c)?await c.tool():c)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(a.config.tools=o,e.config&&e.config.tools&&P1(e.config.tools)){const c=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),V1(d),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return a}async initAfcToolsMap(e){var n,i,s;const r=new Map;for(const o of(i=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&i!==void 0?i:[])if($a(o)){const a=o,c=await a.tool();for(const d of(s=c.functionDeclarations)!==null&&s!==void 0?s:[]){if(!d.name)throw new Error("Function declaration name is required.");if(r.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);r.set(d.name,a)}}return r}async processAfcStream(e){var n,i,s;const r=(s=(i=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:VC;let o=!1,a=0;const c=await this.initAfcToolsMap(e);return function(d,h,m){var g,v;return Ga(this,arguments,function*(){for(var T,w,I,b;a<r;){o&&(a++,o=!1);const P=yield Et(d.processParamsMaybeAddMcpUsage(m)),U=yield Et(d.generateContentStreamInternal(P)),S=[],M=[];try{for(var E=!0,A=(w=void 0,Uu(U)),R;R=yield Et(A.next()),T=R.done,!T;E=!0){b=R.value,E=!1;const C=b;if(yield yield Et(C),C.candidates&&(!((g=C.candidates[0])===null||g===void 0)&&g.content)){M.push(C.candidates[0].content);for(const k of(v=C.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<r&&k.functionCall){if(!k.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(k.functionCall.name)){const N=yield Et(h.get(k.functionCall.name).callTool([k.functionCall]));S.push(...N)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${k.functionCall.name}`)}}}}catch(C){w={error:C}}finally{try{!E&&!T&&(I=A.return)&&(yield Et(I.call(A)))}finally{if(w)throw w.error}}if(S.length>0){o=!0;const C=new lu;C.candidates=[{content:{role:"user",parts:S}}],yield yield Et(C);const k=[];k.push(...M),k.push({role:"user",parts:S});const N=Si(m.contents).concat(k);m.contents=N}else break}})}(this,c,e)}async generateContentInternal(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=kC(this.apiClient,e);return a=ve("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=LC(h),g=new lu;return Object.assign(g,m),g})}else{const d=RC(this.apiClient,e);return a=ve("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=NC(h),g=new lu;return Object.assign(g,m),g})}}async generateContentStreamInternal(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=kC(this.apiClient,e);return a=ve("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),o.then(function(m){return Ga(this,arguments,function*(){var g,v,T,w;try{for(var I=!0,b=Uu(m),E;E=yield Et(b.next()),g=E.done,!g;I=!0){w=E.value,I=!1;const A=w,R=LC(yield Et(A.json()));R.sdkHttpResponse={headers:A.headers};const P=new lu;Object.assign(P,R),yield yield Et(P)}}catch(A){v={error:A}}finally{try{!I&&!g&&(T=b.return)&&(yield Et(T.call(b)))}finally{if(v)throw v.error}}})})}else{const d=RC(this.apiClient,e);return a=ve("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return Ga(this,arguments,function*(){var g,v,T,w;try{for(var I=!0,b=Uu(m),E;E=yield Et(b.next()),g=E.done,!g;I=!0){w=E.value,I=!1;const A=w,R=NC(yield Et(A.json()));R.sdkHttpResponse={headers:A.headers};const P=new lu;Object.assign(P,R),yield yield Et(P)}}catch(A){v={error:A}}finally{try{!I&&!g&&(T=b.return)&&(yield Et(T.call(b)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=t6(this.apiClient,e);return a=ve("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=i6(h),g=new cC;return Object.assign(g,m),g})}else{const d=e6(this.apiClient,e);return a=ve("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=n6(h),g=new cC;return Object.assign(g,m),g})}}async generateImagesInternal(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=S6(this.apiClient,e);return a=ve("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=b6(h),g=new dC;return Object.assign(g,m),g})}else{const d=C6(this.apiClient,e);return a=ve("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=w6(h),g=new dC;return Object.assign(g,m),g})}}async editImageInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=J5(this.apiClient,e);return r=ve("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=Y5(c),h=new vV;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=WB(this.apiClient,e);return r=ve("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=QB(c),h=new _V;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=vB(this.apiClient,e);return r=ve("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s.then(c=>{const d=_B(c),h=new TV;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=RB(this.apiClient,e);return r=ve("{model}:predict",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s.then(c=>{const d=kB(c),h=new EV;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=z6(this.apiClient,e);return a=ve("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>Kg(h))}else{const d=j6(this.apiClient,e);return a=ve("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>$g(h))}}async listInternal(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=sB(this.apiClient,e);return a=ve("{models_url}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=oB(h),g=new fC;return Object.assign(g,m),g})}else{const d=iB(this.apiClient,e);return a=ve("{models_url}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=rB(h),g=new fC;return Object.assign(g,m),g})}}async update(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=JB(this.apiClient,e);return a=ve("{model}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>Kg(h))}else{const d=KB(this.apiClient,e);return a=ve("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>$g(h))}}async delete(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=z5(this.apiClient,e);return a=ve("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=H5(h),g=new hC;return Object.assign(g,m),g})}else{const d=j5(this.apiClient,e);return a=ve("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=q5(h),g=new hC;return Object.assign(g,m),g})}}async countTokens(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=O5(this.apiClient,e);return a=ve("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=F5(h),g=new pC;return Object.assign(g,m),g})}else{const d=U5(this.apiClient,e);return a=ve("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=B5(h),g=new pC;return Object.assign(g,m),g})}}async computeTokens(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=w5(this.apiClient,e);return r=ve("{model}:computeTokens",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>{const d=b5(c),h=new xV;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=N6(this.apiClient,e);return a=ve("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o.then(h=>{const m=R6(h),g=new Xf;return Object.assign(g,m),g})}else{const d=k6(this.apiClient,e);return a=ve("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>{const m=M6(h),g=new Xf;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jF extends Yo{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(e){const n=e.operation,i=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let r;i&&"httpOptions"in i&&(r=i.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:r}});return n._fromAPIResponse({apiResponse:o,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:i});return n._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=mV(e);return a=ve("{operationName}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),o}else{const d=pV(e);return a=ve("{operationName}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o}}async fetchPredictVideosOperationInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=aV(e);return r=ve("{resourceName}:fetchPredictOperation",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BC(){return{}}function zF(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["name"],n),e}function qF(t){const e={},n=l(t,["disabled"]);n!=null&&u(e,["disabled"],n);const i=l(t,["startOfSpeechSensitivity"]);i!=null&&u(e,["startOfSpeechSensitivity"],i);const s=l(t,["endOfSpeechSensitivity"]);s!=null&&u(e,["endOfSpeechSensitivity"],s);const r=l(t,["prefixPaddingMs"]);r!=null&&u(e,["prefixPaddingMs"],r);const o=l(t,["silenceDurationMs"]);return o!=null&&u(e,["silenceDurationMs"],o),e}function HF(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&u(e,["data"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function GF(t){const e={},n=l(t,["environment"]);n!=null&&u(e,["environment"],n);const i=l(t,["excludedPredefinedFunctions"]);return i!=null&&u(e,["excludedPredefinedFunctions"],i),e}function $F(t){const e={},n=l(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(r=>o9(r))),u(e,["parts"],s)}const i=l(t,["role"]);return i!=null&&u(e,["role"],i),e}function KF(t){const e={},n=l(t,["triggerTokens"]);n!=null&&u(e,["triggerTokens"],n);const i=l(t,["slidingWindow"]);return i!=null&&u(e,["slidingWindow"],d9(i)),e}function JF(t,e,n){const i={},s=l(e,["expireTime"]);n!==void 0&&s!=null&&u(n,["expireTime"],s);const r=l(e,["newSessionExpireTime"]);n!==void 0&&r!=null&&u(n,["newSessionExpireTime"],r);const o=l(e,["uses"]);n!==void 0&&o!=null&&u(n,["uses"],o);const a=l(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&u(n,["bidiGenerateContentSetup"],s9(t,a));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),i}function YF(t,e){const n={},i=l(e,["config"]);return i!=null&&u(n,["config"],JF(t,i,n)),n}function WF(t){const e={},n=l(t,["mode"]);n!=null&&u(e,["mode"],n);const i=l(t,["dynamicThreshold"]);return i!=null&&u(e,["dynamicThreshold"],i),e}function QF(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);const i=l(t,["mimeType"]);return i!=null&&u(e,["mimeType"],i),e}function ZF(t){const e={},n=l(t,["id"]);n!=null&&u(e,["id"],n);const i=l(t,["args"]);i!=null&&u(e,["args"],i);const s=l(t,["name"]);return s!=null&&u(e,["name"],s),e}function XF(t){const e={},n=l(t,["behavior"]);n!=null&&u(e,["behavior"],n);const i=l(t,["description"]);i!=null&&u(e,["description"],i);const s=l(t,["name"]);s!=null&&u(e,["name"],s);const r=l(t,["parameters"]);r!=null&&u(e,["parameters"],r);const o=l(t,["parametersJsonSchema"]);o!=null&&u(e,["parametersJsonSchema"],o);const a=l(t,["response"]);a!=null&&u(e,["response"],a);const c=l(t,["responseJsonSchema"]);return c!=null&&u(e,["responseJsonSchema"],c),e}function e9(t){const e={},n=l(t,["dynamicRetrievalConfig"]);return n!=null&&u(e,["dynamicRetrievalConfig"],WF(n)),e}function t9(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&u(e,["timeRangeFilter"],n9(n)),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function n9(t){const e={},n=l(t,["startTime"]);n!=null&&u(e,["startTime"],n);const i=l(t,["endTime"]);return i!=null&&u(e,["endTime"],i),e}function i9(t,e){const n={},i=l(t,["generationConfig"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig"],i);const s=l(t,["responseModalities"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","responseModalities"],s);const r=l(t,["temperature"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig","temperature"],r);const o=l(t,["topP"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig","topP"],o);const a=l(t,["topK"]);e!==void 0&&a!=null&&u(e,["setup","generationConfig","topK"],a);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);const h=l(t,["seed"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","seed"],h);const m=l(t,["speechConfig"]);e!==void 0&&m!=null&&u(e,["setup","generationConfig","speechConfig"],h9(jv(m)));const g=l(t,["thinkingConfig"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","thinkingConfig"],p9(g));const v=l(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],v);const T=l(t,["systemInstruction"]);e!==void 0&&T!=null&&u(e,["setup","systemInstruction"],$F(An(T)));const w=l(t,["tools"]);if(e!==void 0&&w!=null){let U=Il(w);Array.isArray(U)&&(U=U.map(S=>m9(Al(S)))),u(e,["setup","tools"],U)}const I=l(t,["sessionResumption"]);e!==void 0&&I!=null&&u(e,["setup","sessionResumption"],c9(I));const b=l(t,["inputAudioTranscription"]);e!==void 0&&b!=null&&u(e,["setup","inputAudioTranscription"],BC());const E=l(t,["outputAudioTranscription"]);e!==void 0&&E!=null&&u(e,["setup","outputAudioTranscription"],BC());const A=l(t,["realtimeInputConfig"]);e!==void 0&&A!=null&&u(e,["setup","realtimeInputConfig"],u9(A));const R=l(t,["contextWindowCompression"]);e!==void 0&&R!=null&&u(e,["setup","contextWindowCompression"],KF(R));const P=l(t,["proactivity"]);return e!==void 0&&P!=null&&u(e,["setup","proactivity"],l9(P)),n}function s9(t,e){const n={},i=l(e,["model"]);i!=null&&u(n,["setup","model"],et(t,i));const s=l(e,["config"]);return s!=null&&u(n,["config"],i9(s,n)),n}function r9(t){const e={},n=l(t,["speakerVoiceConfigs"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>f9(s))),u(e,["speakerVoiceConfigs"],i)}return e}function o9(t){const e={},n=l(t,["videoMetadata"]);n!=null&&u(e,["videoMetadata"],y9(n));const i=l(t,["thought"]);i!=null&&u(e,["thought"],i);const s=l(t,["inlineData"]);s!=null&&u(e,["inlineData"],HF(s));const r=l(t,["fileData"]);r!=null&&u(e,["fileData"],QF(r));const o=l(t,["thoughtSignature"]);o!=null&&u(e,["thoughtSignature"],o);const a=l(t,["functionCall"]);a!=null&&u(e,["functionCall"],ZF(a));const c=l(t,["codeExecutionResult"]);c!=null&&u(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&u(e,["executableCode"],d);const h=l(t,["functionResponse"]);h!=null&&u(e,["functionResponse"],h);const m=l(t,["text"]);return m!=null&&u(e,["text"],m),e}function a9(t){const e={},n=l(t,["voiceName"]);return n!=null&&u(e,["voiceName"],n),e}function l9(t){const e={},n=l(t,["proactiveAudio"]);return n!=null&&u(e,["proactiveAudio"],n),e}function u9(t){const e={},n=l(t,["automaticActivityDetection"]);n!=null&&u(e,["automaticActivityDetection"],qF(n));const i=l(t,["activityHandling"]);i!=null&&u(e,["activityHandling"],i);const s=l(t,["turnCoverage"]);return s!=null&&u(e,["turnCoverage"],s),e}function c9(t){const e={},n=l(t,["handle"]);if(n!=null&&u(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function d9(t){const e={},n=l(t,["targetTokens"]);return n!=null&&u(e,["targetTokens"],n),e}function f9(t){const e={},n=l(t,["speaker"]);n!=null&&u(e,["speaker"],n);const i=l(t,["voiceConfig"]);return i!=null&&u(e,["voiceConfig"],U1(i)),e}function h9(t){const e={},n=l(t,["voiceConfig"]);n!=null&&u(e,["voiceConfig"],U1(n));const i=l(t,["multiSpeakerVoiceConfig"]);i!=null&&u(e,["multiSpeakerVoiceConfig"],r9(i));const s=l(t,["languageCode"]);return s!=null&&u(e,["languageCode"],s),e}function p9(t){const e={},n=l(t,["includeThoughts"]);n!=null&&u(e,["includeThoughts"],n);const i=l(t,["thinkingBudget"]);return i!=null&&u(e,["thinkingBudget"],i),e}function m9(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let c=n;Array.isArray(c)&&(c=c.map(d=>XF(d))),u(e,["functionDeclarations"],c)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=l(t,["googleSearch"]);i!=null&&u(e,["googleSearch"],t9(i));const s=l(t,["googleSearchRetrieval"]);if(s!=null&&u(e,["googleSearchRetrieval"],e9(s)),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(l(t,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");l(t,["urlContext"])!=null&&u(e,["urlContext"],g9());const o=l(t,["computerUse"]);o!=null&&u(e,["computerUse"],GF(o));const a=l(t,["codeExecution"]);return a!=null&&u(e,["codeExecution"],a),e}function g9(){return{}}function y9(t){const e={},n=l(t,["fps"]);n!=null&&u(e,["fps"],n);const i=l(t,["endOffset"]);i!=null&&u(e,["endOffset"],i);const s=l(t,["startOffset"]);return s!=null&&u(e,["startOffset"],s),e}function U1(t){const e={},n=l(t,["prebuiltVoiceConfig"]);return n!=null&&u(e,["prebuiltVoiceConfig"],a9(n)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v9(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const i=t[n];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(r=>`${n}.${r}`);e.push(...s)}else e.push(n)}return e.join(",")}function _9(t,e){let n=null;const i=t.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const r=i.setup;typeof r=="object"&&r!==null?(t.bidiGenerateContentSetup=r,n=r):delete t.bidiGenerateContentSetup}else i!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const r=v9(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)r?t.fieldMask=r:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(d=>o.includes(d)?`generationConfig.${d}`:d));const c=[];r&&c.push(r),a.length>0&&c.push(...a),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class T9 extends Yo{constructor(e){super(),this.apiClient=e}async create(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=YF(this.apiClient,e);r=ve("auth_tokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const c=_9(a,e.config);return s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>zF(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function E9(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function x9(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function C9(t,e){const n={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=l(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&u(e,["displayName"],i),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=l(t,["epochCount"]);e!==void 0&&s!=null&&u(e,["tuningTask","hyperparameters","epochCount"],s);const r=l(t,["learningRateMultiplier"]);if(r!=null&&u(n,["tuningTask","hyperparameters","learningRateMultiplier"],r),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const o=l(t,["batchSize"]);e!==void 0&&o!=null&&u(e,["tuningTask","hyperparameters","batchSize"],o);const a=l(t,["learningRate"]);if(e!==void 0&&a!=null&&u(e,["tuningTask","hyperparameters","learningRate"],a),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function S9(t,e){const n={},i=l(t,["validationDataset"]);e!==void 0&&i!=null&&u(e,["supervisedTuningSpec"],z9(i,n));const s=l(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&u(e,["tunedModelDisplayName"],s);const r=l(t,["description"]);e!==void 0&&r!=null&&u(e,["description"],r);const o=l(t,["epochCount"]);e!==void 0&&o!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],o);const a=l(t,["learningRateMultiplier"]);e!==void 0&&a!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const c=l(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const d=l(t,["adapterSize"]);if(e!==void 0&&d!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const h=l(t,["labels"]);return e!==void 0&&h!=null&&u(e,["labels"],h),n}function w9(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const i=l(t,["preTunedModel"]);i!=null&&u(e,["preTunedModel"],i);const s=l(t,["trainingDataset"]);s!=null&&u(e,["tuningTask","trainingData"],O9(s));const r=l(t,["config"]);return r!=null&&C9(r,e),e}function b9(t){const e={},n=l(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);const i=l(t,["preTunedModel"]);i!=null&&u(e,["preTunedModel"],i);const s=l(t,["trainingDataset"]);s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],B9(s,e));const r=l(t,["config"]);return r!=null&&S9(r,e),e}function A9(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function I9(t){const e={},n=l(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function M9(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=l(t,["pageToken"]);e!==void 0&&s!=null&&u(e,["_query","pageToken"],s);const r=l(t,["filter"]);return e!==void 0&&r!=null&&u(e,["_query","filter"],r),n}function R9(t,e){const n={},i=l(t,["pageSize"]);e!==void 0&&i!=null&&u(e,["_query","pageSize"],i);const s=l(t,["pageToken"]);e!==void 0&&s!=null&&u(e,["_query","pageToken"],s);const r=l(t,["filter"]);return e!==void 0&&r!=null&&u(e,["_query","filter"],r),n}function k9(t){const e={},n=l(t,["config"]);return n!=null&&M9(n,e),e}function N9(t){const e={},n=l(t,["config"]);return n!=null&&R9(n,e),e}function L9(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=l(t,["tunedModels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>O1(o))),u(e,["tuningJobs"],r)}return e}function D9(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["nextPageToken"]);i!=null&&u(e,["nextPageToken"],i);const s=l(t,["tuningJobs"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>Yg(o))),u(e,["tuningJobs"],r)}return e}function P9(t){const e={},n=l(t,["checkpointId"]);n!=null&&u(e,["checkpointId"],n);const i=l(t,["epoch"]);i!=null&&u(e,["epoch"],i);const s=l(t,["step"]);s!=null&&u(e,["step"],s);const r=l(t,["endpoint"]);return r!=null&&u(e,["endpoint"],r),e}function V9(t){const e={},n=l(t,["name"]);n!=null&&u(e,["model"],n);const i=l(t,["name"]);return i!=null&&u(e,["endpoint"],i),e}function U9(t){const e={},n=l(t,["model"]);n!=null&&u(e,["model"],n);const i=l(t,["endpoint"]);i!=null&&u(e,["endpoint"],i);const s=l(t,["checkpoints"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(o=>P9(o))),u(e,["checkpoints"],r)}return e}function O9(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=l(t,["examples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>F9(s))),u(e,["examples","examples"],i)}return e}function B9(t,e){const n={},i=l(t,["gcsUri"]);e!==void 0&&i!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],i);const s=l(t,["vertexDatasetResource"]);if(e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s),l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function F9(t){const e={},n=l(t,["textInput"]);n!=null&&u(e,["textInput"],n);const i=l(t,["output"]);return i!=null&&u(e,["output"],i),e}function O1(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const s=l(t,["state"]);s!=null&&u(e,["state"],c1(s));const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const o=l(t,["tuningTask","startTime"]);o!=null&&u(e,["startTime"],o);const a=l(t,["tuningTask","completeTime"]);a!=null&&u(e,["endTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const d=l(t,["description"]);d!=null&&u(e,["description"],d);const h=l(t,["baseModel"]);h!=null&&u(e,["baseModel"],h);const m=l(t,["_self"]);m!=null&&u(e,["tunedModel"],V9(m));const g=l(t,["customBaseModel"]);g!=null&&u(e,["customBaseModel"],g);const v=l(t,["experiment"]);v!=null&&u(e,["experiment"],v);const T=l(t,["labels"]);T!=null&&u(e,["labels"],T);const w=l(t,["outputUri"]);w!=null&&u(e,["outputUri"],w);const I=l(t,["pipelineJob"]);I!=null&&u(e,["pipelineJob"],I);const b=l(t,["serviceAccount"]);b!=null&&u(e,["serviceAccount"],b);const E=l(t,["tunedModelDisplayName"]);E!=null&&u(e,["tunedModelDisplayName"],E);const A=l(t,["veoTuningSpec"]);return A!=null&&u(e,["veoTuningSpec"],A),e}function Yg(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const s=l(t,["state"]);s!=null&&u(e,["state"],c1(s));const r=l(t,["createTime"]);r!=null&&u(e,["createTime"],r);const o=l(t,["startTime"]);o!=null&&u(e,["startTime"],o);const a=l(t,["endTime"]);a!=null&&u(e,["endTime"],a);const c=l(t,["updateTime"]);c!=null&&u(e,["updateTime"],c);const d=l(t,["error"]);d!=null&&u(e,["error"],d);const h=l(t,["description"]);h!=null&&u(e,["description"],h);const m=l(t,["baseModel"]);m!=null&&u(e,["baseModel"],m);const g=l(t,["tunedModel"]);g!=null&&u(e,["tunedModel"],U9(g));const v=l(t,["preTunedModel"]);v!=null&&u(e,["preTunedModel"],v);const T=l(t,["supervisedTuningSpec"]);T!=null&&u(e,["supervisedTuningSpec"],T);const w=l(t,["tuningDataStats"]);w!=null&&u(e,["tuningDataStats"],w);const I=l(t,["encryptionSpec"]);I!=null&&u(e,["encryptionSpec"],I);const b=l(t,["partnerModelTuningSpec"]);b!=null&&u(e,["partnerModelTuningSpec"],b);const E=l(t,["customBaseModel"]);E!=null&&u(e,["customBaseModel"],E);const A=l(t,["experiment"]);A!=null&&u(e,["experiment"],A);const R=l(t,["labels"]);R!=null&&u(e,["labels"],R);const P=l(t,["outputUri"]);P!=null&&u(e,["outputUri"],P);const U=l(t,["pipelineJob"]);U!=null&&u(e,["pipelineJob"],U);const S=l(t,["serviceAccount"]);S!=null&&u(e,["serviceAccount"],S);const M=l(t,["tunedModelDisplayName"]);M!=null&&u(e,["tunedModelDisplayName"],M);const C=l(t,["veoTuningSpec"]);return C!=null&&u(e,["veoTuningSpec"],C),e}function j9(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);const i=l(t,["name"]);i!=null&&u(e,["name"],i);const s=l(t,["metadata"]);s!=null&&u(e,["metadata"],s);const r=l(t,["done"]);r!=null&&u(e,["done"],r);const o=l(t,["error"]);return o!=null&&u(e,["error"],o),e}function z9(t,e){const n={},i=l(t,["gcsUri"]);i!=null&&u(n,["validationDatasetUri"],i);const s=l(t,["vertexDatasetResource"]);return e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class q9 extends Yo{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new kc(Vo.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(n),n),this.tune=async n=>{var i;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((i=n.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const r=Object.assign(Object.assign({},n),{preTunedModel:s});return r.baseModel=void 0,await this.tuneInternal(r)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),r=await this.tuneMldevInternal(s);let o="";return r.metadata!==void 0&&r.metadata.tunedModel!==void 0?o=r.metadata.tunedModel:r.name!==void 0&&r.name.includes("/operations/")&&(o=r.name.split("/operations/")[0]),{name:o,state:Fg.JOB_STATE_QUEUED}}}}async getInternal(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=I9(e);return a=ve("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>Yg(h))}else{const d=A9(e);return a=ve("{name}",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>O1(h))}}async listInternal(e){var n,i,s,r;let o,a="",c={};if(this.apiClient.isVertexAI()){const d=N9(e);return a=ve("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=D9(h),g=new mC;return Object.assign(g,m),g})}else{const d=k9(e);return a=ve("tunedModels",d._url),c=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:a,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=L9(h),g=new mC;return Object.assign(g,m),g})}}async cancel(e){var n,i,s,r;let o="",a={};if(this.apiClient.isVertexAI()){const c=x9(e);o=ve("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=E9(e);o=ve("{name}:cancel",c._url),a=c._query,delete c._url,delete c._query,await this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async tuneInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=b9(e);return r=ve("tuningJobs",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>Yg(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,i;let s,r="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=w9(e);return r=ve("tunedModels",a._url),o=a._query,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:c.headers},h})),s.then(c=>j9(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H9{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const G9=1024*1024*8,$9=3,K9=1e3,J9=2,Cm="x-goog-upload-status";async function Y9(t,e,n){var i,s,r;let o=0,a=0,c=new jg(new Response),d="upload";for(o=t.size;a<o;){const m=Math.min(G9,o-a),g=t.slice(a,a+m);a+m>=o&&(d+=", finalize");let v=0,T=K9;for(;v<$9&&(c=await n.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(a),"Content-Length":String(m)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[Cm]));)v++,await Q9(T),T=T*J9;if(a+=m,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[Cm])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(c==null?void 0:c.json());if(((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[Cm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function W9(t){return{size:t.size,type:t.type}}function Q9(t){return new Promise(e=>setTimeout(e,t))}class Z9{async upload(e,n,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Y9(e,n,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await W9(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class X9{create(e,n,i){return new ej(e,n,i)}}class ej{constructor(e,n,i){this.url=e,this.headers=n,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const FC="x-goog-api-key";class tj{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(FC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(FC,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nj="gl-node/";class ij{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const i=oV(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const s=new tj(this.apiKey);this.apiClient=new TF({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:nj+"web",uploader:new Z9,downloader:new H9}),this.models=new FF(this.apiClient),this.live=new LF(this.apiClient,s,new X9),this.batches=new Z4(this.apiClient),this.chats=new oO(this.models,this.apiClient),this.caches=new iO(this.apiClient),this.files=new _O(this.apiClient),this.operations=new jF(this.apiClient),this.authTokens=new T9(this.apiClient),this.tunings=new q9(this.apiClient)}}const sj=t=>"",Hv=sj();console.log("[DIAGNOSTIC] Attempting to initialize Gemini with import.meta.env.VITE_GEMINI_API_KEY:",Hv?"key_found":"key_not_found");Hv||console.error("Gemini API Key is missing from the environment! Please ensure the VITE_GEMINI_API_KEY is set.");const rj=new ij({apiKey:Hv}),oj=async(t,e,n)=>{var s;const i=`
    Create a friendly and engaging adventure description for a travel and housing app.
    The description should be inviting and clear. Do not use hashtags.
    Keep it concise, around 2-3 sentences.
    Base the description on the provided details.

    Adventure Type: "${n}"
    Adventure Title: "${t}"
    Keywords: "${e}"

    Generated Description:
  `;try{return((s=(await rj.models.generateContent({model:"gemini-2.5-flash",contents:i})).text)==null?void 0:s.trim())||"There was an error generating the description. Please try again."}catch(r){return console.error("Error generating description with Gemini:",r),"There was an error generating the description. Please try again."}},aj=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),f.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),f.jsx("polyline",{points:"21 15 16 10 5 21"})]}),Gv=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),f.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),bd=({label:t,value:e,onValueChange:n,onCoordsChange:i,onOpenMap:s,isLoaded:r})=>{const{t:o}=Be(),a=y.useRef(null),c=y.useCallback(h=>{a.current=h},[]),d=()=>{var m,g;const h=(m=a.current)==null?void 0:m.getPlaces();if(h&&h.length>0){const v=h[0];n(v.formatted_address||v.name||""),(g=v.geometry)!=null&&g.location&&i({lat:v.geometry.location.lat(),lng:v.geometry.location.lng()})}};return f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:t}),f.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[f.jsx("div",{className:"relative flex-grow",children:r?f.jsx(Kh,{onLoad:c,onPlacesChanged:d,children:f.jsx("input",{type:"text",placeholder:o("searchForLocation"),defaultValue:e,onChange:h=>n(h.target.value),className:"w-full text-left p-2 border border-gray-200 dark:border-zinc-700 rounded-lg bg-slate-50 dark:bg-zinc-800"})}):f.jsx("input",{type:"text",value:o("loading"),className:"w-full p-2 border rounded-lg bg-slate-200",disabled:!0})}),f.jsx("button",{onClick:s,className:"p-2.5 bg-gray-200 dark:bg-zinc-700 rounded-lg","aria-label":o("selectOnMap"),children:f.jsx(Gv,{className:"w-5 h-5"})})]})]})},lj=({currentUser:t,onCreateAdventure:e,isLoaded:n})=>{const[i,s]=y.useState(ue.Travel),[r,o]=y.useState(At.Public),[a,c]=y.useState(At.Public),[d,h]=y.useState(""),[m,g]=y.useState(""),[v,T]=y.useState(null),[w,I]=y.useState(null),[b,E]=y.useState(!1),[A,R]=y.useState(""),[P,U]=y.useState(!1),[S,M]=y.useState("point"),[C,k]=y.useState(""),[N,V]=y.useState(null),[L,$]=y.useState(""),[Z,j]=y.useState(""),[ee,q]=y.useState(""),[X,ie]=y.useState(""),[te,ce]=y.useState(""),[ne,fe]=y.useState([{location:"",coordinates:null}]),[F,Re]=y.useState(""),[se,_e]=y.useState(null),[Ue,pe]=y.useState("location"),Ee=y.useRef(null),{t:he}=Be(),pt=ae=>{var Ut;const qe=(Ut=ae.target.files)==null?void 0:Ut[0];if(qe){T(qe);const vt=URL.createObjectURL(qe),Ui=qe.type.startsWith("video")?"video":"image";I({url:vt,type:Ui})}},Vt=(ae,qe="point")=>{pe(ae),M(qe),E(!0)},Pe=(ae,qe)=>{if(Ue==="location")k(ae),V(qe);else if(Ue==="startPoint")k(ae),V(qe);else if(Ue.startsWith("destination_")){const Ut=parseInt(Ue.split("_")[1],10),vt=[...ne];vt[Ut]={location:ae,coordinates:qe},fe(vt)}E(!1)},ye=(ae,qe)=>{k(ae.address),V(ae.coords),Re(qe.address),_e(qe.coords),E(!1)},Je=async()=>{if(!d&&!A){alert("Please enter a title or some keywords first.");return}U(!0);try{const ae=await oj(d,A,i);g(ae)}catch(ae){console.error(ae),alert("Failed to generate description.")}finally{U(!1)}},Rt=()=>{if(!d||!m||!L){alert("Please fill in all required fields: title, description, and start date.");return}const ae={type:i,privacy:r,title:d,description:m,startDate:L,budget:parseInt(ee,10)||0};switch(r===At.Twins&&(ae.subPrivacy=a),Z&&(ae.endDate=Z),i){case ue.Travel:ae.location=C,ae.coordinates=N,ae.destinations=ne.filter(qe=>qe.location&&qe.coordinates);break;case ue.Hiking:case ue.Cycling:ae.location=C,ae.coordinates=N,ae.endLocation=F,ae.endCoordinates=se;break;case ue.Event:ae.location=C,ae.coordinates=N,ae.eventCategory=X==="Other"?te:X;break;default:ae.location=C,ae.coordinates=N;break}e(ae,v)},Le=()=>{fe([...ne,{location:"",coordinates:null}])},Q=Object.values(ue),We="w-full p-2 border border-gray-200 dark:border-zinc-700 rounded-lg bg-slate-50 dark:bg-zinc-800 focus:ring-brand-orange focus:border-brand-orange",En="px-2 py-1 rounded-full text-xs font-semibold",xn=()=>{switch(i){case ue.Travel:return f.jsxs("div",{className:"space-y-4",children:[f.jsx(bd,{label:he("fromLocation"),value:C,onValueChange:k,onCoordsChange:V,onOpenMap:()=>Vt("startPoint"),isLoaded:n}),ne.map((ae,qe)=>f.jsx("div",{children:f.jsx(bd,{label:`${he("yourDestination")} #${qe+1}`,value:ae.location,onValueChange:Ut=>{const vt=[...ne];vt[qe].location=Ut,fe(vt)},onCoordsChange:Ut=>{const vt=[...ne];vt[qe].coordinates=Ut,fe(vt)},onOpenMap:()=>Vt(`destination_${qe}`),isLoaded:n})},qe)),f.jsx("button",{onClick:Le,className:"text-sm font-semibold text-brand-orange hover:text-brand-orange-light",children:he("addDestination")})]});case ue.Hiking:case ue.Cycling:return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-zinc-800 rounded-lg",children:[f.jsxs("p",{className:"font-semibold",children:[he("startPoint"),": ",f.jsx("span",{className:"font-normal text-gray-600 dark:text-gray-300",children:C||"Not set"})]}),f.jsxs("p",{className:"font-semibold",children:[he("endPoint"),": ",f.jsx("span",{className:"font-normal text-gray-600 dark:text-gray-300",children:F||"Not set"})]})]}),f.jsx("button",{onClick:()=>Vt("route","route"),className:"w-full text-center p-2 border border-dashed border-gray-400 dark:border-zinc-600 rounded-lg bg-transparent hover:bg-slate-50 dark:hover:bg-zinc-800",children:he("drawRouteOnMap")})]});case ue.Event:return f.jsxs("div",{className:"space-y-4",children:[f.jsx(bd,{label:he("location"),value:C,onValueChange:k,onCoordsChange:V,onOpenMap:()=>Vt("location"),isLoaded:n}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:he("eventCategory")}),f.jsxs("select",{value:X,onChange:ae=>ie(ae.target.value),className:`${We} mt-2`,children:[f.jsx("option",{value:"",children:he("selectCategory")}),f.jsx("option",{value:"Music",children:he("categoryMusic")}),f.jsx("option",{value:"Art",children:he("categoryArt")}),f.jsx("option",{value:"Food",children:he("categoryFood")}),f.jsx("option",{value:"Sports",children:he("categorySports")}),f.jsx("option",{value:"Tech",children:he("categoryTech")}),f.jsx("option",{value:"Community",children:he("categoryCommunity")}),f.jsx("option",{value:"Other",children:he("categoryOther")})]})]}),X==="Other"&&f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:he("otherCategory")}),f.jsx("input",{type:"text",value:te,onChange:ae=>ce(ae.target.value),className:`${We} mt-2`})]})]});default:return f.jsx(bd,{label:he("location"),value:C,onValueChange:k,onCoordsChange:V,onOpenMap:()=>Vt("location"),isLoaded:n})}};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"p-2 sm:p-4 space-y-4",children:[f.jsx("h1",{className:"text-2xl font-bold px-2 text-gray-800 dark:text-gray-100",children:he("createANewAdventure")}),f.jsxs("div",{className:"bg-light-bg-secondary/70 dark:bg-dark-bg-secondary/70 backdrop-blur-sm rounded-3xl shadow-lg shadow-black/[.02] dark:shadow-black/[.05]",children:[f.jsxs("div",{className:"p-4 flex items-center space-x-3",children:[f.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-10 h-10 rounded-full flex-shrink-0"}),f.jsxs("div",{className:"flex-grow",children:[f.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:t.name}),f.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-400",children:[f.jsxs("select",{value:r,onChange:ae=>o(ae.target.value),className:"bg-transparent border-none p-0 focus:ring-0",children:[f.jsx("option",{value:At.Public,children:he("AdventurePrivacy_Public")}),f.jsx("option",{value:At.Followers,children:he("AdventurePrivacy_Followers")}),f.jsx("option",{value:At.Twins,children:he("AdventurePrivacy_Twins")})]}),r===At.Twins&&f.jsxs(f.Fragment,{children:[f.jsx("span",{children:"+"}),f.jsxs("select",{value:a,onChange:ae=>c(ae.target.value),className:"bg-transparent border-none p-0 focus:ring-0",children:[f.jsx("option",{value:At.Public,children:he("AdventurePrivacy_Public")}),f.jsx("option",{value:At.Followers,children:he("AdventurePrivacy_Followers")})]})]})]})]})]}),f.jsxs("div",{className:"px-4 space-y-2",children:[f.jsx("input",{type:"text",placeholder:he("title"),value:d,onChange:ae=>h(ae.target.value),className:"text-lg font-bold w-full bg-transparent border-none p-0 focus:ring-0 text-gray-900 dark:text-white placeholder:text-gray-400 dark:placeholder:text-gray-500"}),f.jsx("textarea",{placeholder:he("description"),value:m,onChange:ae=>g(ae.target.value),rows:3,className:"text-sm w-full bg-transparent border-none p-0 focus:ring-0 text-gray-700 dark:text-gray-300 placeholder:text-gray-400 dark:placeholder:text-gray-500 resize-none"}),f.jsxs("div",{className:"p-2 bg-slate-100 dark:bg-zinc-800 rounded-lg space-y-2",children:[f.jsx("label",{htmlFor:"keywords",className:"text-xs font-semibold text-gray-500 dark:text-gray-400",children:he("aiDescriptionHelper")}),f.jsxs("div",{className:"flex space-x-2",children:[f.jsx("input",{id:"keywords",type:"text",placeholder:he("keywords"),value:A,onChange:ae=>R(ae.target.value),className:"flex-grow text-sm bg-white dark:bg-zinc-900 rounded-md px-2 py-1 border-gray-300 dark:border-zinc-700 focus:ring-1 focus:ring-brand-orange"}),f.jsx("button",{onClick:Je,disabled:P,className:"text-sm bg-brand-orange text-white px-3 py-1 rounded-md font-semibold disabled:bg-brand-orange-light",children:he(P?"generating":"generateWithAI")})]})]})]}),f.jsxs("div",{className:"p-4",children:[f.jsx("input",{type:"file",ref:Ee,onChange:pt,accept:"image/*,video/*",className:"hidden"}),f.jsx("button",{onClick:()=>{var ae;return(ae=Ee.current)==null?void 0:ae.click()},className:"w-full aspect-video bg-slate-100 dark:bg-zinc-800 rounded-2xl flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 border-2 border-dashed border-gray-300 dark:border-zinc-700 hover:border-brand-orange transition-colors",children:w?f.jsx("div",{className:"w-full h-full relative",children:w.type==="image"?f.jsx("img",{src:w.url,alt:"Preview",className:"w-full h-full object-cover rounded-2xl"}):f.jsx("video",{src:w.url,className:"w-full h-full object-cover rounded-2xl",playsInline:!0,muted:!0,loop:!0})}):f.jsxs(f.Fragment,{children:[f.jsx(aj,{className:"w-8 h-8 mb-2"}),f.jsx("span",{className:"font-semibold",children:he("addMedia")})]})})]}),f.jsxs("div",{className:"p-4 space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:he("adventureType")}),f.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Q.map(ae=>f.jsx("button",{onClick:()=>s(ae),className:`${En} ${i===ae?"bg-brand-orange text-white":"bg-slate-200 dark:bg-zinc-700 text-gray-700 dark:text-gray-300"}`,children:he(`AdventureType_${ae}`)},ae))})]}),xn(),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:he("startDate")}),f.jsx("input",{type:"date",value:L,onChange:ae=>$(ae.target.value),className:`${We} mt-2 text-gray-500`})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:he("endDate")}),f.jsx("input",{type:"date",value:Z,onChange:ae=>j(ae.target.value),className:`${We} mt-2 text-gray-500`})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:he("budget")}),f.jsx("input",{type:"number",value:ee,onChange:ae=>q(ae.target.value),className:`${We} mt-2`,placeholder:"0"})]})]})]}),f.jsx("button",{onClick:Rt,className:"w-full bg-brand-orange text-white font-bold py-4 rounded-2xl hover:bg-brand-orange-light transition-colors text-lg",children:he("publishAdventure")})]}),n&&f.jsx(s1,{isOpen:b,onClose:()=>E(!1),onLocationSelect:Pe,onRouteSelect:ye,mode:S})]})},B1=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("polyline",{points:"15 18 9 12 15 6"})}),di=({title:t,onBack:e,rightAction:n,avatarUrl:i,onTitleClick:s})=>{const r=e||t||i;return f.jsxs("div",{className:"sticky top-0 z-40 h-16 w-full p-3 flex items-center justify-between pointer-events-none",children:[r?f.jsxs("div",{className:"p-1 bg-light-bg-secondary/80 dark:bg-dark-bg-secondary/80 rounded-full backdrop-blur-lg shadow-md pointer-events-auto flex items-center space-x-2",children:[e&&f.jsx("button",{onClick:e,className:"p-2 text-gray-600 dark:text-gray-300 hover:bg-slate-200 dark:hover:bg-zinc-700 rounded-full flex-shrink-0",children:f.jsx(B1,{})}),i&&f.jsx("button",{onClick:s,disabled:!s,className:"flex-shrink-0 disabled:cursor-default",children:f.jsx("img",{src:i,alt:"avatar",className:"w-8 h-8 rounded-full"})}),t&&f.jsx("h1",{className:"font-semibold text-gray-800 dark:text-gray-100 truncate pr-3",children:t})]}):f.jsx("div",{}),n&&f.jsx("div",{className:"p-1 bg-light-bg-secondary/80 dark:bg-dark-bg-secondary/80 rounded-full backdrop-blur-lg shadow-md pointer-events-auto",children:n})]})},uj=({conversations:t,onSelectConversation:e,onBack:n,currentUser:i,onViewProfile:s})=>{const{t:r}=Be(),[o,a]=y.useState("adventurers"),c=t.filter(g=>g.type==="private"),d=t.filter(g=>g.type==="group"),h=({id:g,label:v})=>{const T=o===g;return f.jsx("button",{onClick:()=>a(g),className:`flex-1 py-3 text-sm font-semibold border-b-2 transition-colors ${T?"border-orange-500 text-orange-500":"border-transparent text-gray-500 hover:text-orange-500"}`,children:v})},m=g=>g.length===0?f.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:"No conversations yet."}):f.jsx("div",{className:"p-2 space-y-2",children:g.map(v=>{var E,A;const T=((E=v.unreadCount)==null?void 0:E[i.id])||0,w=v.participant,I=v.type==="private"?(w==null?void 0:w.name)||r("loading"):v.name,b=v.type==="private"?(w==null?void 0:w.avatarUrl)||`https://picsum.photos/seed/${v.id}/200`:v.imageUrl;return f.jsxs("div",{onClick:()=>e(v),className:"p-4 rounded-2xl bg-light-bg-secondary/70 dark:bg-dark-bg-secondary/70 backdrop-blur-sm flex items-center space-x-4 hover:bg-light-bg-secondary dark:hover:bg-dark-bg-secondary cursor-pointer transition-colors",children:[f.jsx("button",{onClick:R=>{R.stopPropagation(),w&&s(w)},className:"flex-shrink-0",children:f.jsx("img",{src:b,alt:I,className:"w-12 h-12 rounded-full object-cover"})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100 truncate",children:I}),((A=v.lastMessage)==null?void 0:A.createdAt)&&f.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 flex-shrink-0",children:new Date(v.lastMessage.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),f.jsxs("div",{className:"flex items-center justify-between mt-1",children:[v.lastMessage&&f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:v.lastMessage.text}),T>0&&f.jsx("span",{className:"ms-2 flex-shrink-0 bg-orange-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:T})]})]})]},v.id)})});return f.jsxs(f.Fragment,{children:[f.jsx(di,{title:r("messages"),onBack:n}),f.jsxs("div",{className:"border-b dark:border-neutral-800/50 flex bg-light-bg-secondary/70 dark:bg-dark-bg-secondary/70 backdrop-blur-sm sticky top-0 z-30",children:[f.jsx(h,{id:"adventurers",label:r("adventurers")}),f.jsx(h,{id:"adventures",label:r("adventures")})]}),m(o==="adventurers"?c:d)]})},F1=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),j1=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),f.jsx("line",{x1:"18",y1:"20",x2:"18",y2:"4"}),f.jsx("line",{x1:"6",y1:"20",x2:"6",y2:"16"})]}),Wg={Afghanistan:"AF",Albania:"AL",Algeria:"DZ",Andorra:"AD",Angola:"AO",Argentina:"AR",Armenia:"AM",Australia:"AU",Austria:"AT",Azerbaijan:"AZ",Bahamas:"BS",Bahrain:"BH",Bangladesh:"BD",Barbados:"BB",Belarus:"BY",Belgium:"BE",Belize:"BZ",Benin:"BJ",Bhutan:"BT",Bolivia:"BO","Bosnia and Herzegovina":"BA",Botswana:"BW",Brazil:"BR",Brunei:"BN",Bulgaria:"BG","Burkina Faso":"BF",Burundi:"BI",Cambodia:"KH",Cameroon:"CM",Canada:"CA","Cape Verde":"CV","Central African Republic":"CF",Chad:"TD",Chile:"CL",China:"CN",Colombia:"CO",Comoros:"KM",Congo:"CG","Costa Rica":"CR",Croatia:"HR",Cuba:"CU",Cyprus:"CY","Czech Republic":"CZ",Denmark:"DK",Djibouti:"DJ",Dominica:"DM","Dominican Republic":"DO",Ecuador:"EC",Egypt:"EG","El Salvador":"SV","Equatorial Guinea":"GQ",Eritrea:"ER",Estonia:"EE",Eswatini:"SZ",Ethiopia:"ET",Fiji:"FJ",Finland:"FI",France:"FR",Gabon:"GA",Gambia:"GM",Georgia:"GE",Germany:"DE",Ghana:"GH",Greece:"GR",Grenada:"GD",Guatemala:"GT",Guinea:"GN","Guinea-Bissau":"GW",Guyana:"GY",Haiti:"HT",Honduras:"HN",Hungary:"HU",Iceland:"IS",India:"IN",Indonesia:"ID",Iran:"IR",Iraq:"IQ",Ireland:"IE",Israel:"IL",Italy:"IT",Jamaica:"JM",Japan:"JP",Jordan:"JO",Kazakhstan:"KZ",Kenya:"KE",Kiribati:"KI",Kuwait:"KW",Kyrgyzstan:"KG",Laos:"LA",Latvia:"LV",Lebanon:"LB",Lesotho:"LS",Liberia:"LR",Libya:"LY",Liechtenstein:"LI",Lithuania:"LT",Luxembourg:"LU",Madagascar:"MG",Malawi:"MW",Malaysia:"MY",Maldives:"MV",Mali:"ML",Malta:"MT","Marshall Islands":"MH",Mauritania:"MR",Mauritius:"MU",Mexico:"MX",Micronesia:"FM",Moldova:"MD",Monaco:"MC",Mongolia:"MN",Montenegro:"ME",Morocco:"MA",Mozambique:"MZ",Myanmar:"MM",Namibia:"NA",Nauru:"NR",Nepal:"NP",Netherlands:"NL","New Zealand":"NZ",Nicaragua:"NI",Niger:"NE",Nigeria:"NG","North Korea":"KP","North Macedonia":"MK",Norway:"NO",Oman:"OM",Pakistan:"PK",Palau:"PW",Palestine:"PS",Panama:"PA","Papua New Guinea":"PG",Paraguay:"PY",Peru:"PE",Philippines:"PH",Poland:"PL",Portugal:"PT",Qatar:"QA",Romania:"RO",Russia:"RU",Rwanda:"RW","Saint Kitts and Nevis":"KN","Saint Lucia":"LC","Saint Vincent and the Grenadines":"VC",Samoa:"WS","San Marino":"SM","Sao Tome and Principe":"ST","Saudi Arabia":"SA",Senegal:"SN",Serbia:"RS",Seychelles:"SC","Sierra Leone":"SL",Singapore:"SG",Slovakia:"SK",Slovenia:"SI","Solomon Islands":"SB",Somalia:"SO","South Africa":"ZA","South Korea":"KR","South Sudan":"SS",Spain:"ES","Sri Lanka":"LK",Sudan:"SD",Suriname:"SR",Sweden:"SE",Switzerland:"CH",Syria:"SY",Taiwan:"TW",Tajikistan:"TJ",Tanzania:"TZ",Thailand:"TH","Timor-Leste":"TL",Togo:"TG",Tonga:"TO","Trinidad and Tobago":"TT",Tunisia:"TN",Turkey:"TR",Turkmenistan:"TM",Tuvalu:"TV",Uganda:"UG",Ukraine:"UA","United Arab Emirates":"AE",UAE:"AE","United Kingdom":"GB",UK:"GB","United States":"US",USA:"US",Uruguay:"UY",Uzbekistan:"UZ",Vanuatu:"VU","Vatican City":"VA",Venezuela:"VE",Vietnam:"VN",Yemen:"YE",Zambia:"ZM",Zimbabwe:"ZW"},cj=t=>{const e=t.split(",").map(i=>i.trim()),n=e[e.length-1];for(const i in Wg)if(n.toLowerCase()===i.toLowerCase())return i;for(const i in Wg)if(n.toLowerCase().includes(i.toLowerCase()))return i;return null},th=t=>{const e=Wg[t];return e?`https://flagcdn.com/w40/${e.toLowerCase()}.png`:null},dj={[ue.Hiking]:f.jsx(Mv,{}),[ue.Camping]:f.jsx(Rv,{}),[ue.Cycling]:f.jsx(kv,{}),[ue.Volunteering]:f.jsx($h,{}),[ue.Event]:f.jsx(Iv,{}),[ue.Travel]:f.jsx(Av,{})},z1=({user:t,allAdventures:e,onViewCompletedByType:n})=>{const{t:i}=Be(),s=y.useMemo(()=>{const c=new Set((t.activityLog||[]).filter(g=>g.status===Wi.Confirmed).map(g=>g.adventureId)),d=e.filter(g=>c.has(g.id)),h=new Set;t.country&&h.add(t.country),d.forEach(g=>{const v=cj(g.location);v&&h.add(v)});const m=d.reduce((g,v)=>(g[v.type]=(g[v.type]||0)+1,g),{});return{totalCompleted:d.length,countriesVisited:Array.from(h).sort(),activityCounts:m}},[t,e]),r=({title:c,children:d})=>f.jsxs("div",{className:"bg-white dark:bg-neutral-900 border border-gray-200 dark:border-neutral-800 rounded-lg shadow-sm p-4",children:[f.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-3",children:c}),d]}),o=({type:c,count:d,onClick:h})=>f.jsxs("button",{onClick:h,className:"bg-slate-100 dark:bg-neutral-800/50 rounded-lg p-3 flex flex-col items-center justify-center text-center hover:bg-slate-200 dark:hover:bg-neutral-700 transition-colors",children:[f.jsx("div",{className:"text-orange-500 mb-1 w-6 h-6",children:dj[c]}),f.jsx("p",{className:"font-bold text-xl text-gray-800 dark:text-gray-100",children:d}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:i(`AdventureType_${c}`)})]}),a=t.country?th(t.country):null;return f.jsxs("div",{className:"p-4 space-y-4",children:[t.country&&f.jsx(r,{title:i("homeCountry"),children:f.jsxs("div",{className:"flex items-center space-x-3",children:[a&&f.jsx("img",{src:a,alt:t.country,className:"w-10 h-auto rounded-sm shadow-md"}),f.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-200",children:t.country})]})}),f.jsx(r,{title:i("countriesVisited"),children:s.countriesVisited.length>0?f.jsx("div",{className:"flex flex-wrap gap-3",children:s.countriesVisited.map(c=>{const d=th(c);return d?f.jsx("img",{src:d,alt:c,title:c,className:"w-10 h-auto rounded-sm shadow-md object-cover"},c):null})}):f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i("noCountries")})}),f.jsx(r,{title:i("activityBreakdown"),children:Object.keys(s.activityCounts).length>0?f.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:Object.entries(s.activityCounts).map(([c,d])=>f.jsx(o,{type:c,count:d,onClick:()=>n(c)},c))}):f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:i("noActivities")})})]})},fj=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("circle",{cx:"12",cy:"12",r:"3"}),f.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),hj=({user:t,allAdventures:e,onSelectAdventure:n,onSendMessage:i,onToggleInterest:s,onViewProfile:r,onRepostToggle:o,onSaveToggle:a,onShareProfile:c,onShareAdventure:d,onToggleCompleted:h,onOpenFollowList:m,onNavigateToSettings:g,onViewLocationOnMap:v,onDeleteAdventure:T,onEditAdventure:w,onJoinGroupChat:I,onViewCompletedByType:b,activeTab:E,setActiveTab:A})=>{const{t:R}=Be(),P=f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("button",{onClick:()=>c(t),className:"p-2 text-gray-600 dark:text-gray-300 hover:text-orange-600 dark:hover:text-orange-400",children:f.jsx(bv,{})}),f.jsx("button",{onClick:g,className:"p-2 text-gray-600 dark:text-gray-300 hover:text-orange-600 dark:hover:text-orange-400",children:f.jsx(fj,{})})]}),{userAdventures:U,savedAdventures:S,repostedAdventures:M,completedAdventures:C}=y.useMemo(()=>{const $=e.filter(q=>q.author.id===t.id),Z=e.filter(q=>(t.savedAdventures||[]).includes(q.id)),j=e.filter(q=>(t.repostedAdventures||[]).includes(q.id)),ee=e.filter(q=>(t.activityLog||[]).some(X=>X.adventureId===q.id&&X.status===Wi.Confirmed));return{userAdventures:$,savedAdventures:Z,repostedAdventures:j,completedAdventures:ee}},[e,t]),k=y.useMemo(()=>E==="saved"?S:E==="reposts"?M:E==="completed"?C:U,[E,U,S,M,C]),N=({tab:$,icon:Z})=>{const j=E===$;return f.jsx("button",{onClick:()=>A($),className:`flex-1 py-3 flex justify-center items-center border-b-2 transition-colors duration-200 ${j?"border-orange-500 text-orange-500":"border-transparent text-gray-500 hover:text-orange-500"}`,children:Z})},V=()=>E==="stats"?f.jsx(z1,{user:t,allAdventures:e,onViewCompletedByType:$=>b(t,$)}):f.jsxs("div",{className:"pt-2 px-2",children:[k.map($=>f.jsx(wl,{adventure:$,currentUser:t,isGuest:!1,onCommentClick:n,onMessageClick:i,onInterestToggle:s,onViewProfile:r,onRepostToggle:o,onSaveToggle:a,onShareAdventure:d,onToggleCompleted:h,onViewLocationOnMap:v,onDeleteAdventure:T,onEditAdventure:w,onJoinGroupChat:I},$.id)),k.length===0&&f.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:R("noAdventuresInSection")})]}),L=t.country?th(t.country):null;return f.jsxs(f.Fragment,{children:[f.jsx(di,{rightAction:P}),f.jsxs("div",{className:"flex-grow",children:[f.jsx("div",{className:"w-full h-32 bg-gray-200 dark:bg-neutral-800",children:t.coverUrl?f.jsx("img",{src:t.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full bg-gradient-to-r from-gray-300 to-gray-400 dark:from-neutral-800 dark:to-neutral-700"})}),f.jsx("div",{className:"px-4 relative",children:f.jsxs("div",{className:"flex items-end",children:[f.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-light-bg dark:border-dark-bg shadow-lg flex-shrink-0 -mt-12 bg-gray-300 dark:bg-neutral-700 flex items-center justify-center",children:t.avatarUrl?f.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-full h-full rounded-full object-cover"}):f.jsx(qh,{className:"w-12 h-12 text-white dark:text-neutral-950"})}),f.jsx("div",{className:"flex-grow ms-4 flex items-center",children:f.jsxs("div",{className:"flex justify-around w-full",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"font-bold text-lg text-gray-800 dark:text-gray-100",children:U.length}),f.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-500",children:R("adventures")})]}),f.jsxs("button",{className:"text-center",onClick:()=>m(t,"followers"),children:[f.jsx("p",{className:"font-bold text-lg text-gray-800 dark:text-gray-100",children:(t.followers||[]).length}),f.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-500",children:R("followers")})]}),f.jsxs("button",{className:"text-center",onClick:()=>m(t,"following"),children:[f.jsx("p",{className:"font-bold text-lg text-gray-800 dark:text-gray-100",children:(t.following||[]).length}),f.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-500",children:R("following")})]})]})})]})}),f.jsxs("div",{className:"pt-4 px-4",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:t.name}),L&&f.jsx("img",{src:L,alt:`${t.country} flag`,className:"w-6 h-auto rounded-sm"}),t.averageRating&&f.jsxs("div",{className:"flex items-center space-x-1 text-amber-500 bg-amber-100 dark:bg-amber-900/50 px-2 py-0.5 rounded-full",children:[f.jsx(Rc,{className:"w-4 h-4 fill-current"}),f.jsx("span",{className:"font-bold text-sm",children:t.averageRating.toFixed(1)})]})]}),f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",t.username]}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:t.bio})]}),f.jsxs("div",{className:"mt-4 border-t border-b border-gray-200 dark:border-neutral-800 flex",children:[f.jsx(N,{tab:"adventures",icon:f.jsx(Gh,{})}),f.jsx(N,{tab:"saved",icon:f.jsx(F1,{})}),f.jsx(N,{tab:"reposts",icon:f.jsx(wv,{})}),f.jsx(N,{tab:"completed",icon:f.jsx(ll,{})}),f.jsx(N,{tab:"stats",icon:f.jsx(j1,{})})]}),V()]})]})},$v=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),f.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),pj=({adventure:t,comments:e,currentUser:n,onClose:i,onAddComment:s})=>{const[r,o]=y.useState(""),a=()=>{r.trim()&&(s(t.id,r.trim()),o(""))};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-50 flex justify-center items-center p-4 animate-fade-in",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] flex flex-col",children:[f.jsxs("div",{className:"p-4 border-b dark:border-neutral-800 flex justify-between items-center",children:[f.jsx("h2",{className:"text-xl font-bold dark:text-white",children:t.title}),f.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl font-bold",children:""})]}),f.jsxs("div",{className:"p-4 overflow-y-auto flex-grow",children:[f.jsxs("div",{className:"flex items-center mb-4",children:[f.jsx("img",{src:t.author.avatarUrl,alt:t.author.name,className:"w-10 h-10 rounded-full me-3"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold dark:text-gray-100",children:t.author.name}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.location})]})]}),f.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:t.description}),f.jsxs("h3",{className:"font-bold mb-2 dark:text-white",children:["Comments (",e.length,")"]}),f.jsxs("div",{className:"space-y-3",children:[e.map(c=>f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx("img",{src:c.author.avatarUrl,alt:c.author.name,className:"w-8 h-8 rounded-full mt-1"}),f.jsxs("div",{className:"bg-gray-100 dark:bg-neutral-800 p-2 rounded-lg flex-1",children:[f.jsx("p",{className:"font-semibold text-sm dark:text-gray-200",children:c.author.name}),f.jsx("p",{className:"text-sm text-gray-800 dark:text-gray-300",children:c.text})]})]},c.id)),e.length===0&&f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No comments yet."})]})]}),n&&f.jsx("div",{className:"p-4 border-t dark:border-neutral-800 mt-auto bg-white dark:bg-neutral-900",children:f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("input",{type:"text",placeholder:"Add a comment...",className:"flex-1 p-2 border border-gray-300 rounded-full text-sm dark:bg-neutral-800 dark:border-neutral-700 dark:text-white",value:r,onChange:c=>o(c.target.value),onKeyPress:c=>c.key==="Enter"&&a()}),f.jsx("button",{onClick:a,className:"bg-orange-600 text-white p-2 rounded-full hover:bg-orange-700",children:f.jsx($v,{className:"w-5 h-5"})})]})})]})})},mj=()=>{};var jC={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},gj=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=t[n++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=t[n++],o=t[n++],a=t[n++],c=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{const r=t[n++],o=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},H1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const r=t[s],o=s+1<t.length,a=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=r>>2,m=(r&3)<<4|a>>4;let g=(a&15)<<2|d>>6,v=d&63;c||(v=64,o||(g=64)),i.push(n[h],n[m],n[g],n[v])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(q1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const r=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,r==null||a==null||d==null||m==null)throw new yj;const g=r<<2|a>>4;if(i.push(g),d!==64){const v=a<<4&240|d>>2;if(i.push(v),m!==64){const T=d<<6&192|m;i.push(T)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vj=function(t){const e=q1(t);return H1.encodeByteArray(e,!0)},nh=function(t){return vj(t).replace(/\./g,"")},G1=function(t){try{return H1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tj=()=>_j().__FIREBASE_DEFAULTS__,Ej=()=>{if(typeof process>"u"||typeof jC>"u")return;const t=jC.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},xj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&G1(t[1]);return e&&JSON.parse(e)},Qh=()=>{try{return mj()||Tj()||Ej()||xj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$1=t=>{var e,n;return(n=(e=Qh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},K1=t=>{const e=$1(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},J1=()=>{var t;return(t=Qh())==null?void 0:t.config},Y1=t=>{var e;return(e=Qh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Kv(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,r=t.sub||t.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...t};return[nh(JSON.stringify(n)),nh(JSON.stringify(o)),""].join(".")}const Ou={};function Sj(){const t={prod:[],emulator:[]};for(const e of Object.keys(Ou))Ou[e]?t.emulator.push(e):t.prod.push(e);return t}function wj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let zC=!1;function Jv(t,e){if(typeof window>"u"||typeof document>"u"||!Xr(window.location.host)||Ou[t]===e||Ou[t]||zC)return;Ou[t]=e;function n(g){return`__firebase__banner__${g}`}const i="__firebase__banner",r=Sj().prod.length>0;function o(){const g=document.getElementById(i);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{zC=!0,o()},g}function h(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=wj(i),v=n("text"),T=document.getElementById(v)||document.createElement("span"),w=n("learnmore"),I=document.getElementById(w)||document.createElement("a"),b=n("preprendIcon"),E=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const A=g.element;a(A),h(I,w);const R=d();c(E,b),A.append(E,T,I,R),document.body.appendChild(A)}r?(T.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function bj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Mn())}function Aj(){var e;const t=(e=Qh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Ij(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Mj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Rj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kj(){const t=Mn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Nj(){return!Aj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lj(){try{return typeof indexedDB=="object"}catch{return!1}}function Dj(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var r;e(((r=s.error)==null?void 0:r.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj="FirebaseError";class os extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Pj,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nc.prototype.create)}}class Nc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?Vj(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new os(s,a,i)}}function Vj(t,e){return t.replace(Uj,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const Uj=/\{\$([^}]+)}/g;function Oj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Vs(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const r=t[s],o=e[s];if(qC(r)&&qC(o)){if(!Vs(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function qC(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function gu(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function yu(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Bj(t,e){const n=new Fj(t,e);return n.subscribe.bind(n)}class Fj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");jj(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=Sm),s.error===void 0&&(s.error=Sm),s.complete===void 0&&(s.complete=Sm);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jj(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t){return t&&t._delegate?t._delegate:t}class Hr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const To="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new Cj;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hj(e))try{this.getOrInitializeService({instanceIdentifier:To})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=To){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=To){return this.instances.has(e)}getOptions(e=To){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:qj(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=To){return this.component?this.component.multipleInstances?e:To:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qj(t){return t===To?void 0:t}function Hj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(He||(He={}));const $j={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},Kj=He.INFO,Jj={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},Yj=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=Jj[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yv{constructor(e){this.name=e,this._logLevel=Kj,this._logHandler=Yj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$j[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const Wj=(t,e)=>e.some(n=>t instanceof n);let HC,GC;function Qj(){return HC||(HC=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zj(){return GC||(GC=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Q1=new WeakMap,Qg=new WeakMap,Z1=new WeakMap,wm=new WeakMap,Wv=new WeakMap;function Xj(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",r),t.removeEventListener("error",o)},r=()=>{n(Pr(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",r),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Q1.set(n,t)}).catch(()=>{}),Wv.set(e,t),e}function ez(t){if(Qg.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",o),t.removeEventListener("abort",o)},r=()=>{n(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",r),t.addEventListener("error",o),t.addEventListener("abort",o)});Qg.set(t,e)}let Zg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Qg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Z1.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tz(t){Zg=t(Zg)}function nz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(bm(this),e,...n);return Z1.set(i,e.sort?e.sort():[e]),Pr(i)}:Zj().includes(t)?function(...e){return t.apply(bm(this),e),Pr(Q1.get(this))}:function(...e){return Pr(t.apply(bm(this),e))}}function iz(t){return typeof t=="function"?nz(t):(t instanceof IDBTransaction&&ez(t),Wj(t,Qj())?new Proxy(t,Zg):t)}function Pr(t){if(t instanceof IDBRequest)return Xj(t);if(wm.has(t))return wm.get(t);const e=iz(t);return e!==t&&(wm.set(t,e),Wv.set(e,t)),e}const bm=t=>Wv.get(t);function sz(t,e,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(t,e),a=Pr(o);return i&&o.addEventListener("upgradeneeded",c=>{i(Pr(o.result),c.oldVersion,c.newVersion,Pr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{r&&c.addEventListener("close",()=>r()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),a}const rz=["get","getKey","getAll","getAllKeys","count"],oz=["put","add","delete","clear"],Am=new Map;function $C(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=oz.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||rz.includes(n)))return;const r=async function(o,...a){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return i&&(d=d.index(a.shift())),(await Promise.all([d[n](...a),s&&c.done]))[0]};return Am.set(e,r),r}tz(t=>({...t,get:(e,n,i)=>$C(e,n)||t.get(e,n,i),has:(e,n)=>!!$C(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class az{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lz(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function lz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xg="@firebase/app",KC="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new Yv("@firebase/app"),uz="@firebase/app-compat",cz="@firebase/analytics-compat",dz="@firebase/analytics",fz="@firebase/app-check-compat",hz="@firebase/app-check",pz="@firebase/auth",mz="@firebase/auth-compat",gz="@firebase/database",yz="@firebase/data-connect",vz="@firebase/database-compat",_z="@firebase/functions",Tz="@firebase/functions-compat",Ez="@firebase/installations",xz="@firebase/installations-compat",Cz="@firebase/messaging",Sz="@firebase/messaging-compat",wz="@firebase/performance",bz="@firebase/performance-compat",Az="@firebase/remote-config",Iz="@firebase/remote-config-compat",Mz="@firebase/storage",Rz="@firebase/storage-compat",kz="@firebase/firestore",Nz="@firebase/ai",Lz="@firebase/firestore-compat",Dz="firebase",Pz="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey="[DEFAULT]",Vz={[Xg]:"fire-core",[uz]:"fire-core-compat",[dz]:"fire-analytics",[cz]:"fire-analytics-compat",[hz]:"fire-app-check",[fz]:"fire-app-check-compat",[pz]:"fire-auth",[mz]:"fire-auth-compat",[gz]:"fire-rtdb",[yz]:"fire-data-connect",[vz]:"fire-rtdb-compat",[_z]:"fire-fn",[Tz]:"fire-fn-compat",[Ez]:"fire-iid",[xz]:"fire-iid-compat",[Cz]:"fire-fcm",[Sz]:"fire-fcm-compat",[wz]:"fire-perf",[bz]:"fire-perf-compat",[Az]:"fire-rc",[Iz]:"fire-rc-compat",[Mz]:"fire-gcs",[Rz]:"fire-gcs-compat",[kz]:"fire-fst",[Lz]:"fire-fst-compat",[Nz]:"fire-vertex","fire-js":"fire-js",[Dz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new Map,Uz=new Map,ty=new Map;function JC(t,e){try{t.container.addComponent(e)}catch(n){Us.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Uo(t){const e=t.name;if(ty.has(e))return Us.debug(`There were multiple attempts to register component ${e}.`),!1;ty.set(e,t);for(const n of ih.values())JC(n,t);for(const n of Uz.values())JC(n,t);return!0}function Zh(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vr=new Nc("app","Firebase",Oz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo=Pz;function X1(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:ey,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw Vr.create("bad-app-name",{appName:String(s)});if(n||(n=J1()),!n)throw Vr.create("no-options");const r=ih.get(s);if(r){if(Vs(n,r.options)&&Vs(i,r.config))return r;throw Vr.create("duplicate-app",{appName:s})}const o=new Gj(s);for(const c of ty.values())o.addComponent(c);const a=new Bz(n,i,o);return ih.set(s,a),a}function Qv(t=ey){const e=ih.get(t);if(!e&&t===ey&&J1())return X1();if(!e)throw Vr.create("no-app",{appName:t});return e}function Qi(t,e,n){let i=Vz[t]??t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&o.push("and"),r&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Us.warn(o.join(" "));return}Uo(new Hr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz="firebase-heartbeat-database",jz=1,lc="firebase-heartbeat-store";let Im=null;function eM(){return Im||(Im=sz(Fz,jz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(lc)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vr.create("idb-open",{originalErrorMessage:t.message})})),Im}async function zz(t){try{const n=(await eM()).transaction(lc),i=await n.objectStore(lc).get(tM(t));return await n.done,i}catch(e){if(e instanceof os)Us.warn(e.message);else{const n=Vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Us.warn(n.message)}}}async function YC(t,e){try{const i=(await eM()).transaction(lc,"readwrite");await i.objectStore(lc).put(e,tM(t)),await i.done}catch(n){if(n instanceof os)Us.warn(n.message);else{const i=Vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Us.warn(i.message)}}}function tM(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz=1024,Hz=30;class Gz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Kz(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=WC();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>Hz){const o=Jz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Us.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=WC(),{heartbeatsToSend:i,unsentEntries:s}=$z(this._heartbeatsCache.heartbeats),r=nh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(n){return Us.warn(n),""}}}function WC(){return new Date().toISOString().substring(0,10)}function $z(t,e=qz){const n=[];let i=t.slice();for(const s of t){const r=n.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),QC(n)>e){r.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),QC(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Kz{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lj()?Dj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await zz(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return YC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return YC(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function QC(t){return nh(JSON.stringify({version:2,heartbeats:t})).length}function Jz(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yz(t){Uo(new Hr("platform-logger",e=>new az(e),"PRIVATE")),Uo(new Hr("heartbeat",e=>new Gz(e),"PRIVATE")),Qi(Xg,KC,t),Qi(Xg,KC,"esm2020"),Qi("fire-js","")}Yz("");var Wz="firebase",Qz="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qi(Wz,Qz,"app");function nM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zz=nM,iM=new Nc("auth","Firebase",nM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Yv("@firebase/auth");function Xz(t,...e){sh.logLevel<=He.WARN&&sh.warn(`Auth (${Qo}): ${t}`,...e)}function sf(t,...e){sh.logLevel<=He.ERROR&&sh.error(`Auth (${Qo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(t,...e){throw Xv(t,...e)}function Ni(t,...e){return Xv(t,...e)}function Zv(t,e,n){const i={...Zz(),[e]:n};return new Nc("auth","Firebase",i).create(e,{appName:t.name})}function Rs(t){return Zv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function e8(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&bi(t,"argument-error"),Zv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xv(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return iM.create(t,...e)}function be(t,e,...n){if(!t)throw Xv(e,...n)}function ws(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sf(e),new Error(e)}function Os(t,e){t||ws(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function t8(){return ZC()==="http:"||ZC()==="https:"}function ZC(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n8(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(t8()||Mj()||"connection"in navigator)?navigator.onLine:!0}function i8(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Os(n>e,"Short delay should be less than long delay!"),this.isMobile=bj()||Rj()}get(){return n8()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e0(t,e){Os(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sM{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ws("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ws("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ws("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],o8=new Dc(3e4,6e4);function qs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Hs(t,e,n,i,s={}){return rM(t,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=Lc({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...r};return Ij()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Xr(t.emulatorConfig.host)&&(d.credentials="include"),sM.fetch()(await oM(t,t.config.apiHost,n,a),d)})}async function rM(t,e,n){t._canInitEmulator=!1;const i={...s8,...e};try{const s=new l8(t),r=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Ad(t,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[c,d]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ad(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ad(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ad(t,"user-disabled",o);const h=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Zv(t,h,d);bi(t,h)}}catch(s){if(s instanceof os)throw s;bi(t,"network-request-failed",{message:String(s)})}}async function Pc(t,e,n,i,s={}){const r=await Hs(t,e,n,i,s);return"mfaPendingCredential"in r&&bi(t,"multi-factor-auth-required",{_serverResponse:r}),r}async function oM(t,e,n,i){const s=`${e}${n}?${i}`,r=t,o=r.config.emulator?e0(t.config,s):`${t.config.apiScheme}://${s}`;return r8.includes(n)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function a8(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class l8{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ni(this.auth,"network-request-failed")),o8.get())})}}function Ad(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Ni(t,e,i);return s.customData._tokenResponse=n,s}function XC(t){return t!==void 0&&t.enterprise!==void 0}class u8{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return a8(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function c8(t,e){return Hs(t,"GET","/v2/recaptchaConfig",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d8(t,e){return Hs(t,"POST","/v1/accounts:delete",e)}async function rh(t,e){return Hs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function f8(t,e=!1){const n=ht(t),i=await n.getIdToken(e),s=t0(i);be(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Bu(Mm(s.auth_time)),issuedAtTime:Bu(Mm(s.iat)),expirationTime:Bu(Mm(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function Mm(t){return Number(t)*1e3}function t0(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return sf("JWT malformed, contained fewer than 3 sections"),null;try{const s=G1(n);return s?JSON.parse(s):(sf("Failed to decode base64 JWT payload"),null)}catch(s){return sf("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function eS(t){const e=t0(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uc(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof os&&h8(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function h8({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p8{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bu(this.lastLoginAt),this.creationTime=Bu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oh(t){var m;const e=t.auth,n=await t.getIdToken(),i=await uc(t,rh(e,{idToken:n}));be(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const r=(m=s.providerUserInfo)!=null&&m.length?aM(s.providerUserInfo):[],o=g8(t.providerData,r),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=a?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new iy(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function m8(t){const e=ht(t);await oh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function g8(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function aM(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y8(t,e){const n=await rM(t,{},async()=>{const i=Lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=t.config,o=await oM(t,s,"/v1/token",`key=${r}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:a,body:i};return t.emulatorConfig&&Xr(t.emulatorConfig.host)&&(c.credentials="include"),sM.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function v8(t,e){return Hs(t,"POST","/v2/accounts:revokeToken",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eS(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=eS(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:r}=await y8(e,n);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:r}=n,o=new Ka;return i&&(be(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(be(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(be(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ka,this.toJSON())}_performRefresh(){return ws("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tr(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ki{constructor({uid:e,auth:n,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new p8(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new iy(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await uc(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return f8(this,e)}reload(){return m8(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ki({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await oh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zn(this.auth.app))return Promise.reject(Rs(this.auth));const e=await this.getIdToken();return await uc(this,d8(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,s=n.email??void 0,r=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:v,providerData:T,stsTokenManager:w}=n;be(m&&w,e,"internal-error");const I=Ka.fromJSON(this.name,w);be(typeof m=="string",e,"internal-error"),tr(i,e.name),tr(s,e.name),be(typeof g=="boolean",e,"internal-error"),be(typeof v=="boolean",e,"internal-error"),tr(r,e.name),tr(o,e.name),tr(a,e.name),tr(c,e.name),tr(d,e.name),tr(h,e.name);const b=new ki({uid:m,auth:e,email:s,emailVerified:g,displayName:i,isAnonymous:v,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:I,createdAt:d,lastLoginAt:h});return T&&Array.isArray(T)&&(b.providerData=T.map(E=>({...E}))),c&&(b._redirectEventId=c),b}static async _fromIdTokenResponse(e,n,i=!1){const s=new Ka;s.updateFromServerResponse(n);const r=new ki({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await oh(r),r}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];be(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?aM(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),a=new Ka;a.updateFromIdToken(i);const c=new ki({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new iy(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS=new Map;function bs(t){Os(t instanceof Function,"Expected a class definition");let e=tS.get(t);return e?(Os(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tS.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}lM.type="NONE";const nS=lM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(t,e,n){return`firebase:${t}:${e}:${n}`}class Ja{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=rf(this.userKey,s.apiKey,r),this.fullPersistenceKey=rf("persistence",s.apiKey,r),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await rh(this.auth,{idToken:e}).catch(()=>{});return n?ki._fromGetAccountInfoResponse(this.auth,n,e):null}return ki._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ja(bs(nS),e,i);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let r=s[0]||bs(nS);const o=rf(i,e.config.apiKey,e.name);let a=null;for(const d of n)try{const h=await d._get(o);if(h){let m;if(typeof h=="string"){const g=await rh(e,{idToken:h}).catch(()=>{});if(!g)break;m=await ki._fromGetAccountInfoResponse(e,g,h)}else m=ki._fromJSON(e,h);d!==r&&(a=m),r=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!r._shouldAllowMigration||!c.length?new Ja(r,e,i):(r=c[0],a&&await r._set(o,a.toJSON()),await Promise.all(n.map(async d=>{if(d!==r)try{await d._remove(o)}catch{}})),new Ja(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pM(e))return"Blackberry";if(mM(e))return"Webos";if(cM(e))return"Safari";if((e.includes("chrome/")||dM(e))&&!e.includes("edge/"))return"Chrome";if(hM(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function uM(t=Mn()){return/firefox\//i.test(t)}function cM(t=Mn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dM(t=Mn()){return/crios\//i.test(t)}function fM(t=Mn()){return/iemobile/i.test(t)}function hM(t=Mn()){return/android/i.test(t)}function pM(t=Mn()){return/blackberry/i.test(t)}function mM(t=Mn()){return/webos/i.test(t)}function n0(t=Mn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _8(t=Mn()){var e;return n0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function T8(){return kj()&&document.documentMode===10}function gM(t=Mn()){return n0(t)||hM(t)||mM(t)||pM(t)||/windows phone/i.test(t)||fM(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(t,e=[]){let n;switch(t){case"Browser":n=iS(Mn());break;case"Worker":n=`${iS(Mn())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Qo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=r=>new Promise((o,a)=>{try{const c=e(r);o(c)}catch(c){a(c)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x8(t,e={}){return Hs(t,"GET","/v2/passwordPolicy",qs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8=6;class S8{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??C8,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w8{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sS(this),this.idTokenSubscription=new sS(this),this.beforeStateQueue=new E8(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=bs(n)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Ja.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rh(this,{idToken:e}),i=await ki._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(zn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)==null?void 0:r._redirectEventId,a=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===a)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await oh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=i8()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zn(this.app))return Promise.reject(Rs(this));const n=e?ht(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zn(this.app)?Promise.reject(Rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zn(this.app)?Promise.reject(Rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(bs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await x8(this),n=new S8(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nc("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await v8(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&bs(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await Ja.create(this,[bs(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const r=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,i,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Xz(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Gs(t){return ht(t)}class sS{constructor(e){this.auth=e,this.observer=null,this.addObserver=Bj(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function b8(t){Xh=t}function vM(t){return Xh.loadJS(t)}function A8(){return Xh.recaptchaEnterpriseScript}function I8(){return Xh.gapiScript}function M8(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class R8{constructor(){this.enterprise=new k8}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class k8{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const N8="recaptcha-enterprise",_M="NO_RECAPTCHA";class L8{constructor(e){this.type=N8,this.auth=Gs(e)}async verify(e="verify",n=!1){async function i(r){if(!n){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{c8(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const d=new u8(c);return r.tenantId==null?r._agentRecaptchaConfig=d:r._tenantRecaptchaConfigs[r.tenantId]=d,o(d.siteKey)}}).catch(c=>{a(c)})})}function s(r,o,a){const c=window.grecaptcha;XC(c)?c.enterprise.ready(()=>{c.enterprise.execute(r,{action:e}).then(d=>{o(d)}).catch(()=>{o(_M)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new R8().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{i(this.auth).then(a=>{if(!n&&XC(window.grecaptcha))s(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=A8();c.length!==0&&(c+=a),vM(c).then(()=>{s(a,r,o)}).catch(d=>{o(d)})}}).catch(a=>{o(a)})})}}async function rS(t,e,n,i=!1,s=!1){const r=new L8(t);let o;if(s)o=_M;else try{o=await r.verify(n)}catch{o=await r.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const c=a.phoneEnrollmentInfo.phoneNumber,d=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ah(t,e,n,i,s){var r;if((r=t._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await rS(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await rS(t,e,n,n==="getOobCode");return i(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D8(t,e){const n=Zh(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),r=n.getOptions();if(Vs(r,e??{}))return s;bi(s,"already-initialized")}return n.initialize({options:e})}function P8(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(bs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function V8(t,e,n){const i=Gs(t);be(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=TM(e),{host:o,port:a}=U8(e),c=a===null?"":`:${a}`,d={url:`${r}//${o}${c}/`},h=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){be(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),be(Vs(d,i.config.emulator)&&Vs(h,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=d,i.emulatorConfig=h,i.settings.appVerificationDisabledForTesting=!0,Xr(o)?(Kv(`${r}//${o}${c}`),Jv("Auth",!0)):O8()}function TM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function U8(t){const e=TM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:oS(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:oS(o)}}}function oS(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function O8(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ws("not implemented")}_getIdTokenResponse(e){return ws("not implemented")}_linkToIdToken(e,n){return ws("not implemented")}_getReauthenticationResolver(e){return ws("not implemented")}}async function B8(t,e){return Hs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F8(t,e){return Pc(t,"POST","/v1/accounts:signInWithPassword",qs(t,e))}async function j8(t,e){return Hs(t,"POST","/v1/accounts:sendOobCode",qs(t,e))}async function z8(t,e){return j8(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q8(t,e){return Pc(t,"POST","/v1/accounts:signInWithEmailLink",qs(t,e))}async function H8(t,e){return Pc(t,"POST","/v1/accounts:signInWithEmailLink",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends i0{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new cc(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new cc(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ah(e,n,"signInWithPassword",F8);case"emailLink":return q8(e,{email:this._email,oobCode:this._password});default:bi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ah(e,i,"signUpPassword",B8);case"emailLink":return H8(e,{idToken:n,email:this._email,oobCode:this._password});default:bi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(t,e){return Pc(t,"POST","/v1/accounts:signInWithIdp",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8="http://localhost";class Oo extends i0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):bi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...r}=n;if(!i||!s)return null;const o=new Oo(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ya(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ya(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ya(e,n)}buildRequest(){const e={requestUri:G8,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Lc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $8(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function K8(t){const e=gu(yu(t)).link,n=e?gu(yu(e)).deep_link_id:null,i=gu(yu(t)).deep_link_id;return(i?gu(yu(i)).link:null)||i||n||e||t}class s0{constructor(e){const n=gu(yu(e)),i=n.apiKey??null,s=n.oobCode??null,r=$8(n.mode??null);be(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=K8(e);try{return new s0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.providerId=kl.PROVIDER_ID}static credential(e,n){return cc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=s0.parseLink(n);return be(i,"argument-error"),cc._fromEmailAndCode(e,i.code,i.tenantId)}}kl.PROVIDER_ID="password";kl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";kl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends r0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends Vc{constructor(){super("facebook.com")}static credential(e){return Oo._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.FACEBOOK_SIGN_IN_METHOD="facebook.com";hr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es extends Vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Oo._fromParams({providerId:Es.PROVIDER_ID,signInMethod:Es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Es.credentialFromTaggedObject(e)}static credentialFromError(e){return Es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Es.credential(n,i)}catch{return null}}}Es.GOOGLE_SIGN_IN_METHOD="google.com";Es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Vc{constructor(){super("github.com")}static credential(e){return Oo._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Vc{constructor(){super("twitter.com")}static credential(e,n){return Oo._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return mr.credential(n,i)}catch{return null}}}mr.TWITTER_SIGN_IN_METHOD="twitter.com";mr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J8(t,e){return Pc(t,"POST","/v1/accounts:signUp",qs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const r=await ki._fromIdTokenResponse(e,i,s),o=aS(i);return new Bo({user:r,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=aS(i);return new Bo({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function aS(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh extends os{constructor(e,n,i,s){super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,lh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new lh(e,n,i,s)}}function EM(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?lh._fromErrorAndOperation(t,r,e,i):r})}async function Y8(t,e,n=!1){const i=await uc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Bo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W8(t,e,n=!1){const{auth:i}=t;if(zn(i.app))return Promise.reject(Rs(i));const s="reauthenticate";try{const r=await uc(t,EM(i,s,e,t),n);be(r.idToken,i,"internal-error");const o=t0(r.idToken);be(o,i,"internal-error");const{sub:a}=o;return be(t.uid===a,i,"user-mismatch"),Bo._forOperation(t,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&bi(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xM(t,e,n=!1){if(zn(t.app))return Promise.reject(Rs(t));const i="signIn",s=await EM(t,i,e),r=await Bo._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(r.user),r}async function Q8(t,e){return xM(Gs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CM(t){const e=Gs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Z8(t,e,n){const i=Gs(t);await ah(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",z8)}async function X8(t,e,n){if(zn(t.app))return Promise.reject(Rs(t));const i=Gs(t),o=await ah(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",J8).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&CM(t),c}),a=await Bo._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function eq(t,e,n){return zn(t.app)?Promise.reject(Rs(t)):Q8(ht(t),kl.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&CM(t),i})}function tq(t,e,n,i){return ht(t).onIdTokenChanged(e,n,i)}function nq(t,e,n){return ht(t).beforeAuthStateChanged(e,n)}function iq(t,e,n,i){return ht(t).onAuthStateChanged(e,n,i)}function lS(t){return ht(t).signOut()}const uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(uh,"1"),this.storage.removeItem(uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sq=1e3,rq=10;class wM extends SM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,c)=>{this.notifyListeners(o,c)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);T8()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,rq):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},sq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wM.type="LOCAL";const oq=wM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM extends SM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}bM.type="SESSION";const AM=bM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new ep(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:r}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async d=>d(n.origin,r)),c=await aq(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ep.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,c)=>{const d=o0("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),r=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(g.data.response);break;default:clearTimeout(h),clearTimeout(r),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(){return window}function uq(t){Zi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(){return typeof Zi().WorkerGlobalScope<"u"&&typeof Zi().importScripts=="function"}async function cq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function dq(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function fq(){return IM()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM="firebaseLocalStorageDb",hq=1,ch="firebaseLocalStorage",RM="fbase_key";class Uc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function tp(t,e){return t.transaction([ch],e?"readwrite":"readonly").objectStore(ch)}function pq(){const t=indexedDB.deleteDatabase(MM);return new Uc(t).toPromise()}function sy(){const t=indexedDB.open(MM,hq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(ch,{keyPath:RM})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(ch)?e(i):(i.close(),await pq(),e(await sy()))})})}async function uS(t,e,n){const i=tp(t,!0).put({[RM]:e,value:n});return new Uc(i).toPromise()}async function mq(t,e){const n=tp(t,!1).get(e),i=await new Uc(n).toPromise();return i===void 0?null:i.value}function cS(t,e){const n=tp(t,!0).delete(e);return new Uc(n).toPromise()}const gq=800,yq=3;class kM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sy(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>yq)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IM()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ep._getInstance(fq()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await cq(),!this.activeServiceWorker)return;this.sender=new lq(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||dq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sy();return await uS(e,uh,"1"),await cS(e,uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>uS(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>mq(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>cS(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=tp(s,!1).getAll();return new Uc(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),gq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}kM.type="LOCAL";const vq=kM;new Dc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t,e){return e?bs(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0 extends i0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ya(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ya(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ya(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function _q(t){return xM(t.auth,new a0(t),t.bypassAuthState)}function Tq(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),W8(n,new a0(t),t.bypassAuthState)}async function Eq(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),Y8(n,new a0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,n,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _q;case"linkViaPopup":case"linkViaRedirect":return Eq;case"reauthViaPopup":case"reauthViaRedirect":return Tq;default:bi(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xq=new Dc(2e3,1e4);async function Cq(t,e,n){if(zn(t.app))return Promise.reject(Ni(t,"operation-not-supported-in-this-environment"));const i=Gs(t);e8(t,e,r0);const s=NM(i,n);return new xo(i,"signInViaPopup",e,s).executeNotNull()}class xo extends LM{constructor(e,n,i,s,r){super(e,n,s,r),this.provider=i,this.authWindow=null,this.pollId=null,xo.currentPopupAction&&xo.currentPopupAction.cancel(),xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=o0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xq.get())};e()}}xo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sq="pendingRedirect",of=new Map;class wq extends LM{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=of.get(this.auth._key());if(!e){try{const i=await bq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}of.set(this.auth._key(),e)}return this.bypassAuthState||of.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bq(t,e){const n=Mq(e),i=Iq(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function Aq(t,e){of.set(t._key(),e)}function Iq(t){return bs(t._redirectPersistence)}function Mq(t){return rf(Sq,t.config.apiKey,t.name)}async function Rq(t,e,n=!1){if(zn(t.app))return Promise.reject(Rs(t));const i=Gs(t),s=NM(i,e),o=await new wq(i,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq=10*60*1e3;class Nq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Lq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!DM(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ni(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kq&&this.cachedEventUids.clear(),this.cachedEventUids.has(dS(e))}saveEventToCache(e){this.cachedEventUids.add(dS(e)),this.lastProcessedEventTime=Date.now()}}function dS(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DM({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Lq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dq(t,e={}){return Hs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vq=/^https?/;async function Uq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Dq(t);for(const n of e)try{if(Oq(n))return}catch{}bi(t,"unauthorized-domain")}function Oq(t){const e=ny(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!Vq.test(n))return!1;if(Pq.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bq=new Dc(3e4,6e4);function fS(){const t=Zi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Fq(t){return new Promise((e,n)=>{var s,r,o;function i(){fS(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fS(),n(Ni(t,"network-request-failed"))},timeout:Bq.get()})}if((r=(s=Zi().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((o=Zi().gapi)!=null&&o.load)i();else{const a=M8("iframefcb");return Zi()[a]=()=>{gapi.load?i():n(Ni(t,"network-request-failed"))},vM(`${I8()}?onload=${a}`).catch(c=>n(c))}}).catch(e=>{throw af=null,e})}let af=null;function jq(t){return af=af||Fq(t),af}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zq=new Dc(5e3,15e3),qq="__/auth/iframe",Hq="emulator/auth/iframe",Gq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},$q=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Kq(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?e0(e,Hq):`https://${t.config.authDomain}/${qq}`,i={apiKey:e.apiKey,appName:t.name,v:Qo},s=$q.get(t.config.apiHost);s&&(i.eid=s);const r=t._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${Lc(i).slice(1)}`}async function Jq(t){const e=await jq(t),n=Zi().gapi;return be(n,t,"internal-error"),e.open({where:document.body,url:Kq(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gq,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=Ni(t,"network-request-failed"),a=Zi().setTimeout(()=>{r(o)},zq.get());function c(){Zi().clearTimeout(a),s(i)}i.ping(c).then(c,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wq=500,Qq=600,Zq="_blank",Xq="http://localhost";class hS{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function eH(t,e,n,i=Wq,s=Qq){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c={...Yq,width:i.toString(),height:s.toString(),top:r,left:o},d=Mn().toLowerCase();n&&(a=dM(d)?Zq:n),uM(d)&&(e=e||Xq,c.scrollbars="yes");const h=Object.entries(c).reduce((g,[v,T])=>`${g}${v}=${T},`,"");if(_8(d)&&a!=="_self")return tH(e||"",a),new hS(null);const m=window.open(e||"",a,h);be(m,t,"popup-blocked");try{m.focus()}catch{}return new hS(m)}function tH(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH="__/auth/handler",iH="emulator/auth/handler",sH=encodeURIComponent("fac");async function pS(t,e,n,i,s,r){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Qo,eventId:s};if(e instanceof r0){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Oj(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof Vc){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const c=await t._getAppCheckToken(),d=c?`#${sH}=${encodeURIComponent(c)}`:"";return`${rH(t)}?${Lc(a).slice(1)}${d}`}function rH({config:t}){return t.emulator?e0(t,iH):`https://${t.authDomain}/${nH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rm="webStorageSupport";class oH{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AM,this._completeRedirectFn=Rq,this._overrideRedirectResult=Aq}async _openPopup(e,n,i,s){var o;Os((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const r=await pS(e,n,i,ny(),s);return eH(e,r,o0())}async _openRedirect(e,n,i,s){await this._originValidation(e);const r=await pS(e,n,i,ny(),s);return uq(r),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:r}=this.eventManagers[n];return s?Promise.resolve(s):(Os(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await Jq(e),i=new Nq(e);return n.register("authEvent",s=>(be(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rm,{type:Rm},s=>{var o;const r=(o=s==null?void 0:s[0])==null?void 0:o[Rm];r!==void 0&&n(!!r),bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Uq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return gM()||cM()||n0()}}const aH=oH;var mS="@firebase/auth",gS="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lH{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function cH(t){Uo(new Hr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;be(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yM(t)},d=new w8(i,s,r,c);return P8(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),Uo(new Hr("auth-internal",e=>{const n=Gs(e.getProvider("auth").getImmediate());return(i=>new lH(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Qi(mS,gS,uH(t)),Qi(mS,gS,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dH=5*60,fH=Y1("authIdTokenMaxAge")||dH;let yS=null;const hH=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>fH)return;const s=n==null?void 0:n.token;yS!==s&&(yS=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function pH(t=Qv()){const e=Zh(t,"auth");if(e.isInitialized())return e.getImmediate();const n=D8(t,{popupRedirectResolver:aH,persistence:[vq,oq,AM]}),i=Y1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const o=hH(r.toString());nq(n,o,()=>o(n.currentUser)),tq(n,a=>o(a))}}const s=$1("auth");return s&&V8(n,`http://${s}`),n}function mH(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}b8({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const r=Ni("internal-error");r.customData=s,n(r)},i.type="text/javascript",i.charset="UTF-8",mH().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});cH("Browser");var vS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ur,PM;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,M){function C(){}C.prototype=M.prototype,S.F=M.prototype,S.prototype=new C,S.prototype.constructor=S,S.D=function(k,N,V){for(var L=Array(arguments.length-2),$=2;$<arguments.length;$++)L[$-2]=arguments[$];return M.prototype[N].apply(k,L)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,M,C){C||(C=0);const k=Array(16);if(typeof M=="string")for(var N=0;N<16;++N)k[N]=M.charCodeAt(C++)|M.charCodeAt(C++)<<8|M.charCodeAt(C++)<<16|M.charCodeAt(C++)<<24;else for(N=0;N<16;++N)k[N]=M[C++]|M[C++]<<8|M[C++]<<16|M[C++]<<24;M=S.g[0],C=S.g[1],N=S.g[2];let V=S.g[3],L;L=M+(V^C&(N^V))+k[0]+3614090360&4294967295,M=C+(L<<7&4294967295|L>>>25),L=V+(N^M&(C^N))+k[1]+3905402710&4294967295,V=M+(L<<12&4294967295|L>>>20),L=N+(C^V&(M^C))+k[2]+606105819&4294967295,N=V+(L<<17&4294967295|L>>>15),L=C+(M^N&(V^M))+k[3]+3250441966&4294967295,C=N+(L<<22&4294967295|L>>>10),L=M+(V^C&(N^V))+k[4]+4118548399&4294967295,M=C+(L<<7&4294967295|L>>>25),L=V+(N^M&(C^N))+k[5]+1200080426&4294967295,V=M+(L<<12&4294967295|L>>>20),L=N+(C^V&(M^C))+k[6]+2821735955&4294967295,N=V+(L<<17&4294967295|L>>>15),L=C+(M^N&(V^M))+k[7]+4249261313&4294967295,C=N+(L<<22&4294967295|L>>>10),L=M+(V^C&(N^V))+k[8]+1770035416&4294967295,M=C+(L<<7&4294967295|L>>>25),L=V+(N^M&(C^N))+k[9]+2336552879&4294967295,V=M+(L<<12&4294967295|L>>>20),L=N+(C^V&(M^C))+k[10]+4294925233&4294967295,N=V+(L<<17&4294967295|L>>>15),L=C+(M^N&(V^M))+k[11]+2304563134&4294967295,C=N+(L<<22&4294967295|L>>>10),L=M+(V^C&(N^V))+k[12]+1804603682&4294967295,M=C+(L<<7&4294967295|L>>>25),L=V+(N^M&(C^N))+k[13]+4254626195&4294967295,V=M+(L<<12&4294967295|L>>>20),L=N+(C^V&(M^C))+k[14]+2792965006&4294967295,N=V+(L<<17&4294967295|L>>>15),L=C+(M^N&(V^M))+k[15]+1236535329&4294967295,C=N+(L<<22&4294967295|L>>>10),L=M+(N^V&(C^N))+k[1]+4129170786&4294967295,M=C+(L<<5&4294967295|L>>>27),L=V+(C^N&(M^C))+k[6]+3225465664&4294967295,V=M+(L<<9&4294967295|L>>>23),L=N+(M^C&(V^M))+k[11]+643717713&4294967295,N=V+(L<<14&4294967295|L>>>18),L=C+(V^M&(N^V))+k[0]+3921069994&4294967295,C=N+(L<<20&4294967295|L>>>12),L=M+(N^V&(C^N))+k[5]+3593408605&4294967295,M=C+(L<<5&4294967295|L>>>27),L=V+(C^N&(M^C))+k[10]+38016083&4294967295,V=M+(L<<9&4294967295|L>>>23),L=N+(M^C&(V^M))+k[15]+3634488961&4294967295,N=V+(L<<14&4294967295|L>>>18),L=C+(V^M&(N^V))+k[4]+3889429448&4294967295,C=N+(L<<20&4294967295|L>>>12),L=M+(N^V&(C^N))+k[9]+568446438&4294967295,M=C+(L<<5&4294967295|L>>>27),L=V+(C^N&(M^C))+k[14]+3275163606&4294967295,V=M+(L<<9&4294967295|L>>>23),L=N+(M^C&(V^M))+k[3]+4107603335&4294967295,N=V+(L<<14&4294967295|L>>>18),L=C+(V^M&(N^V))+k[8]+1163531501&4294967295,C=N+(L<<20&4294967295|L>>>12),L=M+(N^V&(C^N))+k[13]+2850285829&4294967295,M=C+(L<<5&4294967295|L>>>27),L=V+(C^N&(M^C))+k[2]+4243563512&4294967295,V=M+(L<<9&4294967295|L>>>23),L=N+(M^C&(V^M))+k[7]+1735328473&4294967295,N=V+(L<<14&4294967295|L>>>18),L=C+(V^M&(N^V))+k[12]+2368359562&4294967295,C=N+(L<<20&4294967295|L>>>12),L=M+(C^N^V)+k[5]+4294588738&4294967295,M=C+(L<<4&4294967295|L>>>28),L=V+(M^C^N)+k[8]+2272392833&4294967295,V=M+(L<<11&4294967295|L>>>21),L=N+(V^M^C)+k[11]+1839030562&4294967295,N=V+(L<<16&4294967295|L>>>16),L=C+(N^V^M)+k[14]+4259657740&4294967295,C=N+(L<<23&4294967295|L>>>9),L=M+(C^N^V)+k[1]+2763975236&4294967295,M=C+(L<<4&4294967295|L>>>28),L=V+(M^C^N)+k[4]+1272893353&4294967295,V=M+(L<<11&4294967295|L>>>21),L=N+(V^M^C)+k[7]+4139469664&4294967295,N=V+(L<<16&4294967295|L>>>16),L=C+(N^V^M)+k[10]+3200236656&4294967295,C=N+(L<<23&4294967295|L>>>9),L=M+(C^N^V)+k[13]+681279174&4294967295,M=C+(L<<4&4294967295|L>>>28),L=V+(M^C^N)+k[0]+3936430074&4294967295,V=M+(L<<11&4294967295|L>>>21),L=N+(V^M^C)+k[3]+3572445317&4294967295,N=V+(L<<16&4294967295|L>>>16),L=C+(N^V^M)+k[6]+76029189&4294967295,C=N+(L<<23&4294967295|L>>>9),L=M+(C^N^V)+k[9]+3654602809&4294967295,M=C+(L<<4&4294967295|L>>>28),L=V+(M^C^N)+k[12]+3873151461&4294967295,V=M+(L<<11&4294967295|L>>>21),L=N+(V^M^C)+k[15]+530742520&4294967295,N=V+(L<<16&4294967295|L>>>16),L=C+(N^V^M)+k[2]+3299628645&4294967295,C=N+(L<<23&4294967295|L>>>9),L=M+(N^(C|~V))+k[0]+4096336452&4294967295,M=C+(L<<6&4294967295|L>>>26),L=V+(C^(M|~N))+k[7]+1126891415&4294967295,V=M+(L<<10&4294967295|L>>>22),L=N+(M^(V|~C))+k[14]+2878612391&4294967295,N=V+(L<<15&4294967295|L>>>17),L=C+(V^(N|~M))+k[5]+4237533241&4294967295,C=N+(L<<21&4294967295|L>>>11),L=M+(N^(C|~V))+k[12]+1700485571&4294967295,M=C+(L<<6&4294967295|L>>>26),L=V+(C^(M|~N))+k[3]+2399980690&4294967295,V=M+(L<<10&4294967295|L>>>22),L=N+(M^(V|~C))+k[10]+4293915773&4294967295,N=V+(L<<15&4294967295|L>>>17),L=C+(V^(N|~M))+k[1]+2240044497&4294967295,C=N+(L<<21&4294967295|L>>>11),L=M+(N^(C|~V))+k[8]+1873313359&4294967295,M=C+(L<<6&4294967295|L>>>26),L=V+(C^(M|~N))+k[15]+4264355552&4294967295,V=M+(L<<10&4294967295|L>>>22),L=N+(M^(V|~C))+k[6]+2734768916&4294967295,N=V+(L<<15&4294967295|L>>>17),L=C+(V^(N|~M))+k[13]+1309151649&4294967295,C=N+(L<<21&4294967295|L>>>11),L=M+(N^(C|~V))+k[4]+4149444226&4294967295,M=C+(L<<6&4294967295|L>>>26),L=V+(C^(M|~N))+k[11]+3174756917&4294967295,V=M+(L<<10&4294967295|L>>>22),L=N+(M^(V|~C))+k[2]+718787259&4294967295,N=V+(L<<15&4294967295|L>>>17),L=C+(V^(N|~M))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+M&4294967295,S.g[1]=S.g[1]+(N+(L<<21&4294967295|L>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+V&4294967295}i.prototype.v=function(S,M){M===void 0&&(M=S.length);const C=M-this.blockSize,k=this.C;let N=this.h,V=0;for(;V<M;){if(N==0)for(;V<=C;)s(this,S,V),V+=this.blockSize;if(typeof S=="string"){for(;V<M;)if(k[N++]=S.charCodeAt(V++),N==this.blockSize){s(this,k),N=0;break}}else for(;V<M;)if(k[N++]=S[V++],N==this.blockSize){s(this,k),N=0;break}}this.h=N,this.o+=M},i.prototype.A=function(){var S=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);S[0]=128;for(var M=1;M<S.length-8;++M)S[M]=0;M=this.o*8;for(var C=S.length-8;C<S.length;++C)S[C]=M&255,M/=256;for(this.v(S),S=Array(16),M=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)S[M++]=this.g[C]>>>k&255;return S};function r(S,M){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=M(S)}function o(S,M){this.h=M;const C=[];let k=!0;for(let N=S.length-1;N>=0;N--){const V=S[N]|0;k&&V==M||(C[N]=V,k=!1)}this.g=C}var a={};function c(S){return-128<=S&&S<128?r(S,function(M){return new o([M|0],M<0?-1:0)}):new o([S|0],S<0?-1:0)}function d(S){if(isNaN(S)||!isFinite(S))return m;if(S<0)return I(d(-S));const M=[];let C=1;for(let k=0;S>=C;k++)M[k]=S/C|0,C*=4294967296;return new o(M,0)}function h(S,M){if(S.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(S.charAt(0)=="-")return I(h(S.substring(1),M));if(S.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=d(Math.pow(M,8));let k=m;for(let V=0;V<S.length;V+=8){var N=Math.min(8,S.length-V);const L=parseInt(S.substring(V,V+N),M);N<8?(N=d(Math.pow(M,N)),k=k.j(N).add(d(L))):(k=k.j(C),k=k.add(d(L)))}return k}var m=c(0),g=c(1),v=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-I(this).m();let S=0,M=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);S+=(k>=0?k:4294967296+k)*M,M*=4294967296}return S},t.toString=function(S){if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(T(this))return"0";if(w(this))return"-"+I(this).toString(S);const M=d(Math.pow(S,6));var C=this;let k="";for(;;){const N=R(C,M).g;C=b(C,N.j(M));let V=((C.g.length>0?C.g[0]:C.h)>>>0).toString(S);if(C=N,T(C))return V+k;for(;V.length<6;)V="0"+V;k=V+k}},t.i=function(S){return S<0?0:S<this.g.length?this.g[S]:this.h};function T(S){if(S.h!=0)return!1;for(let M=0;M<S.g.length;M++)if(S.g[M]!=0)return!1;return!0}function w(S){return S.h==-1}t.l=function(S){return S=b(this,S),w(S)?-1:T(S)?0:1};function I(S){const M=S.g.length,C=[];for(let k=0;k<M;k++)C[k]=~S.g[k];return new o(C,~S.h).add(g)}t.abs=function(){return w(this)?I(this):this},t.add=function(S){const M=Math.max(this.g.length,S.g.length),C=[];let k=0;for(let N=0;N<=M;N++){let V=k+(this.i(N)&65535)+(S.i(N)&65535),L=(V>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);k=L>>>16,V&=65535,L&=65535,C[N]=L<<16|V}return new o(C,C[C.length-1]&-2147483648?-1:0)};function b(S,M){return S.add(I(M))}t.j=function(S){if(T(this)||T(S))return m;if(w(this))return w(S)?I(this).j(I(S)):I(I(this).j(S));if(w(S))return I(this.j(I(S)));if(this.l(v)<0&&S.l(v)<0)return d(this.m()*S.m());const M=this.g.length+S.g.length,C=[];for(var k=0;k<2*M;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let N=0;N<S.g.length;N++){const V=this.i(k)>>>16,L=this.i(k)&65535,$=S.i(N)>>>16,Z=S.i(N)&65535;C[2*k+2*N]+=L*Z,E(C,2*k+2*N),C[2*k+2*N+1]+=V*Z,E(C,2*k+2*N+1),C[2*k+2*N+1]+=L*$,E(C,2*k+2*N+1),C[2*k+2*N+2]+=V*$,E(C,2*k+2*N+2)}for(S=0;S<M;S++)C[S]=C[2*S+1]<<16|C[2*S];for(S=M;S<2*M;S++)C[S]=0;return new o(C,0)};function E(S,M){for(;(S[M]&65535)!=S[M];)S[M+1]+=S[M]>>>16,S[M]&=65535,M++}function A(S,M){this.g=S,this.h=M}function R(S,M){if(T(M))throw Error("division by zero");if(T(S))return new A(m,m);if(w(S))return M=R(I(S),M),new A(I(M.g),I(M.h));if(w(M))return M=R(S,I(M)),new A(I(M.g),M.h);if(S.g.length>30){if(w(S)||w(M))throw Error("slowDivide_ only works with positive integers.");for(var C=g,k=M;k.l(S)<=0;)C=P(C),k=P(k);var N=U(C,1),V=U(k,1);for(k=U(k,2),C=U(C,2);!T(k);){var L=V.add(k);L.l(S)<=0&&(N=N.add(C),V=L),k=U(k,1),C=U(C,1)}return M=b(S,N.j(M)),new A(N,M)}for(N=m;S.l(M)>=0;){for(C=Math.max(1,Math.floor(S.m()/M.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),V=d(C),L=V.j(M);w(L)||L.l(S)>0;)C-=k,V=d(C),L=V.j(M);T(V)&&(V=g),N=N.add(V),S=b(S,L)}return new A(N,S)}t.B=function(S){return R(this,S).h},t.and=function(S){const M=Math.max(this.g.length,S.g.length),C=[];for(let k=0;k<M;k++)C[k]=this.i(k)&S.i(k);return new o(C,this.h&S.h)},t.or=function(S){const M=Math.max(this.g.length,S.g.length),C=[];for(let k=0;k<M;k++)C[k]=this.i(k)|S.i(k);return new o(C,this.h|S.h)},t.xor=function(S){const M=Math.max(this.g.length,S.g.length),C=[];for(let k=0;k<M;k++)C[k]=this.i(k)^S.i(k);return new o(C,this.h^S.h)};function P(S){const M=S.g.length+1,C=[];for(let k=0;k<M;k++)C[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(C,S.h)}function U(S,M){const C=M>>5;M%=32;const k=S.g.length-C,N=[];for(let V=0;V<k;V++)N[V]=M>0?S.i(V+C)>>>M|S.i(V+C+1)<<32-M:S.i(V+C);return new o(N,S.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,PM=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Ur=o}).apply(typeof vS<"u"?vS:typeof self<"u"?self:typeof window<"u"?window:{});var Id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var VM,vu,UM,lf,ry,OM,BM,FM;(function(){var t,e=Object.defineProperty;function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Id=="object"&&Id];for(var _=0;_<p.length;++_){var x=p[_];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=n(this);function s(p,_){if(_)e:{var x=i;p=p.split(".");for(var D=0;D<p.length-1;D++){var B=p[D];if(!(B in x))break e;x=x[B]}p=p[p.length-1],D=x[p],_=_(D),_!=D&&_!=null&&e(x,p,{configurable:!0,writable:!0,value:_})}}s("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(p){return p||function(_){var x=[],D;for(D in _)Object.prototype.hasOwnProperty.call(_,D)&&x.push([D,_[D]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},o=this||self;function a(p){var _=typeof p;return _=="object"&&p!=null||_=="function"}function c(p,_,x){return p.call.apply(p.bind,arguments)}function d(p,_,x){return d=c,d.apply(null,arguments)}function h(p,_){var x=Array.prototype.slice.call(arguments,1);return function(){var D=x.slice();return D.push.apply(D,arguments),p.apply(this,D)}}function m(p,_){function x(){}x.prototype=_.prototype,p.Z=_.prototype,p.prototype=new x,p.prototype.constructor=p,p.Ob=function(D,B,z){for(var oe=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)oe[Ve-2]=arguments[Ve];return _.prototype[B].apply(D,oe)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function v(p){const _=p.length;if(_>0){const x=Array(_);for(let D=0;D<_;D++)x[D]=p[D];return x}return[]}function T(p,_){for(let D=1;D<arguments.length;D++){const B=arguments[D];var x=typeof B;if(x=x!="object"?x:B?Array.isArray(B)?"array":x:"null",x=="array"||x=="object"&&typeof B.length=="number"){x=p.length||0;const z=B.length||0;p.length=x+z;for(let oe=0;oe<z;oe++)p[x+oe]=B[oe]}else p.push(B)}}class w{constructor(_,x){this.i=_,this.j=x,this.h=0,this.g=null}get(){let _;return this.h>0?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function I(p){o.setTimeout(()=>{throw p},0)}function b(){var p=S;let _=null;return p.g&&(_=p.g,p.g=p.g.next,p.g||(p.h=null),_.next=null),_}class E{constructor(){this.h=this.g=null}add(_,x){const D=A.get();D.set(_,x),this.h?this.h.next=D:this.g=D,this.h=D}}var A=new w(()=>new R,p=>p.reset());class R{constructor(){this.next=this.g=this.h=null}set(_,x){this.h=_,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let P,U=!1,S=new E,M=()=>{const p=Promise.resolve(void 0);P=()=>{p.then(C)}};function C(){for(var p;p=b();){try{p.h.call(p.g)}catch(x){I(x)}var _=A;_.j(p),_.h<100&&(_.h++,p.next=_.g,_.g=p)}U=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(p,_){this.type=p,this.g=this.target=_,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var p=!1,_=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const x=()=>{};o.addEventListener("test",x,_),o.removeEventListener("test",x,_)}catch{}return p}();function L(p){return/^[\s\xa0]*$/.test(p)}function $(p,_){N.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,_)}m($,N),$.prototype.init=function(p,_){const x=this.type=p.type,D=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=_,_=p.relatedTarget,_||(x=="mouseover"?_=p.fromElement:x=="mouseout"&&(_=p.toElement)),this.relatedTarget=_,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),j=0;function ee(p,_,x,D,B){this.listener=p,this.proxy=null,this.src=_,this.type=x,this.capture=!!D,this.ha=B,this.key=++j,this.da=this.fa=!1}function q(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function X(p,_,x){for(const D in p)_.call(x,p[D],D,p)}function ie(p,_){for(const x in p)_.call(void 0,p[x],x,p)}function te(p){const _={};for(const x in p)_[x]=p[x];return _}const ce="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(p,_){let x,D;for(let B=1;B<arguments.length;B++){D=arguments[B];for(x in D)p[x]=D[x];for(let z=0;z<ce.length;z++)x=ce[z],Object.prototype.hasOwnProperty.call(D,x)&&(p[x]=D[x])}}function fe(p){this.src=p,this.g={},this.h=0}fe.prototype.add=function(p,_,x,D,B){const z=p.toString();p=this.g[z],p||(p=this.g[z]=[],this.h++);const oe=Re(p,_,D,B);return oe>-1?(_=p[oe],x||(_.fa=!1)):(_=new ee(_,this.src,z,!!D,B),_.fa=x,p.push(_)),_};function F(p,_){const x=_.type;if(x in p.g){var D=p.g[x],B=Array.prototype.indexOf.call(D,_,void 0),z;(z=B>=0)&&Array.prototype.splice.call(D,B,1),z&&(q(_),p.g[x].length==0&&(delete p.g[x],p.h--))}}function Re(p,_,x,D){for(let B=0;B<p.length;++B){const z=p[B];if(!z.da&&z.listener==_&&z.capture==!!x&&z.ha==D)return B}return-1}var se="closure_lm_"+(Math.random()*1e6|0),_e={};function Ue(p,_,x,D,B){if(Array.isArray(_)){for(let z=0;z<_.length;z++)Ue(p,_[z],x,D,B);return null}return x=Rt(x),p&&p[Z]?p.J(_,x,a(D)?!!D.capture:!1,B):pe(p,_,x,!1,D,B)}function pe(p,_,x,D,B,z){if(!_)throw Error("Invalid event type");const oe=a(B)?!!B.capture:!!B;let Ve=ye(p);if(Ve||(p[se]=Ve=new fe(p)),x=Ve.add(_,x,D,oe,z),x.proxy)return x;if(D=Ee(),x.proxy=D,D.src=p,D.listener=x,p.addEventListener)V||(B=oe),B===void 0&&(B=!1),p.addEventListener(_.toString(),D,B);else if(p.attachEvent)p.attachEvent(Vt(_.toString()),D);else if(p.addListener&&p.removeListener)p.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ee(){function p(x){return _.call(p.src,p.listener,x)}const _=Pe;return p}function he(p,_,x,D,B){if(Array.isArray(_))for(var z=0;z<_.length;z++)he(p,_[z],x,D,B);else D=a(D)?!!D.capture:!!D,x=Rt(x),p&&p[Z]?(p=p.i,z=String(_).toString(),z in p.g&&(_=p.g[z],x=Re(_,x,D,B),x>-1&&(q(_[x]),Array.prototype.splice.call(_,x,1),_.length==0&&(delete p.g[z],p.h--)))):p&&(p=ye(p))&&(_=p.g[_.toString()],p=-1,_&&(p=Re(_,x,D,B)),(x=p>-1?_[p]:null)&&pt(x))}function pt(p){if(typeof p!="number"&&p&&!p.da){var _=p.src;if(_&&_[Z])F(_.i,p);else{var x=p.type,D=p.proxy;_.removeEventListener?_.removeEventListener(x,D,p.capture):_.detachEvent?_.detachEvent(Vt(x),D):_.addListener&&_.removeListener&&_.removeListener(D),(x=ye(_))?(F(x,p),x.h==0&&(x.src=null,_[se]=null)):q(p)}}}function Vt(p){return p in _e?_e[p]:_e[p]="on"+p}function Pe(p,_){if(p.da)p=!0;else{_=new $(_,this);const x=p.listener,D=p.ha||p.src;p.fa&&pt(p),p=x.call(D,_)}return p}function ye(p){return p=p[se],p instanceof fe?p:null}var Je="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rt(p){return typeof p=="function"?p:(p[Je]||(p[Je]=function(_){return p.handleEvent(_)}),p[Je])}function Le(){k.call(this),this.i=new fe(this),this.M=this,this.G=null}m(Le,k),Le.prototype[Z]=!0,Le.prototype.removeEventListener=function(p,_,x,D){he(this,p,_,x,D)};function Q(p,_){var x,D=p.G;if(D)for(x=[];D;D=D.G)x.push(D);if(p=p.M,D=_.type||_,typeof _=="string")_=new N(_,p);else if(_ instanceof N)_.target=_.target||p;else{var B=_;_=new N(D,p),ne(_,B)}B=!0;let z,oe;if(x)for(oe=x.length-1;oe>=0;oe--)z=_.g=x[oe],B=We(z,D,!0,_)&&B;if(z=_.g=p,B=We(z,D,!0,_)&&B,B=We(z,D,!1,_)&&B,x)for(oe=0;oe<x.length;oe++)z=_.g=x[oe],B=We(z,D,!1,_)&&B}Le.prototype.N=function(){if(Le.Z.N.call(this),this.i){var p=this.i;for(const _ in p.g){const x=p.g[_];for(let D=0;D<x.length;D++)q(x[D]);delete p.g[_],p.h--}}this.G=null},Le.prototype.J=function(p,_,x,D){return this.i.add(String(p),_,!1,x,D)},Le.prototype.K=function(p,_,x,D){return this.i.add(String(p),_,!0,x,D)};function We(p,_,x,D){if(_=p.i.g[String(_)],!_)return!0;_=_.concat();let B=!0;for(let z=0;z<_.length;++z){const oe=_[z];if(oe&&!oe.da&&oe.capture==x){const Ve=oe.listener,Zt=oe.ha||oe.src;oe.fa&&F(p.i,oe),B=Ve.call(Zt,D)!==!1&&B}}return B&&!D.defaultPrevented}function En(p,_){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=d(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(_)>2147483647?-1:o.setTimeout(p,_||0)}function xn(p){p.g=En(()=>{p.g=null,p.i&&(p.i=!1,xn(p))},p.l);const _=p.h;p.h=null,p.m.apply(null,_)}class ae extends k{constructor(_,x){super(),this.m=_,this.l=x,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:xn(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qe(p){k.call(this),this.h=p,this.g={}}m(qe,k);var Ut=[];function vt(p){X(p.g,function(_,x){this.g.hasOwnProperty(x)&&pt(_)},p),p.g={}}qe.prototype.N=function(){qe.Z.N.call(this),vt(this)},qe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ui=o.JSON.stringify,$s=o.JSON.parse,io=class{stringify(p){return o.JSON.stringify(p,void 0)}parse(p){return o.JSON.parse(p,void 0)}};function jt(){}function zt(){}var it={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function st(){N.call(this,"d")}m(st,N);function Vn(){N.call(this,"c")}m(Vn,N);var fi={},as=null;function ls(){return as=as||new Le}fi.Ia="serverreachability";function us(p){N.call(this,fi.Ia,p)}m(us,N);function Ai(p){const _=ls();Q(_,new us(_))}fi.STAT_EVENT="statevent";function so(p,_){N.call(this,fi.STAT_EVENT,p),this.stat=_}m(so,N);function qt(p){const _=ls();Q(_,new so(_,p))}fi.Ja="timingevent";function cs(p,_){N.call(this,fi.Ja,p),this.size=_}m(cs,N);function Rn(p,_){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){p()},_)}function fn(){this.g=!0}fn.prototype.ua=function(){this.g=!1};function Ii(p,_,x,D,B,z){p.info(function(){if(p.g)if(z){var oe="",Ve=z.split("&");for(let dt=0;dt<Ve.length;dt++){var Zt=Ve[dt].split("=");if(Zt.length>1){const on=Zt[0];Zt=Zt[1];const ji=on.split("_");oe=ji.length>=2&&ji[1]=="type"?oe+(on+"="+Zt+"&"):oe+(on+"=redacted&")}}}else oe=null;else oe=z;return"XMLHTTP REQ ("+D+") [attempt "+B+"]: "+_+`
`+x+`
`+oe})}function $n(p,_,x,D,B,z,oe){p.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+B+"]: "+_+`
`+x+`
`+z+" "+oe})}function Cn(p,_,x,D){p.info(function(){return"XMLHTTP TEXT ("+_+"): "+Bi(p,x)+(D?" "+D:"")})}function Oi(p,_){p.info(function(){return"TIMEOUT: "+_})}fn.prototype.info=function(){};function Bi(p,_){if(!p.g)return _;if(!_)return null;try{const z=JSON.parse(_);if(z){for(p=0;p<z.length;p++)if(Array.isArray(z[p])){var x=z[p];if(!(x.length<2)){var D=x[1];if(Array.isArray(D)&&!(D.length<1)){var B=D[0];if(B!="noop"&&B!="stop"&&B!="close")for(let oe=1;oe<D.length;oe++)D[oe]=""}}}}return Ui(z)}catch{return _}}var xe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},$c={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kc;function Ks(){}m(Ks,jt),Ks.prototype.g=function(){return new XMLHttpRequest},Kc=new Ks;function ro(p){return encodeURIComponent(String(p))}function Sp(p){var _=1;p=p.split(":");const x=[];for(;_>0&&p.length;)x.push(p.shift()),_--;return p.length&&x.push(p.join(":")),x}function Sn(p,_,x,D){this.j=p,this.i=_,this.l=x,this.S=D||1,this.V=new qe(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ds}function ds(){this.i=null,this.g="",this.h=!1}var Jc={},Fl={};function jl(p,_,x){p.M=1,p.A=Zc(Fi(_)),p.u=x,p.R=!0,Yc(p,null)}function Yc(p,_){p.F=Date.now(),na(p),p.B=Fi(p.A);var x=p.B,D=p.S;Array.isArray(D)||(D=[String(D)]),o_(x.i,"t",D),p.C=0,x=p.j.L,p.h=new ds,p.g=S_(p.j,x?_:null,!p.u),p.P>0&&(p.O=new ae(d(p.Y,p,p.g),p.P)),_=p.V,x=p.g,D=p.ba;var B="readystatechange";Array.isArray(B)||(B&&(Ut[0]=B.toString()),B=Ut);for(let z=0;z<B.length;z++){const oe=Ue(x,B[z],D||_.handleEvent,!1,_.h||_);if(!oe)break;_.g[oe.key]=oe}_=p.J?te(p.J):{},p.u?(p.v||(p.v="POST"),_["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,_)):(p.v="GET",p.g.ea(p.B,p.v,null,_)),Ai(),Ii(p.i,p.v,p.B,p.l,p.S,p.u)}Sn.prototype.ba=function(p){p=p.target;const _=this.O;_&&Qs(p)==3?_.j():this.Y(p)},Sn.prototype.Y=function(p){try{if(p==this.g)e:{const Ve=Qs(this.g),Zt=this.g.ya(),dt=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||h_(this.g)))){this.K||Ve!=4||Zt==7||(Zt==8||dt<=0?Ai(3):Ai(2)),zl(this);var _=this.g.ca();this.X=_;var x=wp(this);if(this.o=_==200,$n(this.i,this.v,this.B,this.l,this.S,Ve,_),this.o){if(this.U&&!this.L){t:{if(this.g){var D,B=this.g;if((D=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(D)){var z=D;break t}}z=null}if(p=z)Cn(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,O(this,p);else{this.o=!1,this.m=3,qt(12),fs(this),Js(this);break e}}if(this.R){p=!0;let on;for(;!this.K&&this.C<x.length;)if(on=Qc(this,x),on==Fl){Ve==4&&(this.m=4,qt(14),p=!1),Cn(this.i,this.l,null,"[Incomplete Response]");break}else if(on==Jc){this.m=4,qt(15),Cn(this.i,this.l,x,"[Invalid Chunk]"),p=!1;break}else Cn(this.i,this.l,on,null),O(this,on);if(Wc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||x.length!=0||this.h.h||(this.m=1,qt(16),p=!1),this.o=this.o&&p,!p)Cn(this.i,this.l,x,"[Invalid Chunked Response]"),fs(this),Js(this);else if(x.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),kp(oe),oe.P=!0,qt(11))}}else Cn(this.i,this.l,x,null),O(this,x);Ve==4&&fs(this),this.o&&!this.K&&(Ve==4?T_(this.j,this):(this.o=!1,na(this)))}else jk(this.g),_==400&&x.indexOf("Unknown SID")>0?(this.m=3,qt(12)):(this.m=0,qt(13)),fs(this),Js(this)}}}catch{}finally{}};function wp(p){if(!Wc(p))return p.g.la();const _=h_(p.g);if(_==="")return"";let x="";const D=_.length,B=Qs(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return fs(p),Js(p),"";p.h.i=new o.TextDecoder}for(let z=0;z<D;z++)p.h.h=!0,x+=p.h.i.decode(_[z],{stream:!(B&&z==D-1)});return _.length=0,p.h.g+=x,p.C=0,p.h.g}function Wc(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function Qc(p,_){var x=p.C,D=_.indexOf(`
`,x);return D==-1?Fl:(x=Number(_.substring(x,D)),isNaN(x)?Jc:(D+=1,D+x>_.length?Fl:(_=_.slice(D,D+x),p.C=D+x,_)))}Sn.prototype.cancel=function(){this.K=!0,fs(this)};function na(p){p.T=Date.now()+p.H,Kn(p,p.H)}function Kn(p,_){if(p.D!=null)throw Error("WatchDog timer not null");p.D=Rn(d(p.aa,p),_)}function zl(p){p.D&&(o.clearTimeout(p.D),p.D=null)}Sn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(Oi(this.i,this.B),this.M!=2&&(Ai(),qt(17)),fs(this),this.m=2,Js(this)):Kn(this,this.T-p)};function Js(p){p.j.I==0||p.K||T_(p.j,p)}function fs(p){zl(p);var _=p.O;_&&typeof _.dispose=="function"&&_.dispose(),p.O=null,vt(p.V),p.g&&(_=p.g,p.g=null,_.abort(),_.dispose())}function O(p,_){try{var x=p.j;if(x.I!=0&&(x.g==p||me(x.h,p))){if(!p.L&&me(x.h,p)&&x.I==3){try{var D=x.Ba.g.parse(_)}catch{D=null}if(Array.isArray(D)&&D.length==3){var B=D;if(B[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<p.F)id(x),td(x);else break e;Rp(x),qt(18)}}else x.xa=B[1],0<x.xa-x.K&&B[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Rn(d(x.Va,x),6e3));de(x.h)<=1&&x.ta&&(x.ta=void 0)}else ao(x,11)}else if((p.L||x.g==p)&&id(x),!L(_))for(B=x.Ba.g.parse(_),_=0;_<B.length;_++){let dt=B[_];const on=dt[0];if(!(on<=x.K))if(x.K=on,dt=dt[1],x.I==2)if(dt[0]=="c"){x.M=dt[1],x.ba=dt[2];const ji=dt[3];ji!=null&&(x.ka=ji,x.j.info("VER="+x.ka));const lo=dt[4];lo!=null&&(x.za=lo,x.j.info("SVER="+x.za));const Zs=dt[5];Zs!=null&&typeof Zs=="number"&&Zs>0&&(D=1.5*Zs,x.O=D,x.j.info("backChannelRequestTimeoutMs_="+D)),D=x;const Xs=p.g;if(Xs){const rd=Xs.g?Xs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rd){var z=D.h;z.g||rd.indexOf("spdy")==-1&&rd.indexOf("quic")==-1&&rd.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(Se(z,z.h),z.h=null))}if(D.G){const Np=Xs.g?Xs.g.getResponseHeader("X-HTTP-Session-Id"):null;Np&&(D.wa=Np,_t(D.J,D.G,Np))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-p.F,x.j.info("Handshake RTT: "+x.T+"ms")),D=x;var oe=p;if(D.na=C_(D,D.L?D.ba:null,D.W),oe.L){mt(D.h,oe);var Ve=oe,Zt=D.O;Zt&&(Ve.H=Zt),Ve.D&&(zl(Ve),na(Ve)),D.g=oe}else v_(D);x.i.length>0&&nd(x)}else dt[0]!="stop"&&dt[0]!="close"||ao(x,7);else x.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?ao(x,7):Mp(x):dt[0]!="noop"&&x.l&&x.l.qa(dt),x.A=0)}}Ai(4)}catch{}}var H=class{constructor(p,_){this.g=p,this.map=_}};function Y(p){this.l=p||10,o.PerformanceNavigationTiming?(p=o.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function re(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function de(p){return p.h?1:p.g?p.g.size:0}function me(p,_){return p.h?p.h==_:p.g?p.g.has(_):!1}function Se(p,_){p.g?p.g.add(_):p.h=_}function mt(p,_){p.h&&p.h==_?p.h=null:p.g&&p.g.has(_)&&p.g.delete(_)}Y.prototype.cancel=function(){if(this.i=ct(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function ct(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let _=p.i;for(const x of p.g.values())_=_.concat(x.G);return _}return v(p.i)}var rn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ys(p,_){if(p){p=p.split("&");for(let x=0;x<p.length;x++){const D=p[x].indexOf("=");let B,z=null;D>=0?(B=p[x].substring(0,D),z=p[x].substring(D+1)):B=p[x],_(B,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function hi(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let _;p instanceof hi?(this.l=p.l,ql(this,p.j),this.o=p.o,this.g=p.g,Hl(this,p.u),this.h=p.h,bp(this,a_(p.i)),this.m=p.m):p&&(_=String(p).match(rn))?(this.l=!1,ql(this,_[1]||"",!0),this.o=Gl(_[2]||""),this.g=Gl(_[3]||"",!0),Hl(this,_[4]),this.h=Gl(_[5]||"",!0),bp(this,_[6]||"",!0),this.m=Gl(_[7]||"")):(this.l=!1,this.i=new Kl(null,this.l))}hi.prototype.toString=function(){const p=[];var _=this.j;_&&p.push($l(_,n_,!0),":");var x=this.g;return(x||_=="file")&&(p.push("//"),(_=this.o)&&p.push($l(_,n_,!0),"@"),p.push(ro(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&p.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&p.push("/"),p.push($l(x,x.charAt(0)=="/"?Nk:kk,!0))),(x=this.i.toString())&&p.push("?",x),(x=this.m)&&p.push("#",$l(x,Dk)),p.join("")},hi.prototype.resolve=function(p){const _=Fi(this);let x=!!p.j;x?ql(_,p.j):x=!!p.o,x?_.o=p.o:x=!!p.g,x?_.g=p.g:x=p.u!=null;var D=p.h;if(x)Hl(_,p.u);else if(x=!!p.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var B=_.h.lastIndexOf("/");B!=-1&&(D=_.h.slice(0,B+1)+D)}if(B=D,B==".."||B==".")D="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){D=B.lastIndexOf("/",0)==0,B=B.split("/");const z=[];for(let oe=0;oe<B.length;){const Ve=B[oe++];Ve=="."?D&&oe==B.length&&z.push(""):Ve==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),D&&oe==B.length&&z.push("")):(z.push(Ve),D=!0)}D=z.join("/")}else D=B}return x?_.h=D:x=p.i.toString()!=="",x?bp(_,a_(p.i)):x=!!p.m,x&&(_.m=p.m),_};function Fi(p){return new hi(p)}function ql(p,_,x){p.j=x?Gl(_,!0):_,p.j&&(p.j=p.j.replace(/:$/,""))}function Hl(p,_){if(_){if(_=Number(_),isNaN(_)||_<0)throw Error("Bad port number "+_);p.u=_}else p.u=null}function bp(p,_,x){_ instanceof Kl?(p.i=_,Pk(p.i,p.l)):(x||(_=$l(_,Lk)),p.i=new Kl(_,p.l))}function _t(p,_,x){p.i.set(_,x)}function Zc(p){return _t(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function Gl(p,_){return p?_?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function $l(p,_,x){return typeof p=="string"?(p=encodeURI(p).replace(_,Rk),x&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function Rk(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var n_=/[#\/\?@]/g,kk=/[#\?:]/g,Nk=/[#\?]/g,Lk=/[#\?@]/g,Dk=/#/g;function Kl(p,_){this.h=this.g=null,this.i=p||null,this.j=!!_}function oo(p){p.g||(p.g=new Map,p.h=0,p.i&&Ys(p.i,function(_,x){p.add(decodeURIComponent(_.replace(/\+/g," ")),x)}))}t=Kl.prototype,t.add=function(p,_){oo(this),this.i=null,p=ia(this,p);let x=this.g.get(p);return x||this.g.set(p,x=[]),x.push(_),this.h+=1,this};function i_(p,_){oo(p),_=ia(p,_),p.g.has(_)&&(p.i=null,p.h-=p.g.get(_).length,p.g.delete(_))}function s_(p,_){return oo(p),_=ia(p,_),p.g.has(_)}t.forEach=function(p,_){oo(this),this.g.forEach(function(x,D){x.forEach(function(B){p.call(_,B,D,this)},this)},this)};function r_(p,_){oo(p);let x=[];if(typeof _=="string")s_(p,_)&&(x=x.concat(p.g.get(ia(p,_))));else for(p=Array.from(p.g.values()),_=0;_<p.length;_++)x=x.concat(p[_]);return x}t.set=function(p,_){return oo(this),this.i=null,p=ia(this,p),s_(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[_]),this.h+=1,this},t.get=function(p,_){return p?(p=r_(this,p),p.length>0?String(p[0]):_):_};function o_(p,_,x){i_(p,_),x.length>0&&(p.i=null,p.g.set(ia(p,_),v(x)),p.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],_=Array.from(this.g.keys());for(let D=0;D<_.length;D++){var x=_[D];const B=ro(x);x=r_(this,x);for(let z=0;z<x.length;z++){let oe=B;x[z]!==""&&(oe+="="+ro(x[z])),p.push(oe)}}return this.i=p.join("&")};function a_(p){const _=new Kl;return _.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),_}function ia(p,_){return _=String(_),p.j&&(_=_.toLowerCase()),_}function Pk(p,_){_&&!p.j&&(oo(p),p.i=null,p.g.forEach(function(x,D){const B=D.toLowerCase();D!=B&&(i_(this,D),o_(this,B,x))},p)),p.j=_}function Vk(p,_){const x=new fn;if(o.Image){const D=new Image;D.onload=h(Ws,x,"TestLoadImage: loaded",!0,_,D),D.onerror=h(Ws,x,"TestLoadImage: error",!1,_,D),D.onabort=h(Ws,x,"TestLoadImage: abort",!1,_,D),D.ontimeout=h(Ws,x,"TestLoadImage: timeout",!1,_,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=p}else _(!1)}function Uk(p,_){const x=new fn,D=new AbortController,B=setTimeout(()=>{D.abort(),Ws(x,"TestPingServer: timeout",!1,_)},1e4);fetch(p,{signal:D.signal}).then(z=>{clearTimeout(B),z.ok?Ws(x,"TestPingServer: ok",!0,_):Ws(x,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(B),Ws(x,"TestPingServer: error",!1,_)})}function Ws(p,_,x,D,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),D(x)}catch{}}function Ok(){this.g=new io}function Ap(p){this.i=p.Sb||null,this.h=p.ab||!1}m(Ap,jt),Ap.prototype.g=function(){return new Xc(this.i,this.h)};function Xc(p,_){Le.call(this),this.H=p,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Xc,Le),t=Xc.prototype,t.open=function(p,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=_,this.readyState=1,Yl(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const _={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(_.body=p),(this.H||o).fetch(new Request(this.D,_)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Jl(this)),this.readyState=0},t.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Yl(this)),this.g&&(this.readyState=3,Yl(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;l_(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function l_(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}t.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var _=p.value?p.value:new Uint8Array(0);(_=this.B.decode(_,{stream:!p.done}))&&(this.response=this.responseText+=_)}p.done?Jl(this):Yl(this),this.readyState==3&&l_(this)}},t.Oa=function(p){this.g&&(this.response=this.responseText=p,Jl(this))},t.Na=function(p){this.g&&(this.response=p,Jl(this))},t.ga=function(){this.g&&Jl(this)};function Jl(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Yl(p)}t.setRequestHeader=function(p,_){this.A.append(p,_)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],_=this.h.entries();for(var x=_.next();!x.done;)x=x.value,p.push(x[0]+": "+x[1]),x=_.next();return p.join(`\r
`)};function Yl(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Xc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function u_(p){let _="";return X(p,function(x,D){_+=D,_+=":",_+=x,_+=`\r
`}),_}function Ip(p,_,x){e:{for(D in x){var D=!1;break e}D=!0}D||(x=u_(x),typeof p=="string"?x!=null&&ro(x):_t(p,_,x))}function kt(p){Le.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(kt,Le);var Bk=/^https?$/i,Fk=["POST","PUT"];t=kt.prototype,t.Fa=function(p){this.H=p},t.ea=function(p,_,x,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);_=_?_.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kc.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(_,String(p),!0),this.B=!1}catch(z){c_(this,z);return}if(p=x||"",x=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var B in D)x.set(B,D[B]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const z of D.keys())x.set(z,D.get(z));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(x.keys()).find(z=>z.toLowerCase()=="content-type"),B=o.FormData&&p instanceof o.FormData,!(Array.prototype.indexOf.call(Fk,_,void 0)>=0)||D||B||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,oe]of x)this.g.setRequestHeader(z,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(z){c_(this,z)}};function c_(p,_){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=_,p.o=5,d_(p),ed(p)}function d_(p){p.A||(p.A=!0,Q(p,"complete"),Q(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Q(this,"complete"),Q(this,"abort"),ed(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ed(this,!0)),kt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?f_(this):this.Xa())},t.Xa=function(){f_(this)};function f_(p){if(p.h&&typeof r<"u"){if(p.v&&Qs(p)==4)setTimeout(p.Ca.bind(p),0);else if(Q(p,"readystatechange"),Qs(p)==4){p.h=!1;try{const z=p.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var x;if(!(x=_)){var D;if(D=z===0){let oe=String(p.D).match(rn)[1]||null;!oe&&o.self&&o.self.location&&(oe=o.self.location.protocol.slice(0,-1)),D=!Bk.test(oe?oe.toLowerCase():"")}x=D}if(x)Q(p,"complete"),Q(p,"success");else{p.o=6;try{var B=Qs(p)>2?p.g.statusText:""}catch{B=""}p.l=B+" ["+p.ca()+"]",d_(p)}}finally{ed(p)}}}}function ed(p,_){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const x=p.g;p.g=null,_||Q(p,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Qs(p){return p.g?p.g.readyState:0}t.ca=function(){try{return Qs(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(p){if(this.g){var _=this.g.responseText;return p&&_.indexOf(p)==0&&(_=_.substring(p.length)),$s(_)}};function h_(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function jk(p){const _={};p=(p.g&&Qs(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<p.length;D++){if(L(p[D]))continue;var x=Sp(p[D]);const B=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const z=_[B]||[];_[B]=z,z.push(x)}ie(_,function(D){return D.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wl(p,_,x){return x&&x.internalChannelParams&&x.internalChannelParams[p]||_}function p_(p){this.za=0,this.i=[],this.j=new fn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wl("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wl("baseRetryDelayMs",5e3,p),this.Za=Wl("retryDelaySeedMs",1e4,p),this.Ta=Wl("forwardChannelMaxRetries",2,p),this.va=Wl("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new Y(p&&p.concurrentRequestLimit),this.Ba=new Ok,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=p_.prototype,t.ka=8,t.I=1,t.connect=function(p,_,x,D){qt(0),this.W=p,this.H=_||{},x&&D!==void 0&&(this.H.OSID=x,this.H.OAID=D),this.F=this.X,this.J=C_(this,null,this.W),nd(this)};function Mp(p){if(m_(p),p.I==3){var _=p.V++,x=Fi(p.J);if(_t(x,"SID",p.M),_t(x,"RID",_),_t(x,"TYPE","terminate"),Ql(p,x),_=new Sn(p,p.j,_),_.M=2,_.A=Zc(Fi(x)),x=!1,o.navigator&&o.navigator.sendBeacon)try{x=o.navigator.sendBeacon(_.A.toString(),"")}catch{}!x&&o.Image&&(new Image().src=_.A,x=!0),x||(_.g=S_(_.j,null),_.g.ea(_.A)),_.F=Date.now(),na(_)}x_(p)}function td(p){p.g&&(kp(p),p.g.cancel(),p.g=null)}function m_(p){td(p),p.v&&(o.clearTimeout(p.v),p.v=null),id(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&o.clearTimeout(p.m),p.m=null)}function nd(p){if(!re(p.h)&&!p.m){p.m=!0;var _=p.Ea;P||M(),U||(P(),U=!0),S.add(_,p),p.D=0}}function zk(p,_){return de(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=_.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=Rn(d(p.Ea,p,_),E_(p,p.D)),p.D++,!0)}t.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const B=new Sn(this,this.j,p);let z=this.o;if(this.U&&(z?(z=te(z),ne(z,this.U)):z=this.U),this.u!==null||this.R||(B.J=z,z=null),this.S)e:{for(var _=0,x=0;x<this.i.length;x++){t:{var D=this.i[x];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(_+=D,_>4096){_=x;break e}if(_===4096||x===this.i.length-1){_=x+1;break e}}_=1e3}else _=1e3;_=y_(this,B,_),x=Fi(this.J),_t(x,"RID",p),_t(x,"CVER",22),this.G&&_t(x,"X-HTTP-Session-Id",this.G),Ql(this,x),z&&(this.R?_="headers="+ro(u_(z))+"&"+_:this.u&&Ip(x,this.u,z)),Se(this.h,B),this.Ra&&_t(x,"TYPE","init"),this.S?(_t(x,"$req",_),_t(x,"SID","null"),B.U=!0,jl(B,x,null)):jl(B,x,_),this.I=2}}else this.I==3&&(p?g_(this,p):this.i.length==0||re(this.h)||g_(this))};function g_(p,_){var x;_?x=_.l:x=p.V++;const D=Fi(p.J);_t(D,"SID",p.M),_t(D,"RID",x),_t(D,"AID",p.K),Ql(p,D),p.u&&p.o&&Ip(D,p.u,p.o),x=new Sn(p,p.j,x,p.D+1),p.u===null&&(x.J=p.o),_&&(p.i=_.G.concat(p.i)),_=y_(p,x,1e3),x.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),Se(p.h,x),jl(x,D,_)}function Ql(p,_){p.H&&X(p.H,function(x,D){_t(_,D,x)}),p.l&&X({},function(x,D){_t(_,D,x)})}function y_(p,_,x){x=Math.min(p.i.length,x);const D=p.l?d(p.l.Ka,p.l,p):null;e:{var B=p.i;let Ve=-1;for(;;){const Zt=["count="+x];Ve==-1?x>0?(Ve=B[0].g,Zt.push("ofs="+Ve)):Ve=0:Zt.push("ofs="+Ve);let dt=!0;for(let on=0;on<x;on++){var z=B[on].g;const ji=B[on].map;if(z-=Ve,z<0)Ve=Math.max(0,B[on].g-100),dt=!1;else try{z="req"+z+"_"||"";try{var oe=ji instanceof Map?ji:Object.entries(ji);for(const[lo,Zs]of oe){let Xs=Zs;a(Zs)&&(Xs=Ui(Zs)),Zt.push(z+lo+"="+encodeURIComponent(Xs))}}catch(lo){throw Zt.push(z+"type="+encodeURIComponent("_badmap")),lo}}catch{D&&D(ji)}}if(dt){oe=Zt.join("&");break e}}oe=void 0}return p=p.i.splice(0,x),_.G=p,oe}function v_(p){if(!p.g&&!p.v){p.Y=1;var _=p.Da;P||M(),U||(P(),U=!0),S.add(_,p),p.A=0}}function Rp(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=Rn(d(p.Da,p),E_(p,p.A)),p.A++,!0)}t.Da=function(){if(this.v=null,__(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=Rn(d(this.Wa,this),p)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,qt(10),td(this),__(this))};function kp(p){p.B!=null&&(o.clearTimeout(p.B),p.B=null)}function __(p){p.g=new Sn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var _=Fi(p.na);_t(_,"RID","rpc"),_t(_,"SID",p.M),_t(_,"AID",p.K),_t(_,"CI",p.F?"0":"1"),!p.F&&p.ia&&_t(_,"TO",p.ia),_t(_,"TYPE","xmlhttp"),Ql(p,_),p.u&&p.o&&Ip(_,p.u,p.o),p.O&&(p.g.H=p.O);var x=p.g;p=p.ba,x.M=1,x.A=Zc(Fi(_)),x.u=null,x.R=!0,Yc(x,p)}t.Va=function(){this.C!=null&&(this.C=null,td(this),Rp(this),qt(19))};function id(p){p.C!=null&&(o.clearTimeout(p.C),p.C=null)}function T_(p,_){var x=null;if(p.g==_){id(p),kp(p),p.g=null;var D=2}else if(me(p.h,_))x=_.G,mt(p.h,_),D=1;else return;if(p.I!=0){if(_.o)if(D==1){x=_.u?_.u.length:0,_=Date.now()-_.F;var B=p.D;D=ls(),Q(D,new cs(D,x)),nd(p)}else v_(p);else if(B=_.m,B==3||B==0&&_.X>0||!(D==1&&zk(p,_)||D==2&&Rp(p)))switch(x&&x.length>0&&(_=p.h,_.i=_.i.concat(x)),B){case 1:ao(p,5);break;case 4:ao(p,10);break;case 3:ao(p,6);break;default:ao(p,2)}}}function E_(p,_){let x=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(x*=2),x*_}function ao(p,_){if(p.j.info("Error code "+_),_==2){var x=d(p.bb,p),D=p.Ua;const B=!D;D=new hi(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ql(D,"https"),Zc(D),B?Vk(D.toString(),x):Uk(D.toString(),x)}else qt(2);p.I=0,p.l&&p.l.pa(_),x_(p),m_(p)}t.bb=function(p){p?(this.j.info("Successfully pinged google.com"),qt(2)):(this.j.info("Failed to ping google.com"),qt(1))};function x_(p){if(p.I=0,p.ja=[],p.l){const _=ct(p.h);(_.length!=0||p.i.length!=0)&&(T(p.ja,_),T(p.ja,p.i),p.h.i.length=0,v(p.i),p.i.length=0),p.l.oa()}}function C_(p,_,x){var D=x instanceof hi?Fi(x):new hi(x);if(D.g!="")_&&(D.g=_+"."+D.g),Hl(D,D.u);else{var B=o.location;D=B.protocol,_=_?_+"."+B.hostname:B.hostname,B=+B.port;const z=new hi(null);D&&ql(z,D),_&&(z.g=_),B&&Hl(z,B),x&&(z.h=x),D=z}return x=p.G,_=p.wa,x&&_&&_t(D,x,_),_t(D,"VER",p.ka),Ql(p,D),D}function S_(p,_,x){if(_&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return _=p.Aa&&!p.ma?new kt(new Ap({ab:x})):new kt(p.ma),_.Fa(p.L),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function w_(){}t=w_.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function sd(){}sd.prototype.g=function(p,_){return new Jn(p,_)};function Jn(p,_){Le.call(this),this.g=new p_(_),this.l=p,this.h=_&&_.messageUrlParams||null,p=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(p?p["X-WebChannel-Content-Type"]=_.messageContentType:p={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.sa&&(p?p["X-WebChannel-Client-Profile"]=_.sa:p={"X-WebChannel-Client-Profile":_.sa}),this.g.U=p,(p=_&&_.Qb)&&!L(p)&&(this.g.u=p),this.A=_&&_.supportsCrossDomainXhr||!1,this.v=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!L(_)&&(this.g.G=_,p=this.h,p!==null&&_ in p&&(p=this.h,_ in p&&delete p[_])),this.j=new sa(this)}m(Jn,Le),Jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jn.prototype.close=function(){Mp(this.g)},Jn.prototype.o=function(p){var _=this.g;if(typeof p=="string"){var x={};x.__data__=p,p=x}else this.v&&(x={},x.__data__=Ui(p),p=x);_.i.push(new H(_.Ya++,p)),_.I==3&&nd(_)},Jn.prototype.N=function(){this.g.l=null,delete this.j,Mp(this.g),delete this.g,Jn.Z.N.call(this)};function b_(p){st.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var _=p.__sm__;if(_){e:{for(const x in _){p=x;break e}p=void 0}(this.i=p)&&(p=this.i,_=_!==null&&p in _?_[p]:void 0),this.data=_}else this.data=p}m(b_,st);function A_(){Vn.call(this),this.status=1}m(A_,Vn);function sa(p){this.g=p}m(sa,w_),sa.prototype.ra=function(){Q(this.g,"a")},sa.prototype.qa=function(p){Q(this.g,new b_(p))},sa.prototype.pa=function(p){Q(this.g,new A_)},sa.prototype.oa=function(){Q(this.g,"b")},sd.prototype.createWebChannel=sd.prototype.g,Jn.prototype.send=Jn.prototype.o,Jn.prototype.open=Jn.prototype.m,Jn.prototype.close=Jn.prototype.close,FM=function(){return new sd},BM=function(){return ls()},OM=fi,ry={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xe.NO_ERROR=0,xe.TIMEOUT=8,xe.HTTP_ERROR=6,lf=xe,$c.COMPLETE="complete",UM=$c,zt.EventType=it,it.OPEN="a",it.CLOSE="b",it.ERROR="c",it.MESSAGE="d",Le.prototype.listen=Le.prototype.J,vu=zt,kt.prototype.listenOnce=kt.prototype.K,kt.prototype.getLastError=kt.prototype.Ha,kt.prototype.getLastErrorCode=kt.prototype.ya,kt.prototype.getStatus=kt.prototype.ca,kt.prototype.getResponseJson=kt.prototype.La,kt.prototype.getResponseText=kt.prototype.la,kt.prototype.send=kt.prototype.ea,kt.prototype.setWithCredentials=kt.prototype.Fa,VM=kt}).apply(typeof Id<"u"?Id:typeof self<"u"?self:typeof window<"u"?window:{});const _S="@firebase/firestore",TS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bn.UNAUTHENTICATED=new bn(null),bn.GOOGLE_CREDENTIALS=new bn("google-credentials-uid"),bn.FIRST_PARTY=new bn("first-party-uid"),bn.MOCK_USER=new bn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nl="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=new Yv("@firebase/firestore");function ma(){return Fo.logLevel}function ge(t,...e){if(Fo.logLevel<=He.DEBUG){const n=e.map(l0);Fo.debug(`Firestore (${Nl}): ${t}`,...n)}}function Bs(t,...e){if(Fo.logLevel<=He.ERROR){const n=e.map(l0);Fo.error(`Firestore (${Nl}): ${t}`,...n)}}function ul(t,...e){if(Fo.logLevel<=He.WARN){const n=e.map(l0);Fo.warn(`Firestore (${Nl}): ${t}`,...n)}}function l0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,jM(t,i,n)}function jM(t,e,n){let i=`FIRESTORE (${Nl}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Bs(i),new Error(i)}function Ze(t,e,n,i){let s="Unexpected state";typeof n=="string"?s=n:i=n,t||jM(e,s,i)}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends os{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gH{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bn.UNAUTHENTICATED))}shutdown(){}}class yH{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vH{constructor(e){this.t=e,this.currentUser=bn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0,42304);let i=this.i;const s=c=>this.i!==i?(i=this.i,n(c)):Promise.resolve();let r=new Xi;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Xi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=r;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},a=c=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?a(c):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Xi)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ze(typeof i.accessToken=="string",31837,{l:i}),new zM(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new bn(e)}}class _H{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=bn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TH{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new _H(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(bn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ES{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EH{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ze(this.o===void 0,3512);const i=r=>{r.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,ge("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ES(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ES(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xH(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=xH(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<n&&(i+=e.charAt(s[r]%62))}return i}}function Ge(t,e){return t<e?-1:t>e?1:0}function oy(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const s=t.charAt(i),r=e.charAt(i);if(s!==r)return km(s)===km(r)?Ge(s,r):km(s)?1:-1}return Ge(t.length,e.length)}const CH=55296,SH=57343;function km(t){const e=t.charCodeAt(0);return e>=CH&&e<=SH}function cl(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="__name__";class Hi{constructor(e,n,i){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&Ce(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Hi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Hi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const r=Hi.compareSegments(e.get(s),n.get(s));if(r!==0)return r}return Ge(e.length,n.length)}static compareSegments(e,n){const i=Hi.isNumericId(e),s=Hi.isNumericId(n);return i&&!s?-1:!i&&s?1:i&&s?Hi.extractNumericId(e).compare(Hi.extractNumericId(n)):oy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ur.fromString(e.substring(4,e.length-2))}}class ut extends Hi{construct(e,n,i){return new ut(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new le(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new ut(n)}static emptyPath(){return new ut([])}}const wH=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends Hi{construct(e,n,i){return new yn(e,n,i)}static isValidIdentifier(e){return wH.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xS}static keyField(){return new yn([xS])}static fromServerFormat(e){const n=[];let i="",s=0;const r=()=>{if(i.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new le(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new le(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new le(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(n)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ut.fromString(e))}static fromName(e){return new Te(ut.fromString(e).popFirst(5))}static empty(){return new Te(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ut.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qM(t,e,n){if(!n)throw new le(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bH(t,e,n,i){if(e===!0&&i===!0)throw new le(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function CS(t){if(!Te.isDocumentKey(t))throw new le(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function SS(t){if(Te.isDocumentKey(t))throw new le(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function HM(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function np(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce(12329,{type:typeof t})}function In(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new le(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=np(t);throw new le(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Oc(t,e){if(!HM(t))throw new le(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const s=e[i].typeString,r="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const o=t[i];if(s&&typeof o!==s){n=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&o!==r.value){n=`Expected '${i}' field to equal '${r.value}'`;break}}if(n)throw new le(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=-62135596800,bS=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*bS);return new Ct(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new le(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wS)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bS}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oc(e,Ct._jsonSchema))return new Ct(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:Qt("string",Ct._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new Ct(0,0))}static max(){return new we(new Ct(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dc=-1;function AH(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=we.fromTimestamp(i===1e9?new Ct(n+1,0):new Ct(n,i));return new Gr(s,Te.empty(),e)}function IH(t){return new Gr(t.readTime,t.key,dc)}class Gr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Gr(we.min(),Te.empty(),dc)}static max(){return new Gr(we.max(),Te.empty(),dc)}}function MH(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(t.documentKey,e.documentKey),n!==0?n:Ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RH="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kH{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ll(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==RH)throw t;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(n,r).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):W.reject(n)}static resolve(e){return new W((n,i)=>{n(e)})}static reject(e){return new W((n,i)=>{i(e)})}static waitFor(e){return new W((n,i)=>{let s=0,r=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++r,o&&r===s&&n()},c=>i(c))}),o=!0,r===s&&n()})}static or(e){let n=W.resolve(!1);for(const i of e)n=n.next(s=>s?W.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,r)=>{i.push(n.call(this,s,r))}),this.waitFor(i)}static mapArray(e,n){return new W((i,s)=>{const r=e.length,o=new Array(r);let a=0;for(let c=0;c<r;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++a,a===r&&i(o)},h=>s(h))}})}static doWhile(e,n){return new W((i,s)=>{const r=()=>{e()===!0?n().next(()=>{r()},s):i()};r()})}}function NH(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Dl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ip.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=-1;function Bc(t){return t==null}function dh(t){return t===0&&1/t==-1/0}function LH(t){return typeof t=="number"&&Number.isInteger(t)&&!dh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM="";function DH(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=AS(e)),e=PH(t.get(n),e);return AS(e)}function PH(t,e){let n=e;const i=t.length;for(let s=0;s<i;s++){const r=t.charAt(s);switch(r){case"\0":n+="";break;case GM:n+="";break;default:n+=r}}return n}function AS(t){return t+GM+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function eo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $M(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){this.comparator=e,this.root=n||pn.EMPTY}insert(e,n){return new Mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new Mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Md(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Md(this.root,e,this.comparator,!1)}getReverseIterator(){return new Md(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Md(this.root,e,this.comparator,!0)}}class Md{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=n?i(e.key,n):1,n&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,n,i,s,r){this.key=e,this.value=n,this.color=i??pn.RED,this.left=s??pn.EMPTY,this.right=r??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,r){return new pn(e??this.key,n??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,n,i),null):r===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return pn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,i,s,r){return this}insert(e,n,i){return new pn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new Mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new MS(this.data.getIterator())}getIteratorFrom(e){return new MS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tn(this.comparator);return n.data=e,n}}class MS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new ni([])}unionWith(e){let n=new tn(yn.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ni(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return cl(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new KM("Invalid base64 string: "+r):r}}(e);return new Tn(n)}static fromUint8Array(e){const n=function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r}(e);return new Tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const VH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(t){if(Ze(!!t,39018),typeof t=="string"){let e=0;const n=VH.exec(t);if(Ze(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ot(t.seconds),nanos:Ot(t.nanos)}}function Ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Kr(t){return typeof t=="string"?Tn.fromBase64String(t):Tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JM="server_timestamp",YM="__type__",WM="__previous_value__",QM="__local_write_time__";function d0(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[YM])==null?void 0:i.stringValue)===JM}function sp(t){const e=t.mapValue.fields[WM];return d0(e)?sp(e):e}function fc(t){const e=$r(t.mapValue.fields[QM].timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UH{constructor(e,n,i,s,r,o,a,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const fh="(default)";class hc{constructor(e,n){this.projectId=e,this.database=n||fh}static empty(){return new hc("","")}get isDefaultDatabase(){return this.database===fh}isEqual(e){return e instanceof hc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM="__type__",OH="__max__",Rd={mapValue:{}},XM="__vector__",hh="value";function Jr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?d0(t)?4:FH(t)?9007199254740991:BH(t)?10:11:Ce(28295,{value:t})}function is(t,e){if(t===e)return!0;const n=Jr(t);if(n!==Jr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return fc(t).isEqual(fc(e));case 3:return function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=$r(s.timestampValue),a=$r(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,r){return Kr(s.bytesValue).isEqual(Kr(r.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,r){return Ot(s.geoPointValue.latitude)===Ot(r.geoPointValue.latitude)&&Ot(s.geoPointValue.longitude)===Ot(r.geoPointValue.longitude)}(t,e);case 2:return function(s,r){if("integerValue"in s&&"integerValue"in r)return Ot(s.integerValue)===Ot(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=Ot(s.doubleValue),a=Ot(r.doubleValue);return o===a?dh(o)===dh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return cl(t.arrayValue.values||[],e.arrayValue.values||[],is);case 10:case 11:return function(s,r){const o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(IS(o)!==IS(a))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!is(o[c],a[c])))return!1;return!0}(t,e);default:return Ce(52216,{left:t})}}function pc(t,e){return(t.values||[]).find(n=>is(n,e))!==void 0}function dl(t,e){if(t===e)return 0;const n=Jr(t),i=Jr(e);if(n!==i)return Ge(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(t.booleanValue,e.booleanValue);case 2:return function(r,o){const a=Ot(r.integerValue||r.doubleValue),c=Ot(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return RS(t.timestampValue,e.timestampValue);case 4:return RS(fc(t),fc(e));case 5:return oy(t.stringValue,e.stringValue);case 6:return function(r,o){const a=Kr(r),c=Kr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(r,o){const a=r.split("/"),c=o.split("/");for(let d=0;d<a.length&&d<c.length;d++){const h=Ge(a[d],c[d]);if(h!==0)return h}return Ge(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(r,o){const a=Ge(Ot(r.latitude),Ot(o.latitude));return a!==0?a:Ge(Ot(r.longitude),Ot(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return kS(t.arrayValue,e.arrayValue);case 10:return function(r,o){var g,v,T,w;const a=r.fields||{},c=o.fields||{},d=(g=a[hh])==null?void 0:g.arrayValue,h=(v=c[hh])==null?void 0:v.arrayValue,m=Ge(((T=d==null?void 0:d.values)==null?void 0:T.length)||0,((w=h==null?void 0:h.values)==null?void 0:w.length)||0);return m!==0?m:kS(d,h)}(t.mapValue,e.mapValue);case 11:return function(r,o){if(r===Rd.mapValue&&o===Rd.mapValue)return 0;if(r===Rd.mapValue)return 1;if(o===Rd.mapValue)return-1;const a=r.fields||{},c=Object.keys(a),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){const g=oy(c[m],h[m]);if(g!==0)return g;const v=dl(a[c[m]],d[h[m]]);if(v!==0)return v}return Ge(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Ce(23264,{he:n})}}function RS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ge(t,e);const n=$r(t),i=$r(e),s=Ge(n.seconds,i.seconds);return s!==0?s:Ge(n.nanos,i.nanos)}function kS(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const r=dl(n[s],i[s]);if(r)return r}return Ge(n.length,i.length)}function fl(t){return ay(t)}function ay(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=$r(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Kr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const r of n.values||[])s?s=!1:i+=",",i+=ay(r);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${ay(n.fields[o])}`;return s+"}"}(t.mapValue):Ce(61005,{value:t})}function uf(t){switch(Jr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=sp(t);return e?16+uf(e):16;case 5:return 2*t.stringValue.length;case 6:return Kr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,r)=>s+uf(r),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return eo(i.fields,(r,o)=>{s+=r.length+uf(o)}),s}(t.mapValue);default:throw Ce(13486,{value:t})}}function NS(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ly(t){return!!t&&"integerValue"in t}function f0(t){return!!t&&"arrayValue"in t}function LS(t){return!!t&&"nullValue"in t}function DS(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cf(t){return!!t&&"mapValue"in t}function BH(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ZM])==null?void 0:i.stringValue)===XM}function Fu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return eo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=Fu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Fu(t.arrayValue.values[n]);return e}return{...t}}function FH(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===OH}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.value=e}static empty(){return new Ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!cf(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fu(n)}setAll(e){let n=yn.emptyPath(),i={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const c=this.getFieldsMap(n);this.applyChanges(c,i,s),i={},s=[],n=a.popLast()}o?i[a.lastSegment()]=Fu(o):s.push(a.lastSegment())});const r=this.getFieldsMap(n);this.applyChanges(r,i,s)}delete(e){const n=this.field(e.popLast());cf(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return is(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];cf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){eo(n,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Ln(Fu(this.value))}}function eR(t){const e=[];return eo(t.fields,(n,i)=>{const s=new yn([n]);if(cf(i)){const r=eR(i.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)}),new ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,n,i,s,r,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new cn(e,0,we.min(),we.min(),we.min(),Ln.empty(),0)}static newFoundDocument(e,n,i,s){return new cn(e,1,n,we.min(),i,s,0)}static newNoDocument(e,n){return new cn(e,2,n,we.min(),we.min(),Ln.empty(),0)}static newUnknownDocument(e,n){return new cn(e,3,n,we.min(),we.min(),Ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,n){this.position=e,this.inclusive=n}}function PS(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const r=e[s],o=t.position[s];if(r.field.isKeyField()?i=Te.comparator(Te.fromName(o.referenceValue),n.key):i=dl(o,n.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function VS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!is(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n="asc"){this.field=e,this.dir=n}}function jH(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{}class Jt extends tR{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new qH(e,n,i):n==="array-contains"?new $H(e,i):n==="in"?new KH(e,i):n==="not-in"?new JH(e,i):n==="array-contains-any"?new YH(e,i):new Jt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new HH(e,i):new GH(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(dl(n,this.value)):n!==null&&Jr(this.value)===Jr(n)&&this.matchesComparison(dl(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Li extends tR{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Li(e,n)}matches(e){return nR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nR(t){return t.op==="and"}function iR(t){return zH(t)&&nR(t)}function zH(t){for(const e of t.filters)if(e instanceof Li)return!1;return!0}function uy(t){if(t instanceof Jt)return t.field.canonicalString()+t.op.toString()+fl(t.value);if(iR(t))return t.filters.map(e=>uy(e)).join(",");{const e=t.filters.map(n=>uy(n)).join(",");return`${t.op}(${e})`}}function sR(t,e){return t instanceof Jt?function(i,s){return s instanceof Jt&&i.op===s.op&&i.field.isEqual(s.field)&&is(i.value,s.value)}(t,e):t instanceof Li?function(i,s){return s instanceof Li&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((r,o,a)=>r&&sR(o,s.filters[a]),!0):!1}(t,e):void Ce(19439)}function rR(t){return t instanceof Jt?function(n){return`${n.field.canonicalString()} ${n.op} ${fl(n.value)}`}(t):t instanceof Li?function(n){return n.op.toString()+" {"+n.getFilters().map(rR).join(" ,")+"}"}(t):"Filter"}class qH extends Jt{constructor(e,n,i){super(e,n,i),this.key=Te.fromName(i.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class HH extends Jt{constructor(e,n){super(e,"in",n),this.keys=oR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class GH extends Jt{constructor(e,n){super(e,"not-in",n),this.keys=oR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function oR(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>Te.fromName(i.referenceValue))}class $H extends Jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return f0(n)&&pc(n.arrayValue,this.value)}}class KH extends Jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pc(this.value.arrayValue,n)}}class JH extends Jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(pc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pc(this.value.arrayValue,n)}}class YH extends Jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!f0(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>pc(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WH{constructor(e,n=null,i=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function US(t,e=null,n=[],i=[],s=null,r=null,o=null){return new WH(t,e,n,i,s,r,o)}function h0(t){const e=Me(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>uy(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(r){return r.field.canonicalString()+r.dir}(i)).join(","),Bc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>fl(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>fl(i)).join(",")),e.Te=n}return e.Te}function p0(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!jH(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!sR(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!VS(t.startAt,e.startAt)&&VS(t.endAt,e.endAt)}function cy(t){return Te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n=null,i=[],s=[],r=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function QH(t,e,n,i,s,r,o,a){return new Pl(t,e,n,i,s,r,o,a)}function rp(t){return new Pl(t)}function OS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aR(t){return t.collectionGroup!==null}function ju(t){const e=Me(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),n.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new tn(yn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(a=a.add(d.field))})}),a})(e).forEach(r=>{n.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new mc(r,i))}),n.has(yn.keyField().canonicalString())||e.Ie.push(new mc(yn.keyField(),i))}return e.Ie}function es(t){const e=Me(t);return e.Ee||(e.Ee=ZH(e,ju(t))),e.Ee}function ZH(t,e){if(t.limitType==="F")return US(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const r=s.dir==="desc"?"asc":"desc";return new mc(s.field,r)});const n=t.endAt?new ph(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new ph(t.startAt.position,t.startAt.inclusive):null;return US(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function dy(t,e){const n=t.filters.concat([e]);return new Pl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function fy(t,e,n){return new Pl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function op(t,e){return p0(es(t),es(e))&&t.limitType===e.limitType}function lR(t){return`${h0(es(t))}|lt:${t.limitType}`}function ga(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>rR(s)).join(", ")}]`),Bc(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>fl(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>fl(s)).join(",")),`Target(${i})`}(es(t))}; limitType=${t.limitType})`}function ap(t,e){return e.isFoundDocument()&&function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):Te.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)}(t,e)&&function(i,s){for(const r of ju(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(o,a,c){const d=PS(o,a,c);return o.inclusive?d<=0:d<0}(i.startAt,ju(i),s)||i.endAt&&!function(o,a,c){const d=PS(o,a,c);return o.inclusive?d>=0:d>0}(i.endAt,ju(i),s))}(t,e)}function XH(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function uR(t){return(e,n)=>{let i=!1;for(const s of ju(t)){const r=eG(s,e,n);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function eG(t,e,n){const i=t.field.isKeyField()?Te.comparator(e.key,n.key):function(r,o,a){const c=o.data.field(r),d=a.data.field(r);return c!==null&&d!==null?dl(c,d):Ce(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){eo(this.inner,(n,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return $M(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tG=new Mt(Te.comparator);function Fs(){return tG}const cR=new Mt(Te.comparator);function _u(...t){let e=cR;for(const n of t)e=e.insert(n.key,n);return e}function dR(t){let e=cR;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Co(){return zu()}function fR(){return zu()}function zu(){return new Zo(t=>t.toString(),(t,e)=>t.isEqual(e))}const nG=new Mt(Te.comparator),iG=new tn(Te.comparator);function $e(...t){let e=iG;for(const n of t)e=e.add(n);return e}const sG=new tn(Ge);function rG(){return sG}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dh(e)?"-0":e}}function hR(t){return{integerValue:""+t}}function pR(t,e){return LH(e)?hR(e):m0(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(){this._=void 0}}function oG(t,e,n){return t instanceof gc?function(s,r){const o={fields:{[YM]:{stringValue:JM},[QM]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&d0(r)&&(r=sp(r)),r&&(o.fields[WM]=r),{mapValue:o}}(n,e):t instanceof hl?gR(t,e):t instanceof pl?yR(t,e):function(s,r){const o=mR(s,r),a=BS(o)+BS(s.Ae);return ly(o)&&ly(s.Ae)?hR(a):m0(s.serializer,a)}(t,e)}function aG(t,e,n){return t instanceof hl?gR(t,e):t instanceof pl?yR(t,e):n}function mR(t,e){return t instanceof yc?function(i){return ly(i)||function(r){return!!r&&"doubleValue"in r}(i)}(e)?e:{integerValue:0}:null}class gc extends lp{}class hl extends lp{constructor(e){super(),this.elements=e}}function gR(t,e){const n=vR(e);for(const i of t.elements)n.some(s=>is(s,i))||n.push(i);return{arrayValue:{values:n}}}class pl extends lp{constructor(e){super(),this.elements=e}}function yR(t,e){let n=vR(e);for(const i of t.elements)n=n.filter(s=>!is(s,i));return{arrayValue:{values:n}}}class yc extends lp{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function BS(t){return Ot(t.integerValue||t.doubleValue)}function vR(t){return f0(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e,n){this.field=e,this.transform=n}}function lG(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof hl&&s instanceof hl||i instanceof pl&&s instanceof pl?cl(i.elements,s.elements,is):i instanceof yc&&s instanceof yc?is(i.Ae,s.Ae):i instanceof gc&&s instanceof gc}(t.transform,e.transform)}class uG{constructor(e,n){this.version=e,this.transformResults=n}}class Yt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Yt}static exists(e){return new Yt(void 0,e)}static updateTime(e){return new Yt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function df(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class cp{}function _R(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new jc(t.key,Yt.none()):new Fc(t.key,t.data,Yt.none());{const n=t.data,i=Ln.empty();let s=new tn(yn.comparator);for(let r of e.fields)if(!s.has(r)){let o=n.field(r);o===null&&r.length>1&&(r=r.popLast(),o=n.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new to(t.key,i,new ni(s.toArray()),Yt.none())}}function cG(t,e,n){t instanceof Fc?function(s,r,o){const a=s.value.clone(),c=jS(s.fieldTransforms,r,o.transformResults);a.setAll(c),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof to?function(s,r,o){if(!df(s.precondition,r))return void r.convertToUnknownDocument(o.version);const a=jS(s.fieldTransforms,r,o.transformResults),c=r.data;c.setAll(TR(s)),c.setAll(a),r.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function qu(t,e,n,i){return t instanceof Fc?function(r,o,a,c){if(!df(r.precondition,o))return a;const d=r.value.clone(),h=zS(r.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,i):t instanceof to?function(r,o,a,c){if(!df(r.precondition,o))return a;const d=zS(r.fieldTransforms,c,o),h=o.data;return h.setAll(TR(r)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(m=>m.field))}(t,e,n,i):function(r,o,a){return df(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function dG(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),r=mR(i.transform,s||null);r!=null&&(n===null&&(n=Ln.empty()),n.set(i.field,r))}return n||null}function FS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&cl(i,s,(r,o)=>lG(r,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fc extends cp{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class to extends cp{constructor(e,n,i,s,r=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function TR(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function jS(t,e,n){const i=new Map;Ze(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const r=t[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,aG(o,a,n[s]))}return i}function zS(t,e,n){const i=new Map;for(const s of t){const r=s.transform,o=n.data.field(s.field);i.set(s.field,oG(r,o,e))}return i}class jc extends cp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ER extends cp{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&cG(r,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=qu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=qu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=fR();return this.mutations.forEach(s=>{const r=e.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=n.has(s.key)?null:a;const c=_R(o,a);c!==null&&i.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(we.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),$e())}isEqual(e){return this.batchId===e.batchId&&cl(this.mutations,e.mutations,(n,i)=>FS(n,i))&&cl(this.baseMutations,e.baseMutations,(n,i)=>FS(n,i))}}class g0{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Ze(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=function(){return nG}();const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new g0(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pG{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,Qe;function xR(t){switch(t){case K.OK:return Ce(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Ce(15467,{code:t})}}function CR(t){if(t===void 0)return Bs("GRPC error has no .code"),K.UNKNOWN;switch(t){case Ht.OK:return K.OK;case Ht.CANCELLED:return K.CANCELLED;case Ht.UNKNOWN:return K.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return K.INTERNAL;case Ht.UNAVAILABLE:return K.UNAVAILABLE;case Ht.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Ht.NOT_FOUND:return K.NOT_FOUND;case Ht.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Ht.ABORTED:return K.ABORTED;case Ht.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Ht.DATA_LOSS:return K.DATA_LOSS;default:return Ce(39323,{code:t})}}(Qe=Ht||(Ht={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mG(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gG=new Ur([4294967295,4294967295],0);function qS(t){const e=mG().encode(t),n=new PM;return n.update(e),new Uint8Array(n.digest())}function HS(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new Ur([n,i],0),new Ur([s,r],0)]}class y0{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Tu(`Invalid padding: ${n}`);if(i<0)throw new Tu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Tu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Tu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ur.fromNumber(this.ge)}ye(e,n,i){let s=e.add(n.multiply(Ur.fromNumber(i)));return s.compare(gG)===1&&(s=new Ur([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=qS(e),[i,s]=HS(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);if(!this.we(o))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new y0(r,s,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=qS(e),[i,s]=HS(n);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);this.Se(o)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(e,n,i,s,r){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,zc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new dp(we.min(),s,new Mt(Ge),Fs(),$e())}}class zc{constructor(e,n,i,s,r){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new zc(i,n,$e(),$e(),$e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(e,n,i,s){this.be=e,this.removedTargetIds=n,this.key=i,this.De=s}}class SR{constructor(e,n){this.targetId=e,this.Ce=n}}class wR{constructor(e,n,i=Tn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class GS{constructor(){this.ve=0,this.Fe=$S(),this.Me=Tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),n=$e(),i=$e();return this.Fe.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:Ce(38017,{changeType:r})}}),new zc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=$S()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class yG{constructor(e){this.Ge=e,this.ze=new Map,this.je=Fs(),this.Je=kd(),this.He=kd(),this.Ye=new Mt(Ge)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,i=e.Ce.count,s=this.ot(n);if(s){const r=s.target;if(cy(r))if(i===0){const o=new Te(r.path);this.et(n,o,cn.newNoDocument(o,we.min()))}else Ze(i===1,20013,{expectedCount:i});else{const o=this._t(n);if(o!==i){const a=this.ut(e),c=a?this.ct(a,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=n;let o,a;try{o=Kr(i).toUint8Array()}catch(c){if(c instanceof KM)return ul("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new y0(o,s,r)}catch(c){return ul(c instanceof Tu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.ge===0?null:a}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let s=0;return i.forEach(r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.et(n,r,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((r,o)=>{const a=this.ot(o);if(a){if(r.current&&cy(a.target)){const c=new Te(a.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,cn.newNoDocument(c,e))}r.Be&&(n.set(o,r.ke()),r.qe())}});let i=$e();this.He.forEach((r,o)=>{let a=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(r))}),this.je.forEach((r,o)=>o.setReadTime(e));const s=new dp(e,n,this.Ye,this.je,i);return this.je=Fs(),this.Je=kd(),this.He=kd(),this.Ye=new Mt(Ge),s}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new GS,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new tn(Ge),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new tn(Ge),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ge("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new GS),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function kd(){return new Mt(Te.comparator)}function $S(){return new Mt(Te.comparator)}const vG={asc:"ASCENDING",desc:"DESCENDING"},_G={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TG={and:"AND",or:"OR"};class EG{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function hy(t,e){return t.useProto3Json||Bc(e)?e:{value:e}}function mh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function bR(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xG(t,e){return mh(t,e.toTimestamp())}function li(t){return Ze(!!t,49232),we.fromTimestamp(function(n){const i=$r(n);return new Ct(i.seconds,i.nanos)}(t))}function v0(t,e){return py(t,e).canonicalString()}function py(t,e){const n=function(s){return new ut(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function AR(t){const e=ut.fromString(t);return Ze(LR(e),10190,{key:e.toString()}),e}function gh(t,e){return v0(t.databaseId,e.path)}function Hu(t,e){const n=AR(e);if(n.get(1)!==t.databaseId.projectId)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new le(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Te(MR(n))}function IR(t,e){return v0(t.databaseId,e)}function CG(t){const e=AR(t);return e.length===4?ut.emptyPath():MR(e)}function my(t){return new ut(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function MR(t){return Ze(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function KS(t,e,n){return{name:gh(t,e),fields:n.value.mapValue.fields}}function SG(t,e){return"found"in e?function(i,s){Ze(!!s.found,43571),s.found.name,s.found.updateTime;const r=Hu(i,s.found.name),o=li(s.found.updateTime),a=s.found.createTime?li(s.found.createTime):we.min(),c=new Ln({mapValue:{fields:s.found.fields}});return cn.newFoundDocument(r,o,a,c)}(t,e):"missing"in e?function(i,s){Ze(!!s.missing,3894),Ze(!!s.readTime,22933);const r=Hu(i,s.missing),o=li(s.readTime);return cn.newNoDocument(r,o)}(t,e):Ce(7234,{result:e})}function wG(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Ce(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=function(d,h){return d.useProto3Json?(Ze(h===void 0||typeof h=="string",58123),Tn.fromBase64String(h||"")):(Ze(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Tn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(d){const h=d.code===void 0?K.UNKNOWN:CR(d.code);return new le(h,d.message||"")}(o);n=new wR(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Hu(t,i.document.name),r=li(i.document.updateTime),o=i.document.createTime?li(i.document.createTime):we.min(),a=new Ln({mapValue:{fields:i.document.fields}}),c=cn.newFoundDocument(s,r,o,a),d=i.targetIds||[],h=i.removedTargetIds||[];n=new ff(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Hu(t,i.document),r=i.readTime?li(i.readTime):we.min(),o=cn.newNoDocument(s,r),a=i.removedTargetIds||[];n=new ff([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Hu(t,i.document),r=i.removedTargetIds||[];n=new ff([],r,s,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new pG(s,r),a=i.targetId;n=new SR(a,o)}}return n}function RR(t,e){let n;if(e instanceof Fc)n={update:KS(t,e.key,e.value)};else if(e instanceof jc)n={delete:gh(t,e.key)};else if(e instanceof to)n={update:KS(t,e.key,e.data),updateMask:DG(e.fieldMask)};else{if(!(e instanceof ER))return Ce(16599,{Vt:e.type});n={verify:gh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(r,o){const a=o.transform;if(a instanceof gc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof hl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof yc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw Ce(20930,{transform:o.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,r){return r.updateTime!==void 0?{updateTime:xG(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:Ce(27497)}(t,e.precondition)),n}function bG(t,e){return t&&t.length>0?(Ze(e!==void 0,14353),t.map(n=>function(s,r){let o=s.updateTime?li(s.updateTime):li(r);return o.isEqual(we.min())&&(o=li(r)),new uG(o,s.transformResults||[])}(n,e))):[]}function AG(t,e){return{documents:[IR(t,e.path)]}}function IG(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=IR(t,s);const r=function(d){if(d.length!==0)return NR(Li.create(d,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const o=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:ya(g.field),direction:kG(g.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=hy(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function MG(t){let e=CG(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Ze(i===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let r=[];n.where&&(r=function(m){const g=kR(m);return g instanceof Li&&iR(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(T){return new mc(va(T.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(g))}(n.orderBy));let a=null;n.limit&&(a=function(m){let g;return g=typeof m=="object"?m.value:m,Bc(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(m){const g=!!m.before,v=m.values||[];return new ph(v,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,v=m.values||[];return new ph(v,g)}(n.endAt)),QH(e,s,o,r,a,"F",c,d)}function RG(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kR(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=va(n.unaryFilter.field);return Jt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=va(n.unaryFilter.field);return Jt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=va(n.unaryFilter.field);return Jt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=va(n.unaryFilter.field);return Jt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(t):t.fieldFilter!==void 0?function(n){return Jt.create(va(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Li.create(n.compositeFilter.filters.map(i=>kR(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(n.compositeFilter.op))}(t):Ce(30097,{filter:t})}function kG(t){return vG[t]}function NG(t){return _G[t]}function LG(t){return TG[t]}function ya(t){return{fieldPath:t.canonicalString()}}function va(t){return yn.fromServerFormat(t.fieldPath)}function NR(t){return t instanceof Jt?function(n){if(n.op==="=="){if(DS(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NAN"}};if(LS(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(DS(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NAN"}};if(LS(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ya(n.field),op:NG(n.op),value:n.value}}}(t):t instanceof Li?function(n){const i=n.getFilters().map(s=>NR(s));return i.length===1?i[0]:{compositeFilter:{op:LG(n.op),filters:i}}}(t):Ce(54877,{filter:t})}function DG(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function LR(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,i,s,r=we.min(),o=we.min(),a=Tn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PG{constructor(e){this.yt=e}}function VG(t){const e=MG({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?fy(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(){this.Cn=new OG}addToCollectionParentIndex(e,n){return this.Cn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(Gr.min())}updateCollectionGroup(e,n,i){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class OG{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new tn(ut.comparator),r=!s.has(i);return this.index[n]=s.add(i),r}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new tn(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},DR=41943040;class jn{static withCacheSize(e){return new jn(e,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jn.DEFAULT_COLLECTION_PERCENTILE=10,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jn.DEFAULT=new jn(DR,jn.DEFAULT_COLLECTION_PERCENTILE,jn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jn.DISABLED=new jn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ml(0)}static cr(){return new ml(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="LruGarbageCollector",BG=1048576;function WS([t,e],[n,i]){const s=Ge(t,n);return s===0?Ge(e,i):s}class FG{constructor(e){this.Ir=e,this.buffer=new tn(WS),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();WS(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jG{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ge(YS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Dl(n)?ge(YS,"Ignoring IndexedDB error during garbage collection: ",n):await Ll(n)}await this.Vr(3e5)})}}class zG{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return W.resolve(ip.ce);const i=new FG(n);return this.mr.forEachTarget(e,s=>i.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>i.Ar(s))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(JS)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JS):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,s,r,o,a,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(i=m,a=Date.now(),this.removeTargets(e,i,n))).next(m=>(r=m,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(m=>(d=Date.now(),ma()<=He.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${r} targets in `+(c-a)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:m})))}}function qG(t,e){return new zG(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HG{constructor(){this.changes=new Zo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?W.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $G{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&qu(i.mutation,s,ni.empty(),Ct.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,$e()).next(()=>i))}getLocalViewOfDocuments(e,n,i=$e()){const s=Co();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(r=>{let o=_u();return r.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=Co();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,$e()))}populateOverlays(e,n,i){const s=[];return i.forEach(r=>{n.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,s){let r=Fs();const o=zu(),a=function(){return zu()}();return n.forEach((c,d)=>{const h=i.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof to)?r=r.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),qu(h.mutation,d,h.mutation.getFieldMask(),Ct.now())):o.set(d.key,ni.empty())}),this.recalculateAndSaveOverlays(e,r).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>a.set(d,new GG(h,o.get(d)??null))),a))}recalculateAndSaveOverlays(e,n){const i=zu();let s=new Mt((o,a)=>o-a),r=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=i.get(c)||ni.empty();h=a.applyToLocalView(d,h),i.set(c,h);const m=(s.get(a.batchId)||$e()).add(c);s=s.insert(a.batchId,m)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const c=a.getNext(),d=c.key,h=c.value,m=fR();h.forEach(g=>{if(!r.has(g)){const v=_R(n.get(g),i.get(g));v!==null&&m.set(g,v),r=r.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return W.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(o){return Te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aR(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-r.size):W.resolve(Co());let a=dc,c=r;return o.next(d=>W.forEach(d,(h,m)=>(a<m.largestBatchId&&(a=m.largestBatchId),r.get(h)?W.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,d,r)).next(()=>this.computeViews(e,c,d,$e())).next(h=>({batchId:a,changes:dR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next(i=>{let s=_u();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const r=n.collectionGroup;let o=_u();return this.indexManager.getCollectionParents(e,r).next(a=>W.forEach(a,c=>{const d=function(m,g){return new Pl(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(r));return this.getDocumentsMatchingCollectionQuery(e,d,i,s).next(h=>{h.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,r,s))).next(o=>{r.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,cn.newInvalidDocument(h)))});let a=_u();return o.forEach((c,d)=>{const h=r.get(c);h!==void 0&&qu(h.mutation,d,ni.empty(),Ct.now()),ap(n,d)&&(a=a.insert(c,d))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KG{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return W.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:li(s.createTime)}}(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:VG(s.bundledQuery),readTime:li(s.readTime)}}(n)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JG{constructor(){this.overlays=new Mt(Te.comparator),this.qr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Co();return W.forEach(n,s=>this.getOverlay(e,s).next(r=>{r!==null&&i.set(s,r)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,r)=>{this.St(e,n,r)}),W.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.qr.delete(i)),W.resolve()}getOverlaysForCollection(e,n,i){const s=Co(),r=n.length+1,o=new Te(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const c=a.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===r&&c.largestBatchId>i&&s.set(c.getKey(),c)}return W.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let r=new Mt((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>i){let h=r.get(d.largestBatchId);h===null&&(h=Co(),r=r.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const a=Co(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>a.set(d,h)),!(a.size()>=s)););return W.resolve(a)}St(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new hG(n,i));let r=this.qr.get(n);r===void 0&&(r=$e(),this.qr.set(n,r)),this.qr.set(n,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YG{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.Qr=new tn(an.$r),this.Ur=new tn(an.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new an(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new an(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new Te(new ut([])),i=new an(n,e),s=new an(n,e+1),r=[];return this.Ur.forEachInRange([i,s],o=>{this.Gr(o),r.push(o.key)}),r}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new ut([])),i=new an(n,e),s=new an(n,e+1);let r=$e();return this.Ur.forEachInRange([i,s],o=>{r=r.add(o.key)}),r}containsKey(e){const n=new an(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class an{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||Ge(e.Yr,n.Yr)}static Kr(e,n){return Ge(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WG{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new tn(an.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new fG(r,n,i,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new an(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,n){return W.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.ei(i),r=s<0?0:s;return W.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?c0:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new an(n,0),s=new an(n,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],o=>{const a=this.Xr(o.Yr);r.push(a)}),W.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new tn(Ge);return n.forEach(s=>{const r=new an(s,0),o=new an(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],a=>{i=i.add(a.Yr)})}),W.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let r=i;Te.isDocumentKey(r)||(r=r.child(""));const o=new an(new Te(r),0);let a=new tn(Ge);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!i.isPrefixOf(d)&&(d.length===s&&(a=a.add(c.Yr)),!0)},o),W.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(i=>{const s=this.Xr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ze(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return W.forEach(n.mutations,s=>{const r=new an(s.key,n.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new an(n,0),s=this.Zr.firstAfterOrEqual(i);return W.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QG{constructor(e){this.ri=e,this.docs=function(){return new Mt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),r=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return W.resolve(i?i.document.mutableCopy():cn.newInvalidDocument(n))}getEntries(e,n){let i=Fs();return n.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():cn.newInvalidDocument(s))}),W.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let r=Fs();const o=n.path,a=new Te(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||MH(IH(h),i)<=0||(s.has(h.key)||ap(n,h))&&(r=r.insert(h.key,h.mutableCopy()))}return W.resolve(r)}getAllFromCollectionGroup(e,n,i,s){Ce(9500)}ii(e,n){return W.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new ZG(this)}getSize(e){return W.resolve(this.size)}}class ZG extends HG{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)}),W.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XG{constructor(e){this.persistence=e,this.si=new Zo(n=>h0(n),p0),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.oi=0,this._i=new _0,this.targetCount=0,this.ai=ml.ur()}forEachTarget(e,n){return this.si.forEach((i,s)=>n(s)),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),W.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ml(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.Pr(n),W.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,i){let s=0;const r=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),W.waitFor(r).next(()=>s)}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return W.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),W.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const s=this.persistence.referenceDelegate,r=[];return s&&n.forEach(o=>{r.push(s.markPotentiallyOrphaned(e,o))}),W.waitFor(r)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return W.resolve(i)}containsKey(e,n){return W.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.ui={},this.overlays={},this.ci=new ip(0),this.li=!1,this.li=!0,this.hi=new YG,this.referenceDelegate=e(this),this.Pi=new XG(this),this.indexManager=new UG,this.remoteDocumentCache=function(s){return new QG(s)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new PG(n),this.Ii=new KG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new JG,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new WG(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ge("MemoryPersistence","Starting transaction:",e);const s=new e7(this.ci.next());return this.referenceDelegate.Ei(),i(s).next(r=>this.referenceDelegate.di(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ai(e,n){return W.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class e7 extends kH{constructor(e){super(),this.currentSequenceNumber=e}}class T0{constructor(e){this.persistence=e,this.Ri=new _0,this.Vi=null}static mi(e){return new T0(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),W.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(r=>this.fi.add(r.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,i=>{const s=Te.fromPath(i);return this.gi(e,s).next(r=>{r||n.removeEntry(s,we.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class yh{constructor(e,n){this.persistence=e,this.pi=new Zo(i=>DH(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=qG(this,n)}static mi(e,n){return new yh(e,n)}Ei(){}di(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(s=>i+s))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return W.forEach(this.pi,(i,s)=>this.br(e,i,s).next(r=>r?W.resolve():n(s)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(a=>{a||(i++,r.removeEntry(o,we.min()))})).next(()=>r.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),W.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),W.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=uf(e.data.value)),n}br(e,n,i){return W.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return W.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=s}static As(e,n){let i=$e(),s=$e();for(const r of n.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new E0(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Nj()?8:NH(Mn())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,s){const r={result:null};return this.ys(e,n).next(o=>{r.result=o}).next(()=>{if(!r.result)return this.ws(e,n,s,i).next(o=>{r.result=o})}).next(()=>{if(r.result)return;const o=new t7;return this.Ss(e,n,o).next(a=>{if(r.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>r.result)}bs(e,n,i,s){return i.documentReadCount<this.fs?(ma()<=He.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",ga(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(ma()<=He.DEBUG&&ge("QueryEngine","Query:",ga(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(ma()<=He.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",ga(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,es(n))):W.resolve())}ys(e,n){if(OS(n))return W.resolve(null);let i=es(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=fy(n,null,"F"),i=es(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const o=$e(...r);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{const d=this.Ds(n,a);return this.Cs(n,d,o,c.readTime)?this.ys(e,fy(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,i,s){return OS(n)||s.isEqual(we.min())?W.resolve(null):this.ps.getDocuments(e,i).next(r=>{const o=this.Ds(n,r);return this.Cs(n,o,i,s)?W.resolve(null):(ma()<=He.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ga(n)),this.vs(e,o,n,AH(s,dc)).next(a=>a))})}Ds(e,n){let i=new tn(uR(e));return n.forEach((s,r)=>{ap(e,r)&&(i=i.add(r))}),i}Cs(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const r=e.limitType==="F"?n.last():n.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,n,i){return ma()<=He.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",ga(n)),this.ps.getDocumentsMatchingQuery(e,n,Gr.min(),i)}vs(e,n,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next(r=>(n.forEach(o=>{r=r.insert(o.key,o)}),r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="LocalStore",i7=3e8;class s7{constructor(e,n,i,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Mt(Ge),this.xs=new Zo(r=>h0(r),p0),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $G(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function r7(t,e,n,i){return new s7(t,e,n,i)}async function VR(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(r=>{const o=[],a=[];let c=$e();for(const d of s){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of r){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(i,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:a}))})})}function o7(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,c,d,h){const m=d.batch,g=m.keys();let v=W.resolve();return g.forEach(T=>{v=v.next(()=>h.getEntry(c,T)).next(w=>{const I=d.docVersions.get(T);Ze(I!==null,48541),w.version.compareTo(I)<0&&(m.applyToRemoteDocument(w,d),w.isValidDocument()&&(w.setReadTime(d.commitVersion),h.addEntry(w)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(c,m))}(n,i,e,r).next(()=>r.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=$e();for(let d=0;d<a.mutationResults.length;++d)a.mutationResults[d].transformResults.length>0&&(c=c.add(a.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function UR(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function a7(t,e){const n=Me(t),i=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];e.targetChanges.forEach((h,m)=>{const g=s.get(m);if(!g)return;a.push(n.Pi.removeMatchingKeys(r,h.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(r,h.addedDocuments,m)));let v=g.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(Tn.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,i)),s=s.insert(m,v),function(w,I,b){return w.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=i7?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(g,v,h)&&a.push(n.Pi.updateTargetData(r,v))});let c=Fs(),d=$e();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(r,h))}),a.push(l7(r,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!i.isEqual(we.min())){const h=n.Pi.getLastRemoteSnapshotVersion(r).next(m=>n.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i));a.push(h)}return W.waitFor(a).next(()=>o.apply(r)).next(()=>n.localDocuments.getLocalViewOfDocuments(r,c,d)).next(()=>c)}).then(r=>(n.Ms=s,r))}function l7(t,e,n){let i=$e(),s=$e();return n.forEach(r=>i=i.add(r)),e.getEntries(t,i).next(r=>{let o=Fs();return n.forEach((a,c)=>{const d=r.get(a);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(a)),c.isNoDocument()&&c.version.isEqual(we.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):ge(x0,"Ignoring outdated watch update for ",a,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:s}})}function u7(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=c0),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function c7(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Pi.getTargetData(i,e).next(r=>r?(s=r,W.resolve(s)):n.Pi.allocateTargetId(i).next(o=>(s=new Sr(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function gy(t,e,n){const i=Me(t),s=i.Ms.get(e),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Dl(o))throw o;ge(x0,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function QS(t,e,n){const i=Me(t);let s=we.min(),r=$e();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const m=Me(c),g=m.xs.get(h);return g!==void 0?W.resolve(m.Ms.get(g)):m.Pi.getTargetData(d,h)}(i,o,es(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(o,a.targetId).next(c=>{r=c})}).next(()=>i.Fs.getDocumentsMatchingQuery(o,e,n?s:we.min(),n?r:$e())).next(a=>(d7(i,XH(e),a),{documents:a,Qs:r})))}function d7(t,e,n){let i=t.Os.get(e)||we.min();n.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),t.Os.set(e,i)}class ZS{constructor(){this.activeTargetIds=rG()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class f7{constructor(){this.Mo=new ZS,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ZS,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h7{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="ConnectivityMonitor";class ew{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ge(XS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ge(XS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nd=null;function yy(){return Nd===null?Nd=function(){return 268435456+Math.round(2147483648*Math.random())}():Nd++,"0x"+Nd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="RestConnection",p7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class m7{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===fh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,n,i,s,r){const o=yy(),a=this.zo(e,n.toUriEncodedString());ge(Nm,`Sending RPC '${e}' ${o}:`,a,i);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,r);const{host:d}=new URL(a),h=Xr(d);return this.Jo(e,a,c,i,h).then(m=>(ge(Nm,`Received RPC '${e}' ${o}: `,m),m),m=>{throw ul(Nm,`RPC '${e}' ${o} failed with error: `,m,"url: ",a,"request:",i),m})}Ho(e,n,i,s,r,o){return this.Go(e,n,i,s,r)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Nl}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}zo(e,n){const i=p7[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g7{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection";class y7 extends m7{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,s,r){const o=yy();return new Promise((a,c)=>{const d=new VM;d.setWithCredentials(!0),d.listenOnce(UM.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case lf.NO_ERROR:const m=d.getResponseJson();ge(wn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),a(m);break;case lf.TIMEOUT:ge(wn,`RPC '${e}' ${o} timed out`),c(new le(K.DEADLINE_EXCEEDED,"Request time out"));break;case lf.HTTP_ERROR:const g=d.getStatus();if(ge(wn,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const T=v==null?void 0:v.error;if(T&&T.status&&T.message){const w=function(b){const E=b.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(E)>=0?E:K.UNKNOWN}(T.status);c(new le(w,T.message))}else c(new le(K.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new le(K.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ge(wn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);ge(wn,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,i,15)})}T_(e,n,i){const s=yy(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=FM(),a=BM(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,i),c.encodeInitMessageHeaders=!0;const h=r.join("");ge(wn,`Creating RPC '${e}' stream ${s}: ${h}`,c);const m=o.createWebChannel(h,c);this.I_(m);let g=!1,v=!1;const T=new g7({Yo:I=>{v?ge(wn,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(g||(ge(wn,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),ge(wn,`RPC '${e}' stream ${s} sending:`,I),m.send(I))},Zo:()=>m.close()}),w=(I,b,E)=>{I.listen(b,A=>{try{E(A)}catch(R){setTimeout(()=>{throw R},0)}})};return w(m,vu.EventType.OPEN,()=>{v||(ge(wn,`RPC '${e}' stream ${s} transport opened.`),T.o_())}),w(m,vu.EventType.CLOSE,()=>{v||(v=!0,ge(wn,`RPC '${e}' stream ${s} transport closed`),T.a_(),this.E_(m))}),w(m,vu.EventType.ERROR,I=>{v||(v=!0,ul(wn,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),T.a_(new le(K.UNAVAILABLE,"The operation could not be completed")))}),w(m,vu.EventType.MESSAGE,I=>{var b;if(!v){const E=I.data[0];Ze(!!E,16349);const A=E,R=(A==null?void 0:A.error)||((b=A[0])==null?void 0:b.error);if(R){ge(wn,`RPC '${e}' stream ${s} received error:`,R);const P=R.status;let U=function(C){const k=Ht[C];if(k!==void 0)return CR(k)}(P),S=R.message;U===void 0&&(U=K.INTERNAL,S="Unknown error status: "+P+" with message "+R.message),v=!0,T.a_(new le(U,S)),m.close()}else ge(wn,`RPC '${e}' stream ${s} received:`,E),T.u_(E)}}),w(a,OM.STAT_EVENT,I=>{I.stat===ry.PROXY?ge(wn,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===ry.NOPROXY&&ge(wn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Lm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(t){return new EG(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n,i=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-i);s>0&&ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="PersistentStream";class OR{constructor(e,n,i,s,r,o,a,c){this.Mi=e,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new C0(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(Bs(n.toString()),Bs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.D_===n&&this.G_(i,s)},i=>{e(()=>{const s=new le(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{i(()=>this.z_(s))}),this.stream.onMessage(s=>{i(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ge(tw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ge(tw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class v7 extends OR{constructor(e,n,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=wG(this.serializer,e),i=function(r){if(!("targetChange"in r))return we.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?we.min():o.readTime?li(o.readTime):we.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=my(this.serializer),n.addTarget=function(r,o){let a;const c=o.target;if(a=cy(c)?{documents:AG(r,c)}:{query:IG(r,c).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=bR(r,o.resumeToken);const d=hy(r,o.expectedCount);d!==null&&(a.expectedCount=d)}else if(o.snapshotVersion.compareTo(we.min())>0){a.readTime=mh(r,o.snapshotVersion.toTimestamp());const d=hy(r,o.expectedCount);d!==null&&(a.expectedCount=d)}return a}(this.serializer,e);const i=RG(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=my(this.serializer),n.removeTarget=e,this.q_(n)}}class _7 extends OR{constructor(e,n,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=bG(e.writeResults,e.commitTime),i=li(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=my(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>RR(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T7{}class E7 extends T7{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,o])=>this.connection.Go(e,py(n,i),s,r,o)).catch(r=>{throw r.name==="FirebaseError"?(r.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new le(K.UNKNOWN,r.toString())})}Ho(e,n,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,py(n,i),s,o,a,r)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le(K.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class x7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Bs(n),this.aa=!1):ge("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo="RemoteStore";class C7{constructor(e,n,i,s,r){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo(o=>{i.enqueueAndForget(async()=>{Xo(this)&&(ge(jo,"Restarting streams for network reachability change."),await async function(c){const d=Me(c);d.Ea.add(4),await qc(d),d.Ra.set("Unknown"),d.Ea.delete(4),await hp(d)}(this))})}),this.Ra=new x7(i,s)}}async function hp(t){if(Xo(t))for(const e of t.da)await e(!0)}async function qc(t){for(const e of t.da)await e(!1)}function BR(t,e){const n=Me(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),A0(n)?b0(n):Vl(n).O_()&&w0(n,e))}function S0(t,e){const n=Me(t),i=Vl(n);n.Ia.delete(e),i.O_()&&FR(n,e),n.Ia.size===0&&(i.O_()?i.L_():Xo(n)&&n.Ra.set("Unknown"))}function w0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Vl(t).Y_(e)}function FR(t,e){t.Va.Ue(e),Vl(t).Z_(e)}function b0(t){t.Va=new yG({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Vl(t).start(),t.Ra.ua()}function A0(t){return Xo(t)&&!Vl(t).x_()&&t.Ia.size>0}function Xo(t){return Me(t).Ea.size===0}function jR(t){t.Va=void 0}async function S7(t){t.Ra.set("Online")}async function w7(t){t.Ia.forEach((e,n)=>{w0(t,e)})}async function b7(t,e){jR(t),A0(t)?(t.Ra.ha(e),b0(t)):t.Ra.set("Unknown")}async function A7(t,e,n){if(t.Ra.set("Online"),e instanceof wR&&e.state===2&&e.cause)try{await async function(s,r){const o=r.cause;for(const a of r.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))}(t,e)}catch(i){ge(jo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await vh(t,i)}else if(e instanceof ff?t.Va.Ze(e):e instanceof SR?t.Va.st(e):t.Va.tt(e),!n.isEqual(we.min()))try{const i=await UR(t.localStore);n.compareTo(i)>=0&&await function(r,o){const a=r.Va.Tt(o);return a.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=r.Ia.get(d);h&&r.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,d)=>{const h=r.Ia.get(c);if(!h)return;r.Ia.set(c,h.withResumeToken(Tn.EMPTY_BYTE_STRING,h.snapshotVersion)),FR(r,c);const m=new Sr(h.target,c,d,h.sequenceNumber);w0(r,m)}),r.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){ge(jo,"Failed to raise snapshot:",i),await vh(t,i)}}async function vh(t,e,n){if(!Dl(e))throw e;t.Ea.add(1),await qc(t),t.Ra.set("Offline"),n||(n=()=>UR(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ge(jo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await hp(t)})}function zR(t,e){return e().catch(n=>vh(t,n,e))}async function pp(t){const e=Me(t),n=Yr(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:c0;for(;I7(e);)try{const s=await u7(e.localStore,i);if(s===null){e.Ta.length===0&&n.L_();break}i=s.batchId,M7(e,s)}catch(s){await vh(e,s)}qR(e)&&HR(e)}function I7(t){return Xo(t)&&t.Ta.length<10}function M7(t,e){t.Ta.push(e);const n=Yr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function qR(t){return Xo(t)&&!Yr(t).x_()&&t.Ta.length>0}function HR(t){Yr(t).start()}async function R7(t){Yr(t).ra()}async function k7(t){const e=Yr(t);for(const n of t.Ta)e.ea(n.mutations)}async function N7(t,e,n){const i=t.Ta.shift(),s=g0.from(i,e,n);await zR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await pp(t)}async function L7(t,e){e&&Yr(t).X_&&await async function(i,s){if(function(o){return xR(o)&&o!==K.ABORTED}(s.code)){const r=i.Ta.shift();Yr(i).B_(),await zR(i,()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s)),await pp(i)}}(t,e),qR(t)&&HR(t)}async function nw(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),ge(jo,"RemoteStore received new credentials");const i=Xo(n);n.Ea.add(3),await qc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await hp(n)}async function D7(t,e){const n=Me(t);e?(n.Ea.delete(2),await hp(n)):e||(n.Ea.add(2),await qc(n),n.Ra.set("Unknown"))}function Vl(t){return t.ma||(t.ma=function(n,i,s){const r=Me(n);return r.sa(),new v7(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:S7.bind(null,t),t_:w7.bind(null,t),r_:b7.bind(null,t),H_:A7.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),A0(t)?b0(t):t.Ra.set("Unknown")):(await t.ma.stop(),jR(t))})),t.ma}function Yr(t){return t.fa||(t.fa=function(n,i,s){const r=Me(n);return r.sa(),new _7(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:R7.bind(null,t),r_:L7.bind(null,t),ta:k7.bind(null,t),na:N7.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await pp(t)):(await t.fa.stop(),t.Ta.length>0&&(ge(jo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,n,i,s,r){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,r){const o=Date.now()+i,a=new I0(e,n,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new le(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function M0(t,e){if(Bs("AsyncQueue",`${e}: ${t}`),Dl(t))return new le(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{static emptySet(e){return new Wa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||Te.comparator(n.key,i.key):(n,i)=>Te.comparator(n.key,i.key),this.keyedMap=_u(),this.sortedSet=new Mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Wa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Wa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(){this.ga=new Mt(Te.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class gl{constructor(e,n,i,s,r,o,a,c,d){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,i,s,r){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new gl(e,n,Wa.emptySet(n),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&op(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P7{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class V7{constructor(){this.queries=sw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const s=Me(n),r=s.queries;s.queries=sw(),r.forEach((o,a)=>{for(const c of a.Sa)c.onError(i)})})(this,new le(K.ABORTED,"Firestore shutting down"))}}function sw(){return new Zo(t=>lR(t),op)}async function R0(t,e){const n=Me(t);let i=3;const s=e.query;let r=n.queries.get(s);r?!r.ba()&&e.Da()&&(i=2):(r=new P7,i=e.Da()?0:1);try{switch(i){case 0:r.wa=await n.onListen(s,!0);break;case 1:r.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=M0(o,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,r),r.Sa.push(e),e.va(n.onlineState),r.wa&&e.Fa(r.wa)&&N0(n)}async function k0(t,e){const n=Me(t),i=e.query;let s=3;const r=n.queries.get(i);if(r){const o=r.Sa.indexOf(e);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?s=e.Da()?0:1:!r.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function U7(t,e){const n=Me(t);let i=!1;for(const s of e){const r=s.query,o=n.queries.get(r);if(o){for(const a of o.Sa)a.Fa(s)&&(i=!0);o.wa=s}}i&&N0(n)}function O7(t,e,n){const i=Me(t),s=i.queries.get(e);if(s)for(const r of s.Sa)r.onError(n);i.queries.delete(e)}function N0(t){t.Ca.forEach(e=>{e.next()})}var vy,rw;(rw=vy||(vy={})).Ma="default",rw.Cache="cache";class L0{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new gl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=gl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vy.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.key=e}}class $R{constructor(e){this.key=e}}class B7{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=$e(),this.mutatedKeys=$e(),this.eu=uR(e),this.tu=new Wa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new iw,s=n?n.tu:this.tu;let r=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const g=s.get(h),v=ap(this.query,m)?m:null,T=!!g&&this.mutatedKeys.has(g.key),w=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let I=!1;g&&v?g.data.isEqual(v.data)?T!==w&&(i.track({type:3,doc:v}),I=!0):this.su(g,v)||(i.track({type:2,doc:v}),I=!0,(c&&this.eu(v,c)>0||d&&this.eu(v,d)<0)&&(a=!0)):!g&&v?(i.track({type:0,doc:v}),I=!0):g&&!v&&(i.track({type:1,doc:g}),I=!0,(c||d)&&(a=!0)),I&&(v?(o=o.add(v),r=w?r.add(h):r.delete(h)):(o=o.delete(h),r=r.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),r=r.delete(h.key),i.track({type:1,doc:h})}return{tu:o,iu:i,Cs:a,mutatedKeys:r}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,m)=>function(v,T){const w=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:I})}};return w(v)-w(T)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(i),s=s??!1;const a=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new gl(this.query,e.tu,r,o,e.mutatedKeys,c===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new iw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=$e(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new $R(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new GR(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=$e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return gl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const D0="SyncEngine";class F7{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class j7{constructor(e){this.key=e,this.hu=!1}}class z7{constructor(e,n,i,s,r,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Zo(a=>lR(a),op),this.Iu=new Map,this.Eu=new Set,this.du=new Mt(Te.comparator),this.Au=new Map,this.Ru=new _0,this.Vu={},this.mu=new Map,this.fu=ml.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function q7(t,e,n=!0){const i=ZR(t);let s;const r=i.Tu.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await KR(i,e,n,!0),s}async function H7(t,e){const n=ZR(t);await KR(n,e,!0,!1)}async function KR(t,e,n,i){const s=await c7(t.localStore,es(e)),r=s.targetId,o=t.sharedClientState.addLocalQueryTarget(r,n);let a;return i&&(a=await G7(t,e,r,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&BR(t.remoteStore,s),a}async function G7(t,e,n,i,s){t.pu=(m,g,v)=>async function(w,I,b,E){let A=I.view.ru(b);A.Cs&&(A=await QS(w.localStore,I.query,!1).then(({documents:S})=>I.view.ru(S,A)));const R=E&&E.targetChanges.get(I.targetId),P=E&&E.targetMismatches.get(I.targetId)!=null,U=I.view.applyChanges(A,w.isPrimaryClient,R,P);return aw(w,I.targetId,U.au),U.snapshot}(t,m,g,v);const r=await QS(t.localStore,e,!0),o=new B7(e,r.Qs),a=o.ru(r.documents),c=zc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),d=o.applyChanges(a,t.isPrimaryClient,c);aw(t,n,d.au);const h=new F7(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function $7(t,e,n){const i=Me(t),s=i.Tu.get(e),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter(o=>!op(o,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await gy(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&S0(i.remoteStore,s.targetId),_y(i,s.targetId)}).catch(Ll)):(_y(i,s.targetId),await gy(i.localStore,s.targetId,!0))}async function K7(t,e){const n=Me(t),i=n.Tu.get(e),s=n.Iu.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),S0(n.remoteStore,i.targetId))}async function J7(t,e,n){const i=t$(t);try{const s=await function(o,a){const c=Me(o),d=Ct.now(),h=a.reduce((v,T)=>v.add(T.key),$e());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=Fs(),w=$e();return c.Ns.getEntries(v,h).next(I=>{T=I,T.forEach((b,E)=>{E.isValidDocument()||(w=w.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,T)).next(I=>{m=I;const b=[];for(const E of a){const A=dG(E,m.get(E.key).overlayedDocument);A!=null&&b.push(new to(E.key,A,eR(A.value.mapValue),Yt.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,b,a)}).next(I=>{g=I;const b=I.applyToLocalDocumentSet(m,w);return c.documentOverlayCache.saveOverlays(v,I.batchId,b)})}).then(()=>({batchId:g.batchId,changes:dR(m)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,a,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new Mt(Ge)),d=d.insert(a,c),o.Vu[o.currentUser.toKey()]=d}(i,s.batchId,n),await Hc(i,s.changes),await pp(i.remoteStore)}catch(s){const r=M0(s,"Failed to persist write");n.reject(r)}}async function JR(t,e){const n=Me(t);try{const i=await a7(n.localStore,e);e.targetChanges.forEach((s,r)=>{const o=n.Au.get(r);o&&(Ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ze(o.hu,14607):s.removedDocuments.size>0&&(Ze(o.hu,42227),o.hu=!1))}),await Hc(n,i,e)}catch(i){await Ll(i)}}function ow(t,e,n){const i=Me(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Tu.forEach((r,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const c=Me(o);c.onlineState=a;let d=!1;c.queries.forEach((h,m)=>{for(const g of m.Sa)g.va(a)&&(d=!0)}),d&&N0(c)}(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function Y7(t,e,n){const i=Me(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Au.get(e),r=s&&s.key;if(r){let o=new Mt(Te.comparator);o=o.insert(r,cn.newNoDocument(r,we.min()));const a=$e().add(r),c=new dp(we.min(),new Map,new Mt(Ge),o,a);await JR(i,c),i.du=i.du.remove(r),i.Au.delete(e),P0(i)}else await gy(i.localStore,e,!1).then(()=>_y(i,e,n)).catch(Ll)}async function W7(t,e){const n=Me(t),i=e.batch.batchId;try{const s=await o7(n.localStore,e);WR(n,i,null),YR(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Hc(n,s)}catch(s){await Ll(s)}}async function Q7(t,e,n){const i=Me(t);try{const s=await function(o,a){const c=Me(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,a).next(m=>(Ze(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(i.localStore,e);WR(i,e,n),YR(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Hc(i,s)}catch(s){await Ll(s)}}function YR(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function WR(t,e,n){const i=Me(t);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(n?r.reject(n):r.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function _y(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||QR(t,i)})}function QR(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(S0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),P0(t))}function aw(t,e,n){for(const i of n)i instanceof GR?(t.Ru.addReference(i.key,e),Z7(t,i)):i instanceof $R?(ge(D0,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||QR(t,i.key)):Ce(19791,{wu:i})}function Z7(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ge(D0,"New document in limbo: "+n),t.Eu.add(i),P0(t))}function P0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Te(ut.fromString(e)),i=t.fu.next();t.Au.set(i,new j7(n)),t.du=t.du.insert(n,i),BR(t.remoteStore,new Sr(es(rp(n.path)),i,"TargetPurposeLimboResolution",ip.ce))}}async function Hc(t,e,n){const i=Me(t),s=[],r=[],o=[];i.Tu.isEmpty()||(i.Tu.forEach((a,c)=>{o.push(i.pu(c,e,n).then(d=>{var h;if((d||n)&&i.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;i.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){s.push(d);const m=E0.As(c.targetId,d);r.push(m)}}))}),await Promise.all(o),i.Pu.H_(s),await async function(c,d){const h=Me(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>W.forEach(d,g=>W.forEach(g.Es,v=>h.persistence.referenceDelegate.addReference(m,g.targetId,v)).next(()=>W.forEach(g.ds,v=>h.persistence.referenceDelegate.removeReference(m,g.targetId,v)))))}catch(m){if(!Dl(m))throw m;ge(x0,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const v=h.Ms.get(g),T=v.snapshotVersion,w=v.withLastLimboFreeSnapshotVersion(T);h.Ms=h.Ms.insert(g,w)}}}(i.localStore,r))}async function X7(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){ge(D0,"User change. New user:",e.toKey());const i=await VR(n.localStore,e);n.currentUser=e,function(r,o){r.mu.forEach(a=>{a.forEach(c=>{c.reject(new le(K.CANCELLED,o))})}),r.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Hc(n,i.Ls)}}function e$(t,e){const n=Me(t),i=n.Au.get(e);if(i&&i.hu)return $e().add(i.key);{let s=$e();const r=n.Iu.get(e);if(!r)return s;for(const o of r){const a=n.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function ZR(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=e$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Y7.bind(null,e),e.Pu.H_=U7.bind(null,e.eventManager),e.Pu.yu=O7.bind(null,e.eventManager),e}function t$(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=W7.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Q7.bind(null,e),e}class _h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return r7(this.persistence,new n7,e.initialUser,this.serializer)}Cu(e){return new PR(T0.mi,this.serializer)}Du(e){return new f7}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_h.provider={build:()=>new _h};class n$ extends _h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ze(this.persistence.referenceDelegate instanceof yh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new jG(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?jn.withCacheSize(this.cacheSizeBytes):jn.DEFAULT;return new PR(i=>yh.mi(i,n),this.serializer)}}class Ty{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ow(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=X7.bind(null,this.syncEngine),await D7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new V7}()}createDatastore(e){const n=fp(e.databaseInfo.databaseId),i=function(r){return new y7(r)}(e.databaseInfo);return function(r,o,a,c){return new E7(r,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,r,o,a){return new C7(i,s,r,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>ow(this.syncEngine,n,0),function(){return ew.v()?new ew:new h7}())}createSyncEngine(e,n){return function(s,r,o,a,c,d,h){const m=new z7(s,r,o,a,c,d);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const r=Me(s);ge(jo,"RemoteStore shutting down."),r.Ea.add(5),await qc(r),r.Aa.shutdown(),r.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Ty.provider={build:()=>new Ty};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Bs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new le(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(s,r){const o=Me(s),a={documents:r.map(m=>gh(o.serializer,m))},c=await o.Ho("BatchGetDocuments",o.serializer.databaseId,ut.emptyPath(),a,r.length),d=new Map;c.forEach(m=>{const g=SG(o.serializer,m);d.set(g.key.toString(),g)});const h=[];return r.forEach(m=>{const g=d.get(m.toString());Ze(!!g,55234,{key:m}),h.push(g)}),h}(this.datastore,e);return n.forEach(i=>this.recordVersion(i)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastTransactionError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new jc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,i)=>{const s=Te.fromPath(i);this.mutations.push(new ER(s,this.precondition(s)))}),await async function(i,s){const r=Me(i),o={writes:s.map(a=>RR(r.serializer,a))};await r.Go("Commit",r.serializer.databaseId,ut.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Ce(50498,{Gu:e.constructor.name});n=we.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!n.isEqual(i))throw new le(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(we.min())?Yt.exists(!1):Yt.updateTime(n):Yt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(we.min()))throw new le(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Yt.updateTime(n)}return Yt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s${constructor(e,n,i,s,r){this.asyncQueue=e,this.datastore=n,this.options=i,this.updateFunction=s,this.deferred=r,this.zu=i.maxAttempts,this.M_=new C0(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new i$(this.datastore),n=this.Hu(e);n&&n.then(i=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(i)}).catch(s=>{this.Yu(s)}))}).catch(i=>{this.Yu(i)})})}Hu(e){try{const n=this.updateFunction(e);return!Bc(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if((e==null?void 0:e.name)==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!xR(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wr="FirestoreClient";class r${constructor(e,n,i,s,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=bn.UNAUTHENTICATED,this.clientId=u0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,async o=>{ge(Wr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(ge(Wr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=M0(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Dm(t,e){t.asyncQueue.verifyOperationInProgress(),ge(Wr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await VR(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function lw(t,e){t.asyncQueue.verifyOperationInProgress();const n=await o$(t);ge(Wr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>nw(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>nw(e.remoteStore,s)),t._onlineComponents=e}async function o$(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge(Wr,"Using user provided OfflineComponentProvider");try{await Dm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ul("Error using user provided cache. Falling back to memory cache: "+n),await Dm(t,new _h)}}else ge(Wr,"Using default OfflineComponentProvider"),await Dm(t,new n$(void 0));return t._offlineComponents}async function U0(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge(Wr,"Using user provided OnlineComponentProvider"),await lw(t,t._uninitializedComponentsProvider._online)):(ge(Wr,"Using default OnlineComponentProvider"),await lw(t,new Ty))),t._onlineComponents}function a$(t){return U0(t).then(e=>e.syncEngine)}function l$(t){return U0(t).then(e=>e.datastore)}async function Th(t){const e=await U0(t),n=e.eventManager;return n.onListen=q7.bind(null,e.syncEngine),n.onUnlisten=$7.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=H7.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=K7.bind(null,e.syncEngine),n}function u$(t,e,n={}){const i=new Xi;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,c,d){const h=new V0({next:g=>{h.Nu(),o.enqueueAndForget(()=>k0(r,m));const v=g.docs.has(a);!v&&g.fromCache?d.reject(new le(K.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&g.fromCache&&c&&c.source==="server"?d.reject(new le(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new L0(rp(a.path),h,{includeMetadataChanges:!0,qa:!0});return R0(r,m)}(await Th(t),t.asyncQueue,e,n,i)),i.promise}function c$(t,e,n={}){const i=new Xi;return t.asyncQueue.enqueueAndForget(async()=>function(r,o,a,c,d){const h=new V0({next:g=>{h.Nu(),o.enqueueAndForget(()=>k0(r,m)),g.fromCache&&c.source==="server"?d.reject(new le(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new L0(a,h,{includeMetadataChanges:!0,qa:!0});return R0(r,m)}(await Th(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="firestore.googleapis.com",cw=!0;class dw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new le(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ek,this.ssl=cw}else this.host=e.host,this.ssl=e.ssl??cw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=DR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<BG)throw new le(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bH("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XR(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new le(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mp{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new le(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new le(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new gH;switch(i.type){case"firstParty":return new TH(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new le(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=uw.get(n);i&&(ge("ComponentProvider","Removing Datastore"),uw.delete(n),i.terminate())}(this),Promise.resolve()}}function d$(t,e,n,i={}){var d;t=In(t,mp);const s=Xr(e),r=t._getSettings(),o={...r,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;s&&(Kv(`https://${a}`),Jv("Firestore",!0)),r.host!==ek&&r.host!==a&&ul("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...r,host:a,ssl:s,emulatorOptions:i};if(!Vs(c,o)&&(t._setSettings(c),i.mockUserToken)){let h,m;if(typeof i.mockUserToken=="string")h=i.mockUserToken,m=bn.MOCK_USER;else{h=W1(i.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new le(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new bn(g)}t._authCredentials=new yH(new zM(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new no(this.firestore,e,this._query)}}class It{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}toJSON(){return{type:It._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(Oc(n,It._jsonSchema))return new It(e,i||null,new Te(ut.fromString(n.referencePath)))}}It._jsonSchemaVersion="firestore/documentReference/1.0",It._jsonSchema={type:Qt("string",It._jsonSchemaVersion),referencePath:Qt("string")};class Or extends no{constructor(e,n,i){super(e,n,rp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new Te(e))}withConverter(e){return new Or(this.firestore,e,this._path)}}function Xt(t,e,...n){if(t=ht(t),qM("collection","path",e),t instanceof mp){const i=ut.fromString(e,...n);return SS(i),new Or(t,null,i)}{if(!(t instanceof It||t instanceof Or))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ut.fromString(e,...n));return SS(i),new Or(t.firestore,null,i)}}function gt(t,e,...n){if(t=ht(t),arguments.length===1&&(e=u0.newId()),qM("doc","path",e),t instanceof mp){const i=ut.fromString(e,...n);return CS(i),new It(t,null,new Te(i))}{if(!(t instanceof It||t instanceof Or))throw new le(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(ut.fromString(e,...n));return CS(i),new It(t.firestore,t instanceof Or?t.converter:null,new Te(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fw="AsyncQueue";class hw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new C0(this,"async_queue_retry"),this._c=()=>{const i=Lm();i&&ge(fw,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Lm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Lm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Xi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Dl(e))throw e;ge(fw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,Bs("INTERNAL UNHANDLED ERROR: ",pw(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=I0.createAndSchedule(this,e,n,i,r=>this.hc(r));return this.tc.push(s),s}uc(){this.nc&&Ce(47125,{Pc:pw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function pw(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const s=n;for(const r of i)if(r in s&&typeof s[r]=="function")return!0;return!1}(t,["next","error","complete"])}class Di extends mp{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new hw,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hw(e),this._firestoreClient=void 0,await e}}}function f$(t,e){const n=typeof t=="object"?t:Qv(),i=typeof t=="string"?t:fh,s=Zh(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=K1("firestore");r&&d$(s,...r)}return s}function Ul(t){if(t._terminated)throw new le(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||h$(t),t._firestoreClient}function h$(t){var i,s,r;const e=t._freezeSettings(),n=function(a,c,d,h){return new UH(a,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((r=e.localCache)!=null&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new r$(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const c=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ei(Tn.fromBase64String(e))}catch(n){throw new le(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ei(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ei._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oc(e,ei._jsonSchema))return ei.fromBase64String(e.bytes)}}ei._jsonSchemaVersion="firestore/bytes/1.0",ei._jsonSchema={type:Qt("string",ei._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new le(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new le(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new le(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ts._jsonSchemaVersion}}static fromJSON(e){if(Oc(e,ts._jsonSchema))return new ts(e.latitude,e.longitude)}}ts._jsonSchemaVersion="firestore/geoPoint/1.0",ts._jsonSchema={type:Qt("string",ts._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ns._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oc(e,ns._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ns(e.vectorValues);throw new le(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ns._jsonSchemaVersion="firestore/vectorValue/1.0",ns._jsonSchema={type:Qt("string",ns._jsonSchemaVersion),vectorValues:Qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$=/^__.*__$/;class m${constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new to(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fc(e,this.data,n,this.fieldTransforms)}}class tk{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new to(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function nk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:t})}}class gp{constructor(e,n,i,s,r,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new gp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Eh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(nk(this.Ac)&&p$.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class g${constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||fp(e)}Cc(e,n,i,s=!1){return new gp({Ac:e,methodName:n,Dc:i,path:yn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Bl(t){const e=t._freezeSettings(),n=fp(t._databaseId);return new g$(t._databaseId,!!e.ignoreUndefinedProperties,n)}function yp(t,e,n,i,s,r={}){const o=t.Cc(r.merge||r.mergeFields?2:0,e,n,s);H0("Data must be an object, but it was:",o,i);const a=sk(i,o);let c,d;if(r.merge)c=new ni(o.fieldMask),d=o.fieldTransforms;else if(r.mergeFields){const h=[];for(const m of r.mergeFields){const g=Ey(e,m,n);if(!o.contains(g))throw new le(K.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);ok(h,g)||h.push(g)}c=new ni(h),d=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=o.fieldTransforms;return new m$(new Ln(a),c,d)}class vp extends ea{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vp}}function ik(t,e,n){return new gp({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class O0 extends ea{_toFieldTransform(e){return new up(e.path,new gc)}isEqual(e){return e instanceof O0}}class B0 extends ea{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=ik(this,e,!0),i=this.vc.map(r=>ta(r,n)),s=new hl(i);return new up(e.path,s)}isEqual(e){return e instanceof B0&&Vs(this.vc,e.vc)}}class F0 extends ea{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=ik(this,e,!0),i=this.vc.map(r=>ta(r,n)),s=new pl(i);return new up(e.path,s)}isEqual(e){return e instanceof F0&&Vs(this.vc,e.vc)}}class j0 extends ea{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new yc(e.serializer,pR(e.serializer,this.Fc));return new up(e.path,n)}isEqual(e){return e instanceof j0&&this.Fc===e.Fc}}function z0(t,e,n,i){const s=t.Cc(1,e,n);H0("Data must be an object, but it was:",s,i);const r=[],o=Ln.empty();eo(i,(c,d)=>{const h=G0(e,c,n);d=ht(d);const m=s.yc(h);if(d instanceof vp)r.push(h);else{const g=ta(d,m);g!=null&&(r.push(h),o.set(h,g))}});const a=new ni(r);return new tk(o,a,s.fieldTransforms)}function q0(t,e,n,i,s,r){const o=t.Cc(1,e,n),a=[Ey(e,i,n)],c=[s];if(r.length%2!=0)throw new le(K.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<r.length;g+=2)a.push(Ey(e,r[g])),c.push(r[g+1]);const d=[],h=Ln.empty();for(let g=a.length-1;g>=0;--g)if(!ok(d,a[g])){const v=a[g];let T=c[g];T=ht(T);const w=o.yc(v);if(T instanceof vp)d.push(v);else{const I=ta(T,w);I!=null&&(d.push(v),h.set(v,I))}}const m=new ni(d);return new tk(h,m,o.fieldTransforms)}function y$(t,e,n,i=!1){return ta(n,t.Cc(i?4:3,e))}function ta(t,e){if(rk(t=ht(t)))return H0("Unsupported field value:",e,t),sk(t,e);if(t instanceof ea)return function(i,s){if(!nk(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,s){const r=[];let o=0;for(const a of i){let c=ta(a,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),r.push(c),o++}return{arrayValue:{values:r}}}(t,e)}return function(i,s){if((i=ht(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return pR(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Ct.fromDate(i);return{timestampValue:mh(s.serializer,r)}}if(i instanceof Ct){const r=new Ct(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mh(s.serializer,r)}}if(i instanceof ts)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof ei)return{bytesValue:bR(s.serializer,i._byteString)};if(i instanceof It){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:v0(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof ns)return function(o,a){return{mapValue:{fields:{[ZM]:{stringValue:XM},[hh]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw a.Sc("VectorValues must only contain numeric values.");return m0(a.serializer,d)})}}}}}}(i,s);throw s.Sc(`Unsupported field value: ${np(i)}`)}(t,e)}function sk(t,e){const n={};return $M(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):eo(t,(i,s)=>{const r=ta(s,e.mc(i));r!=null&&(n[i]=r)}),{mapValue:{fields:n}}}function rk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ct||t instanceof ts||t instanceof ei||t instanceof It||t instanceof ea||t instanceof ns)}function H0(t,e,n){if(!rk(n)||!HM(n)){const i=np(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Ey(t,e,n){if((e=ht(e))instanceof Ol)return e._internalPath;if(typeof e=="string")return G0(t,e);throw Eh("Field path arguments must be of type string or ",t,!1,void 0,n)}const v$=new RegExp("[~\\*/\\[\\]]");function G0(t,e,n){if(e.search(v$)>=0)throw Eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ol(...e.split("."))._internalPath}catch{throw Eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Eh(t,e,n,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${i}`),o&&(c+=` in document ${s}`),c+=")"),new le(K.INVALID_ARGUMENT,a+t+c)}function ok(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,n,i,s,r){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _$(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(_p("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _$ extends xh{data(){return super.data()}}function _p(t,e){return typeof e=="string"?G0(t,e):e instanceof Ol?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new le(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $0{}class lk extends $0{}function vs(t,e,...n){let i=[];e instanceof $0&&i.push(e),i=i.concat(n),function(r){const o=r.filter(c=>c instanceof K0).length,a=r.filter(c=>c instanceof Tp).length;if(o>1||o>0&&a>0)throw new le(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Tp extends lk{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Tp(e,n,i)}_apply(e){const n=this._parse(e);return uk(e._query,n),new no(e.firestore,e.converter,dy(e._query,n))}_parse(e){const n=Bl(e.firestore);return function(r,o,a,c,d,h,m){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new le(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){yw(m,h);const T=[];for(const w of m)T.push(gw(c,r,w));g={arrayValue:{values:T}}}else g=gw(c,r,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||yw(m,h),g=y$(a,o,m,h==="in"||h==="not-in");return Jt.create(d,h,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ld(t,e,n){const i=e,s=_p("where",t);return Tp._create(s,i,n)}class K0 extends $0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new K0(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:Li.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,r){let o=s;const a=r.getFlattenedFilters();for(const c of a)uk(o,c),o=dy(o,c)}(e._query,n),new no(e.firestore,e.converter,dy(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class J0 extends lk{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new J0(e,n)}_apply(e){const n=function(s,r,o){if(s.startAt!==null)throw new le(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new le(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new mc(r,o)}(e._query,this._field,this._direction);return new no(e.firestore,e.converter,function(s,r){const o=s.explicitOrderBy.concat([r]);return new Pl(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function _a(t,e="asc"){const n=e,i=_p("orderBy",t);return J0._create(i,n)}function gw(t,e,n){if(typeof(n=ht(n))=="string"){if(n==="")throw new le(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aR(e)&&n.indexOf("/")!==-1)throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(ut.fromString(n));if(!Te.isDocumentKey(i))throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return NS(t,new Te(i))}if(n instanceof It)return NS(t,n._key);throw new le(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${np(n)}.`)}function yw(t,e){if(!Array.isArray(t)||t.length===0)throw new le(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uk(t,e){const n=function(s,r){for(const o of s)for(const a of o.getFlattenedFilters())if(r.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new le(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class ck{convertValue(e,n="none"){switch(Jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Kr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return eo(e,(s,r)=>{i[s]=this.convertValue(r,n)}),i}convertVectorValue(e){var i,s,r;const n=(r=(s=(i=e.fields)==null?void 0:i[hh].arrayValue)==null?void 0:s.values)==null?void 0:r.map(o=>Ot(o.doubleValue));return new ns(n)}convertGeoPoint(e){return new ts(Ot(e.latitude),Ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=sp(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(fc(e));default:return null}}convertTimestamp(e){const n=$r(e);return new Ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=ut.fromString(e);Ze(LR(i),9688,{name:e});const s=new hc(i.get(1),i.get(3)),r=new Te(i.popFirst(5));return s.isEqual(n)||Bs(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ep(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class T$ extends ck{constructor(e){super(),this.firestore=e}convertBytes(e){return new ei(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}class Da{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Br extends xh{constructor(e,n,i,s,r,o){super(e,n,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(_p("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new le(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Br._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Br._jsonSchemaVersion="firestore/documentSnapshot/1.0",Br._jsonSchema={type:Qt("string",Br._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class hf extends Br{data(e={}){return super.data(e)}}class Mo{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Da(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new hf(this._firestore,this._userDataWriter,i.key,i,new Da(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new le(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const c=new hf(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Da(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>r||a.type!==3).map(a=>{const c=new hf(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Da(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return a.type!==0&&(d=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:E$(a.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new le(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Mo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=u0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],s=[];return this.docs.forEach(r=>{r._document!==null&&(n.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function E$(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t){t=In(t,It);const e=In(t.firestore,Di);return u$(Ul(e),t._key).then(n=>dk(e,t,n))}Mo._jsonSchemaVersion="firestore/querySnapshot/1.0",Mo._jsonSchema={type:Qt("string",Mo._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class xp extends ck{constructor(e){super(),this.firestore=e}convertBytes(e){return new ei(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}function vw(t){t=In(t,no);const e=In(t.firestore,Di),n=Ul(e),i=new xp(e);return ak(t._query),c$(n,t._query).then(s=>new Mo(e,i,t,s))}function Vm(t,e,n){t=In(t,It);const i=In(t.firestore,Di),s=Ep(t.converter,e,n);return Gc(i,[yp(Bl(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Yt.none())])}function zi(t,e,n,...i){t=In(t,It);const s=In(t.firestore,Di),r=Bl(s);let o;return o=typeof(e=ht(e))=="string"||e instanceof Ol?q0(r,"updateDoc",t._key,e,n,i):z0(r,"updateDoc",t._key,e),Gc(s,[o.toMutation(t._key,Yt.exists(!0))])}function Um(t){return Gc(In(t.firestore,Di),[new jc(t._key,Yt.none())])}function qi(t,e){const n=In(t.firestore,Di),i=gt(t),s=Ep(t.converter,e);return Gc(n,[yp(Bl(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,Yt.exists(!1))]).then(()=>i)}function sr(t,...e){var c,d,h;t=ht(t);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||mw(e[i])||(n=e[i++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(mw(e[i])){const m=e[i];e[i]=(c=m.next)==null?void 0:c.bind(m),e[i+1]=(d=m.error)==null?void 0:d.bind(m),e[i+2]=(h=m.complete)==null?void 0:h.bind(m)}let r,o,a;if(t instanceof It)o=In(t.firestore,Di),a=rp(t._key.path),r={next:m=>{e[i]&&e[i](dk(o,t,m))},error:e[i+1],complete:e[i+2]};else{const m=In(t,no);o=In(m.firestore,Di),a=m._query;const g=new xp(o);r={next:v=>{e[i]&&e[i](new Mo(o,g,m,v))},error:e[i+1],complete:e[i+2]},ak(t._query)}return function(g,v,T,w){const I=new V0(w),b=new L0(v,I,T);return g.asyncQueue.enqueueAndForget(async()=>R0(await Th(g),b)),()=>{I.Nu(),g.asyncQueue.enqueueAndForget(async()=>k0(await Th(g),b))}}(Ul(o),a,s,r)}function Gc(t,e){return function(i,s){const r=new Xi;return i.asyncQueue.enqueueAndForget(async()=>J7(await a$(i),s,r)),r.promise}(Ul(t),e)}function dk(t,e,n){const i=n.docs.get(e._key),s=new xp(t);return new Br(t,s,e._key,i,new Da(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C${constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Bl(e)}set(e,n,i){this._verifyNotCommitted();const s=wr(e,this._firestore),r=Ep(s.converter,n,i),o=yp(this._dataReader,"WriteBatch.set",s._key,r,s.converter!==null,i);return this._mutations.push(o.toMutation(s._key,Yt.none())),this}update(e,n,i,...s){this._verifyNotCommitted();const r=wr(e,this._firestore);let o;return o=typeof(n=ht(n))=="string"||n instanceof Ol?q0(this._dataReader,"WriteBatch.update",r._key,n,i,s):z0(this._dataReader,"WriteBatch.update",r._key,n),this._mutations.push(o.toMutation(r._key,Yt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=wr(e,this._firestore);return this._mutations=this._mutations.concat(new jc(n._key,Yt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wr(t,e){if((t=ht(t)).firestore!==e)throw new le(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S${constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Bl(e)}get(e){const n=wr(e,this._firestore),i=new T$(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return Ce(24041);const r=s[0];if(r.isFoundDocument())return new xh(this._firestore,i,r.key,r,n.converter);if(r.isNoDocument())return new xh(this._firestore,i,n._key,null,n.converter);throw Ce(18433,{doc:r})})}set(e,n,i){const s=wr(e,this._firestore),r=Ep(s.converter,n,i),o=yp(this._dataReader,"Transaction.set",s._key,r,s.converter!==null,i);return this._transaction.set(s._key,o),this}update(e,n,i,...s){const r=wr(e,this._firestore);let o;return o=typeof(n=ht(n))=="string"||n instanceof Ol?q0(this._dataReader,"Transaction.update",r._key,n,i,s):z0(this._dataReader,"Transaction.update",r._key,n),this._transaction.update(r._key,o),this}delete(e){const n=wr(e,this._firestore);return this._transaction.delete(n._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w$ extends S${constructor(e,n){super(e,n),this._firestore=e}get(e){const n=wr(e,this._firestore),i=new xp(this._firestore);return super.get(e).then(s=>new Br(this._firestore,i,n._key,s._document,new Da(!1,!1),n.converter))}}function _w(t,e,n){t=In(t,Di);const i={...x$,...n};return function(r){if(r.maxAttempts<1)throw new le(K.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,o,a){const c=new Xi;return r.asyncQueue.enqueueAndForget(async()=>{const d=await l$(r);new s$(r.asyncQueue,d,a,o,c).ju()}),c.promise}(Ul(t),s=>e(new w$(t,s)),i)}function Yn(){return new O0("serverTimestamp")}function nr(...t){return new B0("arrayUnion",t)}function fo(...t){return new F0("arrayRemove",t)}function Tw(t){return new j0("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t){return Ul(t=In(t,Di)),new C$(t,e=>Gc(t,e))}(function(e,n=!0){(function(s){Nl=s})(Qo),Uo(new Hr("firestore",(i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),a=new Di(new vH(i.getProvider("auth-internal")),new EH(o,i.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new le(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hc(d.options.projectId,h)}(o,s),o);return r={useFetchStreams:n,...r},a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),Qi(_S,TS,e),Qi(_S,TS,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="firebasestorage.googleapis.com",hk="storageBucket",b$=2*60*1e3,A$=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt extends os{constructor(e,n,i=0){super(Bm(e),`Firebase Storage: ${n} (${Bm(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Bm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dt||(Dt={}));function Bm(t){return"storage/"+t}function Y0(){const t="An unknown error occurred, please check the error payload for server response.";return new Pt(Dt.UNKNOWN,t)}function I$(t){return new Pt(Dt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function M$(t){return new Pt(Dt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function R$(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pt(Dt.UNAUTHENTICATED,t)}function k$(){return new Pt(Dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function N$(t){return new Pt(Dt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function L$(){return new Pt(Dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function D$(){return new Pt(Dt.CANCELED,"User canceled the upload/download.")}function P$(t){return new Pt(Dt.INVALID_URL,"Invalid URL '"+t+"'.")}function V$(t){return new Pt(Dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function U$(){return new Pt(Dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+hk+"' property when initializing the app?")}function O$(){return new Pt(Dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function B$(){return new Pt(Dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function F$(t){return new Pt(Dt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xy(t){return new Pt(Dt.INVALID_ARGUMENT,t)}function pk(){return new Pt(Dt.APP_DELETED,"The Firebase app was deleted.")}function j$(t){return new Pt(Dt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Gu(t,e){return new Pt(Dt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function uu(t){throw new Pt(Dt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=ii.makeFromUrl(e,n)}catch{return new ii(e,"")}if(i.path==="")return i;throw V$(e)}static makeFromUrl(e,n){let i=null;const s="([A-Za-z0-9.\\-_]+)";function r(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${h}/b/${s}/o${g}`,"i"),T={bucket:1,path:3},w=n===fk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",b=new RegExp(`^https?://${w}/${s}/${I}`,"i"),A=[{regex:a,indices:c,postModify:r},{regex:v,indices:T,postModify:d},{regex:b,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<A.length;R++){const P=A[R],U=P.regex.exec(e);if(U){const S=U[P.indices.bucket];let M=U[P.indices.path];M||(M=""),i=new ii(S,M),P.postModify(i);break}}if(i==null)throw P$(e);return i}}class z${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q$(t,e,n){let i=1,s=null,r=null,o=!1,a=0;function c(){return a===2}let d=!1;function h(...I){d||(d=!0,e.apply(null,I))}function m(I){s=setTimeout(()=>{s=null,t(v,c())},I)}function g(){r&&clearTimeout(r)}function v(I,...b){if(d){g();return}if(I){g(),h.call(null,I,...b);return}if(c()||o){g(),h.call(null,I,...b);return}i<64&&(i*=2);let A;a===1?(a=2,A=0):A=(i+Math.random())*1e3,m(A)}let T=!1;function w(I){T||(T=!0,g(),!d&&(s!==null?(I||(a=2),clearTimeout(s),m(0)):I||(a=1)))}return m(0),r=setTimeout(()=>{o=!0,w(!0)},n),w}function H$(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G$(t){return t!==void 0}function $$(t){return typeof t=="object"&&!Array.isArray(t)}function W0(t){return typeof t=="string"||t instanceof String}function Ew(t){return Q0()&&t instanceof Blob}function Q0(){return typeof Blob<"u"}function xw(t,e,n,i){if(i<e)throw xy(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw xy(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function mk(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const s=e(i)+"="+e(t[i]);n=n+s+"&"}return n=n.slice(0,-1),n}var Ro;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ro||(Ro={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K$(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,r=e.indexOf(t)!==-1;return n||s||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e,n,i,s,r,o,a,c,d,h,m,g=!0,v=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=g,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,w)=>{this.resolve_=T,this.reject_=w,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Dd(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const c=a.loaded,d=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===Ro.NO_ERROR,c=r.getStatus();if(!a||K$(c,this.additionalRetryCodes_)&&this.retry){const h=r.getErrorCode()===Ro.ABORT;i(!1,new Dd(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;i(!0,new Dd(d,r))})},n=(i,s)=>{const r=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(a,a.getResponse());G$(c)?r(c):r()}catch(c){o(c)}else if(a!==null){const c=Y0();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(s.canceled){const c=this.appDelete_?pk():D$();o(c)}else{const c=L$();o(c)}};this.canceled_?n(!1,new Dd(!1,null,!0)):this.backoffId_=q$(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&H$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Dd{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function Y$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function W$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Q$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Z$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function X$(t,e,n,i,s,r,o=!0,a=!1){const c=mk(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return Q$(h,e),Y$(h,n),W$(h,r),Z$(h,i),new J$(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function tK(...t){const e=eK();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(Q0())return new Blob(t);throw new Pt(Dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function nK(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iK(t){if(typeof atob>"u")throw F$("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Fm{constructor(e,n){this.data=e,this.contentType=n||null}}function sK(t,e){switch(t){case Ji.RAW:return new Fm(gk(e));case Ji.BASE64:case Ji.BASE64URL:return new Fm(yk(t,e));case Ji.DATA_URL:return new Fm(oK(e),aK(e))}throw Y0()}function gk(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const r=i,o=t.charCodeAt(++n);i=65536|(r&1023)<<10|o&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function rK(t){let e;try{e=decodeURIComponent(t)}catch{throw Gu(Ji.DATA_URL,"Malformed data URL.")}return gk(e)}function yk(t,e){switch(t){case Ji.BASE64:{const s=e.indexOf("-")!==-1,r=e.indexOf("_")!==-1;if(s||r)throw Gu(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Ji.BASE64URL:{const s=e.indexOf("+")!==-1,r=e.indexOf("/")!==-1;if(s||r)throw Gu(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=iK(e)}catch(s){throw s.message.includes("polyfill")?s:Gu(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}class vk{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Gu(Ji.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=lK(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function oK(t){const e=new vk(t);return e.base64?yk(Ji.BASE64,e.rest):rK(e.rest)}function aK(t){return new vk(t).contentType}function lK(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){let i=0,s="";Ew(e)?(this.data_=e,i=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ew(this.data_)){const i=this.data_,s=nK(i,e,n);return s===null?null:new gr(s)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new gr(i,!0)}}static getBlob(...e){if(Q0()){const n=e.map(i=>i instanceof gr?i.data_:i);return new gr(tK.apply(null,n))}else{const n=e.map(o=>W0(o)?sK(Ji.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const s=new Uint8Array(i);let r=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[r++]=o[a]}),new gr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(t){let e;try{e=JSON.parse(t)}catch{return null}return $$(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uK(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function cK(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function Tk(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dK(t,e){return e}class kn{constructor(e,n,i,s){this.server=e,this.local=n||e,this.writable=!!i,this.xform=s||dK}}let Pd=null;function fK(t){return!W0(t)||t.length<2?t:Tk(t)}function Ek(){if(Pd)return Pd;const t=[];t.push(new kn("bucket")),t.push(new kn("generation")),t.push(new kn("metageneration")),t.push(new kn("name","fullPath",!0));function e(r,o){return fK(o)}const n=new kn("name");n.xform=e,t.push(n);function i(r,o){return o!==void 0?Number(o):o}const s=new kn("size");return s.xform=i,t.push(s),t.push(new kn("timeCreated")),t.push(new kn("updated")),t.push(new kn("md5Hash",null,!0)),t.push(new kn("cacheControl",null,!0)),t.push(new kn("contentDisposition",null,!0)),t.push(new kn("contentEncoding",null,!0)),t.push(new kn("contentLanguage",null,!0)),t.push(new kn("contentType",null,!0)),t.push(new kn("metadata","customMetadata",!0)),Pd=t,Pd}function hK(t,e){function n(){const i=t.bucket,s=t.fullPath,r=new ii(i,s);return e._makeStorageReference(r)}Object.defineProperty(t,"ref",{get:n})}function pK(t,e,n){const i={};i.type="file";const s=n.length;for(let r=0;r<s;r++){const o=n[r];i[o.local]=o.xform(i,e[o.server])}return hK(i,t),i}function xk(t,e,n){const i=_k(e);return i===null?null:pK(t,i,n)}function mK(t,e,n,i){const s=_k(e);if(s===null||!W0(s.downloadTokens))return null;const r=s.downloadTokens;if(r.length===0)return null;const o=encodeURIComponent;return r.split(",").map(d=>{const h=t.bucket,m=t.fullPath,g="/b/"+o(h)+"/o/"+o(m),v=Cp(g,n,i),T=mk({alt:"media",token:d});return v+T})[0]}function gK(t,e){const n={},i=e.length;for(let s=0;s<i;s++){const r=e[s];r.writable&&(n[r.server]=t[r.local])}return JSON.stringify(n)}class Z0{constructor(e,n,i,s){this.url=e,this.method=n,this.handler=i,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t){if(!t)throw Y0()}function yK(t,e){function n(i,s){const r=xk(t,s,e);return Ck(r!==null),r}return n}function vK(t,e){function n(i,s){const r=xk(t,s,e);return Ck(r!==null),mK(r,s,t.host,t._protocol)}return n}function Sk(t){function e(n,i){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=k$():s=R$():n.getStatus()===402?s=M$(t.bucket):n.getStatus()===403?s=N$(t.path):s=i,s.status=n.getStatus(),s.serverResponse=i.serverResponse,s}return e}function wk(t){const e=Sk(t);function n(i,s){let r=e(i,s);return i.getStatus()===404&&(r=I$(t.path)),r.serverResponse=s.serverResponse,r}return n}function _K(t,e,n){const i=e.fullServerUrl(),s=Cp(i,t.host,t._protocol),r="GET",o=t.maxOperationRetryTime,a=new Z0(s,r,vK(t,n),o);return a.errorHandler=wk(e),a}function TK(t,e){const n=e.fullServerUrl(),i=Cp(n,t.host,t._protocol),s="DELETE",r=t.maxOperationRetryTime;function o(c,d){}const a=new Z0(i,s,o,r);return a.successCodes=[200,204],a.errorHandler=wk(e),a}function EK(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function xK(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=EK(null,e)),i}function CK(t,e,n,i,s){const r=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let A="";for(let R=0;R<2;R++)A=A+Math.random().toString().slice(2);return A}const c=a();o["Content-Type"]="multipart/related; boundary="+c;const d=xK(e,i,s),h=gK(d,n),m="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+c+"--",v=gr.getBlob(m,i,g);if(v===null)throw O$();const T={name:d.fullPath},w=Cp(r,t.host,t._protocol),I="POST",b=t.maxUploadRetryTime,E=new Z0(w,I,yK(t,n),b);return E.urlParams=T,E.headers=o,E.body=v.uploadData(),E.errorHandler=Sk(e),E}class SK{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ro.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ro.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ro.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,s,r){if(this.sent_)throw uu("cannot .send() more than once");if(Xr(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),r!==void 0)for(const o in r)r.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,r[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class wK extends SK{initXhr(){this.xhr_.responseType="text"}}function X0(){return new wK}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n){this._service=e,n instanceof ii?this._location=n:this._location=ii.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new zo(e,n)}get root(){const e=new ii(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Tk(this._location.path)}get storage(){return this._service}get parent(){const e=uK(this._location.path);if(e===null)return null;const n=new ii(this._location.bucket,e);return new zo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw j$(e)}}function bK(t,e,n){t._throwIfRoot("uploadBytes");const i=CK(t.storage,t._location,Ek(),new gr(e,!0),n);return t.storage.makeRequestWithTokens(i,X0).then(s=>({metadata:s,ref:t}))}function AK(t){t._throwIfRoot("getDownloadURL");const e=_K(t.storage,t._location,Ek());return t.storage.makeRequestWithTokens(e,X0).then(n=>{if(n===null)throw B$();return n})}function IK(t){t._throwIfRoot("deleteObject");const e=TK(t.storage,t._location);return t.storage.makeRequestWithTokens(e,X0)}function MK(t,e){const n=cK(t._location.path,e),i=new ii(t._location.bucket,n);return new zo(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RK(t){return/^[A-Za-z]+:\/\//.test(t)}function kK(t,e){return new zo(t,e)}function bk(t,e){if(t instanceof e_){const n=t;if(n._bucket==null)throw U$();const i=new zo(n,n._bucket);return e!=null?bk(i,e):i}else return e!==void 0?MK(t,e):t}function NK(t,e){if(e&&RK(e)){if(t instanceof e_)return kK(t,e);throw xy("To use ref(service, url), the first argument must be a Storage instance.")}else return bk(t,e)}function Cw(t,e){const n=e==null?void 0:e[hk];return n==null?null:ii.makeFromBucketSpec(n,t)}function LK(t,e,n,i={}){t.host=`${e}:${n}`;const s=Xr(e);s&&(Kv(`https://${t.host}/b`),Jv("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:r}=i;r&&(t._overrideAuthToken=typeof r=="string"?r:W1(r,t.app.options.projectId))}class e_{constructor(e,n,i,s,r,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._isUsingEmulator=o,this._bucket=null,this._host=fk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=b$,this._maxUploadRetryTime=A$,this._requests=new Set,s!=null?this._bucket=ii.makeFromBucketSpec(s,this._host):this._bucket=Cw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ii.makeFromBucketSpec(this._url,e):this._bucket=Cw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){xw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){xw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(zn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zo(this,e)}_makeRequest(e,n,i,s,r=!0){if(this._deleted)return new z$(pk());{const o=X$(e,this._appId,i,s,n,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,s).getPromise()}}const Sw="@firebase/storage",ww="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak="storage";function Vd(t,e,n){return t=ht(t),bK(t,e,n)}function Ud(t){return t=ht(t),AK(t)}function bw(t){return t=ht(t),IK(t)}function aa(t,e){return t=ht(t),NK(t,e)}function DK(t=Qv(),e){t=ht(t);const i=Zh(t,Ak).getImmediate({identifier:e}),s=K1("storage");return s&&PK(i,...s),i}function PK(t,e,n,i={}){LK(t,e,n,i)}function VK(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new e_(n,i,s,e,Qo)}function UK(){Uo(new Hr(Ak,VK,"PUBLIC").setMultipleInstances(!0)),Qi(Sw,ww,""),Qi(Sw,ww,"esm2020")}UK();const la=t=>"",OK={apiKey:la(),authDomain:la(),projectId:la(),storageBucket:la(),messagingSenderId:la(),appId:la()},t_=X1(OK),ho=pH(t_),Ae=f$(t_),ua=DK(t_),jm=(t,e)=>t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate(),BK=({conversation:t,currentUser:e,allUsers:n,onBack:i,onSendMessage:s,onViewProfile:r})=>{const[o,a]=y.useState([]),[c,d]=y.useState(""),h=y.useRef(null),{t:m,language:g}=Be();y.useEffect(()=>{const A=vs(Xt(Ae,"conversations",t.id,"messages"),_a("createdAt","asc")),R=sr(A,P=>{const U=P.docs.map(S=>{var M;return{id:S.id,...S.data(),createdAt:((M=S.data().createdAt)==null?void 0:M.toDate().toISOString())??new Date().toISOString()}});a(U)});return()=>R()},[t.id]),y.useEffect(()=>{var A;(A=h.current)==null||A.scrollIntoView({behavior:"smooth"})},[o]);const v=()=>{c.trim()&&(s(t,c.trim()),d(""))},T=A=>{const R=new Date,P=new Date;return P.setDate(P.getDate()-1),jm(A,R)?m("notifications.today"):jm(A,P)?m("notifications.yesterday"):A.toLocaleDateString(g,{year:"numeric",month:"long",day:"numeric"})};let w=null;const I=t.participant,b=t.type==="private"?I==null?void 0:I.name:t.name,E=t.type==="private"?I==null?void 0:I.avatarUrl:t.imageUrl;return f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsx(di,{title:b||"",onBack:i,avatarUrl:E,onTitleClick:t.type==="private"&&I?()=>r(I):void 0}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-1",children:[o.map(A=>{const R=new Date(A.createdAt),P=w===null||!jm(w,R);w=R;const U=n.find(M=>M.id===A.senderId),S=A.senderId===e.id;return f.jsxs(Sh.Fragment,{children:[P&&f.jsx("div",{className:"text-center text-xs text-gray-500 dark:text-gray-400 my-4",children:T(R)}),f.jsxs("div",{className:`flex items-end gap-2 ${S?"justify-end":"justify-start"}`,children:[!S&&U&&f.jsx("button",{onClick:()=>r(U),children:f.jsx("img",{src:U.avatarUrl,className:"w-6 h-6 rounded-full self-end",alt:"avatar"})}),f.jsxs("div",{className:"flex flex-col",style:{maxWidth:"75%"},children:[!S&&t.type==="group"&&f.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1 ms-2",children:U==null?void 0:U.name}),f.jsxs("div",{className:`p-3 rounded-2xl ${S?"bg-orange-600 text-white rounded-br-lg":"bg-light-bg-secondary dark:bg-dark-bg-secondary text-gray-800 dark:text-gray-200 rounded-bl-lg"}`,children:[f.jsx("p",{className:"text-sm",style:{wordBreak:"break-word"},children:A.text}),f.jsx("p",{className:`text-xs mt-1 text-right ${S?"text-orange-200":"text-gray-500 dark:text-gray-400"}`,children:R.toLocaleTimeString(g,{hour:"2-digit",minute:"2-digit"})})]})]})]})]},A.id)}),f.jsx("div",{ref:h})]}),f.jsx("div",{className:"p-2 border-t dark:border-zinc-800/50 bg-light-bg-secondary/50 dark:bg-dark-bg/50 backdrop-blur-sm",children:f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("input",{type:"text",placeholder:"Type a message...",className:"flex-1 p-2 border border-gray-300 rounded-full dark:bg-dark-bg-secondary dark:border-zinc-700 dark:text-white",value:c,onChange:A=>d(A.target.value),onKeyPress:A=>A.key==="Enter"&&v()}),f.jsx("button",{onClick:v,className:"bg-orange-600 text-white p-2.5 rounded-full hover:bg-orange-700",children:f.jsx($v,{className:"w-5 h-5"})})]})})]})},FK=({currentUser:t,allUsers:e,onSendMessage:n,onBack:i,onFollowToggle:s,onViewProfile:r})=>{const[o,a]=y.useState("exact"),[c,d]=y.useState(null),{t:h}=Be(),m=()=>{if(!t.birthday){alert("You don't have a birthday set in your profile.");return}const w=e.filter(I=>{var b,E;return I.id===t.id||!I.birthday||!((b=I.privacySettings)!=null&&b.allowTwinSearch)?!1:o==="exact"?I.birthday===t.birthday:I.birthday.substring(5)===((E=t.birthday)==null?void 0:E.substring(5))});d(w)},g="text-sm px-3 py-1 rounded-full font-semibold transition-colors",v="bg-orange-500 text-white hover:bg-orange-600",T="bg-neutral-200 text-neutral-700 hover:bg-neutral-300 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-600";return f.jsxs(f.Fragment,{children:[f.jsx(di,{title:h("findYourTwins"),onBack:i}),f.jsxs("div",{className:"p-4 space-y-4",children:[f.jsxs("div",{className:"bg-gray-100 dark:bg-neutral-900 p-3 rounded-lg",children:[f.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 mb-2",children:h("searchForPeople")}),f.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-4 space-y-2 sm:space-y-0",children:[f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"radio",name:"searchType",value:"exact",checked:o==="exact",onChange:()=>a("exact"),className:"h-4 w-4 text-orange-600 border-gray-300 focus:ring-orange-500 dark:bg-neutral-700 dark:border-neutral-600"}),f.jsx("span",{className:"ms-2 text-sm text-gray-700 dark:text-gray-300",children:h("sameExactBirthday")})]}),f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"radio",name:"searchType",value:"dayAndMonth",checked:o==="dayAndMonth",onChange:()=>a("dayAndMonth"),className:"h-4 w-4 text-orange-600 border-gray-300 focus:ring-orange-500 dark:bg-neutral-700 dark:border-neutral-600"}),f.jsx("span",{className:"ms-2 text-sm text-gray-700 dark:text-gray-300",children:h("sameDayMonth")})]})]})]}),f.jsx("button",{onClick:m,className:"w-full bg-orange-600 text-white font-bold py-3 rounded-md hover:bg-orange-700 transition-colors",children:h("findYourTwins")}),f.jsxs("div",{className:"mt-6",children:[c===null&&f.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:h("pressToFindTwins")}),c!==null&&c.length===0&&f.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400",children:h("noTwinsFound")}),c!==null&&c.length>0&&f.jsxs("div",{className:"space-y-3",children:[f.jsx("h3",{className:"font-bold text-lg dark:text-white",children:h("foundTwins",{count:c.length})}),c.map(w=>{const I=(t.following||[]).includes(w.id),b=(w.following||[]).includes(t.id);return f.jsxs("div",{className:"bg-white dark:bg-neutral-900 p-3 rounded-lg border dark:border-neutral-800 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[f.jsxs("button",{onClick:()=>r(w),className:"flex items-center mb-2 sm:mb-0 text-left",children:[f.jsx("img",{src:w.avatarUrl,alt:w.name,className:"w-12 h-12 rounded-full me-4"}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:w.name}),b&&f.jsx("span",{className:"text-xs bg-gray-200 dark:bg-neutral-700 text-gray-600 dark:text-gray-300 px-1.5 py-0.5 rounded-md",children:h("followsYou")})]}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:w.bio})]})]}),f.jsxs("div",{className:"flex space-x-2 justify-end",children:[f.jsx("button",{onClick:()=>s(w.id),className:`${g} ${I?T:v}`,children:h(I?"following":"follow")}),f.jsx("button",{onClick:()=>n(w),className:`${g} ${T}`,children:h("message")})]})]},w.id)})]})]})]})]})},jK=({active:t,progress:e})=>f.jsx("div",{className:"flex-1 h-1 bg-white/30 rounded-full mx-0.5",children:f.jsx("div",{className:`h-full rounded-full ${t?"bg-white":""}`,style:{width:`${t?e:0}%`,transition:t?"width 0.1s linear":"none"}})}),zK=({stories:t,onClose:e,currentUser:n,onDeleteStory:i})=>{const[s,r]=y.useState(0),[o,a]=y.useState(0),[c,d]=y.useState(!1),h=y.useRef(null),{t:m}=Be(),g=y.useCallback(()=>{s<t.length-1?(r(E=>E+1),d(!1)):e()},[s,t.length,e]),v=()=>{r(E=>E>0?E-1:0),d(!1)};if(y.useEffect(()=>{a(0);const E=t[s];if(E&&E.media.type==="image"){const A=setTimeout(g,5e3),R=setInterval(()=>{a(P=>P+100/(5e3/100))},100);return()=>{clearTimeout(A),clearInterval(R)}}},[s,t,g]),y.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]),y.useEffect(()=>{s>=t.length&&t.length>0?r(t.length-1):t.length===0&&e()},[t,s,e]),y.useEffect(()=>{const E=A=>{h.current&&!h.current.contains(A.target)&&d(!1)};return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[]),!t||t.length===0||!t[s])return null;const T=t[s],w=(n==null?void 0:n.id)===T.authorId,I=E=>{const A=E.currentTarget;A.duration&&a(A.currentTime/A.duration*100)},b=()=>{window.confirm(m("confirmDelete"))&&(i(T),d(!1))};return f.jsxs("div",{className:"fixed inset-0 bg-black z-[100] flex flex-col p-2 animate-fade-in select-none",children:[f.jsx("div",{className:"absolute top-4 left-2 right-2 z-20 flex",children:t.map((E,A)=>f.jsx(jK,{active:A===s,progress:A<s?100:A===s?o:0},A))}),f.jsx("div",{className:"absolute top-6 left-0 right-0 p-4 z-10 bg-gradient-to-b from-black/50 to-transparent",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("img",{src:T.author.avatarUrl,alt:T.author.name,className:"w-8 h-8 rounded-full"}),f.jsx("span",{className:"text-white font-semibold text-sm",children:T.author.name})]}),f.jsxs("div",{className:"flex items-center space-x-2",children:[w&&f.jsxs("div",{className:"relative",children:[f.jsx("button",{onClick:()=>d(E=>!E),className:"text-white p-1",children:f.jsx(UI,{})}),c&&f.jsx("div",{ref:h,className:"absolute top-full right-0 mt-2 w-36 bg-neutral-800 rounded-md shadow-lg z-20 text-white",children:f.jsx("button",{onClick:b,className:"w-full text-left px-4 py-2 text-sm hover:bg-neutral-700 text-red-500",children:m("deleteAdventure")})})]}),f.jsx("button",{onClick:e,className:"text-white text-2xl font-bold",children:""})]})]})}),f.jsxs("div",{className:"flex-1 flex items-center justify-center relative",children:[T.media.type==="image"?f.jsx("img",{src:T.media.url,alt:"Story content",className:"max-w-full max-h-full rounded-lg"}):f.jsx("video",{src:T.media.url,className:"max-w-full max-h-full rounded-lg",autoPlay:!0,onEnded:g,onTimeUpdate:I,playsInline:!0},T.id),f.jsxs("div",{className:"absolute inset-0 flex",children:[f.jsx("div",{className:"w-1/3 h-full",onMouseDown:v}),f.jsx("div",{className:"w-2/3 h-full",onMouseDown:g})]})]})]})},po=({children:t,icon:e,title:n,subtitle:i})=>f.jsxs("div",{className:"bg-light-bg-secondary/70 dark:bg-dark-bg-secondary/70 backdrop-blur-sm rounded-3xl p-4 sm:p-6 space-y-4",children:[f.jsxs("div",{className:"flex items-start space-x-4 text-gray-800 dark:text-gray-200",children:[f.jsx("div",{className:"flex-shrink-0 w-6 h-6 opacity-80",children:e}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-lg",children:n}),i&&f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 -mt-1",children:i})]})]}),f.jsx("div",{children:t})]}),qK=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"m19 21-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z"})}),HK=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),f.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),Aw=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),f.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),f.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),f.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),GK=({adventures:t,allUsers:e,currentUser:n,isGuest:i,isLoaded:s,onSelectAdventure:r,onSendMessage:o,onToggleInterest:a,onNavigateToFindTwins:c,onViewProfile:d,onShowResultsOnMap:h,onRepostToggle:m,onSaveToggle:g,onShareAdventure:v,onToggleCompleted:T,onViewLocationOnMap:w,onDeleteAdventure:I,onEditAdventure:b,onFollowToggle:E,onJoinGroupChat:A})=>{const[R,P]=y.useState("adventures"),[U,S]=y.useState(""),[M,C]=y.useState("all"),[k,N]=y.useState(""),[V,L]=y.useState(""),[$,Z]=y.useState(""),[j,ee]=y.useState(""),[q,X]=y.useState([]),[ie,te]=y.useState(!1),[ce,ne]=y.useState(""),fe=y.useRef(null),[F,Re]=y.useState(null),{t:se}=Be(),[_e,Ue]=y.useState(null);y.useEffect(()=>{s&&window.google&&Ue(new window.google.maps.places.AutocompleteService)},[s]);const pe=y.useCallback(Q=>{if(!_e||Q.trim().length<3){X([]);return}te(!0),_e.getPlacePredictions({input:Q,types:["(cities)"]},(We,En)=>{En===window.google.maps.places.PlacesServiceStatus.OK&&We?X(We):X([]),te(!1)})},[_e]);y.useEffect(()=>{const Q=setTimeout(()=>{k.trim()!==ce?pe(k):X([])},500);return()=>clearTimeout(Q)},[k,ce,pe]),y.useEffect(()=>{const Q=We=>{fe.current&&!fe.current.contains(We.target)&&X([])};return document.addEventListener("mousedown",Q),()=>document.removeEventListener("mousedown",Q)},[]);const Ee=Q=>{N(Q.description),ne(Q.description),X([])},he=()=>{Re({query:U,type:M,city:k,budget:V,startDate:$,endDate:j})},pt=y.useMemo(()=>R!=="adventures"||!F?[]:t.filter(Q=>{const We=F.query.toLowerCase().trim();if(We&&!(Q.title.toLowerCase().includes(We)||Q.description.toLowerCase().includes(We)||Q.location.toLowerCase().includes(We))||F.type!=="all"&&Q.type!==F.type)return!1;const En=F.city.toLowerCase().trim();if(En&&!Q.location.toLowerCase().includes(En.split(",")[0]))return!1;const xn=parseInt(F.budget,10);if(!isNaN(xn)&&Q.budget>xn)return!1;if(F.startDate||F.endDate){const ae=new Date(Q.startDate),qe=Q.endDate?new Date(Q.endDate):ae,Ut=F.startDate?new Date(F.startDate):null,vt=F.endDate?new Date(F.endDate):null;if(Ut&&vt){if(!(ae<=vt&&qe>=Ut))return!1}else if(Ut){if(!(qe>=Ut))return!1}else if(vt&&!(ae<=vt))return!1}return!0}),[t,F,R]),Vt=y.useMemo(()=>{if(R!=="people"||!F)return[];const Q=F.query.toLowerCase().trim();return Q?e.filter(We=>We.id!==n.id&&(We.name.toLowerCase().includes(Q)||We.username.toLowerCase().includes(Q))):[]},[e,n.id,F,R]),Pe=y.useMemo(()=>pt.some(Q=>!!Q.coordinates),[pt]),ye="w-full px-4 py-3 rounded-2xl bg-slate-100 dark:bg-zinc-800 border-2 border-transparent focus:outline-none focus:ring-2 focus:ring-brand-orange focus:bg-white dark:focus:bg-zinc-900 text-gray-800 dark:text-gray-200 transition-colors placeholder:text-gray-400 dark:placeholder:text-gray-500",Je="text-sm px-3 py-1 rounded-full font-semibold transition-colors",Rt="bg-orange-500 text-white hover:bg-orange-600",Le="bg-neutral-200 text-neutral-700 hover:bg-neutral-300 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-600";return f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsxs("div",{className:"border-b dark:border-neutral-800/50 flex bg-light-bg-secondary/70 dark:bg-dark-bg-secondary/70 backdrop-blur-sm sticky top-0 z-30",children:[f.jsx(Iw,{id:"adventures",label:se("adventures"),icon:f.jsx(za,{}),active:R==="adventures",onClick:()=>P("adventures")}),f.jsx(Iw,{id:"people",label:se("people"),icon:f.jsx(BI,{}),active:R==="people",onClick:()=>P("people")})]}),f.jsxs("div",{className:"flex-grow overflow-y-auto p-2 sm:p-4 space-y-3",children:[R==="adventures"&&f.jsxs(f.Fragment,{children:[f.jsx(po,{icon:f.jsx(za,{}),title:se("search"),children:f.jsx("input",{type:"text",placeholder:se("findNextAdventure"),value:U,onChange:Q=>S(Q.target.value),className:ye,"aria-label":"Search"})}),f.jsx(po,{icon:f.jsx(qK,{}),title:se("adventureType"),children:f.jsxs("select",{id:"type-filter",className:ye,"aria-label":"Filter by adventure type",value:M,onChange:Q=>C(Q.target.value),children:[f.jsx("option",{value:"all",children:se("allTypes")}),f.jsx("option",{value:ue.Travel,children:se("AdventureType_Travel")}),f.jsx("option",{value:ue.Event,children:se("AdventureType_Event")}),f.jsx("option",{value:ue.Hiking,children:se("AdventureType_Hiking")}),f.jsx("option",{value:ue.Camping,children:se("AdventureType_Camping")}),f.jsx("option",{value:ue.Volunteering,children:se("AdventureType_Volunteering")}),f.jsx("option",{value:ue.Cycling,children:se("AdventureType_Cycling")})]})}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[f.jsx(po,{icon:f.jsx(Gv,{}),title:se("city"),children:f.jsxs("div",{ref:fe,className:"relative",children:[f.jsx("input",{id:"city-filter",type:"text",placeholder:"e.g., Lisbon",className:ye,"aria-label":"Filter by city",value:k,onChange:Q=>N(Q.target.value),autoComplete:"off"}),ie&&f.jsx("div",{className:"p-2 text-xs text-gray-500",children:se("searching")}),q.length>0&&f.jsx("ul",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-dark-bg-secondary border dark:border-zinc-700 rounded-md shadow-lg max-h-60 overflow-y-auto",children:q.map(Q=>f.jsx("li",{onClick:()=>Ee(Q),className:"px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-zinc-700 cursor-pointer",children:Q.description},Q.place_id))})]})}),f.jsx(po,{icon:f.jsx(HK,{}),title:se("maxBudget"),children:f.jsx("input",{id:"budget-filter",type:"number",placeholder:"$1000",className:ye,"aria-label":"Filter by max budget",value:V,onChange:Q=>L(Q.target.value)})})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[f.jsx(po,{icon:f.jsx(Aw,{}),title:se("from"),children:f.jsx("input",{id:"start-date",type:"date",value:$,onChange:Q=>Z(Q.target.value),className:`${ye} text-gray-500`,"aria-label":"Filter by start date"})}),f.jsx(po,{icon:f.jsx(Aw,{}),title:se("to"),children:f.jsx("input",{id:"end-date",type:"date",value:j,onChange:Q=>ee(Q.target.value),className:`${ye} text-gray-500`,"aria-label":"Filter by end date"})})]}),f.jsx("button",{onClick:he,className:"w-full bg-brand-orange text-white font-bold py-4 rounded-2xl hover:bg-brand-orange-light transition-colors text-lg",children:se("search")}),F&&pt.length>0&&Pe&&f.jsxs("button",{onClick:()=>h(pt),className:"w-full flex items-center justify-center space-x-2 bg-sky-600 text-white font-semibold py-3 rounded-2xl hover:bg-sky-700 transition-colors",children:[f.jsx(Sv,{className:"w-5 h-5"}),f.jsx("span",{children:se("showOnMap")})]})]}),R==="people"&&f.jsxs(f.Fragment,{children:[f.jsx(po,{icon:f.jsx(za,{}),title:se("search"),children:f.jsx("input",{type:"text",placeholder:se("searchPlaceholderPeople"),value:U,onChange:Q=>S(Q.target.value),className:ye,"aria-label":"Search People"})}),f.jsx("button",{onClick:he,className:"w-full bg-brand-orange text-white font-bold py-4 rounded-2xl hover:bg-brand-orange-light transition-colors text-lg",children:se("search")}),f.jsxs("button",{onClick:c,className:"w-full flex items-center justify-center space-x-2 bg-neutral-800 border border-neutral-700 text-gray-200 font-semibold py-3 rounded-2xl hover:bg-neutral-700 transition-colors",children:[f.jsx(FI,{className:"w-5 h-5 text-rose-500"}),f.jsx("span",{children:se("findYourTwins")})]})]}),f.jsxs("div",{className:"pt-4",children:[F===null&&f.jsxs("div",{className:"text-center py-10 px-4",children:[f.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-semibold",children:se("findNextAdventure")}),f.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm mt-1",children:se("useFiltersPrompt")})]}),R==="adventures"&&F&&f.jsx(f.Fragment,{children:pt.length>0?pt.map(Q=>f.jsx(wl,{adventure:Q,currentUser:n,isGuest:i,onCommentClick:r,onMessageClick:o,onInterestToggle:a,onViewProfile:d,onRepostToggle:m,onSaveToggle:g,onShareAdventure:v,onToggleCompleted:T,onViewLocationOnMap:w,onDeleteAdventure:I,onEditAdventure:b,onJoinGroupChat:A},Q.id)):f.jsxs("div",{className:"text-center py-10 px-4",children:[f.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-semibold",children:se("noAdventuresFound")}),f.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm mt-1",children:se("tryAdjustingFilters")})]})}),R==="people"&&F&&f.jsx("div",{className:"space-y-3",children:Vt.length>0?Vt.map(Q=>{const We=(n.following||[]).includes(Q.id);return f.jsxs("div",{className:"bg-light-bg-secondary/70 dark:bg-dark-bg-secondary/70 backdrop-blur-sm rounded-3xl p-4 flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[f.jsxs("button",{onClick:()=>d(Q),className:"flex items-center mb-2 sm:mb-0 text-left",children:[f.jsx("img",{src:Q.avatarUrl,alt:Q.name,className:"w-12 h-12 rounded-full me-4"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:Q.name}),f.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["@",Q.username]})]})]}),f.jsxs("div",{className:"flex space-x-2 justify-end",children:[f.jsx("button",{onClick:()=>E(Q.id),className:`${Je} ${We?Le:Rt}`,disabled:i,children:se(We?"following":"follow")}),f.jsx("button",{onClick:()=>o(Q),className:`${Je} ${Le}`,disabled:i,children:se("message")})]})]},Q.id)}):f.jsxs("div",{className:"text-center py-10 px-4",children:[f.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-semibold",children:se("noUsersFound")}),f.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-sm mt-1",children:se("tryDifferentSearch")})]})})]})]})]})},Iw=({id:t,label:e,icon:n,active:i,onClick:s})=>f.jsxs("button",{id:t,onClick:s,className:`flex-1 flex items-center justify-center py-3 text-sm font-semibold border-b-2 transition-colors ${i?"border-orange-500 text-orange-500":"border-transparent text-gray-500 hover:text-orange-500"}`,children:[f.jsx("span",{className:"w-5 h-5 me-2",children:n}),e]}),$K=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),f.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),KK=({user:t,currentUser:e,allAdventures:n,onBack:i,onSelectAdventure:s,onSendMessage:r,onToggleInterest:o,onFollowToggle:a,onViewProfile:c,onRepostToggle:d,onSaveToggle:h,onShareProfile:m,onShareAdventure:g,onToggleCompleted:v,onOpenFollowList:T,isGuest:w,onViewLocationOnMap:I,onDeleteAdventure:b,onEditAdventure:E,onJoinGroupChat:A,onViewCompletedByType:R,activeTab:P,setActiveTab:U})=>{var te,ce,ne,fe,F,Re;const{t:S}=Be(),M=(e.following||[]).includes(t.id),C=!t.isPrivate||M&&!w,k=f.jsx("button",{onClick:()=>m(t),className:"p-2 text-gray-600 dark:text-gray-300 hover:text-orange-600 dark:hover:text-orange-400",children:f.jsx(bv,{})}),{userAdventures:N,repostedAdventures:V,completedAdventures:L}=y.useMemo(()=>{const se=n.filter(pe=>pe.author.id!==t.id||t.isPrivate&&!M&&!w||t.isPrivate&&w?!1:pe.privacy==="Public"?!0:w?!1:!!(pe.privacy==="Followers"&&M||pe.privacy==="Twins"&&e.birthday&&t.birthday&&e.birthday.substring(5)===t.birthday.substring(5))),_e=n.filter(pe=>(t.repostedAdventures||[]).includes(pe.id)),Ue=n.filter(pe=>(t.activityLog||[]).some(Ee=>Ee.adventureId===pe.id&&Ee.status===Wi.Confirmed));return{userAdventures:se,repostedAdventures:_e,completedAdventures:Ue}},[n,t,e,M,w]),$=y.useMemo(()=>P==="reposts"?V:P==="completed"?L:N,[P,N,V,L]),Z=({tab:se,icon:_e})=>{const Ue=P===se;return f.jsx("button",{onClick:()=>U(se),className:`flex-1 py-3 flex justify-center items-center border-b-2 transition-colors duration-200 ${Ue?"border-orange-500 text-orange-500":"border-transparent text-gray-500 hover:text-orange-500"}`,children:_e})},j=()=>C?P==="stats"?f.jsx(z1,{user:t,allAdventures:n,onViewCompletedByType:se=>R(t,se)}):f.jsxs("div",{className:"pt-2 px-2",children:[$.map(se=>f.jsx(wl,{adventure:se,currentUser:e,isGuest:w,onCommentClick:s,onMessageClick:r,onInterestToggle:o,onViewProfile:c,onRepostToggle:d,onSaveToggle:h,onShareAdventure:g,onToggleCompleted:v,onViewLocationOnMap:I,onDeleteAdventure:b,onEditAdventure:E,onJoinGroupChat:A},se.id)),$.length===0&&f.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:S("noAdventuresInSection")})]}):f.jsxs("div",{className:"text-center py-16 px-4",children:[f.jsx($K,{className:"w-12 h-12 mx-auto text-gray-400"}),f.jsx("h3",{className:"mt-4 text-lg font-semibold text-gray-800 dark:text-gray-200",children:S("thisAccountIsPrivate")}),f.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:S("followToSeePosts")})]}),ee="px-2 py-1 rounded-md font-semibold text-sm transition-colors",q="bg-orange-500 text-white hover:bg-orange-600",X="bg-neutral-200 text-neutral-700 hover:bg-neutral-300 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-600",ie=t.country?th(t.country):null;return f.jsxs(f.Fragment,{children:[f.jsx(di,{onBack:i,rightAction:k}),f.jsxs("div",{className:"flex-grow",children:[f.jsx("div",{className:"w-full h-32 bg-gray-200 dark:bg-neutral-800",children:t.coverUrl?f.jsx("img",{src:t.coverUrl,alt:"Cover",className:"w-full h-full object-cover"}):f.jsx("div",{className:"w-full h-full bg-gradient-to-r from-gray-300 to-gray-400 dark:from-neutral-800 dark:to-neutral-700"})}),f.jsx("div",{className:"px-4 relative",children:f.jsxs("div",{className:"flex items-end",children:[f.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-light-bg dark:border-dark-bg shadow-lg flex-shrink-0 -mt-12 bg-gray-300 dark:bg-neutral-700 flex items-center justify-center",children:t.avatarUrl?f.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-full h-full rounded-full object-cover"}):f.jsx(qh,{className:"w-12 h-12 text-white dark:text-neutral-950"})}),f.jsx("div",{className:"flex-grow ms-4 flex items-center",children:f.jsxs("div",{className:"flex justify-around w-full",children:[f.jsxs("div",{className:"text-center",children:[f.jsx("p",{className:"font-bold text-lg text-gray-800 dark:text-gray-100",children:N.length}),f.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-500",children:S("adventures")})]}),f.jsxs("button",{className:"text-center disabled:cursor-default",onClick:()=>T(t,"followers"),disabled:!C||!((te=t.privacySettings)!=null&&te.showFollowLists),children:[f.jsx("p",{className:"font-bold text-lg text-gray-800 dark:text-gray-100",children:C&&((ce=t.privacySettings)!=null&&ce.showFollowLists)?(t.followers||[]).length:"-"}),f.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-500",children:S("followers")})]}),f.jsxs("button",{className:"text-center disabled:cursor-default",onClick:()=>T(t,"following"),disabled:!C||!((ne=t.privacySettings)!=null&&ne.showFollowLists),children:[f.jsx("p",{className:"font-bold text-lg text-gray-800 dark:text-gray-100",children:C&&((fe=t.privacySettings)!=null&&fe.showFollowLists)?(t.following||[]).length:"-"}),f.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-500",children:S("following")})]})]})})]})}),f.jsxs("div",{className:"pt-4 px-4",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{className:"flex-shrink min-w-0",children:[f.jsxs("div",{className:"flex items-center space-x-2 mr-2",children:[f.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100 truncate",children:t.name}),ie&&f.jsx("img",{src:ie,alt:`${t.country} flag`,className:"w-6 h-auto rounded-sm flex-shrink-0"}),t.averageRating&&f.jsxs("div",{className:"flex items-center space-x-1 text-amber-500 bg-amber-100 dark:bg-amber-900/50 px-2 py-0.5 rounded-full flex-shrink-0",children:[f.jsx(Rc,{className:"w-4 h-4 fill-current"}),f.jsx("span",{className:"font-bold text-sm",children:t.averageRating.toFixed(1)})]})]}),f.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["@",t.username]})]}),f.jsxs("div",{className:"flex space-x-2 flex-shrink-0 mt-1",children:[f.jsx("button",{onClick:()=>a(t.id),disabled:w,className:`${ee} w-20 text-center ${M?X:q} ${w?"cursor-not-allowed":""}`,children:S(M?"following":"follow")}),f.jsx("button",{onClick:()=>r(t),disabled:w,className:`${ee} w-20 text-center ${X} ${w?"cursor-not-allowed":""}`,children:S("message")})]})]}),f.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2 max-w-md",children:t.bio})]}),C&&f.jsxs("div",{className:"mt-4 border-t border-b border-gray-200 dark:border-neutral-800 flex",children:[f.jsx(Z,{tab:"adventures",icon:f.jsx(Gh,{})}),f.jsx(Z,{tab:"reposts",icon:f.jsx(wv,{})}),((F=t.privacySettings)==null?void 0:F.showCompletedActivities)&&f.jsx(Z,{tab:"completed",icon:f.jsx(ll,{})}),((Re=t.privacySettings)==null?void 0:Re.showStats)&&f.jsx(Z,{tab:"stats",icon:f.jsx(j1,{})})]}),j()]})]})},JK=({message:t,onClose:e})=>(y.useEffect(()=>{const n=setTimeout(()=>{e()},3e3);return()=>clearTimeout(n)},[e]),f.jsx("div",{className:"fixed bottom-20 left-1/2 -translate-x-1/2 z-[100] px-4 py-2 bg-neutral-800 text-white rounded-full shadow-lg text-sm animate-fade-in-up",children:t})),YK=({adventure:t,onClose:e,onSubmit:n})=>{const[i,s]=y.useState(0),[r,o]=y.useState(0),{t:a}=Be(),c=()=>{if(i===0){alert("Please select a rating.");return}n(t.id,i)};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[101] flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-sm flex flex-col p-6 text-center",children:[f.jsx("h2",{className:"text-xl font-bold dark:text-white mb-2",children:a("rateYourExperience")}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:a("howWasExperience",{name:t.author.name,title:t.title})}),f.jsx("div",{className:"flex justify-center items-center space-x-2 my-4",children:[1,2,3,4,5].map(d=>f.jsx("button",{onMouseEnter:()=>o(d),onMouseLeave:()=>o(0),onClick:()=>s(d),children:f.jsx(Rc,{className:`w-8 h-8 transition-colors ${(r||i)>=d?"text-amber-400 fill-current":"text-gray-400 dark:text-gray-600"}`})},d))}),f.jsxs("div",{className:"flex items-center space-x-2 mt-6",children:[f.jsx("button",{onClick:e,className:"flex-1 bg-gray-200 dark:bg-neutral-700 text-gray-800 dark:text-gray-200 py-2 rounded-md hover:bg-gray-300 dark:hover:bg-neutral-600 font-semibold",children:a("cancel")}),f.jsx("button",{onClick:c,className:"flex-1 bg-orange-600 text-white py-2 rounded-md hover:bg-orange-700 font-semibold disabled:bg-orange-300",disabled:i===0,children:a("submitRating")})]})]})})},WK=({userInList:t,listOwner:e,currentUser:n,listType:i,onFollowToggle:s,onRemoveFollower:r})=>{const{t:o}=Be();if(!n||t.id===n.id)return null;const a=(n.following||[]).includes(t.id);return e.id===n.id&&i==="followers"?f.jsx("button",{onClick:()=>r(t.id),className:"bg-neutral-200 text-neutral-700 hover:bg-neutral-300 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-600 px-4 py-1 rounded-md font-semibold text-sm",children:o("remove")}):f.jsx("button",{onClick:()=>s(t.id),className:`px-4 py-1 rounded-md font-semibold text-sm w-24 text-center ${a?"bg-neutral-200 text-neutral-700 hover:bg-neutral-300 dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-600":"bg-orange-500 text-white hover:bg-orange-600"}`,children:o(a?"following":"follow")})},QK=({title:t,listOwner:e,currentUser:n,users:i,listType:s,onClose:r,onViewProfile:o,onFollowToggle:a,onRemoveFollower:c})=>{const{t:d}=Be();return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[101] flex justify-center items-center p-4",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-md max-h-[80vh] flex flex-col",children:[f.jsxs("div",{className:"flex-shrink-0 h-14 flex items-center justify-center border-b border-gray-200 dark:border-neutral-800 relative",children:[f.jsx("h2",{className:"text-lg font-bold dark:text-white",children:t}),f.jsx("button",{onClick:r,className:"absolute end-2 p-2 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl font-bold",children:""})]}),f.jsx("div",{className:"overflow-y-auto flex-grow",children:i.length>0?f.jsx("div",{className:"divide-y divide-gray-200 dark:divide-neutral-800",children:i.map(h=>f.jsxs("div",{className:"p-3 flex items-center justify-between",children:[f.jsxs("button",{onClick:()=>o(h),className:"flex items-center space-x-4 text-left",children:[f.jsx("img",{src:h.avatarUrl,alt:h.name,className:"w-10 h-10 rounded-full"}),f.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-100",children:h.name})]}),f.jsx(WK,{userInList:h,listOwner:e,currentUser:n,listType:s,onFollowToggle:a,onRemoveFollower:c})]},h.id))}):f.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:d("noUsersToDisplay")})})]})})},Od=({icon:t,label:e,isActive:n,onClick:i,disabled:s=!1,hasBadge:r=!1})=>f.jsxs("button",{onClick:i,disabled:s,className:`relative flex items-center w-full p-3 my-1 rounded-lg transition-colors duration-200 ${s?"text-gray-400 dark:text-gray-600 cursor-not-allowed":n?"bg-orange-100 dark:bg-orange-900/40 text-brand-orange dark:text-brand-orange-light":"hover:bg-slate-100 dark:hover:bg-zinc-800 text-gray-600 dark:text-gray-300"}`,children:[f.jsx("div",{className:"w-6 h-6 me-4",children:t}),f.jsx("span",{className:"font-semibold",children:e}),r&&f.jsx("span",{className:"absolute top-3 end-3 block h-2 w-2 rounded-full bg-rose-500"})]}),ZK=({activeScreen:t,setActiveScreen:e,hasUnreadNotifications:n,isGuest:i,onGuestAction:s})=>{const{t:r}=Be(),o=(d,h=!1)=>{i&&h?s():e(d)},a=[{screen:"adventures",label:r("adventure"),icon:f.jsx(LI,{})},{screen:"map",label:r("map"),icon:f.jsx(Sv,{})},{screen:"search",label:r("search"),icon:f.jsx(za,{})},{screen:"create",label:r("adventure"),icon:f.jsx(DI,{}),requiresAuth:!0}],c=[{screen:"profile",label:r("profile"),icon:f.jsx(qh,{}),requiresAuth:!0}];return f.jsxs("div",{className:"w-64 border-e border-slate-200 dark:border-zinc-800 bg-light-bg-secondary dark:bg-dark-bg-secondary p-4 flex-col justify-between hidden xl:flex",children:[f.jsxs("div",{children:[f.jsxs("button",{onClick:()=>o("adventures"),className:"flex items-center mb-8 px-2",children:[f.jsx("img",{src:"/logo.svg",alt:"Pathkin Logo",className:"w-8 h-8 mr-2"}),f.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-gray-100",children:r("appName")})]}),f.jsxs("nav",{children:[a.map(d=>f.jsx(Od,{label:d.label,icon:d.icon,isActive:t===d.screen,onClick:()=>o(d.screen,d.requiresAuth),disabled:i&&d.requiresAuth},d.screen)),f.jsx(Od,{label:r("messages"),icon:f.jsx(Hh,{}),isActive:t==="chat",onClick:()=>o("chat",!0),disabled:i}),f.jsx(Od,{label:r("notifications"),icon:f.jsx(jI,{}),isActive:t==="notifications",onClick:()=>o("notifications",!0),disabled:i,hasBadge:n&&!i}),f.jsx("div",{className:"my-4 border-t border-slate-200 dark:border-zinc-800"}),c.map(d=>f.jsx(Od,{label:d.label,icon:d.icon,isActive:t===d.screen,onClick:()=>o(d.screen,d.requiresAuth),disabled:i&&d.requiresAuth},d.screen))]})]}),f.jsx("div",{className:"text-center text-xs text-gray-400",children:f.jsx("p",{children:" 2025 Pathkin"})})]})},XK=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 48 48",...t,children:[f.jsx("path",{fill:"#FFC107",d:"M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"}),f.jsx("path",{fill:"#FF3D00",d:"m6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C16.318 4 9.656 8.337 6.306 14.691z"}),f.jsx("path",{fill:"#4CAF50",d:"m24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238A11.91 11.91 0 0 1 24 36c-5.222 0-9.618-3.66-11.303-8.591l-6.571 4.819C9.656 39.663 16.318 44 24 44z"}),f.jsx("path",{fill:"#1976D2",d:"M43.611 20.083H42V20H24v8h11.303a12.04 12.04 0 0 1-4.087 5.571l6.19 5.238C42.012 35.37 44 30.013 44 24c0-1.341-.138-2.65-.389-3.917z"})]}),eJ=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"#1877F2",...t,children:f.jsx("path",{d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.878v-6.987h-2.54V12h2.54V9.797c0-2.506 1.492-3.89 3.777-3.89 1.094 0 2.238.195 2.238.195v2.46h-1.26c-1.243 0-1.63.771-1.63 1.562V12h2.773l-.443 2.89h-2.33V21.878A10.003 10.003 0 0 0 22 12z"})}),tJ=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),f.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),nJ=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),f.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),Ik=["Afghanistan","Albania","Algeria","Andorra","Angola","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Central African Republic","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Eswatini","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","North Korea","North Macedonia","Norway","Oman","Pakistan","Palau","Palestine","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russia","Rwanda","Saint Kitts and Nevis","Saint Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Korea","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Timor-Leste","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],iJ=({onLogin:t,onSignUp:e,onSocialLogin:n,onGuestLogin:i,onForgotPassword:s})=>{const[r,o]=y.useState(!0),[a,c]=y.useState(""),[d,h]=y.useState(""),[m,g]=y.useState(""),[v,T]=y.useState(""),[w,I]=y.useState(""),[b,E]=y.useState(""),[A,R]=y.useState(""),[P,U]=y.useState(!1),[S,M]=y.useState(""),[C,k]=y.useState(!1),N=y.useRef(null),{t:V}=Be(),L="w-full px-4 py-3 rounded-lg bg-slate-100 dark:bg-dark-bg-secondary border-transparent focus:outline-none focus:ring-2 focus:ring-brand-orange focus:bg-white dark:focus:bg-zinc-900 text-gray-800 dark:text-gray-200 transition-colors",$="w-full py-3 rounded-lg font-semibold text-white transition-colors",Z="w-full flex items-center justify-center py-3 rounded-lg bg-slate-100 dark:bg-dark-bg-secondary hover:bg-slate-200 dark:hover:bg-zinc-700 transition-colors";y.useEffect(()=>{const q=X=>{N.current&&!N.current.contains(X.target)&&k(!1)};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[]);const j=y.useMemo(()=>Ik.filter(q=>q.toLowerCase().includes(S.toLowerCase())),[S]),ee=q=>{if(q.preventDefault(),r)t(m,v);else{if(!a||!d||!w||!b||!A){alert("Please fill in all fields.");return}e(a,d,m,v,w,b,A)}};return f.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-light-bg dark:bg-dark-bg p-4",children:f.jsxs("div",{className:"w-full max-w-sm mx-auto",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsx("h1",{className:"text-3xl font-bold text-brand-orange",children:V("appName")}),f.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:V(r?"welcomeBack":"joinCommunity")})]}),f.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[!r&&f.jsxs(f.Fragment,{children:[f.jsx("input",{type:"text",placeholder:V("fullName"),className:L,value:a,onChange:q=>c(q.target.value),required:!0}),f.jsx("input",{type:"text",placeholder:V("username"),className:L,value:d,onChange:q=>h(q.target.value.replace(/\s/g,"")),required:!0})]}),f.jsx("input",{type:"email",placeholder:V("emailAddress"),className:L,value:m,onChange:q=>g(q.target.value),required:!0}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:P?"text":"password",placeholder:V("password"),className:L,value:v,onChange:q=>T(q.target.value),required:!0}),f.jsx("button",{type:"button",onClick:()=>U(!P),className:"absolute inset-y-0 end-0 flex items-center px-4 text-gray-500 dark:text-gray-400","aria-label":P?"Hide password":"Show password",children:P?f.jsx(nJ,{}):f.jsx(tJ,{})})]}),!r&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"birthday",className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1 ms-1",children:V("birthday")}),f.jsx("input",{id:"birthday",type:"date",className:`${L} text-gray-500`,value:w,onChange:q=>I(q.target.value),required:!0})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"gender",className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1 ms-1",children:V("gender")}),f.jsxs("select",{id:"gender",className:`${L} text-gray-500`,value:b,onChange:q=>E(q.target.value),required:!0,children:[f.jsx("option",{value:"",disabled:!0,children:V("selectOption")}),f.jsx("option",{value:"male",children:V("male")}),f.jsx("option",{value:"female",children:V("female")}),f.jsx("option",{value:"other",children:V("other")}),f.jsx("option",{value:"prefer_not_to_say",children:V("preferNotToSay")})]})]}),f.jsxs("div",{ref:N,className:"relative",children:[f.jsx("label",{htmlFor:"country",className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1 ms-1",children:V("country")}),f.jsx("button",{type:"button",onClick:()=>k(q=>!q),className:`${L} text-left ${A?"text-gray-800 dark:text-gray-200":"text-gray-500"}`,children:A||V("selectOption")}),C&&f.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-dark-bg-secondary border dark:border-zinc-700 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[f.jsx("div",{className:"p-2",children:f.jsx("input",{type:"text",placeholder:V("searchForCountry"),className:L,value:S,onChange:q=>M(q.target.value),autoFocus:!0})}),f.jsx("ul",{className:"py-1",children:j.map(q=>f.jsx("li",{onClick:()=>{R(q),k(!1),M("")},className:"px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-zinc-700 cursor-pointer",children:q},q))})]})]})]})]}),r&&f.jsx("div",{className:"text-end -mt-2",children:f.jsx("button",{type:"button",onClick:s,className:"text-sm font-semibold text-brand-orange hover:text-brand-orange-light",children:V("forgotPassword")})}),f.jsx("button",{type:"submit",className:`${$} bg-brand-orange hover:bg-brand-orange-light`,children:V(r?"logIn":"createAccount")})]}),f.jsx("div",{className:"mt-4 text-center",children:f.jsx("button",{type:"button",onClick:()=>o(!r),className:"w-full py-3 rounded-lg font-semibold text-brand-orange bg-orange-100/50 dark:bg-orange-900/20 hover:bg-orange-100 dark:hover:bg-orange-900/40 transition-colors",children:V(r?"createNewAccount":"backToLogin")})}),f.jsxs("div",{className:"relative my-6",children:[f.jsx("div",{className:"absolute inset-0 flex items-center",children:f.jsx("div",{className:"w-full border-t border-gray-300 dark:border-zinc-700"})}),f.jsx("div",{className:"relative flex justify-center text-sm",children:f.jsx("span",{className:"px-2 bg-light-bg dark:bg-dark-bg text-gray-500 dark:text-gray-400",children:V("or")})})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("button",{onClick:()=>n("google"),className:Z,children:[f.jsx(XK,{className:"w-6 h-6 mx-3"}),f.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:V("continueWithGoogle")})]}),f.jsxs("button",{onClick:()=>n("facebook"),className:Z,children:[f.jsx(eJ,{className:"w-6 h-6 mx-3"}),f.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:V("continueWithFacebook")})]}),f.jsx("button",{onClick:i,className:`${Z} text-gray-700 dark:text-gray-300 font-semibold`,children:V("continueAsGuest")})]})]})})},sJ=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),f.jsx("polyline",{points:"16 17 21 12 16 7"}),f.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]}),rJ=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("polyline",{points:"9 18 15 12 9 6"})}),oJ=t=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:f.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),aJ=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"m5 8 6 6"}),f.jsx("path",{d:"m4 14 6-6 2-3"}),f.jsx("path",{d:"M2 5h12"}),f.jsx("path",{d:"M7 2h1"}),f.jsx("path",{d:"m22 22-5-10-5 10"}),f.jsx("path",{d:"M14 18h6"})]}),cu=({icon:t,label:e,onClick:n})=>f.jsxs("button",{onClick:n,className:"w-full flex items-center p-4 text-gray-800 dark:text-white hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors duration-200 disabled:opacity-50 disabled:hover:bg-transparent",disabled:!n,children:[f.jsx("div",{className:"text-orange-500 dark:text-orange-400 mr-4",children:t}),f.jsx("div",{className:"flex-grow text-left",children:f.jsx("span",{className:"text-base",children:e})}),f.jsx("div",{className:"text-gray-400 dark:text-gray-500",children:n&&e!=="Log Out"&&e!==" "&&f.jsx(rJ,{})})]}),lJ=({onBack:t,onNavigate:e,onLogout:n})=>{const{t:i}=Be();return f.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-neutral-950",children:[f.jsx(di,{title:i("settings"),onBack:t}),f.jsx("div",{className:"flex-grow overflow-y-auto",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-900 mx-4 mt-6 rounded-lg divide-y divide-gray-200 dark:divide-neutral-700/50 border border-gray-200 dark:border-neutral-800",children:[f.jsx(cu,{icon:f.jsx(OI,{}),label:i("editProfile"),onClick:()=>e("editProfile")}),f.jsx(cu,{icon:f.jsx(F1,{}),label:i("savedAdventures"),onClick:()=>e("savedAdventures")}),f.jsx(cu,{icon:f.jsx(oJ,{}),label:i("privacySecurity"),onClick:()=>e("privacySecurity")}),f.jsx(cu,{icon:f.jsx(aJ,{}),label:i("language"),onClick:()=>e("language")}),f.jsx(cu,{icon:f.jsx(sJ,{}),label:i("logOut"),onClick:n})]})})]})},uJ=["Hiking","Photography","Music","Tech","Art","Backpacking","Yoga","Foodie","Blogging","Culture","History","Museums","Architecture","Surfing","Skiing","Reading","Movies","Gaming"],cJ=({onBack:t,currentUser:e,onUpdateProfile:n})=>{const[i,s]=y.useState(e.name),[r,o]=y.useState(e.username),[a,c]=y.useState(e.bio),[d,h]=y.useState(e.birthday||""),[m,g]=y.useState(e.country||""),[v,T]=y.useState(e.avatarUrl),[w,I]=y.useState(e.coverUrl||""),[b,E]=y.useState(),[A,R]=y.useState(),[P,U]=y.useState(new Set(e.interests||[])),[S,M]=y.useState(""),[C,k]=y.useState(!1),N=y.useRef(null),V=y.useRef(null),L=y.useRef(null),{t:$}=Be();y.useEffect(()=>{const te=ce=>{N.current&&!N.current.contains(ce.target)&&k(!1)};return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[]);const Z=y.useMemo(()=>Ik.filter(te=>te.toLowerCase().includes(S.toLowerCase())),[S]),j=(te,ce)=>{var fe;const ne=(fe=te.target.files)==null?void 0:fe[0];if(ne){const F=new FileReader;F.onload=Re=>{var _e;const se=(_e=Re.target)==null?void 0:_e.result;ce==="avatar"?(T(se),E(ne)):(I(se),R(ne))},F.readAsDataURL(ne)}},ee=te=>{U(ce=>{const ne=new Set(ce);return ne.has(te)?ne.delete(te):ne.add(te),ne})},q=()=>{const te={name:i,username:r,bio:a,birthday:d,country:m,interests:Array.from(P)};n(te,b,A)},X="w-full p-2 border border-gray-300 dark:border-neutral-700 rounded-md bg-gray-100 dark:bg-neutral-800 text-gray-900 dark:text-gray-200 placeholder-gray-500 dark:placeholder-gray-400",ie="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1";return f.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-neutral-950",children:[f.jsx(di,{title:$("editProfile"),onBack:t}),f.jsxs("div",{className:"flex-grow overflow-y-auto p-4 space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:ie,children:"Profile Pictures"}),f.jsxs("div",{className:"relative h-32 rounded-lg bg-gray-200 dark:bg-neutral-800 border border-gray-300 dark:border-neutral-700",children:[f.jsx("img",{src:w||`https://picsum.photos/seed/${e.id}-cover/800/200`,className:"w-full h-full object-cover rounded-lg",alt:"Cover"}),f.jsx("input",{type:"file",accept:"image/*",ref:L,onChange:te=>j(te,"cover"),className:"hidden"}),f.jsx("button",{onClick:()=>{var te;return(te=L.current)==null?void 0:te.click()},className:"absolute top-2 end-2 bg-black/50 p-1 rounded-full text-white",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),f.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),f.jsx("div",{className:"absolute bottom-0 start-4 translate-y-1/2",children:f.jsxs("div",{className:"relative w-24 h-24",children:[f.jsx("img",{src:v,className:"w-full h-full rounded-full border-4 border-slate-50 dark:border-neutral-950",alt:"Avatar"}),f.jsx("input",{type:"file",accept:"image/*",ref:V,onChange:te=>j(te,"avatar"),className:"hidden"}),f.jsx("button",{onClick:()=>{var te;return(te=V.current)==null?void 0:te.click()},className:"absolute bottom-1 end-1 bg-black/50 p-1 rounded-full text-white",children:f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[f.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),f.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})]})})]})]}),f.jsxs("div",{className:"pt-12 space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"name",className:ie,children:$("fullName")}),f.jsx("input",{id:"name",type:"text",value:i,onChange:te=>s(te.target.value),className:X})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"username",className:ie,children:$("username")}),f.jsx("input",{id:"username",type:"text",value:r,onChange:te=>o(te.target.value.replace(/\s/g,"")),className:X})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"bio",className:ie,children:$("description")}),f.jsx("textarea",{id:"bio",value:a,onChange:te=>c(te.target.value),className:X,rows:3})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"birthday",className:ie,children:$("birthday")}),f.jsx("input",{id:"birthday",type:"date",value:d,onChange:te=>h(te.target.value),className:`${X} text-gray-500 dark:text-gray-400`})]}),f.jsxs("div",{ref:N,className:"relative",children:[f.jsx("label",{htmlFor:"country",className:ie,children:$("homeCountry")}),f.jsx("button",{type:"button",onClick:()=>k(te=>!te),className:`${X} text-left ${m?"text-gray-800 dark:text-gray-200":"text-gray-500"}`,children:m||$("selectOption")}),C&&f.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-neutral-800 border dark:border-neutral-700 rounded-md shadow-lg max-h-60 overflow-y-auto",children:[f.jsx("div",{className:"p-2",children:f.jsx("input",{type:"text",placeholder:$("searchForCountry"),className:X,value:S,onChange:te=>M(te.target.value),autoFocus:!0})}),f.jsx("ul",{className:"py-1",children:Z.map(te=>f.jsx("li",{onClick:()=>{g(te),k(!1),M("")},className:"px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-neutral-700 cursor-pointer",children:te},te))})]})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:ie,children:"Interests"}),f.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-white dark:bg-neutral-900 border border-gray-300 dark:border-neutral-700 rounded-md",children:uJ.map(te=>{const ce=P.has(te);return f.jsx("button",{onClick:()=>ee(te),className:`text-xs font-medium px-3 py-1.5 rounded-full transition-all duration-200 border ${ce?"bg-orange-500 border-orange-500 text-white":"bg-gray-100 dark:bg-neutral-800 border-gray-200 dark:border-neutral-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-neutral-700"}`,children:te},te)})})]})]}),f.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-neutral-800 bg-slate-50/80 dark:bg-neutral-950/80 backdrop-blur-sm",children:f.jsx("button",{onClick:q,className:"w-full bg-orange-600 text-white font-bold py-3 rounded-md hover:bg-orange-700 transition-colors",children:$("saveChanges")})})]})},dJ=({onLoginClick:t})=>{const{t:e}=Be();return f.jsxs("div",{className:"sticky top-0 z-40 bg-slate-100/90 dark:bg-neutral-900/90 backdrop-blur-sm border-b border-gray-200 dark:border-neutral-800 h-14 flex items-center justify-between w-full px-4",children:[f.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:e("guestHeader")}),f.jsx("div",{className:"flex items-center space-x-2",children:f.jsxs("button",{onClick:t,className:"text-sm px-3 py-1.5 rounded-md font-semibold bg-orange-500 text-white hover:bg-orange-600 transition-colors",children:[e("logIn")," / ",e("signUp")]})})]})},fJ=({initialChecked:t=!1,onChange:e})=>{const[n,i]=y.useState(t),s=()=>{const r=!n;i(r),e&&e(r)};return f.jsx("button",{onClick:s,className:`relative inline-flex items-center h-7 w-12 rounded-full transition-colors duration-300 ease-in-out focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-neutral-800 focus:ring-orange-500 ${n?"bg-orange-500":"bg-gray-600"}`,role:"switch","aria-checked":n,children:f.jsx("span",{className:`inline-block w-5 h-5 transform bg-white rounded-full transition-transform duration-300 ease-in-out ${n?"translate-x-6":"translate-x-1"}`})})},hJ=({onBack:t,currentUser:e,onUpdateProfile:n})=>{const[i,s]=y.useState(e.isPrivate),[r,o]=y.useState(e.privacySettings),{t:a}=Be(),c=(m,g)=>{o(v=>({...v,[m]:g}))},d=()=>{n({isPrivate:i,privacySettings:r})},h=({label:m,description:g,checked:v,onChange:T})=>f.jsxs("div",{className:"flex items-center justify-between p-4",children:[f.jsxs("div",{className:"flex-grow text-left pe-4",children:[f.jsx("span",{className:"text-base text-gray-800 dark:text-white",children:m}),f.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:g})]}),f.jsx(fJ,{initialChecked:v,onChange:T})]});return f.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-neutral-950",children:[f.jsx(di,{title:a("privacySecurity"),onBack:t}),f.jsxs("div",{className:"flex-grow overflow-y-auto",children:[f.jsx("div",{className:"px-4 pt-6 pb-2",children:f.jsx("h2",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400",children:a("accountPrivacy")})}),f.jsx("div",{className:"bg-white dark:bg-neutral-900 mx-4 rounded-lg border border-gray-200 dark:border-neutral-800",children:f.jsx(h,{label:a("privateAccount"),description:a("privateAccountDescription"),checked:i,onChange:s})}),f.jsx("div",{className:"px-4 pt-6 pb-2",children:f.jsx("h2",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400",children:a("profileVisibility")})}),f.jsxs("div",{className:"bg-white dark:bg-neutral-900 mx-4 rounded-lg divide-y divide-gray-200 dark:divide-neutral-700/50 border border-gray-200 dark:border-neutral-800",children:[f.jsx(h,{label:a("showFollowLists"),description:a("showFollowListsDescription"),checked:r.showFollowLists,onChange:m=>c("showFollowLists",m)}),f.jsx(h,{label:a("showStats"),description:a("showStatsDescription"),checked:r.showStats,onChange:m=>c("showStats",m)}),f.jsx(h,{label:a("showCompletedActivities"),description:a("showCompletedActivitiesDescription"),checked:r.showCompletedActivities,onChange:m=>c("showCompletedActivities",m)}),f.jsx(h,{label:a("appearInTwinSearch"),description:a("appearInTwinSearchDescription"),checked:r.allowTwinSearch,onChange:m=>c("allowTwinSearch",m)})]})]}),f.jsx("div",{className:"p-4 border-t border-gray-200 dark:border-neutral-800 bg-slate-50/80 dark:bg-neutral-950/80 backdrop-blur-sm",children:f.jsx("button",{onClick:d,className:"w-full bg-orange-600 text-white font-bold py-3 rounded-md hover:bg-orange-700 transition-colors",children:a("saveChanges")})})]})},Mw=[{code:"en",name:"english"},{code:"ar",name:"arabic"}],pJ=({onBack:t})=>{const{t:e,language:n,setLanguage:i}=Be();return f.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-neutral-950",children:[f.jsx(di,{title:e("language"),onBack:t}),f.jsx("div",{className:"flex-grow overflow-y-auto",children:f.jsx("div",{className:"bg-white dark:bg-neutral-900 mx-4 mt-6 rounded-lg border border-gray-200 dark:border-neutral-800",children:Mw.map((s,r)=>f.jsxs(Sh.Fragment,{children:[f.jsxs("button",{onClick:()=>i(s.code),className:"w-full flex items-center justify-between p-4 text-gray-800 dark:text-white hover:bg-gray-100 dark:hover:bg-neutral-800 transition-colors duration-200",children:[f.jsx("span",{children:e(s.name)}),n===s.code&&f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-orange-500 dark:text-orange-400",children:f.jsx("polyline",{points:"20 6 9 17 4 12"})})]}),r<Mw.length-1&&f.jsx("div",{className:"border-t border-gray-200 dark:border-neutral-700/50"})]},s.code))})})]})},mJ=({isOpen:t,onClose:e,onSubmit:n})=>{const[i,s]=y.useState(""),[r,o]=y.useState(!1),{t:a}=Be(),c=h=>{h.preventDefault(),i&&(n(i),o(!0))},d=()=>{e(),setTimeout(()=>{s(""),o(!1)},300)};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[101] flex justify-center items-center p-4 animate-fade-in",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-sm flex flex-col p-6 text-center relative",children:[f.jsx("button",{onClick:d,className:"absolute top-2 end-2 p-2 text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white text-2xl font-bold",children:""}),r?f.jsxs(f.Fragment,{children:[f.jsx(ll,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),f.jsx("h2",{className:"text-xl font-bold dark:text-white mb-2",children:a("passwordResetSentTitle")}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("passwordResetSent")})]}):f.jsxs(f.Fragment,{children:[f.jsx("h2",{className:"text-xl font-bold dark:text-white mb-2",children:a("resetPassword")}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:a("resetPasswordPrompt")}),f.jsxs("form",{onSubmit:c,className:"space-y-4",children:[f.jsx("input",{type:"email",placeholder:a("emailAddress"),value:i,onChange:h=>s(h.target.value),className:"w-full px-4 py-3 rounded-md bg-gray-100 dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 focus:outline-none focus:ring-2 focus:ring-orange-500 text-gray-800 dark:text-gray-200",required:!0}),f.jsxs("button",{type:"submit",className:"w-full py-3 rounded-md font-semibold text-white transition-colors bg-orange-600 hover:bg-orange-700 flex items-center justify-center space-x-2",children:[f.jsx($v,{className:"w-5 h-5"}),f.jsx("span",{children:a("sendResetLink")})]})]})]})]})}):null},gJ=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),f.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),yJ=t=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...t,children:[f.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),f.jsx("polyline",{points:"17 8 12 3 7 8"}),f.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),vJ=({isOpen:t,onClose:e,onStoryCreate:n})=>{const{t:i}=Be(),[s,r]=y.useState("options"),o=y.useRef(null),a=y.useRef(null),c=y.useRef(null),d=y.useRef(null),h=I=>{var E;const b=(E=I.target.files)==null?void 0:E[0];b&&(n(b),e())},m=async()=>{try{const I=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});d.current=I,a.current&&(a.current.srcObject=I),r("camera")}catch(I){console.error("Error accessing camera: ",I),alert("Could not access the camera. Please check permissions.")}},g=()=>{d.current&&(d.current.getTracks().forEach(I=>I.stop()),d.current=null)},v=()=>{if(a.current&&c.current){const I=a.current,b=c.current;b.width=I.videoWidth,b.height=I.videoHeight;const E=b.getContext("2d");E&&(E.drawImage(I,0,0,I.videoWidth,I.videoHeight),b.toBlob(A=>{if(A){const R=new File([A],"story_capture.jpg",{type:"image/jpeg"});n(R),e()}},"image/jpeg"))}};y.useEffect(()=>()=>{g()},[]);const T=()=>{g(),r("options"),e()},w=()=>{g(),r("options")};return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 z-[101] flex justify-center items-center p-4 animate-fade-in",children:f.jsxs("div",{className:"bg-neutral-900 rounded-lg shadow-xl w-full max-w-sm flex flex-col relative",children:[f.jsx("button",{onClick:T,className:"absolute top-2 end-2 p-2 text-gray-400 hover:text-white text-2xl font-bold z-20",children:""}),s==="options"&&f.jsxs("div",{className:"p-8 space-y-4",children:[f.jsx("h2",{className:"text-xl font-bold text-white mb-6 text-center",children:i("addStory")}),f.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center p-4 bg-neutral-800 hover:bg-neutral-700 rounded-lg text-white font-semibold transition-colors",children:[f.jsx(gJ,{className:"w-6 h-6 me-3"}),f.jsx("span",{children:i("takePhoto")})]}),f.jsx("input",{type:"file",accept:"image/*,video/*",ref:o,onChange:h,className:"hidden"}),f.jsxs("button",{onClick:()=>{var I;return(I=o.current)==null?void 0:I.click()},className:"w-full flex items-center justify-center p-4 bg-neutral-800 hover:bg-neutral-700 rounded-lg text-white font-semibold transition-colors",children:[f.jsx(yJ,{className:"w-6 h-6 me-3"}),f.jsx("span",{children:i("uploadFromDevice")})]})]}),s==="camera"&&f.jsxs("div",{className:"w-full aspect-[9/16] relative bg-black rounded-lg overflow-hidden",children:[f.jsx("button",{onClick:w,className:"absolute top-2 left-2 p-2 text-white z-20",children:f.jsx(B1,{})}),f.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover"}),f.jsx("canvas",{ref:c,className:"hidden"}),f.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center",children:f.jsx("button",{onClick:v,className:"w-16 h-16 rounded-full bg-white border-4 border-neutral-500","aria-label":i("capture")})})]})]})}):null},Bd=({label:t,value:e,onValueChange:n,onCoordsChange:i,onOpenMap:s,isLoaded:r})=>{const{t:o}=Be(),a=y.useRef(null),c=y.useCallback(g=>{a.current=g},[]),d=()=>{var v,T;const g=(v=a.current)==null?void 0:v.getPlaces();if(g&&g.length>0){const w=g[0],I=w.formatted_address||w.name||"";n(I),(T=w.geometry)!=null&&T.location&&i({lat:w.geometry.location.lat(),lng:w.geometry.location.lng()})}},[h,m]=y.useState(e);return y.useEffect(()=>{m(e)},[e]),f.jsxs("div",{children:[f.jsx("label",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400",children:t}),f.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[f.jsx("div",{className:"relative flex-grow",children:r?f.jsx(Kh,{onLoad:c,onPlacesChanged:d,children:f.jsx("input",{type:"text",placeholder:o("searchForLocation"),value:h,onChange:g=>{m(g.target.value),n(g.target.value)},className:"w-full text-left p-2 border border-gray-200 dark:border-zinc-700 rounded-lg bg-slate-50 dark:bg-zinc-800"})}):f.jsx("input",{type:"text",value:o("loading"),className:"w-full p-2 border rounded-lg bg-slate-200",disabled:!0})}),f.jsx("button",{onClick:s,className:"p-2.5 bg-gray-200 dark:bg-zinc-700 rounded-lg","aria-label":o("selectOnMap"),children:f.jsx(Gv,{className:"w-5 h-5"})})]})]})},_J=({adventure:t,onBack:e,onUpdateAdventure:n,isLoaded:i})=>{var Pe;const{t:s}=Be(),[r,o]=y.useState(t.type),[a,c]=y.useState(t.privacy),[d,h]=y.useState(t.subPrivacy||At.Public),[m,g]=y.useState(t.title),[v,T]=y.useState(t.description),[w,I]=y.useState(t.location),[b,E]=y.useState(t.coordinates||null),[A,R]=y.useState(t.startDate.split("T")[0]),[P,U]=y.useState(((Pe=t.endDate)==null?void 0:Pe.split("T")[0])||""),[S,M]=y.useState(t.budget.toString()),[C,k]=y.useState(t.eventCategory||""),[N,V]=y.useState(""),[L,$]=y.useState(t.destinations||[]),[Z,j]=y.useState(t.endLocation||""),[ee,q]=y.useState(t.endCoordinates||null),[X,ie]=y.useState(!1),[te,ce]=y.useState("point"),[ne,fe]=y.useState("location");y.useEffect(()=>{t.eventCategory&&!["Music","Art","Food","Sports","Tech","Community"].includes(t.eventCategory)&&(k("Other"),V(t.eventCategory))},[t.eventCategory]);const F=()=>{const ye={type:r,privacy:a,title:m,description:v,location:w,coordinates:b||null,startDate:A,budget:parseInt(S,10)||0,endDate:P||null};switch(a===At.Twins?ye.subPrivacy=d:ye.subPrivacy=null,ye.destinations=null,ye.eventCategory=null,ye.endLocation=null,ye.endCoordinates=null,r){case ue.Travel:ye.destinations=L.filter(Je=>Je.location);break;case ue.Event:ye.eventCategory=C==="Other"?N:C;break;case ue.Hiking:case ue.Cycling:ye.endLocation=Z||null,ye.endCoordinates=ee||null;break}n(t.id,ye)},Re=(ye,Je="point")=>{fe(ye),ce(Je),ie(!0)},se=(ye,Je)=>{if(ne==="location")I(ye),E(Je);else if(ne==="startPoint")I(ye),E(Je);else if(ne==="endPoint")j(ye),q(Je);else if(ne.startsWith("destination_")){const Rt=parseInt(ne.split("_")[1],10),Le=[...L];Le[Rt]={location:ye,coordinates:Je},$(Le)}ie(!1)},_e=(ye,Je)=>{I(ye.address),E(ye.coords),j(Je.address),q(Je.coords),ie(!1)},Ue=()=>$([...L,{location:"",coordinates:{lat:0,lng:0}}]),pe=Object.values(ue),Ee="w-full p-2 border border-gray-200 dark:border-zinc-700 rounded-lg bg-slate-50 dark:bg-zinc-800 focus:ring-brand-orange focus:border-brand-orange",he="block text-sm font-semibold text-gray-600 dark:text-gray-400 mb-1",pt="px-2 py-1 rounded-full text-xs font-semibold",Vt=()=>{switch(r){case ue.Travel:return f.jsxs("div",{className:"space-y-4",children:[f.jsx(Bd,{label:s("fromLocation"),value:w,onValueChange:I,onCoordsChange:E,onOpenMap:()=>Re("startPoint"),isLoaded:i}),L.map((ye,Je)=>f.jsx("div",{children:f.jsx(Bd,{label:`${s("yourDestination")} #${Je+1}`,value:ye.location,onValueChange:Rt=>{const Le=[...L];Le[Je].location=Rt,$(Le)},onCoordsChange:Rt=>{const Le=[...L];Le[Je].coordinates=Rt,$(Le)},onOpenMap:()=>Re(`destination_${Je}`),isLoaded:i})},Je)),f.jsx("button",{onClick:Ue,className:"text-sm font-semibold text-brand-orange hover:text-brand-orange-light",children:s("addDestination")})]});case ue.Hiking:case ue.Cycling:return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"p-4 bg-slate-50 dark:bg-zinc-800 rounded-lg",children:[f.jsxs("p",{className:"font-semibold",children:[s("startPoint"),": ",f.jsx("span",{className:"font-normal text-gray-600 dark:text-gray-300",children:w||"Not set"})]}),f.jsxs("p",{className:"font-semibold",children:[s("endPoint"),": ",f.jsx("span",{className:"font-normal text-gray-600 dark:text-gray-300",children:Z||"Not set"})]})]}),f.jsx("button",{onClick:()=>Re("route","route"),className:"w-full text-center p-2 border border-dashed border-gray-400 dark:border-zinc-600 rounded-lg bg-transparent hover:bg-slate-50 dark:hover:bg-zinc-800",children:s("drawRouteOnMap")})]});case ue.Event:return f.jsxs("div",{className:"space-y-4",children:[f.jsx(Bd,{label:s("location"),value:w,onValueChange:I,onCoordsChange:E,onOpenMap:()=>Re("location"),isLoaded:i}),f.jsxs("div",{children:[f.jsx("label",{className:he,children:s("eventCategory")}),f.jsxs("select",{value:C,onChange:ye=>k(ye.target.value),className:`${Ee} mt-2`,children:[f.jsx("option",{value:"",children:s("selectCategory")}),f.jsx("option",{value:"Music",children:s("categoryMusic")}),f.jsx("option",{value:"Art",children:s("categoryArt")}),f.jsx("option",{value:"Food",children:s("categoryFood")}),f.jsx("option",{value:"Sports",children:s("categorySports")}),f.jsx("option",{value:"Tech",children:s("categoryTech")}),f.jsx("option",{value:"Community",children:s("categoryCommunity")}),f.jsx("option",{value:"Other",children:s("categoryOther")})]})]}),C==="Other"&&f.jsxs("div",{children:[f.jsx("label",{className:he,children:s("otherCategory")}),f.jsx("input",{type:"text",value:N,onChange:ye=>V(ye.target.value),className:`${Ee} mt-2`})]})]});default:return f.jsx(Bd,{label:s("location"),value:w,onValueChange:I,onCoordsChange:E,onOpenMap:()=>Re("location"),isLoaded:i})}};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-neutral-950",children:[f.jsx(di,{title:s("editAdventure"),onBack:e}),f.jsxs("div",{className:"flex-grow overflow-y-auto p-4 space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:he,children:s("title")}),f.jsx("input",{type:"text",value:m,onChange:ye=>g(ye.target.value),className:Ee})]}),f.jsxs("div",{children:[f.jsx("label",{className:he,children:s("description")}),f.jsx("textarea",{value:v,onChange:ye=>T(ye.target.value),rows:4,className:Ee})]}),f.jsxs("div",{children:[f.jsx("label",{className:he,children:s("adventureType")}),f.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:pe.map(ye=>f.jsx("button",{onClick:()=>o(ye),className:`${pt} ${r===ye?"bg-brand-orange text-white":"bg-slate-200 dark:bg-zinc-700 text-gray-700 dark:text-gray-300"}`,children:s(`AdventureType_${ye}`)},ye))})]}),Vt(),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:he,children:s("startDate")}),f.jsx("input",{type:"date",value:A,onChange:ye=>R(ye.target.value),className:`${Ee} text-gray-500`})]}),f.jsxs("div",{children:[f.jsx("label",{className:he,children:s("endDate")}),f.jsx("input",{type:"date",value:P,onChange:ye=>U(ye.target.value),className:`${Ee} text-gray-500`})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:he,children:s("budget")}),f.jsx("input",{type:"number",value:S,onChange:ye=>M(ye.target.value),className:Ee})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:he,children:s("privacy")}),f.jsxs("select",{value:a,onChange:ye=>c(ye.target.value),className:Ee,children:[f.jsx("option",{value:At.Public,children:s("AdventurePrivacy_Public")}),f.jsx("option",{value:At.Followers,children:s("AdventurePrivacy_Followers")}),f.jsx("option",{value:At.Twins,children:s("AdventurePrivacy_Twins")})]})]}),a===At.Twins&&f.jsxs("div",{children:[f.jsx("label",{className:he,children:s("subPrivacyLabel")}),f.jsxs("select",{value:d,onChange:ye=>h(ye.target.value),className:Ee,children:[f.jsx("option",{value:At.Public,children:s("AdventurePrivacy_Public")}),f.jsx("option",{value:At.Followers,children:s("AdventurePrivacy_Followers")})]})]})]})]}),f.jsx("div",{className:"p-4 border-t dark:border-neutral-800 bg-slate-50/80 dark:bg-neutral-950/80 backdrop-blur-sm",children:f.jsx("button",{onClick:F,className:"w-full bg-orange-600 text-white font-bold py-3 rounded-md hover:bg-orange-700 transition-colors",children:s("saveChanges")})})]}),i&&f.jsx(s1,{isOpen:X,onClose:()=>ie(!1),onLocationSelect:se,onRouteSelect:_e,mode:te})]})},TJ=({onBack:t,adventures:e,currentUser:n,onSelectAdventure:i,onSendMessage:s,onToggleInterest:r,onViewProfile:o,onRepostToggle:a,onSaveToggle:c,onShareAdventure:d,onToggleCompleted:h,onViewLocationOnMap:m,onDeleteAdventure:g,onEditAdventure:v,onJoinGroupChat:T})=>{const{t:w}=Be();return f.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-neutral-950",children:[f.jsx(di,{title:w("savedAdventures"),onBack:t}),f.jsx("div",{className:"flex-grow overflow-y-auto p-2",children:e.length>0?e.map(I=>f.jsx(wl,{adventure:I,currentUser:n,isGuest:!1,onCommentClick:i,onMessageClick:s,onInterestToggle:r,onViewProfile:o,onRepostToggle:a,onSaveToggle:c,onShareAdventure:d,onToggleCompleted:h,onViewLocationOnMap:m,onDeleteAdventure:g,onEditAdventure:v,onJoinGroupChat:T},I.id)):f.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:w("noSavedAdventures")})})]})},EJ=({type:t})=>{const e="w-5 h-5";switch(t){case ar.Interest:return f.jsx("div",{className:"bg-rose-100 dark:bg-rose-500/20 p-2 rounded-full",children:f.jsx($h,{className:`${e} text-rose-500`})});case ar.Comment:return f.jsx("div",{className:"bg-sky-100 dark:bg-sky-500/20 p-2 rounded-full",children:f.jsx(VI,{className:`${e} text-sky-500`})});case ar.Message:return f.jsx("div",{className:"bg-orange-100 dark:bg-orange-500/20 p-2 rounded-full",children:f.jsx(Hh,{className:`${e} text-orange-500`})});case ar.AttendanceRequest:return f.jsx("div",{className:"bg-amber-100 dark:bg-amber-500/20 p-2 rounded-full",children:f.jsx(ll,{className:`${e} text-amber-500`})});case ar.AttendanceConfirmed:return f.jsx("div",{className:"bg-green-100 dark:bg-green-500/20 p-2 rounded-full",children:f.jsx(ll,{className:`${e} text-green-500`})});case ar.RateExperience:return f.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-500/20 p-2 rounded-full",children:f.jsx(Rc,{className:`${e} text-yellow-400`})});default:return null}},xJ=({notifications:t,onBack:e,onConfirmAttendance:n,onNotificationClick:i,onMarkAllAsRead:s})=>{const{t:r}=Be();y.useEffect(()=>{s()},[s]);const o=y.useMemo(()=>{const m={today:[],yesterday:[],thisWeek:[],older:[]},g=new Date,v=new Date(g.getFullYear(),g.getMonth(),g.getDate()),T=new Date(g.getFullYear(),g.getMonth(),g.getDate()-1),w=new Date(g.setDate(g.getDate()-g.getDay()));return t.forEach(I=>{const b=new Date(I.createdAt);b>=v?m.today.push(I):b>=T?m.yesterday.push(I):b>=w?m.thisWeek.push(I):m.older.push(I)}),m},[t]),a=t.some(m=>!m.read),c=f.jsx("button",{onClick:s,disabled:!a,className:"text-sm font-semibold text-orange-600 dark:text-orange-400 disabled:text-gray-400 dark:disabled:text-gray-600 transition-colors",children:r("notifications.markAllAsRead")}),d=({title:m,items:g})=>g.length===0?null:f.jsxs("div",{className:"px-2",children:[f.jsx("h2",{className:"px-2 py-2 text-sm font-semibold text-gray-500 dark:text-gray-400",children:m}),f.jsx("div",{className:"bg-light-bg-secondary/70 dark:bg-dark-bg-secondary/70 backdrop-blur-sm rounded-2xl overflow-hidden",children:g.map((v,T)=>f.jsx("div",{className:`${T>0?"border-t border-slate-200/50 dark:border-zinc-800/50":""}`,children:f.jsx(h,{notif:v})},v.id))})]}),h=({notif:m})=>{var g,v,T;return f.jsxs("button",{onClick:()=>i(m),className:"w-full text-left p-4 flex items-start space-x-4 hover:bg-slate-100/50 dark:hover:bg-zinc-800/50 transition-colors",children:[!m.read&&f.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-2.5 flex-shrink-0"}),f.jsx("div",{className:`flex-shrink-0 ${m.read?"ms-2":""}`,children:f.jsx(EJ,{type:m.type})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsx("img",{src:m.user.avatarUrl,alt:m.user.name,className:"w-8 h-8 rounded-full inline-block me-2"}),f.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300 inline",children:[f.jsx("span",{className:"font-semibold dark:text-gray-100",children:m.user.name})," ",m.text]})]}),((T=(v=(g=m.adventure)==null?void 0:g.media)==null?void 0:v[0])==null?void 0:T.url)&&f.jsx("img",{src:m.adventure.media[0].url,className:"w-12 h-12 rounded-md object-cover ms-2 flex-shrink-0"})]}),f.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:new Date(m.createdAt).toLocaleString()}),m.type===ar.AttendanceRequest&&m.adventureId&&m.attendeeId&&f.jsxs("div",{className:"mt-3 flex items-center space-x-2",children:[f.jsx("button",{onClick:w=>{w.stopPropagation(),n(m.id,m.adventureId,m.attendeeId,!0)},className:"text-xs bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300 px-3 py-1.5 rounded-full hover:bg-green-200 font-semibold",children:r("confirm")}),f.jsx("button",{onClick:w=>{w.stopPropagation(),n(m.id,m.adventureId,m.attendeeId,!1)},className:"text-xs bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300 px-3 py-1.5 rounded-full hover:bg-red-200 font-semibold",children:r("deny")})]})]})]})};return f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsx(di,{title:r("notifications"),onBack:e,rightAction:c}),f.jsx("div",{className:"flex-grow overflow-y-auto",children:t.length===0?f.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:r("noNewNotifications")}):f.jsxs("div",{className:"space-y-4 py-2",children:[f.jsx(d,{title:r("notifications.today"),items:o.today}),f.jsx(d,{title:r("notifications.yesterday"),items:o.yesterday}),f.jsx(d,{title:r("notifications.thisWeek"),items:o.thisWeek}),f.jsx(d,{title:r("notifications.older"),items:o.older})]})})]})},CJ=({adventure:t,onClose:e,onConfirm:n})=>{const{t:i}=Be(),s=()=>{n(t)};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 z-[101] flex justify-center items-center p-4 animate-fade-in",children:f.jsxs("div",{className:"bg-white dark:bg-neutral-900 rounded-lg shadow-xl w-full max-w-sm flex flex-col p-6 text-center",children:[f.jsx("h2",{className:"text-xl font-bold dark:text-white mb-2",children:i("joinGroupChatConfirmationTitle")}),f.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:i("joinGroupChatConfirmationMessage")}),f.jsxs("div",{className:"flex items-center space-x-2",children:[f.jsx("button",{onClick:e,className:"flex-1 bg-gray-200 dark:bg-neutral-700 text-gray-800 dark:text-gray-200 py-2.5 rounded-md hover:bg-gray-300 dark:hover:bg-neutral-600 font-semibold",children:i("cancel")}),f.jsx("button",{onClick:s,className:"flex-1 bg-orange-600 text-white py-2.5 rounded-md hover:bg-orange-700 font-semibold",children:i("confirm")})]})]})})},SJ=({onBack:t,user:e,type:n,allAdventures:i,currentUser:s,isGuest:r,onSelectAdventure:o,onSendMessage:a,onToggleInterest:c,onViewProfile:d,onRepostToggle:h,onSaveToggle:m,onShareAdventure:g,onToggleCompleted:v,onViewLocationOnMap:T,onDeleteAdventure:w,onEditAdventure:I,onJoinGroupChat:b})=>{const{t:E}=Be(),A=y.useMemo(()=>{const P=new Set((e.activityLog||[]).filter(U=>U.status===Wi.Confirmed).map(U=>U.adventureId));return i.filter(U=>U.type===n&&P.has(U.id))},[e,n,i]),R=E("completedAdventuresTitle",{type:E(`AdventureType_${n}`)});return f.jsxs("div",{className:"h-full flex flex-col bg-slate-50 dark:bg-neutral-950",children:[f.jsx(di,{title:R,onBack:t}),f.jsx("div",{className:"flex-grow overflow-y-auto p-2",children:A.length>0?A.map(P=>f.jsx(wl,{adventure:P,currentUser:s,isGuest:r,onCommentClick:o,onMessageClick:a,onInterestToggle:c,onViewProfile:d,onRepostToggle:h,onSaveToggle:m,onShareAdventure:g,onToggleCompleted:v,onViewLocationOnMap:T,onDeleteAdventure:w,onEditAdventure:I,onJoinGroupChat:b},P.id)):f.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-10",children:E("noAdventuresInSection")})})]})},mo={id:"guest",name:"Guest",username:"guest",email:"",avatarUrl:"https://picsum.photos/seed/guest/200",coverUrl:"https://picsum.photos/seed/guest-cover/800/200",bio:"A guest exploring Pathkin.",interests:[],followers:[],following:[],repostedAdventures:[],savedAdventures:[],activityLog:[],isPrivate:!1,privacySettings:{showFollowLists:!0,showStats:!0,showCompletedActivities:!0,allowTwinSearch:!1}},ca=t=>t&&typeof t.toDate=="function"?t.toDate().toISOString():typeof t=="string"?t:new Date().toISOString(),wJ=()=>{const[t,e]=y.useState(!1),[n,i]=y.useState(null),[s,r]=y.useState(!1),[o,a]=y.useState("adventures"),[c,d]=y.useState(["adventures"]),[h,m]=y.useState([]),[g,v]=y.useState([]),[T,w]=y.useState([]),[I,b]=y.useState([]),[E,A]=y.useState([]),[R,P]=y.useState([]),[U,S]=y.useState(null),[M,C]=y.useState(null),[k,N]=y.useState(null),[V,L]=y.useState(null),[$,Z]=y.useState(null),[j,ee]=y.useState(null),[q,X]=y.useState(null),[ie,te]=y.useState(null),[ce,ne]=y.useState(null),[fe,F]=y.useState({isOpen:!1,user:null,listType:null}),[Re,se]=y.useState(!1),[_e,Ue]=y.useState(!1),[pe,Ee]=y.useState(null),[he,pt]=y.useState(()=>JSON.parse(localStorage.getItem("viewedStoryTimestamps")||"{}")),[Vt,Pe]=y.useState("adventures"),[ye,Je]=y.useState("adventures"),Rt=y.useRef(null),Le=y.useRef(null),{t:Q}=Be(),We=y.useMemo(()=>["places"],[]),{isLoaded:En,loadError:xn}=SD({id:"google-map-script",googleMapsApiKey:"",libraries:We});y.useEffect(()=>{xn&&(console.error("Google Maps script loading error:",xn),ee(Q("mapLoadError")))},[xn,Q]),y.useEffect(()=>{const O=iq(ho,async H=>{if(H){const Y=gt(Ae,"users",H.uid),re=await Pm(Y);re.exists()?(i({id:re.id,...re.data()}),r(!1)):(console.error("User document not found in Firestore for UID:",H.uid),await lS(ho))}else i(null),r(!1);e(!0)});return()=>O()},[]),y.useEffect(()=>{const O=vs(Xt(Ae,"users")),H=sr(O,Se=>{const mt=Se.docs.map(ct=>({id:ct.id,...ct.data()}));v(mt)},Se=>console.error("Error fetching users:",Se)),Y=vs(Xt(Ae,"posts"),_a("createdAt","desc")),re=sr(Y,Se=>{const mt=Se.docs.map(ct=>{const rn=ct.data();return{...rn,id:ct.id,createdAt:ca(rn.createdAt)}});m(mt)},Se=>console.error("Error fetching adventures:",Se)),de=vs(Xt(Ae,"stories"),_a("createdAt","desc")),me=sr(de,Se=>{const mt=new Date(Date.now()-864e5),ct=Se.docs.map(rn=>{const Ys=rn.data();return{...Ys,id:rn.id,createdAt:ca(Ys.createdAt)}}).filter(rn=>new Date(rn.createdAt)>mt);w(ct)},Se=>console.error("Error fetching stories:",Se));return()=>{H(),re(),me()}},[]),y.useEffect(()=>{if(!(n!=null&&n.id)){b([]),A([]);return}const O=gt(Ae,"users",n.id),H=sr(O,Se=>{Se.exists()&&i({id:Se.id,...Se.data()})}),Y=vs(Xt(Ae,"notifications"),Ld("recipientId","==",n.id),_a("createdAt","desc")),re=sr(Y,Se=>{b(Se.docs.map(mt=>{const ct=mt.data();return{...ct,id:mt.id,createdAt:ca(ct.createdAt)}}))}),de=vs(Xt(Ae,"conversations"),Ld("participants","array-contains",n.id),_a("updatedAt","desc")),me=sr(de,Se=>{A(Se.docs.map(mt=>{const ct=mt.data();return{...ct,id:mt.id,updatedAt:ca(ct.updatedAt),lastMessage:ct.lastMessage?{...ct.lastMessage,createdAt:ca(ct.lastMessage.createdAt)}:void 0,unreadCount:ct.unreadCount||{}}}))});return()=>{H(),re(),me()}},[n==null?void 0:n.id]),y.useEffect(()=>{if(Le.current&&Le.current(),!U){P([]);return}const O=vs(Xt(Ae,"posts",U.id,"comments"),_a("createdAt","asc"));return Le.current=sr(O,H=>{P(H.docs.map(Y=>({...Y.data(),id:Y.id,createdAt:ca(Y.data().createdAt)})))}),()=>{Le.current&&Le.current()}},[U]),y.useEffect(()=>{(async()=>{if(!n||!h.length)return;const H=new Date,Y=new Set((n.activityLog||[]).map(de=>de.adventureId)),re=h.filter(de=>{if(de.authorId!==n.id||Y.has(de.id))return!1;const me=de.endDate?new Date(de.endDate):new Date(de.startDate);return me.setDate(me.getDate()+1),H>me});if(re.length>0)try{const de=gt(Ae,"users",n.id),me=re.map(Se=>({adventureId:Se.id,status:Wi.Confirmed}));await zi(de,{activityLog:nr(...me)})}catch(de){console.error("Error auto-completing adventures:",de)}})()},[n,h]);const ae=y.useMemo(()=>h.map(O=>({...O,author:g.find(H=>H.id===O.authorId)||mo})).filter(O=>!!O.author),[h,g]),qe=y.useMemo(()=>($||h).map(H=>({...H,author:g.find(Y=>Y.id===H.authorId)||mo})).filter(H=>!!H.author),[$,h,g]),Ut=y.useMemo(()=>T.map(O=>({...O,author:g.find(H=>H.id===O.authorId)})).filter(O=>O.author),[T,g]),vt=y.useMemo(()=>n?E.map(Y=>{const re=Y.type||(Y.adventureId?"group":"private");if(re==="group")return{...Y,type:"group"};if(re==="private"){const de=Y.participants.find(Se=>Se!==n.id);if(!de)return null;const me=g.find(Se=>Se.id===de);return me?{...Y,type:"private",participant:me}:null}return null}).filter(Y=>Y!==null):[],[E,g,n]),Ui=y.useMemo(()=>I.map(O=>{const H=g.find(re=>re.id===O.userId),Y=ae.find(re=>re.id===O.adventureId);return{...O,user:H,adventure:Y}}).filter(O=>O.user),[I,g,ae]),$s=y.useMemo(()=>R.map(O=>({...O,author:g.find(H=>H.id===O.authorId)})).filter(O=>O.author),[R,g]),io=y.useMemo(()=>I.some(O=>!O.read),[I]),jt=O=>{var H,Y;o===O?(H=Rt.current)==null||H.scrollTo(0,0):(d(re=>[...re,O]),a(O),(Y=Rt.current)==null||Y.scrollTo(0,0))},zt=()=>{var H;if(c.length<=1)return;const O=c.slice(0,-1);a(O[O.length-1]),d(O),(H=Rt.current)==null||H.scrollTo(0,0)},it=O=>{var H,Y;O==="profile"&&Pe("adventures"),O==="userProfile"&&Je("adventures"),o===O?(H=Rt.current)==null||H.scrollTo(0,0):(d([O]),a(O),(Y=Rt.current)==null||Y.scrollTo(0,0))},st=O=>{ee(O)},Vn=()=>{st(Q("guestToastMessage"))},fi=async(O,H)=>{try{await eq(ho,O,H),it("adventures")}catch(Y){console.error(Y),st(Q("invalidCredentials"))}},as=async(O,H,Y,re,de,me,Se)=>{try{const mt=vs(Xt(Ae,"users"),Ld("username","==",H));if(!(await vw(mt)).empty){st(Q("usernameExistsError"));return}const rn=await X8(ho,Y,re),Ys={id:rn.user.uid,name:O,username:H,email:Y,followers:[],following:[],repostedAdventures:[],savedAdventures:[],activityLog:[],bio:"",interests:[],avatarUrl:`https://picsum.photos/seed/${rn.user.uid}/200`,coverUrl:`https://picsum.photos/seed/${rn.user.uid}-cover/800/200`,birthday:de,gender:me,country:Se,isPrivate:!1,privacySettings:{showFollowLists:!0,showStats:!0,showCompletedActivities:!0,allowTwinSearch:!0}};await Vm(gt(Ae,"users",rn.user.uid),Ys),it("adventures")}catch(mt){console.error(mt),mt.code==="auth/email-already-in-use"&&st(Q("emailExistsError"))}},ls=async O=>{var H;if(O==="google"){const Y=new Es;try{const de=(await Cq(ho,Y)).user,me=gt(Ae,"users",de.uid);if(!(await Pm(me)).exists()){const mt={id:de.uid,name:de.displayName||"New User",username:((H=de.email)==null?void 0:H.split("@")[0])||`user${Date.now()}`,email:de.email||"",followers:[],following:[],repostedAdventures:[],savedAdventures:[],activityLog:[],bio:"",interests:[],avatarUrl:de.photoURL||`https://picsum.photos/seed/${de.uid}/200`,isPrivate:!1,privacySettings:{showFollowLists:!0,showStats:!0,showCompletedActivities:!0,allowTwinSearch:!0}};await Vm(me,mt)}it("adventures")}catch(re){console.error("Social login error:",re),re.code==="auth/popup-closed-by-user"?st("Login cancelled or failed. Please check your connection and try again."):re.code==="auth/account-exists-with-different-credential"?st("An account with this email already exists using a different sign-in method."):st("An error occurred during Google sign-in.")}}},us=()=>{r(!0),it("adventures")},Ai=async()=>{await lS(ho),it("adventures")},so=async O=>{try{await Z8(ho,O)}catch(H){console.error(H)}},qt=async(O,H)=>{if(n)try{let Y;if(H){const de=aa(ua,`posts/${n.id}_${Date.now()}`);await Vd(de,H),Y={url:await Ud(de),type:H.type.startsWith("video")?"video":"image"}}const re=await qi(Xt(Ae,"posts"),{...O,authorId:n.id,interestedUsers:[],commentCount:0,createdAt:Yn(),...Y&&{media:[Y]}});await qi(Xt(Ae,"conversations"),{type:"group",adventureId:re.id,name:O.title,imageUrl:(Y==null?void 0:Y.url)||`https://picsum.photos/seed/${re.id}/200`,participants:[n.id],updatedAt:Yn(),createdAt:Yn()}),st(Q("adventurePublished")),it("adventures")}catch(Y){console.error("Error creating adventure:",Y)}},cs=async(O,H)=>{try{const Y=gt(Ae,"posts",O);await zi(Y,H),st(Q("adventureUpdatedSuccessfully")),zt()}catch(Y){console.error("Error updating adventure:",Y)}},Rn=async O=>{var H,Y;try{const re=h.find(de=>de.id===O);if((Y=(H=re==null?void 0:re.media)==null?void 0:H[0])!=null&&Y.url){const de=aa(ua,re.media[0].url);await bw(de).catch(me=>console.error("Could not delete storage object:",me))}await Um(gt(Ae,"posts",O)),st(Q("adventureDeletedSuccessfully"))}catch(re){console.error("Error deleting adventure:",re)}},fn=O=>{Ee(O),jt("editAdventure")},Ii=async O=>{if(!n)return;const H=gt(Ae,"posts",O),Y=h.find(de=>de.id===O);if(!Y)return;const re=(Y.interestedUsers||[]).includes(n.id);await zi(H,{interestedUsers:re?fo(n.id):nr(n.id)}),!re&&Y.authorId!==n.id&&await qi(Xt(Ae,"notifications"),{recipientId:Y.authorId,userId:n.id,adventureId:O,text:Q("interestNotificationText",{title:Y.title}),type:"interest",read:!1,createdAt:Yn()})},$n=async O=>{if(!n)return;const H=n.repostedAdventures||[],Y=H.includes(O),re=Y?H.filter(me=>me!==O):[...H,O];i(me=>me?{...me,repostedAdventures:re}:null);const de=gt(Ae,"users",n.id);try{await zi(de,{repostedAdventures:Y?fo(O):nr(O)})}catch(me){console.error("Failed to update reposts, reverting UI",me),i(Se=>Se?{...Se,repostedAdventures:H}:null),st("Could not update repost. Please try again.")}},Cn=async O=>{if(!n)return;const H=n.savedAdventures||[],Y=H.includes(O),re=Y?H.filter(me=>me!==O):[...H,O];i(me=>me?{...me,savedAdventures:re}:null);const de=gt(Ae,"users",n.id);try{await zi(de,{savedAdventures:Y?fo(O):nr(O)})}catch(me){console.error("Failed to update saved adventures, reverting UI",me),i(Se=>Se?{...Se,savedAdventures:H}:null),st("Could not save adventure. Please try again.")}},Oi=async O=>{navigator.share?await navigator.share({title:O.title,text:Q("shareAdventureText",{authorName:O.author.name}),url:window.location.href}):st(Q("sharingNotSupported"))},Bi=async O=>{navigator.share?await navigator.share({title:O.name,text:Q("shareProfileText",{name:O.name}),url:window.location.href}):st(Q("sharingNotSupported"))},xe=async O=>{if(!n)return;const H=h.find(me=>me.id===O);if(!H||new Date(H.startDate)>new Date){st(Q("adventureNotEnded"));return}const Y=n.activityLog||[];if(Y.find(me=>me.adventureId===O)){st(Q("alreadyMarkedDone"));return}const de={adventureId:O,status:Wi.Pending};i(me=>me?{...me,activityLog:[...Y,de]}:null),st(Q("confirmationRequested"));try{const me=gt(Ae,"users",n.id);await zi(me,{activityLog:nr(de)}),await qi(Xt(Ae,"notifications"),{recipientId:H.authorId,userId:n.id,adventureId:O,attendeeId:n.id,attendeeName:n.name,text:Q("attendanceRequestNotification",{title:H.title}),type:"attendanceRequest",read:!1,createdAt:Yn()})}catch(me){console.error("Error marking adventure as completed:",me),i(Se=>Se?{...Se,activityLog:Y}:null),st("Failed to mark as completed. Please try again.")}},$c=async O=>{if(n)try{const H=aa(ua,`stories/${n.id}_${Date.now()}`);await Vd(H,O);const re={url:await Ud(H),type:O.type.startsWith("video")?"video":"image"};await qi(Xt(Ae,"stories"),{authorId:n.id,media:re,createdAt:Yn()})}catch(H){console.error("Error creating story:",H)}},Kc=async O=>{try{const H=gt(Ae,"stories",O.id),Y=aa(ua,O.media.url);await bw(Y),await Um(H)}catch(H){console.error("Error deleting story:",H)}},Ks=async O=>{if(!n)return;const H=gt(Ae,"users",n.id),Y=gt(Ae,"users",O),re=(n.following||[]).includes(O),de=Om(Ae);de.update(H,{following:re?fo(O):nr(O)}),de.update(Y,{followers:re?fo(n.id):nr(n.id)}),await de.commit()},ro=async O=>{if(!n)return;const H=gt(Ae,"users",n.id),Y=gt(Ae,"users",O),re=Om(Ae);re.update(H,{followers:fo(O)}),re.update(Y,{following:fo(n.id)}),await re.commit(),st(Q("followerRemoved"))},Sp=async(O,H)=>{if(!n)return;const Y=gt(Ae,"conversations",O.id),re={id:"",senderId:n.id,text:H,createdAt:Yn()},de=O.participants.filter(me=>me!==n.id).reduce((me,Se)=>(me[`unreadCount.${Se}`]=Tw(1),me),{});await zi(Y,{...de,updatedAt:Yn(),lastMessage:{senderId:n.id,text:H,createdAt:Yn()}}),await qi(Xt(Y,"messages"),re)},Sn=async O=>{if(!n)return;const H=[n.id,O.id].sort().join("_"),Y=gt(Ae,"conversations",H),re=await Pm(Y);if(re.exists())C({id:re.id,...re.data(),participant:O});else{const de={id:H,type:"private",participants:[n.id,O.id],updatedAt:new Date().toISOString()};await Vm(Y,de),C({...de,participant:O})}jt("chatDetail")},ds=O=>{if(s){Vn();return}te(O)},Jc=async O=>{if(!n)return;te(null);const H=vs(Xt(Ae,"conversations"),Ld("adventureId","==",O.id)),Y=await vw(H);if(Y.empty)console.error("No group chat found for this adventure.");else{const re=Y.docs[0],de=gt(Ae,"conversations",re.id);await zi(de,{participants:nr(n.id)}),C({id:re.id,...re.data()}),jt("chatDetail")}},Fl=async(O,H)=>{if(!n)return;const Y={authorId:n.id,text:H,createdAt:Yn()};await qi(Xt(Ae,"posts",O,"comments"),Y),await zi(gt(Ae,"posts",O),{commentCount:Tw(1)});const re=h.find(de=>de.id===O);re&&re.authorId!==n.id&&await qi(Xt(Ae,"notifications"),{recipientId:re.authorId,userId:n.id,adventureId:O,text:Q("commentNotificationText",{title:re.title}),type:"comment",read:!1,createdAt:Yn()})},jl=async(O,H,Y,re)=>{const de=gt(Ae,"notifications",O),me=h.find(Se=>Se.id===H);if(re&&me){const Se=gt(Ae,"users",Y);await _w(Ae,async mt=>{const ct=await mt.get(Se);if(!ct.exists())throw"Attendee not found!";const Ys=(ct.data().activityLog||[]).map(hi=>hi.adventureId===H?{...hi,status:Wi.Confirmed}:hi);mt.update(Se,{activityLog:Ys})}),await qi(Xt(Ae,"notifications"),{recipientId:Y,userId:n.id,adventureId:H,text:Q("attendanceConfirmedNotification",{title:me.title}),type:"attendanceConfirmed",read:!1,createdAt:Yn()}),await qi(Xt(Ae,"notifications"),{recipientId:Y,userId:n.id,adventureId:H,text:Q("rateExperienceNotification",{title:me.title}),type:"rateExperience",read:!1,createdAt:Yn()})}await Um(de)},Yc=async()=>{if(!n)return;const O=I.filter(Y=>!Y.read);if(O.length===0)return;const H=Om(Ae);O.forEach(Y=>{H.update(gt(Ae,"notifications",Y.id),{read:!0})}),await H.commit()},wp=O=>{if(O.type==="rateExperience"&&O.adventure)X(O.adventure);else if(O.adventureId){const H=ae.find(Y=>Y.id===O.adventureId);H&&S(H)}},Wc=async(O,H)=>{const Y=h.find(de=>de.id===O);if(!Y)return;const re=gt(Ae,"users",Y.authorId);await _w(Ae,async de=>{const me=await de.get(re);if(!me.exists())throw"Host not found!";const Se=me.data().totalRatings||0,mt=me.data().averageRating||0,ct=Se+1,rn=(mt*Se+H)/ct;de.update(re,{totalRatings:ct,averageRating:rn})}),X(null),st(Q("feedbackThanks"))},Qc=async(O,H,Y)=>{if(n)try{let re=n.avatarUrl,de=n.coverUrl;if(H){const me=aa(ua,`avatars/${n.id}`);await Vd(me,H),re=await Ud(me)}if(Y){const me=aa(ua,`covers/${n.id}`);await Vd(me,Y),de=await Ud(me)}await zi(gt(Ae,"users",n.id),{...O,avatarUrl:re,coverUrl:de}),st(Q("settingsSaved")),zt()}catch(re){console.error("Error updating profile:",re)}},na=O=>{["adventures","map","search","create","profile"].includes(O)?it(O):jt(O)},Kn=O=>{n&&O.id===n.id?it("profile"):(Je("adventures"),L(O),jt("userProfile"))},zl=O=>{F({isOpen:!1,user:null,listType:null}),Kn(O)},Js=(O,H)=>{ne({user:O,type:H}),jt("completedAdventuresByType")},fs=()=>{switch(o){case"adventures":return f.jsx(tD,{adventures:ae.filter(O=>{var H;return!O.author.isPrivate||((H=n==null?void 0:n.following)==null?void 0:H.includes(O.author.id))||O.author.id===(n==null?void 0:n.id)}),stories:Ut,currentUser:n||mo,onSelectAdventure:S,onSendMessage:Sn,onToggleInterest:Ii,onSelectStories:O=>{N(O);const H=O[0];if(H){const Y={...he,[H.author.id]:new Date().toISOString()};pt(Y),localStorage.setItem("viewedStoryTimestamps",JSON.stringify(Y))}},onAddStory:()=>Ue(!0),onNavigateToNotifications:()=>jt("notifications"),hasUnreadNotifications:io,onNavigateToChat:()=>jt("chat"),onViewProfile:Kn,onRepostToggle:$n,onSaveToggle:Cn,onShareAdventure:Oi,onToggleCompleted:xe,isGuest:s,onGuestAction:Vn,onNavigateToSearch:()=>it("search"),onNavigateToProfile:()=>it("profile"),onViewLocationOnMap:O=>{Z(O?[O]:null),it("map")},onDeleteAdventure:Rn,onEditAdventure:fn,viewedStoryTimestamps:he,onJoinGroupChat:ds});case"map":return f.jsx(eV,{adventuresToShow:qe,isLoaded:En,onShowToast:st,onSelectAdventure:S});case"create":return f.jsx(lj,{currentUser:n,onCreateAdventure:qt,isLoaded:En});case"search":return f.jsx(GK,{adventures:ae,allUsers:g,currentUser:n||mo,isGuest:s,isLoaded:En,onSelectAdventure:S,onSendMessage:Sn,onToggleInterest:Ii,onNavigateToFindTwins:()=>jt("findTwins"),onViewProfile:Kn,onShowResultsOnMap:O=>{Z(O),it("map")},onRepostToggle:$n,onSaveToggle:Cn,onShareAdventure:Oi,onToggleCompleted:xe,onViewLocationOnMap:O=>{Z(O?[O]:null),it("map")},onDeleteAdventure:Rn,onEditAdventure:fn,onFollowToggle:Ks,onJoinGroupChat:ds});case"chat":return f.jsx(uj,{conversations:vt,onSelectConversation:O=>{C(O),jt("chatDetail")},onBack:zt,currentUser:n,onViewProfile:Kn});case"profile":return f.jsx(hj,{user:n||mo,allAdventures:ae,onSelectAdventure:S,onSendMessage:Sn,onToggleInterest:Ii,onViewProfile:Kn,onRepostToggle:$n,onSaveToggle:Cn,onShareProfile:Bi,onShareAdventure:Oi,onToggleCompleted:xe,onOpenFollowList:(O,H)=>F({isOpen:!0,user:O,listType:H}),onNavigateToSettings:()=>jt("settings"),onViewLocationOnMap:O=>{Z(O?[O]:null),it("map")},onDeleteAdventure:Rn,onEditAdventure:fn,onJoinGroupChat:ds,onViewCompletedByType:Js,activeTab:Vt,setActiveTab:Pe});case"chatDetail":return f.jsx(BK,{conversation:M,currentUser:n,allUsers:g,onBack:zt,onSendMessage:Sp,onViewProfile:Kn});case"findTwins":return f.jsx(FK,{currentUser:n,allUsers:g,onSendMessage:Sn,onBack:zt,onFollowToggle:Ks,onViewProfile:Kn});case"userProfile":return f.jsx(KK,{user:V,currentUser:n||mo,allAdventures:ae,onBack:zt,onSelectAdventure:S,onSendMessage:Sn,onToggleInterest:Ii,onFollowToggle:Ks,onViewProfile:Kn,onRepostToggle:$n,onSaveToggle:Cn,onShareProfile:Bi,onShareAdventure:Oi,onToggleCompleted:xe,onOpenFollowList:(O,H)=>F({isOpen:!0,user:O,listType:H}),isGuest:s,onViewLocationOnMap:O=>{Z(O?[O]:null),it("map")},onDeleteAdventure:Rn,onEditAdventure:fn,onJoinGroupChat:ds,onViewCompletedByType:Js,activeTab:ye,setActiveTab:Je});case"settings":return f.jsx(lJ,{onBack:zt,onNavigate:jt,onLogout:Ai});case"editProfile":return f.jsx(cJ,{onBack:zt,currentUser:n,onUpdateProfile:Qc});case"privacySecurity":return f.jsx(hJ,{onBack:zt,currentUser:n,onUpdateProfile:Qc});case"language":return f.jsx(pJ,{onBack:zt});case"savedAdventures":return f.jsx(TJ,{onBack:zt,adventures:ae.filter(O=>{var H;return(H=n==null?void 0:n.savedAdventures)==null?void 0:H.includes(O.id)}),currentUser:n,onSelectAdventure:S,onSendMessage:Sn,onToggleInterest:Ii,onViewProfile:Kn,onRepostToggle:$n,onSaveToggle:Cn,onShareAdventure:Oi,onToggleCompleted:xe,onViewLocationOnMap:O=>{Z(O?[O]:null),it("map")},onDeleteAdventure:Rn,onEditAdventure:fn,onJoinGroupChat:ds});case"notifications":return f.jsx(xJ,{notifications:Ui,onBack:zt,onConfirmAttendance:jl,onNotificationClick:wp,onMarkAllAsRead:Yc});case"editAdventure":return f.jsx(_J,{adventure:pe,onBack:zt,onUpdateAdventure:cs,isLoaded:En});case"completedAdventuresByType":return f.jsx(SJ,{user:ce.user,type:ce.type,onBack:zt,allAdventures:ae,currentUser:n||mo,onSelectAdventure:S,onSendMessage:Sn,onToggleInterest:Ii,onViewProfile:Kn,onRepostToggle:$n,onSaveToggle:Cn,onShareAdventure:Oi,onToggleCompleted:xe,onViewLocationOnMap:O=>{Z(O?[O]:null),it("map")},onDeleteAdventure:Rn,onEditAdventure:fn,onJoinGroupChat:ds,isGuest:s});default:return f.jsx("div",{children:"Not implemented"})}};return t?!n&&!s?f.jsx(iJ,{onLogin:fi,onSignUp:as,onSocialLogin:ls,onGuestLogin:us,onForgotPassword:()=>se(!0)}):f.jsxs("div",{className:"w-screen h-screen flex bg-transparent text-gray-800 dark:text-gray-200",children:[f.jsx(ZK,{activeScreen:o,setActiveScreen:s?Vn:na,hasUnreadNotifications:io,isGuest:s,onGuestAction:Vn}),f.jsxs("main",{ref:Rt,className:"flex-1 max-w-2xl mx-auto xl:ms-0 xl:me-auto w-full flex flex-col overflow-y-auto pb-16 xl:pb-0",children:[s&&f.jsx(dJ,{onLoginClick:Ai}),fs()]}),f.jsx(zL,{activeScreen:o,setActiveScreen:O=>it(O),isGuest:s,onGuestAction:Vn}),U&&f.jsx(pj,{adventure:U,comments:$s,currentUser:n,onClose:()=>S(null),onAddComment:Fl}),k&&f.jsx(zK,{stories:k,onClose:()=>N(null),currentUser:n,onDeleteStory:Kc}),q&&f.jsx(YK,{adventure:q,onClose:()=>X(null),onSubmit:Wc}),ie&&f.jsx(CJ,{adventure:ie,onClose:()=>te(null),onConfirm:Jc}),fe.isOpen&&f.jsx(QK,{title:Q(fe.listType),listOwner:fe.user,currentUser:n,users:g.filter(O=>{var H,Y;return(Y=(H=fe.user)==null?void 0:H[fe.listType])==null?void 0:Y.includes(O.id)}),listType:fe.listType,onClose:()=>F({isOpen:!1,user:null,listType:null}),onViewProfile:zl,onFollowToggle:Ks,onRemoveFollower:ro}),Re&&f.jsx(mJ,{isOpen:Re,onClose:()=>se(!1),onSubmit:so}),_e&&!s&&f.jsx(vJ,{isOpen:_e,onClose:()=>Ue(!1),onStoryCreate:$c}),j&&f.jsx(JK,{message:j,onClose:()=>ee(null)})]}):f.jsx("div",{className:"h-screen w-screen bg-light-bg dark:bg-dark-bg flex items-center justify-center",children:f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-brand-orange"})})},Mk=document.getElementById("root");if(!Mk)throw new Error("Could not find root element to mount to");const bJ=BL.createRoot(Mk);bJ.render(f.jsx(Sh.StrictMode,{children:f.jsx(FL,{children:f.jsx(wJ,{})})}));
