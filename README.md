# Pathkin - دليل المشروع

## 🗺️ نظرة عامة

Pathkin هو تطبيق ويب مصمم خصيصًا للمسافرين والمغامرين. يهدف التطبيق إلى ربط الأشخاص الذين لديهم اهتمامات مشتركة، ومساعدتهم في العثور على سكن مشترك، واكتشاف الفعاليات المحلية. يمكن للمستخدمين إنشاء ملفات شخصية، ومشاركة خطط رحلاتهم، والتفاعل مع مجتمع من المسافرين الآخرين.

---

## ✨ الميزات الرئيسية

- **الخلاصة (Feed):** عرض المغامرات من المستخدمين الذين تتابعهم.
- **القصص (Stories):**
    - مشاركة لحظات سريعة من مغامراتك (صور وفيديوهات) تختفي تلقائيًا بعد 24 ساعة.
    - عرض القصص بتسلسل زمني صحيح من الأقدم إلى الأحدث.
    - مؤشر مرئي (إطار ملون حول صورة المستخدم) للقصص الجديدة التي لم تُشاهد بعد.
    - إمكانية حذف قصصك الخاصة.
- **خريطة تفاعلية (Interactive Map):**
    - **استكشاف جغرافي:** استكشاف الفعاليات والمغامرات على خريطة تفاعلية.
    - **عرض الموقع الحالي:** إمكانية عرض موقع المستخدم الجغرافي على الخريطة بضغطة زر.
    - **أيقونات خريطة مخصصة:** تظهر كل مغامرة على الخريطة بأيقونة فريدة تعبر عن نوعها (مثل خيمة للتخييم).
    - **فلترة الخريطة:** شريط فلاتر تفاعلي على الخريطة يسمح للمستخدم بعرض أنواع معينة من المغامرات.
    - **رسم المسارات:** عند النقر على مغامرة "هايكنج" أو "ركوب دراجات"، يتم رسم المسار المقترح على الخريطة من نقطة البداية إلى النهاية.
- **إنشاء مغامرة ديناميكي:**
    - **نموذج ذكي:** يتغير نموذج إنشاء المغامرة تلقائيًا بناءً على نوع النشاط المختار (سفر، سكن، هايكنج، إلخ).
    - **وصف بالذكاء الاصطناعي:** يقوم Gemini API بتوليد وصف ملائم للمغامرة بناءً على العنوان، الكلمات المفتاحية، ونوع المغامرة.
    - **اختيار الموقع من الخريطة:** يمكن للمستخدم تحديد الموقع بدقة من خلال خريطة تفاعلية.
- **إدارة المغامرة:** يمكن لصاحب المغامرة تعديلها، حذفها، أو تغيير خصوصيتها.
- **خصوصية متقدمة:** خيار لجعل المغامرات مرئية لـ "توائم الميلاد" فقط، مع إمكانية إتاحتها أيضًا للعامة أو للمتابعين.
- **البحث المتقدم:** فلاتر للبحث عن مغامرات حسب النوع، المدينة، الميزانية، والتاريخ.
- **ملف شخصي متكامل:** عرض المغامرات، الإحصائيات، المتابعين، والمعلومات الشخصية.
- **تسجيل الدخول الاجتماعي:** تسجيل دخول سهل وسريع باستخدام حساب جوجل.
- **نظام رسائل احترافي:** واجهة محادثات حديثة مع مؤشر للرسائل غير المقروءة وتجميع الفقاعات.
- **إشعارات تفاعلية:** إشعارات فورية للرسائل، إبداء الاهتمام (Likes)، والتعليقات.
- **استجابة فورية للواجهة:** تتغير ألوان أزرار الحفظ وإعادة النشر فورًا عند النقر عليها.
- **تصميم متجاوب ومريح:** تصميم أنيق بعرض محدد ومركزي على الشاشات الكبيرة.

---

## 🛠️ التقنيات المستخدمة

- **الواجهة الأمامية (Frontend):** React, TypeScript, Tailwind CSS
- **الخلفية والبيانات (Backend & Database):** Firebase (Authentication, Firestore, Storage)
- **الخرائط:** Google Maps Platform (JavaScript, Places, Geocoding, Directions APIs)
- **الذكاء الاصطناعي:** Google Gemini API (لتوليد أوصاف المغامرات)

---

## 📁 هيكل الملفات والمجلدات

```
.
├── public/
│   ├── locales/        # ملفات الترجمة JSON (en.json, ar.json)
│   └── logo.svg
├── src/
│   ├── components/     # جميع مكونات React
│   │   ├── icons/      # أيقونات SVG كمكونات React
│   │   ├── settings/   # مكونات شاشات الإعدادات الفرعية
│   │   ├── AdventureCard.tsx
│   │   ├── CreateAdventureScreen.tsx
│   │   ├── EditAdventureModal.tsx
│   │   ├── LocationPickerModal.tsx
│   │   ├── MapScreen.tsx
│   │   └── ... (بقية المكونات)
│   ├── contexts/       # لإدارة الحالة العامة (مثل اللغة)
│   ├── data/           # بيانات ثابتة (مثل قائمة الدول)
│   ├── services/       # للتعامل مع الخدمات الخارجية (Firebase, Gemini)
│   ├── utils/          # دوال مساعدة (مثل mapIconUtils.ts)
│   ├── App.tsx         # المكون الرئيسي للتطبيق (إدارة الحالة والتنقل)
│   ├── index.css       # الأنماط العامة باستخدام Tailwind
│   └── types.ts        # تعريفات TypeScript لكل البيانات (User, Adventure, etc.)
├── README.md           # هذا الملف (دليل المشروع)
├── APPLICATION_SPEC.md # المواصفات الفنية الكاملة للتطبيق
├── index.html          # نقطة الدخول الرئيسية للتطبيق
├── package.json        # تعريفات المشروع والاعتماديات
└── vite.config.ts      # إعدادات Vite
```

### شرح لأهم الملفات

- **`src/App.tsx`**: الملف المركزي للتطبيق. يدير حالة المصادقة، التنقل، جلب البيانات، وتمريرها. يحتوي على جميع دوال معالجة الأحداث الرئيسية (مثل إنشاء مغامرة، متابعة مستخدم، إلخ).
- **`src/types.ts`**: يحتوي على تعريفات TypeScript لكل هياكل البيانات في التطبيق، مما يضمن سلامة الأنواع.
- **`src/components/CreateAdventureScreen.tsx`**: يحتوي على النموذج الديناميكي الذكي الذي يتكيف مع نوع المغامرة المختارة.
- **`src/components/MapScreen.tsx`**: مسؤول عن عرض الخريطة التفاعلية، الفلاتر، الأيقونات المخصصة، ومنطق رسم المسارات.
- **`src/services/geminiService.ts`**: يحتوي على الدالة التي تتفاعل مع Gemini API لتوليد الأوصاف الذكية.

---

## 🚀 كيفية تشغيل المشروع

1.  تثبيت الاعتماديات:
    ```bash
    npm install
    ```
2.  تشغيل خادم التطوير:
    ```bash
    npm run dev
    ```